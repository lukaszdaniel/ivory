Only in R: BASE-REVISION
Only in R: README-IVORY
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/configure R/configure
25414c25414
< (eval echo $as_me:25352: \"$ac_link\") >&5
---
> (eval echo $as_me:25414: \"$ac_link\") >&5
25489c25489
< (eval echo $as_me:25427: \"$ac_link\") >&5
---
> (eval echo $as_me:25489: \"$ac_link\") >&5
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/po/POTFILES R/po/POTFILES
3a4,5
> src/appl/lbfgsb.c
> src/appl/maxcol.c
5a8,24
> src/appl/uncmin.c
> src/extra/graphapp/clipboard.c
> src/extra/graphapp/context.c
> src/extra/graphapp/dialogs.c
> src/extra/graphapp/gmenus.c
> src/extra/graphapp/metafile.c
> src/extra/graphapp/printer.c
> src/extra/intl/plural.c
> src/extra/tre/regerror.c
> src/extra/tre/tre-internal.h
> src/extra/tre/xmalloc.c
> src/extra/trio/trio.c
> src/extra/trio/trionan.c
> src/extra/tzone/localtime.c
> src/extra/tzone/registryTZ.c
> src/gnuwin32/console.c
> src/gnuwin32/dos_wglob.c
6a26
> src/gnuwin32/editor.c
7a28,29
> src/gnuwin32/pager.c
> src/gnuwin32/preferences.c
11d32
< src/gnuwin32/sys-win32.c
12a34,39
> src/gnuwin32/sys-win32.c
> src/gnuwin32/front-ends/rcmdfn.c
> src/gnuwin32/getline/getline.c
> src/gnuwin32/getline/wc_history.c
> src/gnuwin32/windlgs/src/ttest.c
> src/include/Defn.h
14,19c41,44
< src/main/CommandLineArgs.c
< src/main/RNG.c
< src/main/Rdynload.c
< src/main/Renviron.c
< src/main/Rmain.c
< src/main/Rstrptime.h
---
> src/include/Localization.h
> src/include/Rdefines.h
> src/include/Rinlinedfuns.h
> src/include/Rinterface.h
20a46,47
> src/main/altclasses.c
> src/main/altrep.c
28a56,57
> src/main/colors.c
> src/main/CommandLineArgs.c
31a61
> src/main/contour-common.h
40a71
> src/main/duplicate.c
46d76
< src/main/g_alab_her.c
47a78
> src/main/gram.c
50a82
> src/main/gzio.h
51a84
> src/main/inspect.c
64a98
> src/main/plot.c
66d99
< src/main/print.c
67a101
> src/main/print.c
68a103
> src/main/printvector.c
69a105
> src/main/radixsort.c
71a108
> src/main/Rdynload.c
72a110,112
> src/main/Renviron.c
> src/main/RNG.c
> src/main/Rstrptime.h
79a120
> src/main/split-incl.c
91,93d131
< src/modules/X11/dataentry.c
< src/modules/X11/devX11.c
< src/modules/internet/Rhttpd.c
97a136
> src/modules/internet/Rhttpd.c
100,101c139,141
< src/modules/lapack/init_win.c
< src/modules/lapack/vecLibg95c.c
---
> src/modules/X11/dataentry.c
> src/modules/X11/devX11.c
> src/modules/X11/rbitmap.c
106a147
> src/nmath/dpq.h
108a150
> src/nmath/pbinom.c
112c154
< src/nmath/qnorm.c
---
> src/nmath/qgamma.c
116d157
< src/nmath/toms708.c
118d158
< src/unix/X11.c
119a160
> src/unix/Rscript.c
121d161
< src/unix/sys-unix.c
122a163,164
> src/unix/sys-unix.c
> src/unix/X11.c
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/po/THANKS R/po/THANKS
14c14
< po:	Łukasz Daniel
---
> pl:	Łukasz Daniel
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/share/R/REMOVE.R R/share/R/REMOVE.R
65c65
<     stop("ERROR: no packages specified", call.=FALSE)
---
>     stop("Error: no packages specified", domain = "R-base", call.=FALSE)
68c68
<     message("Removing from library ", sQuote(lib))
---
>     message(gettextf("Removing from library %s", sQuote(lib)), domain = "R-base")
74c74
<         stop("ERROR: cannot cd to directory ", sQuote(lib), call. = FALSE)
---
>         stop(gettextf("Error: cannot cd to directory %s", sQuote(lib)), domain = "R-base", call. = FALSE)
79c79
<     stop("ERROR: no permission to remove from directory ", sQuote(lib),
---
>     stop(gettextf("Error: no permission to remove from directory %s", sQuote(lib)), domain = "R-base",
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/share/R/examples-footer.R R/share/R/examples-footer.R
5c5
< base::cat("Time elapsed: ", proc.time() - base::get("ptime", pos = 'CheckExEnv'),"\n")
---
> base::cat(gettext("Time elapsed: ", domain = "R-base"), proc.time() - base::get("ptime", pos = 'CheckExEnv'),"\n")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/share/R/examples-header.R R/share/R/examples-header.R
44c44
< 	   delayedAssign("T", stop("T used instead of TRUE", domain = NA),
---
> 	   delayedAssign("T", stop("T used instead of TRUE", domain = "R-base"),
46c46
< 	   delayedAssign("F", stop("F used instead of FALSE", domain = NA),
---
> 	   delayedAssign("F", stop("F used instead of FALSE", domain = "R-base"),
54c54
<                                paste(sQuote(missitems), collapse=", ")),
---
>                                paste(sQuote(missitems), collapse=", "), domain = "R-base"),
58,59c58,59
<                warning(sprintf("working directory was changed to %s, resetting",
<                                sQuote(wd)),
---
>                warning(gettextf("working directory was changed to %s, resetting",
>                                sQuote(wd), domain = "R-base"),
68c68
<                    stop("connections left open:\n",
---
>                    stop(gettext("connections left open:\n", domain = "R-base"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/share/R/nspackloader.R R/share/R/nspackloader.R
24c24
<         stop("cannot find namespace environment for ", pkg, domain = NA);
---
>         stop(gettextf("cannot find namespace environment for package %s", sQuote(pkg)), domain = "R-base");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/appl/integrate.c R/src/appl/integrate.c
32c32
< #include <Rmath.h> /* for fmax2, fmin2, imin2 */
---
> #include <Rmath.h> /* for fmax2, fmin2 */
33a34
> #include <R_ext/Minmax.h>
1631c1632
<     dinf = (double) imin2(1, *inf);
---
>     dinf = (double) min(1, *inf);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/appl/lbfgsb.c R/src/appl/lbfgsb.c
40a41,42
> #include <R_ext/Minmax.h>
> #include <Localization.h>
44,47d45
< #ifndef max
< # define max(a, b) (a < b)?(b):(a)
< # define min(a, b) (a > b)?(b):(a)
< #endif
684,686c682,687
< 	if (iprint >= 1)
< 	    Rprintf("%s\n%s\n", "Singular triangular system detected;",
< 		    "   refresh the lbfgs memory and restart the iteration.");
---
> 	if (iprint >= 1) {
> 	    Rprintf(_("Singular triangular system detected."));
> 		Rprintf("\n");
> 	    Rprintf(_("Refresh the lbfgs memory and restart the iteration."));
> 		Rprintf("\n");
> 	}
724,727c725,730
< 	if (iprint >= 0)
< 	    Rprintf("%s\n%s\n",
< 		    "Nonpositive definiteness in Cholesky factorization in formk;",
< 		    "   refresh the lbfgs memory and restart the iteration.");
---
> 	if (iprint >= 0) {
> 	    Rprintf(_("Nonpositive definiteness in Cholesky factorization in formk."));
> 		Rprintf("\n");
> 	    Rprintf(_("Refresh the lbfgs memory and restart the iteration."));
> 		Rprintf("\n");
> 	}
751,753c754,759
< 	if (iprint >= 1)
< 	    Rprintf("%s\n%s\n", "Singular triangular system detected;",
< 		    "   refresh the lbfgs memory and restart the iteration.");
---
> 	if (iprint >= 1) {
> 	    Rprintf(_("Singular triangular system detected."));
> 		Rprintf("\n");
> 	    Rprintf(_("Refresh the lbfgs memory and restart the iteration."));
> 		Rprintf("\n");
> 	}
795,797c801,806
< 	    if (iprint >= 1)
< 		Rprintf("%s\n%s\n", "Bad direction in the line search;",
< 		    "   refresh the lbfgs memory and restart the iteration.");
---
> 	    if (iprint >= 1) {
> 		Rprintf(_("Bad direction in the line search."));
> 		Rprintf("\n");
> 	        Rprintf(_("Refresh the lbfgs memory and restart the iteration."));
> 		Rprintf("\n");
> 	    }
877,880c886,891
< 	if (iprint >= 0)
< 	    Rprintf("%s\n%s\n",
< 		    "Nonpositive definiteness in Cholesky factorization in formt();",
< 		    "   refresh the lbfgs memory and restart the iteration.");
---
> 	if (iprint >= 0) {
> 	    Rprintf(_("Nonpositive definiteness in Cholesky factorization in form()."));
> 		Rprintf("\n");
> 	    Rprintf(_("Refresh the lbfgs memory and restart the iteration."));
> 		Rprintf("\n");
> 	}
1008,1010c1019,1027
< 	if (*prjctd)
< 	    Rprintf("The initial X is infeasible.  Restart with its projection.\n");
< 	if (!*cnstnd) Rprintf("This problem is unconstrained.\n");
---
> 	if (*prjctd) {
> 	    Rprintf(_("The initial X is infeasible. Restart with its projection."));
> 		Rprintf("\n");
> 	}
> 	if (!*cnstnd) { Rprintf(_("This problem is unconstrained.")); Rprintf("\n"); }
>     }
>     if (iprint > 0) {
> 	Rprintf(n_("At X0, %d variable is exactly at the bounds", "At X0, %d variables are exactly at the bounds", nbdd), nbdd);
> 		Rprintf("\n");
1012,1013d1028
<     if (iprint > 0)
< 	Rprintf("At X0, %d variables are exactly at the bounds\n", nbdd);
1378,1380c1393,1397
<     if (iprint >= 99)
< 	Rprintf("\n---------------- CAUCHY entered-------------------\n\n");
< 
---
>     if (iprint >= 99) {
> 	Rprintf("\n---------------- ");
> 	Rprintf(_("CAUCHY entered"));
> 	Rprintf("-------------------\n\n");
>     }
1495c1512,1515
<     if (iprint >= 99) Rprintf("There are %d  breakpoints\n", nbreak);
---
>     if (iprint >= 99) {
> 		Rprintf(n_("There is %d breakpoint", "There are %d breakpoints", nbreak), nbreak);
> 		Rprintf("\n");
> 	}
1533,1536c1553,1559
< 	Rprintf("\nPiece    %3i f1, f2 at start point %11.4e %11.4e\n",
< 		*nint, f1, f2);
< 	Rprintf("Distance to the next break point =  %11.4e\n", dt);
< 	Rprintf("Distance to the stationary point =  %11.4e\n", dtm);
---
> 	Rprintf("\n");
> 	Rprintf(_("Piece %3i f1, f2 at start point %11.4e %11.4e"), *nint, f1, f2);
> 	Rprintf("\n");
> 	Rprintf(_("Distance to the next break point = %11.4e"), dt);
> 	Rprintf("\n");
> 	Rprintf(_("Distance to the stationary point = %11.4e"), dtm);
> 	Rprintf("\n");
1560c1583
<     if (iprint >= 100) Rprintf("Variable  %d  is fixed.\n", ibp);
---
>     if (iprint >= 100) { Rprintf(_("Variable %d is fixed."), ibp); Rprintf("\n"); }
1615,1618c1638,1644
< 	Rprintf("\nGCP found in this segment\n");
< 	Rprintf("Piece    %3i f1, f2 at start point %11.4e %11.4e\n",
< 		*nint,f1,f2);
< 	Rprintf("Distance to the stationary point =  %11.4e\n", dtm);
---
> 	Rprintf("\n");
> 	Rprintf(_("GCP found in this segment"));
> 	Rprintf("\n");
> 	Rprintf(_("Piece %3i f1, f2 at start point %11.4e %11.4e"), *nint,f1,f2);
> 	Rprintf("\n");
> 	Rprintf(_("Distance to the stationary point = %11.4e"), dtm);
> 	Rprintf("\n");
1640,1641c1666,1670
<     if (iprint >= 99)
< 	Rprintf("\n---------------- exit CAUCHY----------------------\n\n");
---
>     if (iprint >= 99) {
> 	Rprintf("\n---------------- ");
> 	Rprintf(_("exit CAUCHY"));
> 	Rprintf("----------------------\n\n");
>     }
2271,2273c2300,2303
< 		if (iprint >= 100)
< 		    Rprintf("Variable %d leaves the set of free variables\n",
< 			    k);
---
> 		if (iprint >= 100) {
> 		    Rprintf(_("Variable %d leaves the set of free variables"), k);
> 			Rprintf("\n");
> 		}
2281,2287c2311,2321
< 		if (iprint >= 100)
< 		    Rprintf("Variable %d enters the set of free variables\n",
< 			    k);
< 	    }
< 	 if (iprint >= 100)
< 	     Rprintf("%d variables leave; %d variables enter\n",
< 		     n + 1 - *ileave, *nenter);
---
> 		if (iprint >= 100) {
> 		    Rprintf(_("Variable %d enters the set of free variables"), k);
> 			Rprintf("\n");
> 		}
> 	    }
> 	 if (iprint >= 100) {
> 	     Rprintf(n_("%d variable leave", "%d variables leave", n + 1 - *ileave), n + 1 - *ileave);
> 	     Rprintf("; ");
> 	     Rprintf(n_("%d variable enter", "%d variables enter", *nenter), *nenter);
> 		 Rprintf("\n");
> 	 }
2303,2305c2337,2340
<     if (iprint >= 99)
< 	Rprintf("%d  variables are free at GCP on iteration %d\n",
< 		*nfree, *iter + 1);
---
>     if (iprint >= 99) {
> 	Rprintf(n_("%d variable is free at GCP on iteration %d", "%d variables are free at GCP on iteration %d", *nfree), *nfree, *iter + 1);
> 	Rprintf("\n");
> 	}
3548c3583,3585
< 	    Rprintf("\niterations %d\nfunction evaluations %d\nsegments explored during Cauchy searches %d\nBFGS updates skipped %d\nactive bounds at final generalized Cauchy point %d\nnorm of the final projected gradient %g\nfinal function value %g\n\n", iter, nfgv, nintol, nskip, nact, sbgnrm, *f);
---
> 	    Rprintf("\n");
> 	    Rprintf(_("iterations %d\nfunction evaluations %d\nsegments explored during Cauchy searches %d\nBFGS updates skipped %d\nactive bounds at final generalized Cauchy point %d\nnorm of the final projected gradient %g\nfinal function value %g"), iter, nfgv, nintol, nskip, nact, sbgnrm, *f);
> 	    Rprintf("\n\n");
3555,3563c3592,3600
< 	case -1: Rprintf("Matrix in 1st Cholesky factorization in formk is not Pos. Def."); break;
< 	case -2: Rprintf("Matrix in 2st Cholesky factorization in formk is not Pos. Def."); break;
< 	case -3: Rprintf("Matrix in the Cholesky factorization in formt is not Pos. Def."); break;
< 	case -4: Rprintf("Derivative >= 0, backtracking line search impossible."); break;
< 	case -5: Rprintf("l(%d) > u(%d).  No feasible solution", k, k); break;
< 	case -6: Rprintf("Input nbd(%d) is invalid", k); break;
< 	case -7: Rprintf("Warning:  more than 10 function and gradient evaluations\n   in the last line search\n"); break;
< 	case -8: Rprintf("The triangular system is singular."); break;
< 	case -9: Rprintf("%s\n%s\n", "Line search cannot locate an adequate point after 20 function", "and gradient evaluations"); break;
---
> 	case -1: Rprintf(_("Matrix in 1st Cholesky factorization in formk is not Pos. Def.")); break;
> 	case -2: Rprintf(_("Matrix in 2nd Cholesky factorization in formk is not Pos. Def.")); break;
> 	case -3: Rprintf(_("Matrix in the Cholesky factorization in formt is not Pos. Def.")); break;
> 	case -4: Rprintf(_("Derivative >= 0, backtracking line search impossible.")); break;
> 	case -5: Rprintf(_("l(%d) > u(%d). No feasible solution"), k, k); break;
> 	case -6: Rprintf(_("Input nbd(%d) is invalid"), k); break;
> 	case -7: Rprintf(_("Warning: more than 10 function and gradient evaluations in the last line search")); break;
> 	case -8: Rprintf(_("The triangular system is singular.")); break;
> 	case -9: Rprintf(_("Line search cannot locate an adequate point after 20 function and gradient evaluations")); break;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/appl/maxcol.c R/src/appl/maxcol.c
36c36
< 
---
> #include <Localization.h>
92c92
< 	    else error("invalid 'ties_meth' {should not happen}");
---
> 	    else error(_("invalid '%s' argument {should not happen}"), "ties_meth");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/appl/optim.c R/src/appl/optim.c
23a24
> #include <Localization.h>
148c149
<     if (trace) Rprintf("initial  value %f \n", f);
---
>     if (trace) { Rprintf(_("initial value %f"), f); Rprintf("\n"); }
245,246c246,249
< 	if (trace && (iter % nREPORT == 0))
< 	    Rprintf("iter%4d value %f\n", iter, f);
---
> 	if (trace && (iter % nREPORT == 0)) {
> 	    Rprintf(_("iter %4d value %f"), iter, f);	
> 	    Rprintf("\n");
> 	}
252,254c255,259
< 	Rprintf("final  value %f \n", *Fmin);
< 	if (iter < maxit) Rprintf("converged\n");
< 	else Rprintf("stopped after %i iterations\n", iter);
---
> 	Rprintf(_("final value %f"), *Fmin);
> 	Rprintf("\n");
> 	if (iter < maxit) Rprintf(_("'vmmin' alghoritm converged"));
> 	else Rprintf(_("stopped after %i iterations"), iter);
> 	Rprintf("\n");
291,292c296,299
<     if (trace)
< 	Rprintf("  Nelder-Mead direct search function minimizer\n");
---
>     if (trace) {
> 	Rprintf(_("  Nelder-Mead direct search function minimizer"));
> 	Rprintf("\n");
> 	}
300c307
< 	if (trace) Rprintf("function value for initial parameters = %f\n", f);
---
> 	if (trace) { Rprintf(_("function value for initial parameters = %f"), f); Rprintf("\n"); }
303c310
< 	if (trace) Rprintf("  Scaled convergence tolerance is %g\n", convtol);
---
> 	if (trace) { Rprintf(_("  Scaled convergence tolerance is %g"), convtol); Rprintf("\n"); }
319c326
< 	if (trace) Rprintf("Stepsize computed as %f\n", step);
---
> 	if (trace) { Rprintf(_("Stepsize computed as %f"), step); Rprintf("\n"); }
444,445c451,454
< 			    if (trace)
< 				Rprintf("Polytope size measure not decreased in shrink\n");
---
> 			    if (trace) {
> 				Rprintf(_("Polytope size measure not decreased in shrink"));
> 				Rprintf("\n");
> 			    }
458,459c467,470
< 	Rprintf("Exiting from Nelder Mead minimizer\n");
< 	Rprintf("    %d function evaluations used\n", funcount);
---
> 	Rprintf(_("Exiting from Nelder Mead minimizer"));
> 	Rprintf("\n    ");
> 	Rprintf(n_("%d function evaluation used", "%d function evaluations used", funcount), funcount);
> 	Rprintf("\n");
491c502,503
< 	Rprintf("  Conjugate gradients function minimizer\n");
---
> 	Rprintf(_("  Conjugate gradients function minimizer"));
> 	Rprintf("\n");
493,495c505,507
< 	case 1:	    Rprintf("Method: Fletcher Reeves\n");	break;
< 	case 2:	    Rprintf("Method: Polak Ribiere\n");		break;
< 	case 3:	    Rprintf("Method: Beale Sorenson\n");	break;
---
> 	case 1:	    Rprintf(_("Method: Fletcher Reeves"));	break;
> 	case 2:	    Rprintf(_("Method: Polak Ribiere"));	break;
> 	case 3:	    Rprintf(_("Method: Beale Sorenson"));	break;
497c509
< 	    error(_("unknown 'type' in \"CG\" method of 'optim'"));
---
> 	    error(_("unknown type in \"CG\" method of 'optim'"));
498a511
> 	Rprintf("\n");
507c520
<     if (trace) Rprintf("tolerance used in gradient test=%g\n", tol);
---
>     if (trace) { Rprintf(_("tolerance used in gradient test=%g"), tol); Rprintf("\n"); }
510c523
< 	error(_("Function cannot be evaluated at initial parameters"));
---
> 	error(_("function cannot be evaluated at initial parameters"));
527c540
< 		    Rprintf("parameters ");
---
> 		    Rprintf(_("parameters: "));
631,633c644,649
< 	Rprintf("Exiting from conjugate gradients minimizer\n");
< 	Rprintf("    %d function evaluations used\n", funcount);
< 	Rprintf("    %d gradient evaluations used\n", gradcount);
---
> 	Rprintf(_("Exiting from conjugate gradients minimizer"));
> 	Rprintf("\n    ");
> 	Rprintf(n_("%d function evaluation used", "%d function evaluations used", funcount), funcount);
> 	Rprintf("\n    ");
> 	Rprintf(n_("%d gradient evaluation used", "%d gradient evaluations used", gradcount), gradcount);
> 	Rprintf("\n");
690c706,707
< 		Rprintf("iter %4d value %f\n", iter, f);
---
> 		Rprintf(_("iter %4d value %f"), iter, f);
> 		Rprintf("\n");
712,714c729,733
< 	Rprintf("final  value %f \n", *Fmin);
< 	if (iter < maxit && *fail == 0) Rprintf("converged\n");
< 	else Rprintf("stopped after %i iterations\n", iter);
---
> 	Rprintf(_("final value %f"), *Fmin);
> 	Rprintf("\n");
> 	if (iter < maxit && *fail == 0) Rprintf("converged");
> 	else Rprintf(_("stopped after %i iterations"), iter);
> 	Rprintf("\n");
754,755c773,776
< 	Rprintf ("sann objective function values\n");
< 	Rprintf ("initial       value %f\n", *yb);
---
> 	Rprintf (_("sann objective function values"));
> 	Rprintf("\n");
> 	Rprintf (_("initial value %f"), *yb);
> 	Rprintf("\n");
779,780c800,803
< 	if (trace && ((itdoc % trace) == 0))
< 	    Rprintf("iter %8d value %f\n", its - 1, *yb);
---
> 	if (trace && ((itdoc % trace) == 0)) {
> 	    Rprintf(_("iter %8d value %f"), its - 1, *yb);
> 	    Rprintf("\n");
> 	}
784,785c807,810
< 	Rprintf ("final         value %f\n", *yb);
< 	Rprintf ("sann stopped after %d iterations\n", its - 1);
---
> 	Rprintf (_("final value %f"), *yb);
> 	Rprintf("\n");
> 	Rprintf (_("sann stopped after %d iterations"), its - 1);
> 	Rprintf("\n");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/appl/pretty.c R/src/appl/pretty.c
47,52c47
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) gettext (String)
< #else
< #define _(String) (String)
< #endif
---
> #include <Localization.h>
58a54
> #include <R_ext/Minmax.h>
63,67c59
< #ifdef HAVE_VISIBILITY_ATTRIBUTE
< # define attribute_hidden __attribute__ ((visibility ("hidden")))
< #else
< # define attribute_hidden
< #endif
---
> #include <R_ext/Visibility.h>
98c90
< 	U *= imax2(1,*ndiv) * DBL_EPSILON; // avoid overflow for large ndiv
---
> 	U *= max(1,*ndiv) * DBL_EPSILON; // avoid overflow for large ndiv
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/appl/uncmin.c R/src/appl/uncmin.c
29a30
> #include <Localization.h>
2099c2100
<     Rprintf("iteration = %d\n", itncnt);
---
>     Rprintf(_("iteration = %d\n"), itncnt);
2104c2105
< 	Rprintf("Step:\n");
---
> 	Rprintf(_("Step:\n"));
2110c2111
<     Rprintf("Parameter:\n");
---
>     Rprintf(_("Parameter:\n"));
2115c2116
<     Rprintf("Function Value\n");
---
>     Rprintf(_("Function Value\n"));
2120c2121
<     Rprintf("Gradient:\n");
---
>     Rprintf(_("Gradient:\n"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/clipboard.c R/src/extra/graphapp/clipboard.c
31c31
< #include "win-nls.h"
---
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/context.c R/src/extra/graphapp/context.c
240c240
< 	/* apperror("Cannot find DC for non-drawable object."); */
---
> 	/* apperror(_("Cannot find DC for non-drawable object.")); */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/dialogs.c R/src/extra/graphapp/dialogs.c
37c37
< #include "win-nls.h"
---
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/gmenus.c R/src/extra/graphapp/gmenus.c
27c27
< #include "win-nls.h"
---
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/internal.h R/src/extra/graphapp/internal.h
267,270c267
< #undef min
< #undef max
< #define min(a,b) (((a) < (b)) ? (a) : (b))
< #define max(a,b) (((a) > (b)) ? (a) : (b))
---
> #include <R_ext/Minmax.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/metafile.c R/src/extra/graphapp/metafile.c
32c32
< #include "win-nls.h"
---
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/graphapp/printer.c R/src/extra/graphapp/printer.c
27c27
< #include "win-nls.h"
---
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/intl/VERSION R/src/extra/intl/VERSION
1c1
< GNU gettext library from gettext-0.16.1
---
> GNU gettext library from gettext-0.17
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/regerror.c R/src/extra/tre/regerror.c
23,32c23
< 
< #ifdef HAVE_GETTEXT
< #include <libintl.h>
< #else
< #define dgettext(p, s) s
< #define gettext(s) s
< #endif
< 
< #define _(String) dgettext(PACKAGE, String)
< #define gettext_noop(String) String
---
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-ast.h R/src/extra/tre/tre-ast.h
62c62
<     tre_ctype_t class;
---
>     tre_ctype_t classs;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-compile.c R/src/extra/tre/tre-compile.c
721c721
<                 ((tre_literal_t*)(*result)->obj)->u.class = lit->u.class;  
---
>                 ((tre_literal_t*)(*result)->obj)->u.classs = lit->u.classs;
1071c1071
< 	    tre_ctype_t class, tre_ctype_t *neg_classes, int backref)
---
> 	    tre_ctype_t classs, tre_ctype_t *neg_classes, int backref)
1082c1082
<   new_set[0].class = class;
---
>   new_set[0].classs = classs;
1114c1114
<       new_set[s1].class = set1[s1].class;
---
>       new_set[s1].classs = set1[s1].classs;
1159c1159
<       new_set[s1 + s2].class = set2[s2].class;
---
>       new_set[s1 + s2].classs = set2[s2].classs;
1384c1384
< 						lit->u.class, lit->neg_classes,
---
> 						lit->u.classs, lit->neg_classes,
1630c1630
< 	      | (p1->class ? ASSERT_CHAR_CLASS : 0)
---
> 	      | (p1->classs ? ASSERT_CHAR_CLASS : 0)
1640c1640
< 	      trans->u.class = p1->class;
---
> 	      trans->u.classs = p1->classs;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-compile.h R/src/extra/tre/tre-compile.h
19c19
<   tre_ctype_t class;
---
>   tre_ctype_t classs;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-internal.h R/src/extra/tre/tre-internal.h
22a23,25
> #include <Localization.h>
> #include <R_ext/Minmax.h>
> 
150,153d152
< #undef MAX
< #undef MIN
< #define MAX(a, b) (((a) >= (b)) ? (a) : (b))
< #define MIN(a, b) (((a) <= (b)) ? (a) : (b))
183c182
<     tre_ctype_t class;
---
>     tre_ctype_t classs;
213c212
< #define R_assert(e) ((e) ? (void) 0 : Rf_error("assertion '%s' failed in executing regexp: file '%s', line %d\n", #e, __FILE__, __LINE__))
---
> #define R_assert(e) ((e) ? (void) 0 : Rf_error(_("assertion '%s' failed in executing regexp: file '%s', line %d\n"), #e, __FILE__, __LINE__))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-match-backtrack.c R/src/extra/tre/tre-match-backtrack.c
36a37,38
> #include <R_ext/Minmax.h>
> 
197,198d198
< #undef MIN
< #define MIN(a, b) ((a) <= (b) ? (a) : (b))
441c441
< 	      slen = MIN(bt_len, len - pos);
---
> 	      slen = min(bt_len, len - pos);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-match-utils.h R/src/extra/tre/tre-match-utils.h
164c164
<        && !tre_isctype((tre_cint_t)prev_c, trans_i->u.class))                 \
---
>        && !tre_isctype((tre_cint_t)prev_c, trans_i->u.classs))                 \
167,168c167,168
<         && !tre_isctype(tre_tolower((tre_cint_t)prev_c),trans_i->u.class)     \
< 	&& !tre_isctype(tre_toupper((tre_cint_t)prev_c),trans_i->u.class))    \
---
>         && !tre_isctype(tre_tolower((tre_cint_t)prev_c),trans_i->u.classs)     \
> 	&& !tre_isctype(tre_toupper((tre_cint_t)prev_c),trans_i->u.classs))    \
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/tre-parse.c R/src/extra/tre/tre-parse.c
269c269
<   tre_ctype_t class = (tre_ctype_t)0;
---
>   tre_ctype_t classs = (tre_ctype_t)0;
292c292
< 	  class = (tre_ctype_t)0;
---
> 	  classs = (tre_ctype_t)0;
322c322
< 		  len = MIN(endptr - re - 2, 63);
---
> 		  len = min(endptr - re - 2, 63);
344,345c344,345
< 		  class = tre_ctype(tmp_str);
< 		  if (!class)
---
> 		  classs = tre_ctype(tmp_str);
> 		  if (!classs)
350c350
< 		      status = tre_expand_ctype(ctx->mem, class, items,
---
> 		      status = tre_expand_ctype(ctx->mem, classs, items,
352c352
< 		      class = (tre_ctype_t)0;
---
> 		      classs = (tre_ctype_t)0;
375c375
< 	  if (class && negate)
---
> 	  if (classs && negate)
379c379
< 	      neg_classes[(*num_neg_classes)++] = class;
---
> 	      neg_classes[(*num_neg_classes)++] = classs;
385c385
< 	      ((tre_literal_t*)((*items)[i-1])->obj)->u.class = class;
---
> 	      ((tre_literal_t*)((*items)[i-1])->obj)->u.classs = classs;
390c390
< 	  if (ctx->cflags & REG_ICASE && !class && status == REG_OK && !skip)
---
> 	  if (ctx->cflags & REG_ICASE && !classs && status == REG_OK && !skip)
467c467
<       int min, max;
---
>       int minn, maxx;
469,470c469,470
<       min = (int) l->code_min;
<       max = (int) l->code_max;
---
>       minn = (int) l->code_min;
>       maxx = (int) l->code_max;
473c473
< 	      (int)l->code_min, (int)l->code_max, (void *)l->u.class, curr_max));
---
> 	      (int)l->code_min, (int)l->code_max, (void *)l->u.classs, curr_max));
477c477
< 	  if (min < curr_max)
---
> 	  if (minn < curr_max)
480c480
< 	      curr_max = MAX(max + 1, curr_max);
---
> 	      curr_max = max(maxx + 1, curr_max);
487c487
< 	      curr_max = min - 1;
---
> 	      curr_max = minn - 1;
499c499
< 	      curr_min = curr_max = max + 1;
---
> 	      curr_min = curr_max = maxx + 1;
1529c1529
< 		      ctx->max_backref = MAX(val, ctx->max_backref);
---
> 		      ctx->max_backref = max(val, ctx->max_backref);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tre/xmalloc.c R/src/extra/tre/xmalloc.c
18a19
> #include <Localization.h>
32c33
< 	Rf_error("internal allocation error in TRE");
---
> 	Rf_error(_("internal allocation error in TRE"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/trio/trio.c R/src/extra/trio/trio.c
48a49
> #include <Localization.h>
192c193
< #define assert(a) if(!(a)) Rf_error("internal error in trio library")
---
> #define assert(a) if(!(a)) Rf_error(_("internal error in trio library"))
7615c7616
<       return "End of file";
---
>       return _("End of file");
7617c7618
<       return "Invalid argument";
---
>       return _("invalid argument");
7619c7620
<       return "Too many arguments";
---
>       return _("too many arguments");
7621c7622
<       return "Double reference";
---
>       return _("Double reference");
7623c7624
<       return "Reference gap";
---
>       return _("Reference gap");
7625c7626
<       return "Out of memory";
---
>       return _("Out of memory");
7627c7628
<       return "Invalid range";
---
>       return _("Invalid range");
7629c7630
<       return "Custom error";
---
>       return _("Custom error");
7631c7632
<       return "Unknown";
---
>       return _("Unknown error");
7634c7635
<   return "Unknown";
---
>   return _("Unknown error");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/trio/trionan.c R/src/extra/trio/trionan.c
36a37
> #include <Localization.h>
80c81
< #   error "Must be compiled with option /IEEE_MODE=UNDERFLOW_TO_ZERO/FLOAT=IEEE"
---
> #   error _("Must be compiled with option /IEEE_MODE=UNDERFLOW_TO_ZERO/FLOAT=IEEE")
83c84
< #    error "Must be compiled with option -ieee"
---
> #    error _("Must be compiled with option -ieee")
88c89
< #   error "Must be compiled with option -mieee"
---
> #   error _("Must be compiled with option -mieee")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tzone/localtime.c R/src/extra/tzone/localtime.c
39a40
> #include <Localization.h>
438c439
< 	    Rf_warning("unknown timezone '%s'", sname);
---
> 	    Rf_warning(_("unknown timezone '%s'"), sname);
442c443
< 	    Rf_warning("unknown timezone '%s'", sname);
---
> 	    Rf_warning(_("unknown timezone '%s'"), sname);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/extra/tzone/registryTZ.c R/src/extra/tzone/registryTZ.c
20a21
> #include <Localization.h>
388c389
<     Rf_warning("unable to identify current timezone '%s':\nplease set environment variable 'TZ'", s);
---
>     Rf_warning(_("unable to identify current timezone '%s':\nplease set environment variable 'TZ'"), s);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/console.c R/src/gnuwin32/console.c
27c27
< #include "win-nls.h"
---
> #include <Localization.h>
1006,1007c1006,1010
< 	if (alen > max_show)
< 	    consolewrites(c, "\n[...truncated]");
---
> 	if (alen > max_show) {
> 		consolewrites(c, "\n");
> 	    const char *trunc = _("[... truncated]");
> 	    consolewrites(c, trunc);
> 	}
2098c2101
< 	    snprintf(msg, LF_FACESIZE + 128, "Page %d", cp++);
---
> 	    snprintf(msg, LF_FACESIZE + 128, _("Page %d"), cp++);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/dos_wglob.c R/src/gnuwin32/dos_wglob.c
738c738
<     Rprintf("Adding ");
---
>     Rprintf(_("Adding: "));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/dynload.c R/src/gnuwin32/dynload.c
30a31
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/editor.c R/src/gnuwin32/editor.c
24c24
< #include "win-nls.h"
---
> #include <Localization.h>
26c26
< #ifdef Win32
---
> #ifdef _WIN32
47a48
> #undef gettext
258c259
< 	    snprintf(msg, LF_FACESIZE + 128, "Page %d", page++);
---
> 	    snprintf(msg, LF_FACESIZE + 128, _("Page %d"), page++);
320c321
< 		 "\"%s\" has been modified.  Do you want to save the changes?",
---
> 		 _("File \"%s\" has been modified. Do you want to save the changes?"),
609c610
<     strcat(s, G_("To run a line or section of R code, select the code and either\n"));
---
>     strcat(s, G_("To run a line or section of R code, select the code and either:\n"));
614,615c615
<     strcat(s, G_("If there is no selection, this will just run the current line and advance\n"));
<     strcat(s, G_("the cursor by one line.\n"));
---
>     strcat(s, G_("If there is no selection, this will just run the current line and advance\nthe cursor by one line.\n"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/embeddedR.c R/src/gnuwin32/embeddedR.c
145c145
< 	PrintWarnings();	/* from device close and .Last */
---
> 	PrintWarnings(NULL);	/* from device close and .Last */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/extra.c R/src/gnuwin32/extra.c
30c30
< #include "win-nls.h"
---
> #include <Localization.h>
35c35
< #include "Defn.h"
---
> #include <Defn.h>
61c61
< 	error(_("R_HOME not set"));
---
> 	error(_("R_HOME is not set"));
68c68
< 	    error(_("'%s' not found"), file);
---
> 	    error(_("file '%s' was not found"), file);
70,71c70
< 	    error(_("file association for '%s' not available or invalid"),
< 		  file);
---
> 	    error(_("file association for file '%s' is not available or invalid"), file);
73,74c72,73
< 	    error(_("access to '%s' denied"), file);
< 	error(_("problem in displaying '%s'"), file);
---
> 	    error(_("access to file '%s' denied"), file);
> 	error(_("problem in displaying file '%s'"), file);
89c88
< 	    error(_("R_HOME not set"));
---
> 	    error(_("R_HOME is not set"));
99c98
< 	    error(_("'%ls' not found"), file);
---
> 	    error(_("file '%ls' was not found"), file);
101,102c100
< 	    error(_("file association for '%ls' not available or invalid"),
< 		  file);
---
> 	    error(_("file association for file '%ls' is not available or invalid"), file);
104,105c102,103
< 	    error(_("access to '%ls' denied"), file);
< 	error(_("problem in displaying '%ls'"), file);
---
> 	    error(_("access to file '%ls' denied"), file);
> 	error(_("problem in displaying file '%ls'"), file);
128c126
< 	error(_("R_HOME not set"));
---
> 	error(_("R_HOME is not set"));
449c447
< 	errorcall(call, _("'path' must be a character vector"));
---
> 	errorcall(call, _("'%s' argument must be a character vector"), "path");
453c451
< 	errorcall(call, "'winslash' must be a character string");
---
> 	errorcall(call, _("'%s' argument must be a character string"), "winslash");
456c454
< 	errorcall(call, "'winslash' must be '/' or '\\\\'");
---
> 	errorcall(call, _("'winslash' argument must be '/' or '\\\\'"));
556c554
<     if(!isString(paths)) error(_("'path' must be a character vector"));
---
>     if(!isString(paths)) error(_("'%s' argument must be a character vector"), "path");
607c605
< 	if(stay && ismdi()) error(_("requires SDI mode"));
---
> 	if(stay && ismdi()) error(_("SDI mode is required"));
842c840
< 	    if(m < 0) error(_("invalid input in 'Rmbstowcs'"));
---
> 	    if(m < 0) error(_("invalid input in '%s' function"), "Rmbstowcs()");
850c848
< 	    if(m < 0) error(_("invalid input in 'Rmbstowcs'"));
---
> 	    if(m < 0) error(_("invalid input in '%s' function"), "Rmbstowcs()");
873c871
< 	error(_("file choice cancelled"));
---
> 	error(_("file choice was cancelled"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/getline/getline.c R/src/gnuwin32/getline/getline.c
2a3
> #include <Localization.h>
298c299
< 	gl_error("\n*** Error: getline(): not interactive, use stdio.\n");
---
> 	gl_error(_("\n*** Error: getline(): not interactive, use stdio."));
300c301
<         gl_error("\n*** Error: getline(): no enough memory.\n");
---
>         gl_error(_("\n*** Error: getline(): no enough memory."));
322c323
< 	gl_error("\n*** Error: minimum screen width is 21\n");
---
> 	gl_error(_("\n*** Error: minimum screen width is 21"));
567c568
< 		    gl_error("invalid multibyte character in mbcs_get_next");
---
> 		    gl_error(_("invalid multibyte character in mbcs_get_next"));
571c572
< 		    gl_error("EOF whilst reading MBCS char");
---
> 		    gl_error(_("EOF whilst reading MBCS char"));
608c609
< 	        gl_error("\n*** Error: getline(): input buffer overflow\n");
---
> 	        gl_error(_("\n*** Error: getline(): input buffer overflow"));
617c618
< 	            gl_error("\n*** Error: getline(): input buffer overflow\n");
---
> 	            gl_error(_("\n*** Error: getline(): input buffer overflow"));
681c682
<         gl_error("\n*** Error: getline(): input buffer overflow\n");
---
>         gl_error(_("\n*** Error: getline(): input buffer overflow"));
983c984
< 	gl_error("\n*** Error: gl_hist_init() failed on malloc\n");
---
> 	gl_error(_("\n*** Error: gl_hist_init() failed on malloc"));
1011c1012
< 		gl_error("\n*** Error: gl_histadd() failed on realloc\n");
---
> 		gl_error(_("\n*** Error: gl_histadd() failed on realloc"));
1076c1077
< 	gl_error("\n*** Error: hist_save() failed on malloc\n");
---
> 	gl_error(_("\n*** Error: hist_save() failed on malloc"));
1089c1090
<        sprintf(msg, "Unable to open %s", file);
---
>        sprintf(msg, _("unable to open file '%s'"), file);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/getline/getline.h R/src/gnuwin32/getline/getline.h
24c24
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/getline/wc_history.c R/src/gnuwin32/getline/wc_history.c
9a10
> #include <Localization.h>
21,22c22
<     snprintf(buf, 1000, 
< 	     "%s\nDisabling commands history for this session", msg);
---
>     snprintf(buf, 1000, _("%s\nDisabling commands history for this session"), msg);
49c49
< 	gl_error("*** Error: hist_save() failed on malloc");
---
> 	gl_error(_("*** Error: 'hist_save()' failed on malloc"));
86c86
< 		gl_error("*** Error: wgl_histadd() failed on realloc");
---
> 		gl_error(_("*** Error: 'wgl_histadd()' failed on realloc"));
142c142
<        snprintf(msg, 256, "Unable to open %s", file);
---
>        snprintf(msg, 256, _("unable to open file '%s'"), file);
178c178
<        snprintf(msg, 256, "Unable to open %ls", file);
---
>        snprintf(msg, 256, _("Unable to open %ls"), file);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/installer/CustomMsg.iss R/src/gnuwin32/installer/CustomMsg.iss
222,243c222,243
< po.regentries=Wpisy rejestru:
< po.associate=Powiąż R z plikami z rozszerzeniem .RData
< po.user=Instalacja użytkownika
< po.custom=Dopasowana instalacja
< po.adminprivilegesrequired=Dla instalacji R, trzeba posiadać uprawnienia administratora
< po.adminexplanation=Pełna instalacja R wymaga uprawnienia administratora, które nie są dostępne. Jeśli ta instalacja będzie kontinuowana, powiążanie pliki .RData z R nie będą możliwe. Instalacja R jest tylko możliwe w katalogu z prawem zapisu dla użytkownika dokonującego instalacji.
< po.recordversion=Złóż numer wersji w rejestrze
< po.startupt=Opcje startowe
< po.startupq=Czy chcesz dopasować opcje startowe?
< po.startupi=Wybierz tak lub nie, i kliknij Dalej.
< po.startup0=Tak (dopasowane opcje)
< po.startup1=Nie (przyjąc opcje standardowe)
< po.MDIt=Interfejs graficzny
< po.MDIq=Czy wolisz interfejs MDI czy SDI?
< po.MDIi=Wybierz MDI lub SDI, i kliknij Dalej.
< po.MDI0=MDI (jedno duze okno)
< po.MDI1=SDI (oddzielne okna)
< po.HelpStylet=Typ pomocy
< po.HelpStyleq=Jaki typ pokazania pomocy wolisz?
< po.HelpStylei=Wybierz pomoc tekstową, lub pomoc HTML, i kliknij Dalej.
< po.HelpStyle0=Pomoc tekstowa
< po.HelpStyle1=pomoc HTML
---
> pl.regentries=Wpisy rejestru:
> pl.associate=Powiąż R z plikami z rozszerzeniem .RData
> pl.user=Instalacja użytkownika
> pl.custom=Dopasowana instalacja
> pl.adminprivilegesrequired=Do instalacji R trzeba posiadać uprawnienia administratora
> pl.adminexplanation=Pełna instalacja R wymaga uprawnienia administratora, które nie są dostępne. Jeśli ta instalacja będzie kontynuowana, powiązanie plików .RData z R nie będzie możliwe. Instalacja R jest możliwa tylko w katalogu z prawem zapisu dla użytkownika dokonującego instalacji.
> pl.recordversion=Złóż numer wersji w rejestrze
> pl.startupt=Opcje startowe
> pl.startupq=Czy chcesz dopasować opcje startowe?
> pl.startupi=Wybierz tak lub nie, po czym kliknij Dalej.
> pl.startup0=Tak (dopasowane opcje)
> pl.startup1=Nie (przyjąć opcje standardowe)
> pl.MDIt=Interfejs graficzny
> pl.MDIq=Czy wolisz interfejs MDI czy SDI?
> pl.MDIi=Wybierz MDI lub SDI, po czym kliknij Dalej.
> pl.MDI0=MDI (jedno duże okno)
> pl.MDI1=SDI (oddzielne okna)
> pl.HelpStylet=Typ pomocy
> pl.HelpStyleq=Jaki typ pokazania pomocy wolisz?
> pl.HelpStylei=Wybierz pomoc tekstową lub pomoc HTML po czym kliknij Dalej.
> pl.HelpStyle0=Pomoc tekstowa
> pl.HelpStyle1=Pomoc HTML
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/installer/JRins.R R/src/gnuwin32/installer/JRins.R
33c33
<     SVN <- as.character(as.numeric(SVN) - 50000L)
---
>     #SVN <- as.character(as.numeric(SVN) - 50000L)
51,52c51,52
<         paste("AppName=R for Windows ", Rver, sep = ""),
<         paste("AppVerName=R for Windows ", Rver, sep = ""),
---
>         paste("AppName=R for Windows (IVORY edition) ", Rver, sep = ""),
>         paste("AppVerName=R for Windows (IVORY edition) ", Rver, sep = ""),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/installer/header1.iss R/src/gnuwin32/installer/header1.iss
33c33
< Name: po; MessagesFile: "compiler:Languages\Polish.isl"
---
> Name: pl; MessagesFile: "compiler:Languages\Polish.isl"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/malloc.c R/src/gnuwin32/malloc.c
450a451
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/pager.c R/src/gnuwin32/pager.c
27c27
< #include "win-nls.h"
---
> #include <Localization.h>
29c29
< #ifdef Win32
---
> #ifdef _WIN32
391c391
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/preferences.c R/src/gnuwin32/preferences.c
26c26
< #include "win-nls.h"
---
> #include <Localization.h>
28c28
< #ifdef Win32
---
> #ifdef _WIN32
44a45
> #undef gettext
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/rt_complete.c R/src/gnuwin32/rt_complete.c
28a29
> #include <R_ext/Minmax.h>
30,33d30
< #ifndef min
< /* in stdlib.h in Win64 headers */
< # define min(a, b) (a < b ? a : b)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/rui.c R/src/gnuwin32/rui.c
24c24
< #include "win-nls.h"
---
> #include <Localization.h>
29c29
< #include "Defn.h"
---
> #include <Defn.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/run.c R/src/gnuwin32/run.c
29c29
< #include "win-nls.h"
---
> #include <Localization.h>
67c67
< 	    strcpy(RunError, "A \" is missing (expandcmd)");
---
> 	    strcpy(RunError,_( "A \" is missing (expandcmd)"));
76c76
< 	strcpy(RunError, "Insufficient memory (expandcmd)");
---
> 	strcpy(RunError, _("Insufficient memory (expandcmd)"));
111c111
< 	snprintf(RunError, 500, "'%s' not found", p);
---
> 	snprintf(RunError, 500, _("'%s' not found"), p);
583c583
< 	error("Timeout with background running processes is not supported.");
---
> 	error(_("Timeout with background running processes is not supported."));
922c922
< 	warning("broken Windows pipe");
---
> 	warning(_("broken Windows pipe"));
940c940
< 	warning("printing of extremely long output is truncated");
---
> 	warning(_("printing of extremely long output is truncated"));
949c949
<     Rconnection new;
---
>     Rconnection newconn;
953,957c953,957
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of pipe connection failed"));
<     new->class = (char *) malloc(strlen("pipe") + 1);
<     if(!new->class) {
< 	free(new);
---
>     newconn = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newconn) error(_("allocation of pipe connection failed"));
>     newconn->conclass = (char *) malloc(strlen("pipe") + 1);
>     if(!newconn->conclass) {
> 	free(newconn);
960c960
<     strcpy(new->class, "pipe");
---
>     strcpy(newconn->conclass, "pipe");
965c965
< 	new->description = (char *) malloc(len);
---
> 	newconn->description = (char *) malloc(len);
967c967
< 	new->description = NULL;
---
> 	newconn->description = NULL;
969,970c969,970
<     if(!new->description) {
< 	free(command); free(new->class); free(new);
---
>     if(!newconn->description) {
> 	free(command); free(newconn->conclass); free(newconn);
983c983
<     init_con(new, command, ienc, mode);
---
>     init_con(newconn, command, ienc, mode);
986,998c986,998
<     new->open = &Wpipe_open;
<     new->close = &Wpipe_close;
<     new->destroy = &Wpipe_destroy;
<     new->vfprintf = &Wpipe_vfprintf;
<     new->fgetc = &Wpipe_fgetc;
<     new->seek = &null_seek;
<     new->truncate = &null_truncate;
<     new->fflush = &Wpipe_fflush;
<     new->read = &Wpipe_read;
<     new->write = &Wpipe_write;
<     new->private = (void *) malloc(sizeof(struct Wpipeconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     newconn->open = &Wpipe_open;
>     newconn->close = &Wpipe_close;
>     newconn->destroy = &Wpipe_destroy;
>     newconn->vfprintf = &Wpipe_vfprintf;
>     newconn->fgetc = &Wpipe_fgetc;
>     newconn->seek = &null_seek;
>     newconn->truncate = &null_truncate;
>     newconn->fflush = &Wpipe_fflush;
>     newconn->read = &Wpipe_read;
>     newconn->write = &Wpipe_write;
>     newconn->private = (void *) malloc(sizeof(struct Wpipeconn));
>     if(!newconn->private) {
> 	free(newconn->description); free(newconn->conclass); free(newconn);
1001c1001
<     return new;
---
>     return newconn;
1013c1013
< 	error(_("'names' is not a character vector"));
---
> 	error(_("'%s' argument is not a character vector"), "names");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/sys-win32.c R/src/gnuwin32/sys-win32.c
29a30
> #include <Localization.h>
251c252
< 	errorcall(call, "Timeout with background running processes is not supported.");
---
> 	errorcall(call, _("Timeout with background running processes is not supported."));
291c292
< 	    error(_("invalid %s argument"), "flag");
---
> 	    error(_("invalid '%s' argument"), "flag");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/system.c R/src/gnuwin32/system.c
53c53
< #include "win-nls.h"
---
> #include <Localization.h>
494c494
< 	PrintWarnings();        /* from device close and (if run) .Last */
---
> 	PrintWarnings(NULL);        /* from device close and (if run) .Last */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/win-nls.h R/src/gnuwin32/win-nls.h
21,34c21,26
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) libintl_gettext (String)
< #undef gettext /* needed for graphapp */
< #define gettext_noop(String) String
< #define N_(String) gettext_noop (String)
< #define G_(String) libintl_dgettext("RGui", String)
< #define GN_(String) gettext_noop (String)
< #else /* not NLS */
< #define _(String) (String)
< #define N_(String) String
< #define G_(String) (String)
< #define GN_(String) String
< #endif
---
> /*
>  * IVORY:
>  * Definitions have been merged in 'Localization.h' header.
>  * Please use 'Localization.h' instead of 'win-nls.h'.
>  */
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/gnuwin32/windlgs/src/ttest.c R/src/gnuwin32/windlgs/src/ttest.c
190c190
< 	    error("invalid call %s", cmd);
---
> 	    error(_("invalid call %s"), cmd);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Defn.h R/src/include/Defn.h
26,27d25
< /* seems unused */
< #define COUNTING
29d26
< #define BYTECODE
31,32c28,30
< /* probably no longer needed */
< #define NEW_CONDITION_HANDLING
---
> 
> #define isRaw(x) (TYPEOF(x) == RAWSXP)
> 
47,53c45
< #ifdef HAVE_VISIBILITY_ATTRIBUTE
< # define attribute_visible __attribute__ ((visibility ("default")))
< # define attribute_hidden __attribute__ ((visibility ("hidden")))
< #else
< # define attribute_visible
< # define attribute_hidden
< #endif
---
> #include <R_ext/Visibility.h>
157c149
< #ifdef Win32
---
> #ifdef _WIN32
162c154
< #ifdef Win32
---
> #ifdef _WIN32
175c167
< #ifdef Win32
---
> #ifdef _WIN32
277c269
< #  elif defined(Win32)
---
> #  elif defined(_WIN32)
564,565c556,557
< } RCNTXT, *context;
< 
---
> } RCNTXT;
> RCNTXT *context;
783c775
< #ifdef Win32
---
> #ifdef _WIN32
1236c1228
< void PrintWarnings(void);
---
> void PrintWarnings(const char *);
1397c1389
< #ifdef Win32
---
> #ifdef _WIN32
1429,1446c1421,1422
< 
< #ifndef NO_NLS
< # ifdef ENABLE_NLS
< #  include <libintl.h>
< #  ifdef Win32
< #   define _(String) libintl_gettext (String)
< #   undef gettext /* needed for graphapp */
< #  else
< #   define _(String) gettext (String)
< #  endif
< #  define gettext_noop(String) String
< #  define N_(String) gettext_noop (String)
< #  else /* not NLS */
< #  define _(String) (String)
< #  define N_(String) String
< #  define ngettext(String, StringP, N) (N > 1 ? StringP: String)
< # endif
< #endif
---
> //IVORY UPDATE: localization moved to a separate file 'Localization.h'.
> // From now on it must be included separately.
1482,1486c1458
< #ifdef HAVE_LONG_DOUBLE
< # define LDOUBLE long double
< #else
< # define LDOUBLE double
< #endif
---
> #include <R_ext/Ldouble.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Errormsg.h R/src/include/Errormsg.h
27c27
< #define R_MSG_subs_o_b	_("subscript out of bounds")
---
> #define R_MSG_subs_o_b	_("subscript is out of bounds")
62c62
< #endif
---
> #endif /* ERRORMSG_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Fileio.h R/src/include/Fileio.h
32c31
< #endif
---
> #endif /* RFILEIO_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Graphics.h R/src/include/Graphics.h
213c213
<     Rboolean new;	/* Clean plot ? */
---
>     Rboolean newplot;	/* Clean plot ? */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/IOStuff.h R/src/include/IOStuff.h
86c86
< #endif /* not R_IOSTUFF_H */
---
> #endif /* R_IOSTUFF_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Internal.h R/src/include/Internal.h
33c33
< #if Win32
---
> #if _WIN32
Only in R/src/include: Localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Print.h R/src/include/Print.h
26c26
< #include "Defn.h"
---
> #include <Defn.h>
80c80
< #endif
---
> #endif /* PRINT_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R.h R/src/include/R.h
85c85
< #include <R_ext/Constants.h>  /* PI, DOUBLE_EPS, etc */
---
> #include <R_ext/Constants.h>  /* DOUBLE_EPS, etc */
107c107
< #ifdef Win32
---
> #ifdef _WIN32
115c115
< #endif /* !R_R_H */
---
> #endif /* R_R_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/Complex.h R/src/include/R_ext/Complex.h
39,40c39,40
< }
< #endif
---
> }  // extern "C"
> #endif // __cplusplus
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/Connections.h R/src/include/R_ext/Connections.h
51c51
<     char* class;
---
>     char* conclass;
100c100
< #endif
---
> #endif /* R_EXT_CONNECTIONS_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/Constants.h R/src/include/R_ext/Constants.h
31,33d30
< #ifndef M_PI
< #define M_PI 3.141592653589793238462643383279502884197169399375
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/GetX11Image.h R/src/include/R_ext/GetX11Image.h
38c38
< #endif
---
> #endif /* GETX11IMAGE_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/Itermacros.h R/src/include/R_ext/Itermacros.h
58a59,80
> #define mod_iterate(n1,i1) for (i = i1 = 0; i < n;							\
> 	     i1 = (++i1 == n1) ? 0 : i1,				\
> 		 ++i)
> 
> #define mod_iterate2(n1,n2,i1,i2) for (i = i1 = i2 = 0; i<n; \
>         i1 = (++i1 == n1) ? 0 : i1,\
>         i2 = (++i2 == n2) ? 0 : i2,\
>         ++i)
> 
> #define mod_iterate3(n1,n2,n3,i1,i2,i3) for (i = i1 = i2 = i3 = 0; i<n; \
>         i1 = (++i1==n1) ? 0 : i1,                               \
>         i2 = (++i2==n2) ? 0 : i2,                               \
>         i3 = (++i3==n3) ? 0 : i3,                               \
>         ++i)
> 
> #define mod_iterate4(n1,n2,n3,n4,i1,i2,i3,i4) for (i = i1 = i2 = i3 = i4 = 0; i<n; \
>         i1 = (++i1==n1) ? 0 : i1,                                       \
>         i2 = (++i2==n2) ? 0 : i2,                                       \
>         i3 = (++i3==n3) ? 0 : i3,                                       \
>         i4 = (++i4==n4) ? 0 : i4,                                       \
>         ++i)
> 
Only in R/src/include/R_ext: Ldouble.h
Only in R/src/include/R_ext: Minmax.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/Parse.h R/src/include/R_ext/Parse.h
47c47
< #endif
---
> #endif /* R_EXT_PARSE_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/QuartzDevice.h R/src/include/R_ext/QuartzDevice.h
238c238
< #endif
---
> #endif /* R_EXT_QUARTZDEVICE_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/RStartup.h R/src/include/R_ext/RStartup.h
43c43
< #ifdef Win32
---
> #ifdef _WIN32
85c85
< #ifdef Win32
---
> #ifdef _WIN32
115c115
< #endif
---
> #endif /* R_EXT_RSTARTUP_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/Utils.h R/src/include/R_ext/Utils.h
81c81
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/R_ext/stats_stubs.h R/src/include/R_ext/stats_stubs.h
23a24,26
> #ifndef STATS_STUBS_H
> #define STATS_STUBS_H
> 
84a88
> #endif /* STATS_STUBS_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rconnections.h R/src/include/Rconnections.h
69c69
< void init_con(Rconnection new, const char *description, int enc,
---
> void init_con(Rconnection newcon, const char *description, int enc,
85c85,86
< #endif
---
> 
> #endif /* R_CONNECTIONS_H_ */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rdefines.h R/src/include/Rdefines.h
137,138c137,138
< #define LIST_VALUE(x)		Rf_error("the 'value' of a list object is not defined")
< #define RAW_VALUE(x)		Rf_error("the 'value' of a raw object is not defined")
---
> #define LIST_VALUE(x)		Rf_error(_("the 'value' of a list object is not defined"))
> #define RAW_VALUE(x)		Rf_error(_("the 'value' of a raw object is not defined"))
171,189c171
< /* These conflict with definitions in R_ext/Boolean.h,
<    but spatstat relies on them in a C file */
< #ifdef __cplusplus
< # ifndef R_EXT_BOOLEAN_H_
< #  ifndef TRUE
< #   define TRUE 1
< #  endif
< #  ifndef FALSE
< #   define FALSE 0
< #  endif
< # endif
< #else
< #  ifndef TRUE
< #   define TRUE 1
< #  endif
< #  ifndef FALSE
< #   define FALSE 0
< #  endif
< #endif
---
> #include <R_ext/Boolean.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rdynpriv.h R/src/include/Rdynpriv.h
37c37
< #ifdef Win32
---
> #ifdef _WIN32
196c196
< #endif /* ifdef R_DYNPRIV_H */
---
> #endif /* R_DYNPRIV_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rinlinedfuns.h R/src/include/Rinlinedfuns.h
96c96
< 	error("cannot get data pointer of '%s' objects", type2char(TYPEOF(x)));
---
> 	error(_("cannot get data pointer of '%s' objects"), type2char(TYPEOF(x)));
139c139
< 	if (TYPEOF(x) != LGLSXP) error("bad LGLSXP vector");	\
---
> 	if (TYPEOF(x) != LGLSXP) error(_("bad %s vector"), "LGLSXP");	\
143c143
< 	    error("bad INTSXP vector");				\
---
> 	    error(_("bad %s vector"), "INTSXP");				\
146c146
< 	if (TYPEOF(x) != REALSXP) error("bad REALSXP vector");	\
---
> 	if (TYPEOF(x) != REALSXP) error(_("bad %s vector"), "REALSXP");	\
149c149
< 	if (TYPEOF(x) != CPLXSXP) error("bad CPLXSXP vector");	\
---
> 	if (TYPEOF(x) != CPLXSXP) error(_("bad %s vector"), "CPLXSXP");	\
152c152
< 	if (TYPEOF(x) != RAWSXP) error("bad RAWSXP vector");	\
---
> 	if (TYPEOF(x) != RAWSXP) error(_("bad %s vector"), "RAWSXP");	\
211c211
< 	if (ALTREP(x)) error("bad standard LGLSXP vector");	\
---
> 	if (ALTREP(x)) error(_("bad standard %s vector"), "LGLSXP");	\
215c215
< 	if (ALTREP(x)) error("bad standard INTSXP vector");	\
---
> 	if (ALTREP(x)) error(_("bad standard %s vector"), "INTSXP");	\
219c219
< 	if (ALTREP(x)) error("bad standard REALSXP vector");	\
---
> 	if (ALTREP(x)) error(_("bad standard %s vector"), "REALSXP");	\
223c223
< 	if (ALTREP(x)) error("bad standard CPLXSXP vector");	\
---
> 	if (ALTREP(x)) error(_("bad standard %s vector"), "CPLXSXP");	\
227c227
< 	if (ALTREP(x)) error("bad standard RAWSXP vector");	\
---
> 	if (ALTREP(x)) error(_("bad standard %s vector"), "RAWSXP");	\
232c232
< 	if (XLENGTH(x) != 1) error("bad LGLSXP scalar");	\
---
> 	if (XLENGTH(x) != 1) error(_("bad %s scalar"), "LGLSXP");	\
236c236
< 	if (XLENGTH(x) != 1) error("bad INTSXP scalar");	\
---
> 	if (XLENGTH(x) != 1) error(_("bad %s scalar"), "INTSXP");	\
240c240
< 	if (XLENGTH(x) != 1) error("bad REALSXP scalar");	\
---
> 	if (XLENGTH(x) != 1) error(_("bad %s scalar"), "REALSXP");	\
244c244
< 	if (XLENGTH(x) != 1) error("bad CPLXSXP scalar");	\
---
> 	if (XLENGTH(x) != 1) error(_("bad %s scalar"), "CPLXSXP");	\
248c248
< 	if (XLENGTH(x) != 1) error("bad RAWSXP scalar");	\
---
> 	if (XLENGTH(x) != 1) error(_("bad %s scalar"), "RAWSXP");	\
253c253
< 	    error("subscript out of bounds");		\
---
> 	    error(_("subscript out of bounds"));		\
795c795
< INLINE_FUN Rboolean isFunction(SEXP s)
---
> INLINE_FUN Rboolean isPrimitive(SEXP s)
797,798c797
<     return (TYPEOF(s) == CLOSXP ||
< 	    TYPEOF(s) == BUILTINSXP ||
---
>     return (TYPEOF(s) == BUILTINSXP ||
802c801
< INLINE_FUN Rboolean isPrimitive(SEXP s)
---
> INLINE_FUN Rboolean isFunction(SEXP s)
804,805c803,804
<     return (TYPEOF(s) == BUILTINSXP ||
< 	    TYPEOF(s) == SPECIALSXP);
---
>     return (TYPEOF(s) == CLOSXP ||
>             isPrimitive(s));
1111c1110
< 	    warning("cycle detected");
---
> 	    warning(_("cycle detected"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rinternals.h R/src/include/Rinternals.h
56a57
> #define DO_NOTHING do {} while(0)
73,74c74,75
< # define R_XLEN_T_MAX 4503599627370496
< # define R_SHORT_LEN_MAX 2147483647
---
> # define R_XLEN_T_MAX 4503599627370496 //2^52
> # define R_SHORT_LEN_MAX 2147483647 //2^31-1
366c367
< # define SET_NAMED(x, v) do {} while (0)
---
> # define SET_NAMED(x, v) DO_NOTHING
468,471c469,472
< #define CDDDR(e)	CDR(CDR(CDR(e)))
< #define CADDR(e)	CAR(CDR(CDR(e)))
< #define CADDDR(e)	CAR(CDR(CDR(CDR(e))))
< #define CAD4R(e)	CAR(CDR(CDR(CDR(CDR(e)))))
---
> #define CDDDR(e)	CDR(CDDR(e))
> #define CADDR(e)	CAR(CDDR(e))
> #define CADDDR(e)	CAR(CDR(CDDR(e)))
> #define CAD4R(e)	CAR(CDDR(CDDR(e)))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rmath.h0.in R/src/include/Rmath.h0.in
86a87,93
> /* usually in math.h, but not with strict C99 compliance */
> //echo 'scale=48; 4*a(1)' | bc -l
> #ifndef M_PI
> #define M_PI 3.141592653589793238462643383279502884197169399372
> #endif
> 
> //echo 'scale=32; e(1)' | bc -l
90a98
> //echo 'scale=32; l(e(1))/l(2)' | bc -l
94a103
> //echo 'scale=32; l(e(1))/l(10)' | bc -l
98a108
> //echo 'scale=32; l(2)' | bc -l
102a113
> //echo 'scale=32; l(10)' | bc -l
107,110c118
< #ifndef M_PI
< #define M_PI		3.141592653589793238462643383280	/* pi */
< #endif
< 
---
> //echo 'scale=32; 8*a(1)' | bc -l
114a123
> //echo 'scale=32; 2*a(1)' | bc -l
118a128
> //echo 'scale=32; a(1)' | bc -l
122a133
> //echo 'scale=32; 1/(4*a(1))' | bc -l
126a138
> //echo 'scale=32; 1/(2*a(1))' | bc -l
130a143
> //echo 'scale=32; 1/sqrt(a(1))' | bc -l
134a148
> //echo 'scale=32; sqrt(2)' | bc -l
138a153
> //echo 'scale=32; 1/sqrt(2)' | bc -l
144a160
> //echo 'scale=32; sqrt(3)' | bc -l
148a165
> //echo 'scale=32; sqrt(32)' | bc -l
152a170
> //echo 'scale=32; l(2)/l(10)' | bc -l
156a175
> //echo 'scale=32; sqrt(4*a(1))' | bc -l
160a180
> //echo 'scale=32; 1/sqrt(8*a(1))' | bc -l
164a185
> //echo 'scale=32; sqrt(1/(2*a(1)))' | bc -l
169a191
> //echo 'scale=32; l(8*a(1))/l(e(1))' | bc -l
173a196
> //echo 'scale=32; l(sqrt(4*a(1)))/l(e(1))' | bc -l
178a202
> //echo 'scale=32; l(sqrt(8*a(1)))/l(e(1))' | bc -l
183a208
> //echo 'scale=32; l(sqrt(2*a(1)))/l(e(1))' | bc -l
190,196c215,216
< #ifdef MATHLIB_STANDALONE
< # ifndef R_EXT_BOOLEAN_H_
< /* "copy-paste" R_ext/Boolean.h if not already included: */
<  #define R_EXT_BOOLEAN_H_
<  #undef FALSE
<  #undef TRUE
<  typedef enum { FALSE = 0, TRUE } Rboolean;
---
> #ifndef M_EC
> #define M_EC            0.57721566490153286060651209008240243104215933593992 /* euler's constant */
198c218
< #else
---
> 
200d219
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Rmodules/Rinternet.h R/src/include/Rmodules/Rinternet.h
89c89
< #endif /* ifndef R_INTERNET_MODULE_H */
---
> #endif /* R_INTERNET_MODULE_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/S.h R/src/include/S.h
90c90
< #endif /* !R_S_H */
---
> #endif /* R_S_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/Startup.h R/src/include/Startup.h
40c40
< #endif
---
> #endif /* STARTUP_H */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/include/rlocale.h R/src/include/rlocale.h
47c47
< #ifdef Win32
---
> #ifdef _WIN32
92c92
<  * defined(Win32) || defined(__APPLE__) || defined(_AIX)
---
>  * defined(_WIN32) || defined(__APPLE__) || defined(_AIX)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/Defunct.R R/src/library/base/R/Defunct.R
22c22
< 	msg <- gettextf("'%s' is defunct.\n", fname[length(fname)])
---
> 	msg <- gettextf("Function %s is defunct.\n", sQuote(fname[length(fname)]))
24c24
< 	    msg <- c(msg, gettextf("Use '%s' instead.\n", new))
---
> 	    msg <- gettextf("Function %s is defunct.\nUse function %s instead.\n", sQuote(as.character(sys.call(sys.parent())[[1L]])), sQuote(new))
36c36
<                         class = "defunctError"))
---
>                         class = "defunctError"), domain = NA)
178c178
< ##     .Defunct(msg = "namespaces should be specified via the 'NAMESPACE' file")
---
> ##     .Defunct(msg = gettext("namespaces should be specified via the 'NAMESPACE' file"))
180c180
< ##     .Defunct(msg = "namespaces should be specified via the 'NAMESPACE' file")
---
> ##     .Defunct(msg = gettext("namespaces should be specified via the 'NAMESPACE' file"))
182c182
< ##     .Defunct(msg = "namespaces should be specified via the 'NAMESPACE' file")
---
> ##     .Defunct(msg = gettext("namespaces should be specified via the 'NAMESPACE' file"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/Deprecated.R R/src/library/base/R/Deprecated.R
25c25
< 	msg <- gettextf("'%s' is deprecated.\n", old)
---
> 	msg <- gettextf("Function %s is deprecated.\n", sQuote(old))
27c27
< 	    msg <- c(msg, gettextf("Use '%s' instead.\n", new))
---
> 	    msg <- gettextf("Function %s is deprecated.\nUse function %s instead.\n", sQuote(old), sQuote(new))
39c39
<                              class = "deprecatedWarning"))
---
>                              class = "deprecatedWarning"), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/LAPACK.R R/src/library/base/R/LAPACK.R
22,23c22,23
< 	stop("argument to 'La.svd' must be numeric or complex")
<     if (any(!is.finite(x))) stop("infinite or missing values in 'x'")
---
> 	stop("argument passed to 'La.svd()' function must be logical, numeric or complex")
>     if (any(!is.finite(x))) stop(gettextf("infinite or missing values in '%s' argument", "x"))
27c27
<     if(!n || !p) stop("a dimension is zero")
---
>     if(!n || !p) stop(gettextf("at least one dimension of '%s' argument is 0", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/New-Internal.R R/src/library/base/R/New-Internal.R
33,34c33,34
<             prefix <- paste("Error in", dcall, ": ")
<             LONG <- 75L # to match value in errors.c
---
>             prefix <- gettextf("Error in command '%s': ", paste(dcall, collapse = ""), domain = "R-base")
>             LONG <- getOption("width") - 5L # to match value in errors.c
43c43
<         else prefix <- "Error : "
---
>         else prefix <- gettext("Error: ")
122c122
<                               "deparse options %s are not recognized"),
---
>                               "deparse options %s are not recognized", domain = "R-base"),
128c128
<         stop('"hexNumeric" and "digits17" are mutually exclusive')
---
>         stop("\"hexNumeric\" and \"digits17\" are mutually exclusive")
133c133
<     function(expr, width.cutoff = 60L,
---
>     function(expr, width.cutoff = getOption("width"),
143c143
< 	stop("second argument must be a list")
---
> 	stop(gettextf("'%s' argument must be a list", "args"))
266c266
<         stop("'iconvlist' is not available on this system")
---
>         stop("'iconvlist()' function is not available on this system")
268c268
<     if(!length(ext)) stop("'iconvlist' is not available on this system")
---
>     if(!length(ext)) stop("'iconvlist()' function is not available on this system")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/RNG.R R/src/library/base/R/RNG.R
36c36
< 	    stop("'kind' must be a character string of length 1 (RNG to be used).")
---
> 	    stop(gettextf("'%s' argument must be a character string of length 1 (RNG to be used).", "kind"))
38,39c38,39
< 	    stop(gettextf("'%s' is not a valid abbreviation of an RNG", kind),
<                  domain = NA)
---
> 	    stop(gettextf("'%s' value is not a valid abbreviation of an RNG", kind),
>                  domain = "R-base")
45c45
< 	    stop("'normal.kind' must be a character string of length 1")
---
> 	    stop(gettextf("'%s' argument must be a character string of length 1", "normal.kind"))
48,49c48,49
< 	    stop(gettextf("'%s' is not a valid choice", normal.kind),
<                  domain = NA)
---
> 	    stop(gettextf("'%s' value is not a valid choice", normal.kind),
>                  domain = "R-base")
52c52
<                     domain = NA)
---
>                     domain = "R-base")
58c58
<             stop("'sample.kind' must be a character string of length 1")
---
>             stop(gettextf("'%s' argument must be a character string of length 1", "sample.kind"))
85c85
< 	    stop("'kind' must be a character string of length 1 (RNG to be used).")
---
> 	    stop(gettextf("'%s' argument must be a character string of length 1 (RNG to be used).", "kind"))
87,88c87,88
< 	    stop(gettextf("'%s' is not a valid abbreviation of an RNG", kind),
<                  domain = NA)
---
> 	    stop(gettextf("'%s' value is not a valid abbreviation of an RNG", kind),
>                  domain = "R-base")
94c94
< 	    stop("'normal.kind' must be a character string of length 1")
---
> 	    stop(gettextf("'%s' argument must be a character string of length 1", "normal.kind"))
97,98c97,98
< 	    stop(gettextf("'%s' is not a valid choice", normal.kind),
<                  domain = NA)
---
> 	    stop(gettextf("'%s' value is not a valid choice", normal.kind),
>                  domain = "R-base")
101c101
<                  domain = NA)
---
>                  domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/TAOCP.R R/src/library/base/R/TAOCP.R
25c25
<     for(j in 1L:KK) {
---
>     for(j in seq_len(KK)) {
50c50
<     rs <- c(X[(LL+1L):KK], X[1L:LL])
---
>     rs <- c(X[(LL+1L):KK], X[seq_len(LL)])
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/apply.R R/src/library/base/R/apply.R
25c25
<     if(!dl) stop("dim(X) must have a positive length")
---
>     if(!dl) stop("'dim(X)' value must have a positive length")
38c38
<            stop("'X' must have named dimnames")
---
>            stop(gettextf("'%s' argument must have named dimnames", "X"))
72c72
<         for(i in 1L:d2) {
---
>         for(i in seq_len(d2)) {
77c77
<        for(i in 1L:d2) {
---
>        for(i in seq_len(d2)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/array.R R/src/library/base/R/array.R
29c29
<         if (!length(dim)) stop("'dim' cannot be of length 0")
---
>         if (!length(dim)) stop(gettextf("'%s' argument cannot be of length 0", "dim"))
34c34
<                 stop("'dim' specifies too large an array")
---
>                 stop("'dim' argument specifies too large array")
52c52
<         stop("incorrect value for 'MARGIN'")
---
>         stop(gettextf("incorrect value for '%s' argument", "MARGIN"))
57c57
<     y <- rep.int(rep.int(1L:d[m],
---
>     y <- rep.int(rep.int(seq_len(d[m]),
119c119
<            stop("'x' must have named dimnames")
---
>            stop(gettextf("'%s' argument must have named dimnames", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/as.R R/src/library/base/R/as.R
82c82
< as.qr <- function(x) stop("you cannot be serious", domain = NA)
---
> as.qr <- function(x) stop("you cannot be serious", domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/attach.R R/src/library/base/R/attach.R
29c29
<                  "The following objects are masked _by_ %s:\n\n%s\n")
---
>                  "The following objects are masked _by_ %s:\n\n%s\n", domain = "R-base")
33c33
<                  "The following objects are masked from %s:\n\n%s\n")
---
>                  "The following objects are masked from %s:\n\n%s\n", domain = "R-base")
91c91
<             stop(gettextf("file '%s' not found", what), domain = NA)
---
>             stop(gettextf("file '%s' was not found", what), domain = "R-base")
118c118
< 	if(is.na(pos)) stop("invalid 'name' argument")
---
> 	if(is.na(pos)) stop(gettextf("invalid '%s' argument", "name"))
136c136
< 				 sQuote(pkgname), sQuote(.rmpkg(pkg))),
---
> 				 sQuote(pkgname), sQuote(.rmpkg(pkg)), domain = "R-base"),
140c140
< 			      sQuote(pkgname), sQuote(.rmpkg(pkg))),
---
> 			      sQuote(pkgname), sQuote(.rmpkg(pkg)), domain = "R-base"),
156,159c156,158
<                 warning(gettextf("%s failed in %s() for '%s', details:\n  call: %s\n  error: %s",
<                                  ".onDetach", "detach", pkgname,
<                                  deparse(conditionCall(res))[1L],
<                                  conditionMessage(res)),
---
>                 warning(gettextf("%s failed in %s function for package %s, details:\n  call: %s\n  error: %s",
>                                  sQuote(".onDetach"), sQuote("detach()"), sQuote(pkgname),
>                                  deparse(conditionCall(res))[1L], conditionMessage(res), domain = "R-base"),
170,171c169,170
<                 warning(gettextf("%s failed in %s() for '%s', details:\n  call: %s\n  error: %s",
<                                  ".Last.lib", "detach", pkgname,
---
>                 warning(gettextf("%s failed in %s function for package %s, details:\n  call: %s\n  error: %s",
>                                  sQuote(".Last.lib"), sQuote("detach()"), sQuote(pkgname),
173c172
<                                  conditionMessage(res)),
---
>                                  conditionMessage(res), domain = "R-base"),
185,186c184
<                      warning(gettextf("%s namespace cannot be unloaded:\n  ",
<                                       sQuote(pkgname)),
---
>                      warning(gettextf("%s namespace cannot be unloaded:", sQuote(pkgname), domain = "R-base"), "\n  ",
188c186
<                              call. = FALSE, domain = NA))
---
>                              call. = FALSE, domain = NA, sep = ""))
210,211c208
<             warning(gettextf("%s converted to character string", sQuote(name)),
<                     domain = NA)
---
>             warning(gettextf("%s value was converted to character string", sQuote(name)), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/attr.R R/src/library/base/R/attr.R
22c22
< 	if(!is.list(value)) stop("'value' must be a list")
---
> 	if(!is.list(value)) stop(gettextf("'%s' argument must be a list", "value"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/autoload.R R/src/library/base/R/autoload.R
51,52c51
< 	stop(gettextf("autoloader did not find '%s' in '%s'", name, package),
<              domain = NA)
---
> 	stop(gettextf("autoloader did not find '%s' in package %s", name, sQuote(package), domain = "R-base"), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/colSums.R R/src/library/base/R/colSums.R
27c27
<         stop("'x' must be an array of at least two dimensions")
---
>         stop("'x' argument must be an array of at least two dimensions")
29c29
<         stop("invalid 'dims'")
---
>         stop(gettextf("invalid '%s' argument", "dims"))
47c47
<         stop("'x' must be an array of at least two dimensions")
---
>         stop("'x' argument must be an array of at least two dimensions")
49c49
<         stop("invalid 'dims'")
---
>         stop(gettextf("invalid '%s' argument", "dims"))
67c67
<         stop("'x' must be an array of at least two dimensions")
---
>         stop("'x' argument must be an array of at least two dimensions")
69c69
<         stop("invalid 'dims'")
---
>         stop(gettextf("invalid '%s' argument", "dims"))
87c87
<         stop("'x' must be an array of at least two dimensions")
---
>         stop("'x' argument must be an array of at least two dimensions")
89c89
<         stop("invalid 'dims'")
---
>         stop(gettextf("invalid '%s' argument", "dims"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/conditions.R R/src/library/base/R/conditions.R
133c133
<         cat("<", cl, " in ", deparse(call), ": ", msg, ">\n", sep="")
---
> 	cat("<", gettextf("%s in %s: %s", cl, deparse(call), msg, domain = "R-base"), ">\n", sep = "")
144c144
<         paste0(cl, " in ", deparse(call)[1L], ": ", msg, "\n")
---
> 	cat(gettextf("%s in %s: %s", cl, deparse(call)[1L], msg, domain = "R-base"), "\n", sep = "")
153c153
<         paste0("Error in ", deparse(call)[1L], ": ", msg, "\n")
---
> 	paste(gettextf("Error in command '%s':", deparse(call)[1L], domain = "R-base"), msg, "\n", sep = "")
155c155
<         paste0("Error: ", msg, "\n")
---
> 	paste(gettext("Error:", domain = "R-base"), msg, "\n", sep = "")
175c175
<     cat(paste("<restart:", x[[1L]], ">\n"))
---
>     cat(gettextf("<restart: %s>", x[[1L]], domain = "R-base"), "\n", sep = "")
211,212c211
<             stop(gettextf("no 'restart' '%s' found", as.character(r)),
<                  domain = NA)
---
>             stop(gettextf("no 'restart' '%s' found", as.character(r)), domain = "R-base")
220c219
<         stop("not an interactive session")
---
>         stop("this session is not interactive")
224,225c223
<             stop(gettextf("no 'restart' '%s' found", as.character(r)),
<                  domain = NA)
---
>             stop(gettextf("no 'restart' '%s' found", as.character(r)), domain = "R-base")
232c230
<             cat("Enter values for restart arguments:\n\n")
---
>             cat(gettext("Enter values for restart arguments:", domain = "R-base"), "\n\n", sep = "")
280c278
<                stop("not a valid restart specification")
---
>                stop("this is not a valid restart specification")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/conflicts.R R/src/library/base/R/conflicts.R
22c22
<     if(length(where) < 1L) stop("argument 'where' of length 0")
---
>     if(length(where) < 1L) stop(gettextf("'%s' argument is of length 0", "where"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/connections.R R/src/library/base/R/connections.R
4c4
< #  Copyright (C) 1995-2019 The R Core Team
---
> #  Copyright (C) 1995-2018 The R Core Team
159c159
<         stop("'origin' must be one of 'start', 'current' or 'end'")
---
>         stop("'origin' argument must be one of 'start', 'current' or 'end'")
168c168
<     if(!isOpen(con)) stop("can only truncate an open connection")
---
>     if(!isOpen(con)) stop("'truncate.connection()' function can only truncate an open connection")
194,197c194,195
< 	cat("A connection, ",
< 	    if(length(cl)) paste0("specifically, ",
< 				  paste(sQuote(cl), collapse=", "), ", "),
< 	    "but invalid.\n", sep = "")
---
> 	if(length(cl)) {
> 	 cat(gettextf("A connection, specifically, %s, but invalid.", paste(sQuote(cl), collapse = ", "), domain = "R-base"), "\n", sep = "")
199c197,200
< 	cat("A connection with") # {newline from print() below}
---
> 	 cat(gettext("A connection, but invalid.", domain = "R-base"), "\n", sep = "")
> 	}
>     } else {
> 	cat(gettext("A connection with:", domain = "R-base")) # {newline from print() below}
287c288
<         stop("can only write character objects")
---
>         stop("'writeChar()' can only write character objects")
302c303
<         stop("'timeout' must be NULL or a non-negative number")
---
>         stop("'timeout' argument must be NULL or a non-negative number")
313c314
<     else if(!is.raw(from)) stop("'from' must be raw or character")
---
>     else if(!is.raw(from)) stop("'from' argument must be raw or character")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/contributors.R R/src/library/base/R/contributors.R
23,28c23
<     writeLines(paste0("R is a project which is attempting to provide a ",
<                       "modern piece of\nstatistical software for the ",
<                       "GNU suite of software.\n\n",
<                       "The current R is the result of a collaborative ",
<                       "effort with\ncontributions from all over the ",
<                       "world.\n\n"), outConn)
---
>     writeLines(paste0(gettext("R is a project which is attempting to provide a modern piece of\nstatistical software for the GNU suite of software.\n\nThe current R is the result of a collaborative effort with\ncontributions from all over the world.", domain = "R-base"), "\n\n"), outConn, sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/cut.R R/src/library/base/R/cut.R
25c25
<     if (!is.numeric(x)) stop("'x' must be numeric")
---
>     if (!is.numeric(x)) stop(gettextf("'%s' argument must be numeric", "x"))
40c40
<     if (anyDuplicated(breaks)) stop("'breaks' are not unique")
---
>     if (anyDuplicated(breaks)) stop("values in 'breaks' argument are not unique")
63c63
<         stop("lengths of 'breaks' and 'labels' differ")
---
>         stop("lengths of 'breaks' and 'labels' arguments differ")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/dataframe.R R/src/library/base/R/dataframe.R
71c71
< 	if(isFALSE(make.names)) stop("invalid 'row.names' length")
---
> 	if(isFALSE(make.names)) stop(gettextf("invalid '%s' length", "row.names"))
76c76
<         else if(!isTRUE(make.names)) stop("invalid 'make.names'")
---
>         else if(!isTRUE(make.names)) stop(gettextf("invalid '%s' argument", "make.names"))
87,91c87,90
<             warning(ngettext(length(nonuniq),
<                              sprintf("non-unique value when setting 'row.names': %s",
<                                      sQuote(nonuniq[1L])),
<                              sprintf("non-unique values when setting 'row.names': %s",
<                                      paste(sQuote(nonuniq), collapse = ", "))),
---
>             warning(sprintf(ngettext(length(nonuniq),
>                          "non-unique value when setting 'row.names': %s",
>                          "non-unique values when setting 'row.names': %s", domain = "R-base"),
>                                  paste(sQuote(nonuniq), collapse = ", ")),
93c92
<             stop("duplicate 'row.names' are not allowed")
---
>             stop("duplicate values in 'row.names' are not allowed")
101c100
<         else if(!isTRUE(make.names)) stop("invalid 'make.names'")
---
>         else if(!isTRUE(make.names)) stop(gettextf("invalid '%s' argument", "make.names"))
111c110
<         else if(!isTRUE(make.names)) stop("invalid 'make.names'")
---
>         else if(!isTRUE(make.names)) stop(gettextf("invalid '%s' argument", "make.names"))
183,185c182
<     stop(gettextf("cannot coerce class %s to a data.frame",
<                   sQuote(deparse(class(x))[1L])),
<          domain = NA)
---
>     stop(gettextf("cannot coerce class %s to a \"data.frame\" class", dQuote(class(x))), domain = "R-base")
203c200
<                                   "invalid 'row.names', length %d for a data frame with %d rows"),
---
>                                   "invalid 'row.names', length %d for a data frame with %d rows", domain = "R-base"),
251,252c248,249
< 	    "'row.names' is not a character vector of length %d -- omitting it. Will be an error!",
< 	    nrows), domain = NA)
---
> 	    "'row.names' argument is not a character vector of length %d -- omitting it. Will be an error!",
> 	    nrows), domain = "R-base")
291c288
<         stop('options("stringsAsFactors") not set to TRUE or FALSE')
---
>         stop("'options(\"stringsAsFactors\")' is not set to TRUE or FALSE")
358c355
<                                   "supplied %d row names for %d rows"),
---
>                                   "supplied %d row names for %d rows", domain = "R-base"),
449,451c446
< 		stop(gettextf(
< 		    "mismatch of row names in arguments of 'data.frame\', item %d", i),
< 		    domain = NA)
---
> 		stop(gettextf("mismatch of row names in arguments of 'data.frame()' function, item %d", i), domain = "R-base")
456,459c451
< 		    warning(gettextf(
<                         "some row.names duplicated: %s --> row.names NOT used",
<                         paste(which(duplicated(new)), collapse=",")),
<                         domain = NA)
---
> 		    warning(gettextf("some row.names duplicated: %s --> row.names NOT used", paste(which(duplicated(new)), collapse = ", ")), domain = "R-base")
476,479c468
<                 stop(gettextf("duplicate row.names: %s",
<                               paste(unique(row.names[duplicated(row.names)]),
<                                     collapse = ", ")),
<                      domain = NA)
---
>                 stop(gettextf("duplicate row.names: %s", paste(unique(row.names[duplicated(row.names)]), collapse = ", ")), domain = "R-base")
551,553c540
<         stop(gettextf("arguments imply differing number of rows: %s",
<                       paste(unique(nrows), collapse = ", ")),
<              domain = NA)
---
>         stop(gettextf("arguments imply differing number of rows: %s", paste(unique(nrows), collapse = ", ")), domain = "R-base")
575c562
<                 stop("'row.names' should specify one of the variables")
---
>                 stop("'row.names' argument should specify one of the variables")
594,597c581
<             stop(gettextf("duplicate row.names: %s",
<                           paste(unique(row.names[duplicated(row.names)]),
<                                 collapse = ", ")),
<                  domain = NA)
---
>             stop(gettextf("duplicate row.names: %s", paste(unique(row.names[duplicated(row.names)]), collapse = ", ")), domain = "R-base")
615c599
<         warning("named arguments other than 'drop' are discouraged")
---
>         warning(gettextf("named arguments other than '%s' are discouraged", "drop"))
764c748
<         warning("named arguments other than 'exact' are discouraged")
---
>         warning(gettextf("named arguments other than '%s' are discouraged", "exact"))
827c811
<                     stop("'value' is the wrong length")
---
>                     stop(gettextf("'%s' argument is of the wrong length", "value"))
953c937
<                                       "replacement has %d rows, data has %d"),
---
>                                       "replacement has %d rows, data has %d", domain = "R-base"),
961c945
<                                           "replacement has %d rows, data has %d"),
---
>                                           "replacement has %d rows, data has %d", domain = "R-base"),
969c953
<                                       "replacement has %d items, need %d"),
---
>                                       "replacement has %d items, need %d", domain = "R-base"),
986,988c970,971
<                                       "replacement element %d is a matrix/data frame of %d rows, need %d"),
<                              k, N, n),
<                      domain = NA)
---
>                                       "replacement element %d is a matrix/data frame of %d rows, need %d", domain = "R-base"),
>                              k, N, n), domain = NA)
992c975
<                                       "replacement element %d has %d rows, need %d"),
---
>                                       "replacement element %d has %d rows, need %d", domain = "R-base"),
999c982
<                                          "replacement element %d has %d rows to replace %d rows"),
---
>                                          "replacement element %d has %d rows to replace %d rows", domain = "R-base"),
1013c996
<                                   "%d rows in value to replace %d rows"),
---
>                                   "%d rows in value to replace %d rows", domain = "R-base"),
1019c1002
<                                  "replacement data has %d rows to replace %d rows"),
---
>                                  "replacement data has %d rows to replace %d rows", domain = "R-base"),
1027c1010
<                                  "provided %d variables to replace %d variables"),
---
>                                  "provided %d variables to replace %d variables", domain = "R-base"),
1107c1090
<                                       "replacement has %d rows, data has %d"),
---
>                                       "replacement has %d rows, data has %d", domain = "R-base"),
1115c1098
<                                           "replacement has %d rows, data has %d"),
---
>                                           "replacement has %d rows, data has %d", domain = "R-base"),
1167,1168c1150
<             stop(gettextf("replacing element in non-existent column: %s",
<                           j[is.na(jseq)]), domain = NA)
---
>             stop(gettextf("replacing element in non-existent column: %s", j[is.na(jseq)]), domain = "R-base")
1175,1176c1157
<             stop(gettextf("replacing element in non-existent column: %s",
<                           jseq[jseq > nvars]), domain = NA)
---
>             stop(gettextf("replacing element in non-existent column: %s", jseq[jseq > nvars]), domain = "R-base")
1200c1181
<                                   "replacement has %d rows, data has %d"),
---
>                                   "replacement has %d rows, data has %d", domain = "R-base"),
1208c1189
<                                       "replacement has %d rows, data has %d"),
---
>                                       "replacement has %d rows, data has %d", domain = "R-base"),
1499,1500c1480,1481
< 			     "data frame with 0 columns and %d rows"),
< 		    n), "\n", sep = "")
---
> 			     "data frame with 0 columns and %d rows",
> 		    domain = "R-base"), n), "\n", sep = "")
1504c1485
< 	cat(gettext("<0 rows> (or 0-length row.names)\n"))
---
> 	cat(gettext("<0 rows> (or 0-length row.names)", domain = "R-base"), "\n", sep = "")
1507c1488
<         if(!is.finite(max)) stop("invalid 'max' / getOption(\"max.print\"): ", max)
---
>         if(!is.finite(max)) stop(gettextf("invalid 'max' / getOption(\"max.print\"): %s", max))
1519,1520c1500
< 	    cat(" [ reached 'max' / getOption(\"max.print\") -- omitted",
< 		n - n0, "rows ]\n")
---
> 	    cat(sprintf(ngettext(n - n0, " [ reached 'max' / getOption(\"max.print\") -- omitted %d row ]\n", " [ reached 'max' / getOption(\"max.print\") -- omitted %d rows ]\n", domain = "R-base"), n - n0))
1611,1612c1591
< 	stop("non-numeric variable(s) in data frame: ",
< 	     paste(vnames[!mode.ok], collapse = ", "))
---
> 	stop(ngettext(sum(!mode.ok), "non-numeric variable in data frame: ", "non-numeric variables in data frame: ", domain = "R-base"), paste(vnames[!mode.ok], collapse = ", "), domain = NA)
1635,1636c1614
< 	    stop(gettextf("%s only defined for equally-sized data frames",
<                           sQuote(.Generic)), domain = NA)
---
> 	    stop(gettextf("%s function is only defined for equally-sized data frames", sQuote(.Generic)))
1646,1647c1624
< 		stop(gettextf("list of length %d not meaningful", length(e2)),
<                      domain = NA)
---
> 		stop(gettextf("list of length %d is not meaningful", length(e2)), domain = "R-base")
1663,1664c1640
< 		stop(gettextf("list of length %d not meaningful", length(e1)),
<                      domain = NA)
---
> 		stop(gettextf("list of length %d is not meaningful", length(e1)), domain = "R-base")
1697c1673
<             stop("only defined on a data frame with all numeric variables")
---
>             stop("'summary()' function is only defined on a data frame with all numeric variables")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/dates.R R/src/library/base/R/dates.R
73c73
<     if(missing(origin)) stop("'origin' must be supplied")
---
>     if(missing(origin)) stop(gettextf("'%s' argument must be specified", "origin"))
84,87c84
< 	stop(gettextf("do not know how to convert '%s' to class %s",
< 		      deparse(substitute(x)),
< 		      dQuote("Date")),
< 	     domain = NA)
---
> 	stop(gettextf("do not know how to convert %s to class %s", sQuote(deparse(substitute(x))), dQuote("Date")), domain = "R-base")
96,97c93
< ##     } else stop(gettextf("'%s' is not a \"date\" object",
< ##                          deparse(substitute(x)) ))
---
> ##     } else stop(gettextf("%s is not an object of class %s", sQuote(deparse(substitute(x))), dQuote("Date")))
109,110c105
< ##     } else stop(gettextf("'%s' is not a \"dates\" object",
< ##                          deparse(substitute(x)) ))
---
> ##     } else stop(gettextf("%s is not an object of class %s", sQuote(deparse(substitute(x))), dQuote("Dates")))
126,127c121,124
< 	cat(" [ reached 'max' / getOption(\"max.print\") -- omitted",
< 	    length(x) - max, 'entries ]\n')
---
> 	cat(sprintf(ngettext(as.integer(length(x) - max),
> 			" [ reached 'max' / 'getOption(\"max.print\")' -- omitted %d entry ]",
> 			" [ reached 'max' / 'getOption(\"max.print\")' -- omitted %d entries ]", domain = "R-base"),
> 			length(x) - max), "\n", sep = "")
131c128
< 	cat(class(x)[1L], "of length 0\n")
---
> 	cat(gettextf("class %s of length 0", dQuote(class(x)[1L]), domain = "R-base"), "\n", sep = "", collapse = "")
157c154
<         stop("binary + is not defined for \"Date\" objects")
---
>         stop(gettextf("binary '%s' operator is not defined for objects of class %s", "+", dQuote("Date")))
170,171c167,168
<         stop("can only subtract from \"Date\" objects")
<     if (nargs() == 1L) stop("unary - is not defined for \"Date\" objects")
---
>         stop(gettextf("can only subtract from objects of class %s", dQuote("date")))
>     if (nargs() == 1L) stop(gettextf("unary '%s' operator is not defined for objects of class %s", "-", dQuote("Date")))
175c172
<         stop("can only subtract numbers from \"Date\" objects")
---
>         stop(gettextf("can only subtract numbers from objects of class %s", dQuote("Date")))
182,183c179
<         stop(gettextf("unary %s not defined for \"Date\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("unary '%s' operator is not defined for objects of class %s", .Generic, dQuote("Date")), domain = "R-base")
188,189c184
<         stop(gettextf("%s not defined for \"Date\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("binary '%s' operator is not defined for objects of class %s", .Generic, dQuote("Date")), domain = "R-base")
197,198c192
<     stop(gettextf("%s not defined for \"Date\" objects", .Generic),
<          domain = NA)
---
>     stop(gettextf("'%s' function is not defined for objects of class %s", .Generic, dQuote("Date")), domain = "R-base")
203,204c197
<     if (!ok) stop(gettextf("%s not defined for \"Date\" objects", .Generic),
<                   domain = NA)
---
>     if (!ok) stop(gettextf("'%s' function is not defined for objects of class %s", .Generic, dQuote("Date")), domain = "R-base")
243,245c236,238
<     if (missing(from)) stop("'from' must be specified")
<     if (!inherits(from, "Date")) stop("'from' must be a \"Date\" object")
<         if(length(as.Date(from)) != 1L) stop("'from' must be of length 1")
---
>     if (missing(from)) stop(gettextf("'%s' argument must be specified", "from"))
>     if (!inherits(from, "Date")) stop(gettextf("'%s' argument must be an object of class %s", "from", dQuote("Date")))
>         if(length(as.Date(from)) != 1L) stop(gettextf("'%s' argument must be of length 1", "from"))
247,248c240,241
<         if (!inherits(to, "Date")) stop("'to' must be a \"Date\" object")
<         if (length(as.Date(to)) != 1L) stop("'to' must be of length 1")
---
>         if (!inherits(to, "Date")) stop(gettextf("'%s' argument must be an object of class %s", "to", dQuote("Date")))
>         if (length(as.Date(to)) != 1L) stop(gettextf("'%s' argument must be of length 1", "to"))
253c246
<         if (length(length.out) != 1L) stop("'length.out' must be of length 1")
---
>         if (length(length.out) != 1L) stop(gettextf("'%s' argument must be of length 1", "length.out"))
258c251
<         stop("exactly two of 'to', 'by' and 'length.out' / 'along.with' must be specified")
---
>         stop("exactly two of 'to', 'by' and 'length.out' / 'along.with' arguments must be specified")
266c259
<     if (length(by) != 1L) stop("'by' must be of length 1")
---
>     if (length(by) != 1L) stop(gettextf("'%s' argument must be of length 1", "by"))
275,277c268,269
<         valid <- pmatch(by2[length(by2)],
<                         c("days", "weeks", "months", "quarters", "years"))
<         if(is.na(valid)) stop("invalid string for 'by'")
---
>         valid <- pmatch(by2[length(by2)], c("days", "weeks", "months", "quarters", "years"))
>         if(is.na(valid)) stop("invalid string for 'by' argument")
283,284c275,276
<     } else if(!is.numeric(by)) stop("invalid mode for 'by'")
<     if(is.na(by)) stop("'by' is NA")
---
>     } else if(!is.numeric(by)) stop("invalid mode for 'by' argument")
>     if(is.na(by)) stop(gettextf("'%s' argument is NA", "by"))
332c324
<     if(!inherits(x, "Date")) stop("'x' must be a date-time object")
---
>     if(!inherits(x, "Date")) stop(gettextf("'%s' argument must be an object of class %s", "x", dQuote("Date")))
412c404
<     if(length(origin) != 1L) stop("'origin' must be of length one")
---
>     if(length(origin) != 1L) stop(gettextf("'%s' argument must be of length 1", "origin"))
448c440
<         stop("'lag' and 'differences' must be integers >= 1")
---
>         stop("'lag' and 'differences' arguments must be integers >= 1")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/datetime.R R/src/library/base/R/datetime.R
89,90c89,90
<                     warning(sprintf("%s indicates the non-existent timezone name %s",
<                                     sQuote("timedatectl"), sQuote(tz)),
---
>                     warning(gettextf("%s file indicates the non-existent timezone name %s",
>                                     sQuote("timedatectl"), sQuote(tz), domain = "R-base"),
119,120c119,120
<                     warning(sprintf("%s indicates the non-existent timezone name %s",
<                                     sQuote("/etc/timezone"), sQuote(tz)),
---
>                     warning(gettextf("%s file indicates the non-existent timezone name %s",
>                                     sQuote("/etc/timezone"), sQuote(tz), domain = "R-base"),
165c165
<             message("unable to deduce timezone name from ", sQuote(lt))
---
>             message(gettextf("unable to deduce timezone name from %s", sQuote(lt)))
173,174c173,174
<         warning(sprintf("Your system is mis-configured: %s is not a symlink",
<                         sQuote(lt0)),
---
>         warning(gettextf("Your system is mis-configured: %s is not a symlink",
>                         sQuote(lt0), domain = "R-base"),
182,183c182,183
<                     warning(sprintf("It is strongly recommended to set envionment variable TZ to %s (or equivalent)",
<                                     sQuote(tz)),
---
>                     warning(gettextf("It is strongly recommended to set envionment variable TZ to %s (or equivalent)",
>                                     sQuote(tz), domain = "R-base"),
188,189c188,189
<             warning(sprintf("%s is not identical to any known timezone file",
<                             sQuote(lt0)),
---
>             warning(gettextf("%s is not identical to any known timezone file",
>                             sQuote(lt0), domain = "R-base"),
255c255
<     if(missing(origin)) stop("'origin' must be supplied")
---
>     if(missing(origin)) stop(gettextf("'%s' argument must be specified", "origin"))
266,269c266
<     else stop(gettextf("do not know how to convert '%s' to class %s",
<                        deparse(substitute(x)),
<                        dQuote("POSIXlt")),
<               domain = NA)
---
>     else stop(gettextf("do not know how to convert %s to class %s", sQuote(deparse(substitute(x))), dQuote("POSIXlt")), domain = "R-base")
283,284c280
< ##     } else stop(gettextf("'%s' is not a \"date\" object",
< ##                          deparse(substitute(x)) ))
---
> ##     } else stop(gettextf("%s is not an object of class %s", sQuote(deparse(substitute(x))), dQuote("Date")))
296,297c292
< ##     } else stop(gettextf("'%s' is not a \"dates\" object",
< ##                          deparse(substitute(x)) ))
---
> ##     } else stop(gettextf("%s is not an object of class %s", sQuote(deparse(substitute(x))), dQuote("Dates")))
314c309
<     if(missing(origin)) stop("'origin' must be supplied")
---
>     if(missing(origin)) stop(gettextf("'%s' argument must be specified", "origin"))
325,328c320
<     stop(gettextf("do not know how to convert '%s' to class %s",
<                   deparse(substitute(x)),
<                   dQuote("POSIXct")),
<          domain = NA)
---
>     stop(gettextf("do not know how to convert %s to class %s", sQuote(deparse(substitute(x))), dQuote("POSIXct")), domain = "R-base")
345c337
<     if(!inherits(x, "POSIXlt")) stop("wrong class")
---
>     if(!inherits(x, "POSIXlt")) stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("POSIXlt")))
389c381
<     if(!inherits(x, "POSIXct")) stop("wrong class")
---
>     if(!inherits(x, "POSIXct")) stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("POSIXct")))
406,407c398,401
< 	cat(" [ reached 'max' / getOption(\"max.print\") -- omitted",
< 	    length(x) - max, 'entries ]\n')
---
> 	cat(sprintf(ngettext(as.integer(length(x) - max),
> 	" [ reached 'max' / 'getOption(\"max.print\")' -- omitted %d entry ]",
> 	" [ reached 'max' / 'getOption(\"max.print\")' -- omitted %d entries ]", domain = "R-base"),
> 	    length(x) - max), "\n", sep = "")
411c405
< 	cat(class(x)[1L], "of length 0\n")
---
> 	cat(gettextf("class %s of length 0", dQuote(class(x)[1L]), domain = "R-base"), "\n", sep = "", collapse = "")
444c438
<         stop("binary '+' is not defined for \"POSIXt\" objects")
---
>         stop(gettextf("binary '%s' operator is not defined for objects of class %s", "+", dQuote("POSIXt")))
460,461c454,455
<         stop("can only subtract from \"POSIXt\" objects")
<     if (nargs() == 1L) stop("unary '-' is not defined for \"POSIXt\" objects")
---
>         stop(gettextf("can only subtract from objects of class %s", dQuote("POSIXt")))
>     if (nargs() == 1L) stop(gettextf("unary '%s' operator is not defined for objects of class %s", "-", dQuote("POSIXt")))
465c459
<         stop("can only subtract numbers from \"POSIXt\" objects")
---
>         stop(gettextf("can only subtract numbers from objects of class %s", dQuote("POSIXt")))
473,476c467,468
<         stop(gettextf("unary '%s' not defined for \"POSIXt\" objects",
<                       .Generic), domain = NA)
<     boolean <- switch(.Generic, "<" = , ">" = , "==" = ,
<                       "!=" = , "<=" = , ">=" = TRUE, FALSE)
---
>         stop(gettextf("unary '%s' operator is not defined for objects of class %s", .Generic, dQuote("POSIXt")), domain = "R-base")
>     boolean <- switch(.Generic, "<" = , ">" = , "==" = , "!=" = , "<=" = , ">=" = TRUE, FALSE)
478,479c470
<         stop(gettextf("'%s' not defined for \"POSIXt\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("binary '%s' operator is not defined for objects of class %s", .Generic, dQuote("POSIXt")), domain = "R-base")
488,489c479
<     stop(gettextf("'%s' not defined for \"POSIXt\" objects", .Generic),
<          domain = NA)
---
>     stop(gettextf("'%s' operator is not defined for objects of class %s", .Generic, dQuote("POSIXt")), domain = "R-base")
508,509c498
<         stop(gettextf("'%s' not defined for \"POSIXt\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("'%s' operator is not defined for objects of class %s", .Generic, dQuote("POSIXt")), domain = "R-base")
519,520c508
<         stop(gettextf("'%s' not defined for \"POSIXt\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("'%s' operator is not defined for objects of class %s", .Generic, dQuote("POSIXt")), domain = "R-base")
641,642c629,630
<         if (!is.numeric(tim)) stop("'tim' is not character or numeric")
< 	if (units == "auto") stop("need explicit units for numeric conversion")
---
>         if (!is.numeric(tim)) stop("'tim' argument is not character or numeric")
> 	if (units == "auto") stop("'as.difftime()' function needs explicit 'units' argument for numeric conversion")
644c632
< 	    stop("invalid units specified")
---
> 	    stop("invalid 'units' specified")
661c649
<         stop("invalid units specified")
---
> 	stop("invalid 'units' specified")
681c669,673
<         cat("Time differences in ", attr(x, "units"), "\n", sep = "")
---
>         if(attr(x, "units") == "secs") cat(gettext("Time differences in seconds", domain = "R-base"), "\n", sep = "")
>         else if(attr(x, "units") == "mins") cat(gettext("Time differences in minutes", domain = "R-base"), "\n", sep = "")
>         else if(attr(x, "units") == "hours") cat(gettext("Time differences in hours", domain = "R-base"), "\n", sep = "")
>         else if(attr(x, "units") == "days") cat(gettext("Time differences in days", domain = "R-base"), "\n", sep = "")
>         else cat(gettext("Time differences in weeks", domain = "R-base"), "\n", sep = "")
685,688c677,683
<     else
<         cat("Time difference of ", format(unclass(x), digits = digits), " ",
<             attr(x, "units"), "\n", sep = "")
< 
---
>     else {
>         if(attr(x, "units") == "secs") cat(gettextf("Time difference of %s seconds", format(unclass(x), digits = digits), domain = "R-base"), "\n", sep = "")
>         else if(attr(x, "units") == "mins") cat(gettextf("Time difference of %s minutes", format(unclass(x), digits = digits), domain = "R-base"), "\n", sep = "")
>         else if(attr(x, "units") == "hours") cat(gettextf("Time difference of %s hours", format(unclass(x), digits = digits), domain = "R-base"), "\n", sep = "")
>         else if(attr(x, "units") == "days") cat(gettextf("Time difference of %s days", format(unclass(x), digits = digits), domain = "R-base"), "\n", sep = "")
>         else cat(gettextf("Time difference of %s weeks", format(unclass(x), digits = digits), domain = "R-base"), "\n", sep = "")
>     }
708,709c703
<                stop(gettextf("unary '%s' not defined for \"difftime\" objects",
<                              .Generic), domain = NA, call. = FALSE)
---
>                stop(gettextf("unary '%s' operator is not defined for objects of class %s", .Generic, dQuote("difftime")), domain = "R-base", call. = FALSE)
739,740c733
<         stop(gettextf("'%s' not defined for \"difftime\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("'%s' operator is not defined for objects of class %s", .Generic, dQuote("difftime")), domain = "R-base")
748c741
<         stop("both arguments of * cannot be \"difftime\" objects")
---
>         stop(gettextf("both arguments of '%s' operator cannot be objects of class %s", "*", dQuote("difftime")))
757c750
<         stop("second argument of / cannot be a \"difftime\" object")
---
>         stop(gettextf("second argument of '/' operator cannot be an object of class %s", dQuote("difftime")))
771,772c764
<            stop(gettextf("'%s' not defined for \"difftime\" objects", .Generic),
<                 domain = NA))
---
>            stop(gettextf("'%s' operator is not defined for objects of class %s", .Generic, dQuote("difftime")), domain = "R-base"))
790,791c782
<         stop(gettextf("'%s' not defined for \"difftime\" objects", .Generic),
<              domain = NA)
---
>         stop(gettextf("'%s' operator is not defined for objects of class %s", .Generic, dQuote("difftime")), domain = "R-base")
844,845c835,836
<     if (missing(from)) stop("'from' must be specified")
<     if (!inherits(from, "POSIXt")) stop("'from' must be a \"POSIXt\" object")
---
>     if (missing(from)) stop(gettextf("'%s' argument must be specified", "from"))
>     if (!inherits(from, "POSIXt")) stop(gettextf("'%s' argument must be an object of class %s", "from", dQuote("POSIXt")))
847c838
<     if(length(cfrom) != 1L) stop("'from' must be of length 1")
---
>     if(length(cfrom) != 1L) stop(gettextf("'%s' argument must be of length 1", "from"))
850,851c841,842
<         if (!inherits(to, "POSIXt")) stop("'to' must be a \"POSIXt\" object")
<         if (length(as.POSIXct(to)) != 1) stop("'to' must be of length 1")
---
>         if (!inherits(to, "POSIXt")) stop(gettextf("'%s' argument must be an object of class %s", "to", dQuote("POSIXt")))
>         if (length(as.POSIXct(to)) != 1) stop(gettextf("'%s' argument must be of length 1", "to"))
856c847
<         if (length(length.out) != 1L) stop("'length.out' must be of length 1")
---
>         if (length(length.out) != 1L) stop(gettextf("'%s' argument must be of length 1", "length.out"))
872c863
<     if (length(by) != 1L) stop("'by' must be of length 1")
---
>     if (length(by) != 1L) stop(gettextf("'%s' argument must be of length 1", "by"))
880,884c871,873
<             stop("invalid 'by' string")
<         valid <- pmatch(by2[length(by2)],
<                         c("secs", "mins", "hours", "days", "weeks",
<                           "months", "years", "DSTdays", "quarters"))
<         if(is.na(valid)) stop("invalid string for 'by'")
---
>             stop("invalid string for 'by' argument")
>         valid <- pmatch(by2[length(by2)], c("secs", "mins", "hours", "days", "weeks", "months", "years", "DSTdays", "quarters"))
>         if(is.na(valid)) stop("invalid string for 'by' argument")
890,891c879,880
<     } else if(!is.numeric(by)) stop("invalid mode for 'by'")
<     if(is.na(by)) stop("'by' is NA")
---
>     } else if(!is.numeric(by)) stop("invalid mode for 'by' argument")
>     if(is.na(by)) stop(gettextf("'%s' argument is NA", "by"))
946c935
<     if(!inherits(x, "POSIXt")) stop("'x' must be a date-time object")
---
>     if(!inherits(x, "POSIXt")) stop(gettextf("'%s' argument must be an object of class %s", "x", dQuote("POSIXt")))
1030c1019
<     if(length(origin) != 1L) stop("'origin' must be of length one")
---
>     if(length(origin) != 1L) stop(gettextf("'%s' argument must be of length 1", "origin"))
1247c1236
<         stop("'lag' and 'differences' must be integers >= 1")
---
>         stop("'lag' and 'differences' arguments must be integers >= 1")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/dcf.R R/src/library/base/R/dcf.R
27c27
<         stop("'file' must be a character string or connection")
---
>         stop(gettextf("'%s' argument must be a character string or connection", "file"))
89,91c89
<         stop(gettextf("Invalid DCF format.\nRegular lines must have a tag.\nOffending lines start with:\n%s",
<                       paste0("  ", lines, collapse = "\n")),
<              domain = NA)
---
>         stop(gettextf("Invalid DCF format.\nRegular lines must have a tag.\nOffending lines start with:\n%s", paste0("  ", lines, collapse = "\n")), domain = "R-base")
115,117c113
<         stop(gettextf("Invalid DCF format.\nContinuation lines must not start a record.\nOffending lines start with:\n%s",
<                       paste0("  ", lines, collapse = "\n")),
<              domain = NA)
---
>         stop(gettextf("Invalid DCF format.\nContinuation lines must not start a record.\nOffending lines start with:\n%s", paste0("  ", lines, collapse = "\n")), domain = "R-base")
160c156
<         stop("'file' must be a character string or connection")
---
>         stop(gettextf("'%s' argument must be a character string or connection", "file"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/det.R R/src/library/base/R/det.R
36c36
<         stop("'x' must be a square matrix")
---
>         stop(gettextf("'%s' argument must be a square matrix", "x"))
44c44
<         stop("'determinant' not currently defined for complex matrices")
---
>         stop("'determinant()' function not currently defined for complex matrices")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/diag.R R/src/library/base/R/diag.R
38c38
<         stop("'x' is an array, but not one-dimensional.")
---
>         stop(gettextf("'%s' argument is an array, but not one-dimensional.", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/diff.R R/src/library/base/R/diff.R
27c27
< 	stop("'lag' and 'differences' must be integers >= 1")
---
> 	stop("'lag' and 'differences' arguments must be integers >= 1")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/duplicated.R R/src/library/base/R/duplicated.R
52c52
<              domain = NA)
---
>              domain = "R-base")
89c89
<              domain = NA)
---
>              domain = "R-base")
138c138
<              domain = NA)
---
>              domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/dynload.R R/src/library/base/R/dynload.R
52c52
<                       dQuote("DllInfoReference")),
---
>                       dQuote("DllInfoReference"), domain = "R-base"),
59c59
< 	    msg <- paste("no such symbol", id)
---
> 	    stop(gettextf("no such symbol %s", id), domain = "R-base")
61,62c61
< 		msg <- paste(msg, "in package", pkgName)
< 	    stop(msg, domain = NA)
---
> 		stop(gettextf("no such symbol %s in package %s", id, pkgName), domain = "R-base")
89,90c88
<         stop(gettextf("No DLL currently loaded with name or path %s", sQuote(dll)),
<              domain = NA)
---
>         stop(gettextf("No DLL currently loaded with name or path %s", sQuote(dll)), domain = "R-base")
94c92
<         warning(gettextf("multiple DLLs match '%s'. Using '%s'",
---
>         warning(gettextf("multiple DLL files match '%s'. Using file '%s'",
96c94
< 		domain = NA)
---
> 		domain = "R-base")
106,108c104
<         stop(gettextf("must specify DLL via a %s object. See getLoadedDLLs()",
<                       dQuote("DLLInfo")),
<              domain = NA)
---
>         stop(gettextf("must specify DLL file via an object of class %s. See 'getLoadedDLLs()' function", dQuote("DLLInfo")), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/eigen.R R/src/library/base/R/eigen.R
48,49c48,49
<     if (!n) stop("0 x 0 matrix")
<     if (n != ncol(x)) stop("non-square matrix in 'eigen'")
---
>     if (!n) stop(gettextf("'%s' argument is a 0 x 0 matrix", "x"))
>     if (n != ncol(x)) stop("non-square matrix in 'eigen()' function")
51c51
<     if(is.na(n)) stop("invalid nrow(x)")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(x)"))
54c54
<     if (!all(is.finite(x))) stop("infinite or missing values in 'x'")
---
>     if (!all(is.finite(x))) stop(gettextf("infinite or missing values in '%s' argument", "x"))
76c76
<     cat("eigen() decomposition\n")
---
>     cat(gettext("eigenvalues and eigenvectors decomposition", domain = "R-base"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/factor.R R/src/library/base/R/factor.R
55c55
< 		 domain = NA)
---
> 		 domain = "R-base")
66c66
<         return("factor levels must be \"character\"")
---
>         return(gettext("factor levels must be \"character\"", domain = "R-base"))
68c68
< 	return(sprintf("duplicated level [%d] in factor", d))
---
> 	return(gettextf("duplicated level [%d] in factor", d, domain = "R-base"))
169c169
<         T0 <- "Levels: "
---
>         T0 <- gettext("Levels: ", domain = "R-base")
180c180
<             paste(if(drop)c(lev[1L:max(1,maxl-1)],"...",if(maxl > 1) lev[n])
---
>             paste(if(drop)c(lev[seq_len(max(1,maxl-1))],"...",if(maxl > 1) lev[n])
191c191
<     stop(gettextf("%s not meaningful for factors", sQuote(.Generic)))
---
>     stop(gettextf("%s function is not meaningful for factors", sQuote(.Generic)))
195c195
<     stop(gettextf("%s not meaningful for factors", sQuote(.Generic)))
---
>     stop(gettextf("%s function is not meaningful for factors", sQuote(.Generic)))
201c201
< 	warning(gettextf("%s not meaningful for factors", sQuote(.Generic)))
---
> 	warning(gettextf("%s function is not meaningful for factors", sQuote(.Generic)))
272c272
< 	warning("invalid factor level, NA generated")
---
> 	warning("invalid factor level, NA value generated")
297c297
< 	warning("invalid factor level, NA generated")
---
> 	warning("invalid factor level, NA value generated")
319,320c319
< 	warning(sprintf("'%s' is not meaningful for ordered factors",
<                         .Generic))
---
> 	warning(gettextf("'%s' operator is not meaningful for ordered factors", .Generic))
361,362c360
< 	stop(gettextf("'%s' not defined for ordered factors", .Generic),
< 	     domain = NA)
---
> 	stop(gettextf("'%s' operator is not defined for ordered factors", .Generic), domain = "R-base")
368,369c366
< 	stop(gettextf("'%s' is only meaningful for ordered factors if all arguments have the same level sets",
< 		      .Generic))
---
> 	stop(gettextf("'%s' operator is only meaningful for ordered factors if all arguments have the same level sets", .Generic))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/files.R R/src/library/base/R/files.R
39c39
<     function (..., header = rep("", nfiles), title = "R Information",
---
>     function (..., header = rep("", nfiles), title = gettext("R Information", domain = "R-base"),
121c121
<         warning("'recursive' will be ignored as 'to' is not a single existing directory")
---
>         warning("'recursive' argument will be ignored as 'to' argument is not a single existing directory")
198c198
<         stop("'package' must be of length 1")
---
>         stop(gettextf("'%s' argument must be of length 1", "package"))
251c251
<         stop("invalid 'path' argument")
---
>         stop(gettextf("invalid '%s' argument", "path"))
253c253
<     if (anyNA(time))  stop("invalid 'time' argument")
---
>     if (anyNA(time))  stop(gettextf("invalid '%s' argument", "time"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/findInt.R R/src/library/base/R/findInt.R
27c27
< 	stop("'vec' must be sorted non-decreasingly and not contain NAs")
---
> 	stop("'vec' argument must be sorted non-decreasingly and not contain NA values")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/formals.R R/src/library/base/R/formals.R
34c34
<     if(!is.function(fun)) warning("'fun' is not a function") # TODO[2017]: stop()
---
>     if(!is.function(fun)) warning(gettextf("'%s' argument is not a function", "fun")) # TODO[2017]: stop()
45c45
<     if(!is.function(fun)) warning("'fun' is not a function") # TODO[2017]: stop()
---
>     if(!is.function(fun)) warning(gettextf("'%s' argument is not a function", "fun")) # TODO[2017]: stop()
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/format.R R/src/library/base/R/format.R
130c130
< 	    warning("class of 'x' was discarded")
---
> 	    warning("class of 'x' argument was discarded")
135c135
<     if(length(flag) != 1) stop("'flag' must be a string, i.e., of length 1")
---
>     if(length(flag) != 1) stop(gettextf("'%s' argument must be a string, i.e., of length 1", "flag"))
155,156c155
<     else if (mode != "character")
<         stop("'mode' must be \"double\" (\"real\"), \"integer\" or \"character\"")
---
>     else if (mode != "character") stop("'mode' argument must be \"double\" (\"real\"), \"integer\" or \"character\"")
159c158
< 	    warning('coercing argument to "character" for format="s"')
---
> 	    warning("coercing argument to an object of class \"character\" for 'format=\"s\"' option")
173c172
< 	else stop('\'format\' must be one of {"f","e","E","g","G", "fg", "s"}')
---
> 	else stop("'format' argument must be one of {\"f\",\"e\",\"E\",\"g\",\"G\",\"fg\",\"s\"}")
188,189c187
< 	maxDigits <- if(format != "f") 50L else
< 	    ceiling(-(.Machine$double.neg.ulp.digits + .Machine$double.min.exp) / log2(10))
---
> 	maxDigits <- if(format != "f") 50L else ceiling(-(.Machine$double.neg.ulp.digits + .Machine$double.min.exp) / log2(10))
191c189
<             warning(gettextf("'digits' reduced to %d", maxDigits), domain = NA)
---
>             warning(gettextf("'digits' argument reduced to %d", maxDigits), domain = "R-base")
248c246
< 	warning("corrupt data frame: columns will be truncated or padded with NAs")
---
> 	warning("corrupt data frame: columns will be truncated or padded with NA values")
297c295
< 	if(length(zero.print) > 1L) stop("'zero.print' has length > 1")
---
> 	if(length(zero.print) > 1L) stop(gettextf("'%s' argument has length > 1", "zero.print"))
301c299
< 	    stop("'zero.print' must be character, logical or NULL")
---
> 	    stop(gettextf("'%s' argument must be character, logical or NULL", "zero.print"))
341,342c339,340
<         warning(gettextf("'big.mark' and 'decimal.mark' are both '%s', which could be confusing",
<                          big.mark), domain = NA)
---
>         warning(gettextf("'big.mark' and 'decimal.mark' arguments are both set to '%s', which could be confusing",
>                          big.mark), domain = "R-base")
390c388
<         stop("'input.d.mark' has no characters")
---
>         stop(gettextf("'%s' argument has no characters", "input.d.mark"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/frametools.R R/src/library/base/R/frametools.R
26c26
<         if(!is.logical(r)) stop("'subset' must be logical")
---
>         if(!is.logical(r)) stop(gettextf("'%s' argument must be logical", "subset"))
45c45
<     if(!is.logical(subset)) stop("'subset' must be logical")
---
>     if(!is.logical(subset)) stop(gettextf("'%s' argument must be logical", "subset"))
54c54
< 	nl <- as.list(1L:ncol(x))
---
> 	nl <- as.list(seq_len(ncol(x)))
59c59
<     else if(!is.logical(subset)) stop("'subset' must be logical")
---
>     else if(!is.logical(subset)) stop(gettextf("'%s' argument must be logical", "subset"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/getenv.R R/src/library/base/R/getenv.R
26c26
< 	for (i in 1L:LEN) {
---
> 	for (i in seq_len(LEN)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/grep.R R/src/library/base/R/grep.R
254,256c254
<         stop(gettextf("%s and %s must have the same length",
<                       sQuote("x"), sQuote("m")),
<              domain = NA)
---
>         stop(gettextf("'%s' and '%s' arguments must have the same length", "x", "m", domain = "R-base"), domain = NA)
303c301
<                                       sQuote("invert = NA")),
---
>                                       sQuote("invert = NA"), domain = "R-base"),
329c327
<                                       sQuote("invert = TRUE")),
---
>                                       sQuote("invert = TRUE"), domain = "R-base"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/jitter.R R/src/library/base/R/jitter.R
28c28
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/kappa.R R/src/library/base/R/kappa.R
60c60
< 	    warning(gettextf("norm '%s' currently always uses exact = FALSE",
---
> 	    warning(gettextf("norm '%s' currently always uses 'exact = FALSE' option",
88c88
<         if(is.na(p)) stop("invalid nrow(x)")
---
>         if(is.na(p)) stop(gettextf("invalid '%s' value", "nrow(x)"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/kronecker.R R/src/library/base/R/kronecker.R
46c46
<     dp <- as.vector(t(matrix(1L:(2*length(dX)), ncol = 2)[, 2:1]))
---
>     dp <- as.vector(t(matrix(seq_len((2*length(dX))), ncol = 2)[, 2:1]))
67c67
< 	for (i in 1L:k) {
---
> 	for (i in seq_len(k)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/lazyload.R R/src/library/base/R/lazyload.R
39c39
<         if (! is.character(file)) halt("bad file name")
---
>         if (! is.character(file)) halt(gettext("invalid file name"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/library.R R/src/library/base/R/library.R
74c74
<                            call. = FALSE, domain = NA))
---
>                            call. = FALSE, domain = "R-base"))
83c83
<              call. = FALSE, domain = NA)
---
>              call. = FALSE, domain = "R-base")
88,90c88
<             stop(gettextf("package %s has not been installed properly\n",
<                           sQuote(pkgname)),
<                  call. = FALSE, domain = NA)
---
>             stop(gettextf("package %s has not been installed properly", sQuote(pkgname)), call. = FALSE, domain = "R-base")
95,96c93
<             stop(gettextf("package %s was built before R 3.0.0: please re-install it",
<                           sQuote(pkgname)), call. = FALSE, domain = NA)
---
>             stop(gettextf("package %s was built before R 3.0.0: please re-install it", sQuote(pkgname)), call. = FALSE, domain = "R-base")
113,115c110
<                         stop(gettextf("This is R %s, package %s needs %s %s",
<                                       current, sQuote(pkgname), dep$op, target),
<                              call. = FALSE, domain = NA)
---
>                         stop(gettextf("This is R %s, package %s needs %s %s", current, sQuote(pkgname), dep$op, target), call. = FALSE, domain = "R-base")
120,122c115
<             warning(gettextf("package %s was built under R version %s",
<                              sQuote(pkgname), as.character(built$R)),
<                     call. = FALSE, domain = NA)
---
>             warning(gettextf("package %s was built under R version %s", sQuote(pkgname), as.character(built$R)), call. = FALSE, domain = "R-base")
131,133c124
< ##                 stop(gettextf("package %s was built for %s",
< ##                               sQuote(pkgname), platform),
< ##                      call. = FALSE, domain = NA)
---
> ##                stop(gettextf("package %s was built for platform %s", sQuote(pkgname), platform), call. = FALSE, domain = "R-base")
139,141c130
<                 stop(gettextf("package %s was built for %s",
<                               sQuote(pkgname), platform),
<                      call. = FALSE, domain = NA)
---
>                 stop(gettextf("package %s was built for platform %s", sQuote(pkgname), platform), call. = FALSE, domain = "R-base")
147,149c136
<             stop(gettextf("package %s is not installed for 'arch = %s'",
<                           sQuote(pkgname), r_arch),
<                  call. = FALSE, domain = NA)
---
>             stop(gettextf("package %s is not installed for 'arch = %s'", sQuote(pkgname), r_arch), call. = FALSE, domain = "R-base")
252c239
<                                     emsg)
---
>                                     emsg, domain = "R-base")
256c243
<                                         class = "packageConflictError"))
---
>                                         class = "packageConflictError"), domain = NA)
262c249
<                                                sQuote(package)), domain = NA)
---
>                                                sQuote(package), domain = "R-base"), domain = NA)
275c262
< 	message("'verbose' and 'quietly' are both true; being verbose then ..")
---
> 	message("'verbose' and 'quietly' arguments are both true; being verbose then ..")
284c271
<             stop("'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
306c293
<                     gettextf("there is no package called %s", sQuote(package))
---
> 	            sprintf(ngettext(1L, "there is no package called %s", "there are no packages called %s", domain = "R-base"), paste(sQuote(package), collapse = ", "))
308c295
<                     gettext("no library trees found in 'lib.loc'")
---
>                     gettext("no library trees found in 'lib.loc'", domain = "R-base")
318,319c305
<             	stop(gettextf("%s is not a valid installed package",
<                               sQuote(package)), domain = NA)
---
>             	stop(gettextf("%s package is not a valid installed package", sQuote(package), domain = "R-base"), domain = NA)
330,331c316
<                     warning(gettextf("%s not found on search path, using pos = 2",
<                                      sQuote(pos)), domain = NA)
---
>                     warning(gettextf("%s package was not found on search path, using 'pos = 2'", sQuote(pos)), domain = "R-base")
372,373c357,358
< 					      paste("Error in", deparse(cc)[1L], ": ")
< 					  else "Error : "
---
> 					      gettext("Error in command '%s': ", paste(deparse(cc)[1L], collapse = "", sep = ""), domain = "R-base")
> 					  else gettext("Error: ", domain = "R-base")
376c361
< 						   paste0(P, conditionMessage(e),"\n")),
---
> 						   paste0(P, conditionMessage(e),"\n"), domain = "R-base"),
386,389c371,375
< 		    P <- if(!is.null(cc <- conditionCall(e)))
< 			     paste(" in", deparse(cc)[1L]) else ""
< 		    msg <- gettextf("package or namespace load failed for %s%s:\n %s",
< 				    sQuote(package), P, conditionMessage(e))
---
> 		    if(!is.null(cc <- conditionCall(e))) {
> 		      msg <- gettextf("package or namespace load failed for %s in %s:\n %s", sQuote(package), paste(deparse(cc)[1L], collapse = "", sep = ""),  conditionMessage(e), domain = "R-base")
> 		    } else {
> 		      msg <- gettextf("package or namespace load failed for %s:\n %s", sQuote(package), conditionMessage(e), domain = "R-base")
> 		    }
391c377
< 			message(paste("Error:", msg), domain = NA) # returns NULL
---
> 			message(gettext("Error:", domain = "R-base"), msg, domain = NA) # returns NULL
420,421c406
< 		stop(gettextf("package %s does not have a namespace and should be re-installed",
< 			      sQuote(package)), domain = NA)
---
> 		stop(gettextf("package %s does not have a namespace and should be re-installed", sQuote(package)), domain = "R-base")
424,425c409
<             warning(gettextf("package %s already present in search()",
<                              sQuote(package)), domain = NA)
---
>             warning(gettextf("package %s already present in 'search()'", sQuote(package)), domain = "R-base")
448,449c432
<                         warning("'DESCRIPTION' has an 'Encoding' field and re-encoding is not possible",
<                                 call. = FALSE)
---
>                         warning("'DESCRIPTION' file has an 'Encoding' field and re-encoding is not possible", call. = FALSE)
505c488
<                             warning("'DESCRIPTION' has an 'Encoding' field and re-encoding is not possible", call.=FALSE)
---
>                             warning("'DESCRIPTION' file has an 'Encoding' field and re-encoding is not possible", call. = FALSE)
510c493
<                     title <- " ** No title available ** "
---
>                     title <- gettext(" ** No title available ** ")
518,519c501
<             pkglist <- paste(sQuote(nopkgs), collapse = ", ")
<             msg <- sprintf(ngettext(length(nopkgs),
---
>             warning(sprintf(ngettext(length(nopkgs),
521,523c503,504
<                                     "libraries %s contain no packages"),
<                            pkglist)
<             warning(msg, domain=NA)
---
>                                     "libraries %s contain no packages", domain = "R-base"),
>                            paste(sQuote(nopkgs), collapse = ", ")), domain = NA)
548c529
<         c(gettextf("%sPackages in library %s:\n", sep, sQuote(lib)),
---
>         c(paste(sep, gettextf("Packages in library %s:\n", sQuote(lib)), sep = "", collapse = ""),
562c543
<         message("no packages found")
---
>         message("no packages were found")
596c577
<             stop(gettextf("DLL %s not found: maybe not installed for this architecture?", sQuote(chname)), domain = NA)
---
>             stop(gettextf("DLL %s was not found: maybe not installed for this architecture?", sQuote(chname)), domain = "R-base")
598,599c579
<             stop(gettextf("shared object %s not found", sQuote(chname1)),
<                  domain = NA)
---
>             stop(gettextf("shared object %s was not found", sQuote(chname1)), domain = "R-base")
606,607c586
<                 message(gettextf("DLL %s already loaded", sQuote(chname1)),
<                         domain = NA)
---
>                 message(gettextf("DLL %s is already loaded", sQuote(chname1)), domain = "R-base")
609,610c588
<                 message(gettextf("shared object '%s' already loaded",
<                                  sQuote(chname1)), domain = NA)
---
>                 message(gettextf("shared object %s is already loaded", sQuote(chname1)), domain = "R-base")
628c606
<         message(gettextf("now dyn.load(\"%s\") ...", file), domain = NA)
---
>         message(gettextf("now dyn.load(\"%s\") ...", file), domain = "R-base")
658,659c636
<             stop(gettextf("DLL %s was not loaded", sQuote(chname1)),
<                  domain = NA)
---
>             stop(gettextf("DLL %s was not loaded", sQuote(chname1)), domain = "R-base")
661,662c638
<             stop(gettextf("shared object %s was not loaded", sQuote(chname1)),
<                  domain = NA)
---
>             stop(gettextf("shared object %s was not loaded", sQuote(chname1)), domain = "R-base")
666c642
<             stop(gettextf("DLL %s not found", sQuote(chname1)), domain = NA)
---
>             stop(gettextf("DLL %s was not found", sQuote(chname1)), domain = "R-base")
668,669c644
<             stop(gettextf("shared object '%s' not found", sQuote(chname1)),
<                  domain = NA)
---
>             stop(gettextf("shared object %s was not found", sQuote(chname1)), domain = "R-base")
671c646
<         message(gettextf("now dyn.unload(\"%s\") ...", file), domain = NA)
---
>         message(gettextf("now running dyn.unload(\"%s\") ...", file), domain = "R-base")
688,689c663
<             packageStartupMessage(gettextf("Loading required package: %s",
<                                            package), domain = NA)
---
>             packageStartupMessage(gettextf("Loading required package: %s", sQuote(package), domain = "R-base"))
703,704c677
<                 cat("Failed with error:  ",
<                     sQuote(msg), "\n", file = stderr(), sep = "")
---
>                 cat(gettextf("'library()' function failed with error: %s", sQuote(msg), domain = "R-base"), "\n", file = stderr(), sep = "")
750,751c723,724
<                                          "packages %s are not loaded"),
<                                 paste(package[m], collapse=", ")),
---
>                                          "packages %s are not loaded", domain = "R-base"),
>                                 paste(sQuote(package[m]), collapse = ", ")),
837c810
< 		warning(gettextf("package %s found more than once, using the first from\n  %s",
---
> 		warning(gettextf("package %s was found more than once. Using the first from\n  %s",
840c813
< 			domain = NA)
---
> 			domain = "R-base")
850,851c823
<             warning(gettextf("there is no package called %s", sQuote(pkg)),
<                     domain = NA)
---
>             warning(sprintf(ngettext(1L, "there is no package called %s", "there are no packages called %s", domain = "R-base"), paste(sQuote(pkg), collapse = ", ")), domain = NA)
859,864c831,833
<     if(length(package) == 1L)
<         msg <- gettextf("there is no package called %s", sQuote(package))
<     else
<         msg <- paste0(ngettext(length(package),
<                                "there is no package called",
<                                "there are no packages called"), " ",
---
>         msg <- sprintf(ngettext(length(package),
>                                "there is no package called %s",
>                                "there are no packages called %s", domain = "R-base"),
873c842
<     if(!inherits(x, "packageInfo")) stop("wrong class")
---
>     if(!inherits(x, "packageInfo")) stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("packageInfo")))
887c856
<     c(gettextf("\n\t\tInformation on package %s", sQuote(x$name)),
---
>     c("\n\t\t", gettextf("Information on package %s", sQuote(x$name), domain = "R-base"),
901c870
<               gettextf("Documentation for package %s", sQuote(x$name)))
---
>               gettextf("Documentation for package %s", sQuote(x$name), domain = "R-base"))
933,935c902
<             stop(gettextf("package %s required by %s could not be found",
<                           sQuote(pkg), sQuote(pkgname)),
<                  call. = FALSE, domain = NA)
---
>             stop(gettextf("package %s required by package %s could not be found", sQuote(pkg), sQuote(pkgname)), call. = FALSE, domain = "R-base")
954,955c921,923
< 		msg <- if (attached)
< 			   "package %s %s is loaded, but %s %s is required by %s"
---
>                 if (attached)
>                     stop(gettextf("package %s version %s is loaded, but package %s version %s is required by package %s", sQuote(pkg), current, dep$op,
>                               target, sQuote(pkgname)), call. = FALSE, domain = "R-base")
957,961c925,926
< 			   "package %s %s was found, but %s %s is required by %s"
<                 stop(gettextf(msg, sQuote(pkg), current, dep$op,
<                               target, sQuote(pkgname)),
<                      call. = FALSE, domain = NA)
<             }
---
>                     stop(gettextf("package %s version %s was found, but package %s version %s is required by package %s", sQuote(pkg), current, dep$op,
>                               target, sQuote(pkgname)), call. = FALSE, domain = "R-base")            }
966,967c931,932
<                 packageStartupMessage(gettextf("Loading required package: %s",
<                                                pkg), domain = NA)
---
>                 packageStartupMessage(gettextf("Loading required package: %s", sQuote(pkg), domain = "R-base"))
> 
970,971c935
<                 stop(gettextf("package %s could not be loaded", sQuote(pkg)),
<                      call. = FALSE, domain = NA)
---
>                 stop(gettextf("package %s could not be loaded", sQuote(pkg)), call. = FALSE, domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/load.R R/src/library/base/R/load.R
34,40c34,37
<             ## Not a version 2 or higher magic number, so try the pre-R-1.4.0 code
<             warning(sprintf("file %s has magic number '%s'\n",
<                             sQuote(basename(file)),
<                             gsub("[\n\r]*", "", magic)),
<                     "  ",
<                     "Use of save versions prior to 2 is deprecated",
<                     domain = NA, call. = FALSE)
---
>             ## Not a version 2 or higher magic number, so try the pre-R-1.4.0 codea
> 	    mn <- gsub("[\n\r]*", "", magic)
>             warning(gettextf("file %s has magic number '%s'", sQuote(basename(file)), mn), "\n  ",
> 		"Use of save versions prior to 2 is deprecated", sep = "", domain = "R-base", call. = FALSE)
46c43
<     } else stop("bad 'file' argument")
---
>     } else stop(gettextf("invalid '%s' argument", "file"))
49c46
<     	cat("Loading objects:\n")
---
>     	cat(gettext("Loading objects:", domain = "R-base"), "\n", sep = "")
55c52
<                  file = stop("'file' must be specified"),
---
>                  file = stop(gettextf("'%s' argument must be specified", "file")),
69c66
<         warning("Use of save versions prior to 2 is deprecated", domain = NA)
---
>         warning("Use of save versions prior to 2 is deprecated", domain = "R-base")
73c70
< 	warning("nothing specified to be save()d")
---
> 	warning("nothing specified to be saved")
85,87c82,83
<                                       "object %s not found",
<                                       "objects %s not found"
<                                       ),
---
>                                       "object %s was not found",
>                                       "objects %s were not found", domain = "R-base"),
93c89
< 	    if(!nzchar(file)) stop("'file' must be non-empty string")
---
> 	    if(!nzchar(file)) stop(gettextf("'%s' argument must be non-empty character string", "file"))
96c92
< 		    stop("'compress' must be logical or character")
---
> 		    stop(gettextf("'%s' argument must be logical or character", "compress"))
116c112
< 			  stop(gettextf("'compress = \"%s\"' is invalid", compress)))
---
> 			  stop(gettextf("'compress = \"%s\"' option is invalid", compress)))
121c117
< 	else stop("bad file argument")
---
> 	else stop(gettextf("invalid '%s' argument", "file"))
132c128
<         stop("'file' must be non-empty string")
---
>         stop(gettextf("'%s' argument must be non-empty character string", "file"))
164,165c160
<             stop(gettextf("image could not be renamed and is left in %s",
<                           outfile), domain = NA)
---
>             stop(gettextf("image could not be renamed and is left in %s", outfile), domain = "R-base")
175c170
< 	    message("[Previously saved workspace restored]", "\n")
---
> 	    message("[Previously saved workspace restored]", "\n", sep = "")
190,191c185
<     message(gettextf("Attempting to load the environment %s", sQuote(info)),
<             domain = NA)
---
>     message(gettextf("Attempting to load the environment %s", sQuote(info)), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/locales.R R/src/library/base/R/locales.R
24c24
<     if(is.na(category)) stop("invalid 'category' argument")
---
>     if(is.na(category)) stop(gettextf("invalid '%s' argument", "category"))
33c33
<     if(is.na(category)) stop("invalid 'category' argument")
---
>     if(is.na(category)) stop(gettextf("invalid '%s' argument", "category"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/mapply.R R/src/library/base/R/mapply.R
57,58c57,58
< 	stop(sQuote("FUN"), " may not have argument(s) named ",
< 	     paste(sQuote(arg.names[collisions]), collapse = ", "))
---
> 	stop(sprintf(ngettext(length(collisions), "%s function may not have argument named %s", "%s function may not have arguments named %s", domain = "R-base"),
> 	     sQuote("FUN"), paste(sQuote(arg.names[collisions]), collapse = ", ")), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/match.R R/src/library/base/R/match.R
50c50
< 	stop("'arg' must be NULL or a character vector")
---
> 	stop(gettextf("'%s' argument must be NULL or a character vector", "arg"))
54,55c54,55
<         if(length(arg) > 1L) stop("'arg' must be of length 1")
<     } else if(length(arg) == 0L) stop("'arg' must be of length >= 1")
---
>         if(length(arg) > 1L) stop(gettextf("'%s' argument must be of length 1", "arg"))
>     } else if(length(arg) == 0L) stop(gettextf("'%s' argument must be of length greater or equal to 1", "arg"))
60,62c60,61
< 	stop(gettextf("'arg' should be one of %s",
<                       paste(dQuote(choices), collapse = ", ")),
<              domain = NA)
---
> 	stop(gettextf("'%s' argument should be one of %s", "arg",
>                       paste(dQuote(choices), collapse = ", "), domain = "R-base"), domain = NA)
65c64
<         stop("there is more than one match in 'match.arg'")
---
>         stop("there is more than one match in 'match.arg()' function")
72c71
< char.expand <- function(input, target, nomatch = stop("no match"))
---
> char.expand <- function(input, target, nomatch = stop("no match in 'char.expand()' function"))
75c74
< 	stop("'input' must have length 1")
---
> 	stop(gettextf("'%s' argument must be of length 1", "input"))
77c76
< 	stop("'input' and 'target' must be character vectors")
---
> 	stop(gettextf("'%s' and '%s' arguments must be character vectors", "input", "target"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/mean.R R/src/library/base/R/mean.R
24c24
<         warning("argument is not numeric or logical: returning NA")
---
>         warning(gettextf("%s value is not numeric or logical: returning NA", sQuote(deparse(substitute(x)))))
30c30
<         stop("'trim' must be numeric of length one")
---
>         stop(gettextf("'%s' argument must be numeric of length 1", "trim"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/merge.R R/src/library/base/R/merge.R
41,42c41,42
<                               "'by' must specify a uniquely valid column",
<                               "'by' must specify uniquely valid columns"),
---
>                               "'by' argument must specify a uniquely valid column",
>                               "'by' argument must specify uniquely valid columns", domain = "R-base"),
47c47
<                 stop("'by' must match numbers of columns")
---
>                 stop("'by' argument must match number of columns")
49c49
<             if(length(by) != nc) stop("'by' must match number of columns")
---
>             if(length(by) != nc) stop("'by' argument must match number of columns")
51c51
<         } else stop("'by' must specify one or more columns as numbers, names or logical")
---
>         } else stop("'by' argument must specify one or more columns as numbers, names or logical")
54,55c54,55
<                           "'by' must specify a uniquely valid column",
<                           "'by' must specify uniquely valid columns"),
---
>                           "'by' argument must specify a uniquely valid column",
>                           "'by' argument must specify uniquely valid columns", domain = "R-base"),
65c65
<         stop("'by.x' and 'by.y' specify different numbers of columns")
---
>         stop("'by.x' and 'by.y' arguments specify different numbers of columns")
101c101
<                 stop("'incomparables' is supported only for merging on a single column")
---
>                 stop("'incomparables' argument is supported only for merging on a single column")
168,174c168
<             if(sum(d) > 1L)
<                 warning("column names ",
<                         paste(sQuote(nm[d]), collapse = ", "),
<                         " are duplicated in the result", domain = NA)
<             else
<                 warning("column name ", sQuote(nm[d]),
<                         " is duplicated in the result", domain = NA)
---
> 	    warning(sprintf(ngettext(sum(d), "column name %s is duplicated in the result", "column names %s are duplicated in the result", domain = "R-base"), paste(sQuote(nm[d]), collapse = ", ")), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/message.R R/src/library/base/R/message.R
36c36
<             warning("additional arguments ignored in message()")
---
>             warning(gettextf("additional arguments ignored in '%s' function", "message()"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/methodsSupport.R R/src/library/base/R/methodsSupport.R
25c25
<             message("(loaded the methods namespace)", domain = NA)
---
>             message("(loaded the methods namespace)", domain = "R-base")
75c75
< 	    cat("Tracing", call, msg, "\n")
---
> 	    cat(gettextf("Tracing %s %s", call, msg, domain = "R-base"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/mode.R R/src/library/base/R/mode.R
37c37
<     if(is.factor(x)) stop("invalid to change the storage mode of a factor")
---
>     if(is.factor(x)) stop("cannot change the storage mode of a factor")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/namespace.R R/src/library/base/R/namespace.R
39c39
<                       warning(gettextf("namespace %s is not available and has been replaced\nby .GlobalEnv when processing object %s",
---
>                       warning(gettextf("namespace %s is not available and has been replaced by '.GlobalEnv' when processing object %s",
41c41
<                               domain = NA, call. = FALSE, immediate. = TRUE)
---
>                               domain = "R-base", call. = FALSE, immediate. = TRUE)
103c103
< 			 call. = FALSE, domain = NA)
---
> 			 call. = FALSE, domain = "R-base")
132,133c132,133
<                 stop(gettextf("%s failed in %s() for '%s', details:\n  call: %s\n  error: %s",
<                               hookname, "attachNamespace", nsname,
---
>                 stop(gettextf("%s failed in %s function for namespace %s, details:\n  call: %s\n  error: %s",
>                               sQuote(hookname), sQuote("attachNamespace()"), sQuote(nsname),
136c136
<                      call. = FALSE, domain = NA)
---
>                      call. = FALSE, domain = "R-base")
141,142c141
< ##             warning(sprintf("ignoring .First.lib() for package %s",
< ##                             sQuote(nsname)), domain = NA, call. = FALSE)
---
> ##            warning(sprintf("ignoring '.First.lib()' for package %s", sQuote(nsname)), domain = "R-base", call. = FALSE)
181c180
<                  call. = FALSE, domain = NA)
---
>                  call. = FALSE, domain = "R-base")
194,195c193,194
< dynGet <- function(x, ifnotfound = stop(gettextf("%s not found",
< 			     sQuote(x)), domain = NA),
---
> dynGet <- function(x, ifnotfound = stop(gettextf("'%s' was not found",
> 			     sQuote(x)), domain = "R-base"),
220,223c219,220
<         stop("cyclic namespace dependency detected when loading ",
<              sQuote(package), ", already loading ",
<              paste(sQuote(loading), collapse = ", "),
<              domain = NA)
---
>         stop(gettextf("cyclic namespace dependency detected when loading package %s, already loading %s",
>              sQuote(package), paste(sQuote(loading), collapse = ", ")), domain = "R-base")
233,234c230
<                               sQuote(package), current, zop, zversion),
<                      domain = NA)
---
>                               sQuote(package), current, zop, zversion), domain = "R-base")
243,244c239,240
<                     stop(gettextf("%s failed in %s() for '%s', details:\n  call: %s\n  error: %s",
<                                   hookname, "loadNamespace", pkgname,
---
>                     stop(gettextf("%s failed in %s function for package %s, details:\n  call: %s\n  error: %s",
>                                   sQuote(hookname), sQuote("loadNamespace()"), sQuote(pkgname),
246c242
<                                   conditionMessage(res)),
---
>                                   conditionMessage(res), domain = "R-base"),
286,288c282
<                 stop(gettextf("namespace %s is already sealed in 'loadNamespace'",
<                               sQuote(getNamespaceName(ns))),
<                      call. = FALSE, domain = NA)
---
>                 stop(gettextf("namespace %s is already sealed in 'loadNamespace()' function", sQuote(getNamespaceName(ns))), call. = FALSE, domain = "R-base")
325,328c319,321
<                                           warning(gettextf(
< 		"failed to assign RegisteredNativeSymbol for %s to %s since %s is already defined in the %s namespace",
<                                                            sym$name, varName, varName, sQuote(package)),
<                                                   domain = NA, call. = FALSE)
---
>                                           warning(gettextf("failed to assign RegisteredNativeSymbol for %s to %s since %s is already defined in the %s namespace",
>                                                            sQuote(sym$name), sQuote(varName), sQuote(varName), sQuote(package)),
>                                                   domain = "R-base", call. = FALSE)
353,356c346,348
<                                    warning(gettextf(
< 		"failed to assign NativeSymbolInfo for %s to %s since %s is already defined in the %s namespace",
<                                                     origVarName, varName, varName, sQuote(package)),
<                                            domain = NA, call. = FALSE)
---
>                                    warning(gettextf("failed to assign NativeSymbolInfo for %s to %s since %s is already defined in the %s namespace",
>                                                 sQuote(origVarName), sQuote(varName), sQuote(varName), sQuote(package)),
>                                        domain = "R-base", call. = FALSE)
358,361c350,352
<                                    warning(gettextf(
< 		"failed to assign NativeSymbolInfo for %s since %s is already defined in the %s namespace",
<                                                     origVarName, varName, sQuote(package)),
<                                            domain = NA, call. = FALSE)
---
>                                    warning(gettextf("failed to assign NativeSymbolInfo for %s since %s is already defined in the %s namespace",
>                                                 sQuote(origVarName), sQuote(varName), sQuote(package)),
>                                        domain = "R-base", call. = FALSE)
393,394c384
<                 msg <- gettextf("package %s does not have a namespace",
<                                 sQuote(package))
---
>                 msg <- gettextf("package %s does not have a namespace", sQuote(package), domain = "R-base")
419,421c409,410
<                 stop(gettextf("package %s has not been installed properly\n",
<                               sQuote(package)), # == basename(pkgpath)
<                      call. = FALSE, domain = NA)
---
>                 stop(gettextf("package %s has not been installed properly\n", sQuote(package)), # == basename(pkgpath)
>                      call. = FALSE, domain = "R-base")
424,426c413
<                 stop(gettextf("package %s was built before R 3.0.0: please re-install it",
<                              sQuote(package)),
<                      call. = FALSE, domain = NA)
---
>                 stop(gettextf("package %s was built before R 3.0.0: please re-install it", sQuote(package)), call. = FALSE, domain = "R-base")
434,436c421
<                 stop(gettextf("namespace %s %s is being loaded, but %s %s is required",
<                               sQuote(package), version, zop, zversion),
<                      domain = NA)
---
>                 stop(gettextf("namespace %s %s is being loaded, but %s %s is required", sQuote(package), version, zop, zversion), domain = "R-base")
441c426
<                         domain = NA)
---
>                         domain = "R-base")
462c447
<                         sQuote(pkg)), domain = NA)
---
>                         sQuote(pkg)), domain = "R-base")
468,469c453,454
<                         sQuote(pkg)), domain = NA)
<                     readline("press RETURN to view license")
---
>                         sQuote(pkg)), domain = "R-base")
>                     readline(gettext("press RETURN to view license", domain = "R-base"))
476,478c461
<                     message(gettextf(paste("package %s has a license that you need to accept:",
<                                            "according to the DESCRIPTION file it is",
<                                            "%s", sep="\n"),
---
>                     message(gettextf("package %s has a license that you need to accept:\naccording to the DESCRIPTION file it is\n%s",
480c463
<                                      pkgInfo$DESCRIPTION["License"]), domain = NA)
---
>                                      pkgInfo$DESCRIPTION["License"]), domain = "R-base")
483c466
<                                       title = paste("License for", sQuote(pkg)))
---
>                                       title = gettextf("License for %s", sQuote(pkg), domain = "R-base"))
485,486c468,469
<                     stop(gettextf("license for package %s not accepted",
<                                   sQuote(package)), domain = NA, call. = FALSE)
---
>                     stop(gettextf("license for package %s was not accepted",
>                                   sQuote(package)), domain = "R-base", call. = FALSE)
519c502
<                                   sQuote(package)), call. = FALSE, domain = NA)
---
>                                   sQuote(package), domain = "R-base"), call. = FALSE, domain = NA)
576,577c559
<                 stop(gettextf("unable to load R code in package %s",
<                               sQuote(package)), call. = FALSE, domain = NA)
---
>                 stop(gettextf("unable to load R code in package %s", sQuote(package), domain = "R-base"), call. = FALSE, domain = NA)
580,581c562
<         # else warning(gettextf("package %s contains no R code",
<         #                        sQuote(package)), call. = FALSE, domain = NA)
---
>         # else warning(gettextf("package %s contains no R code", sQuote(package)), call. = FALSE, domain = "R-base")
662,665c643,644
<                     warning(gettextf(
< 				"'exportClassPattern' specified in 'NAMESPACE' but no matching classes in package %s",
< 				sQuote(package)),
<                             call. = FALSE, domain = NA)
---
>                     warning(gettextf("'exportClassPattern' specified in 'NAMESPACE' file but no matching classes in package %s", sQuote(package)),
>                             call. = FALSE, domain = "R-base")
672c651
<                     stop(gettextf("in package %s classes %s were specified for export but not defined",
---
>                     stop(gettextf("in package %s classes %s were specified for export but were not defined",
674,676c653,654
<                                   paste(expClasses[missingClasses],
<                                         collapse = ", ")),
<                          domain = NA)
---
>                                   paste(dQuote(expClasses[missingClasses]), collapse = ", ")),
>                          domain = "R-base")
690c668
<                     warning(gettextf("no function found corresponding to methods exports from %s for: %s",
---
>                     warning(gettextf("no function found corresponding to methods exports from namespace %s for: %s",
693c671
<                          domain = NA, call. = FALSE)
---
>                          domain = "R-base", call. = FALSE)
705,706c683
<                         msg <-
<                             ngettext(length(bad),
---
>                             stop(sprintf(ngettext(length(bad),
708,710c685,686
< 			"Functions found when exporting methods from the namespace %s which are not S4 generic: %s")
<                         stop(sprintf(msg, sQuote(package),
<                                      paste(sQuote(bad), collapse = ", ")),
---
>                                      "Functions found when exporting methods from the namespace %s which are not S4 generic: %s", domain = "R-base"),
>                                      sQuote(package), paste(sQuote(bad), collapse = ", ")),
723c699
<                 ##        paste(addGenerics[local], collapse = ", ")),
---
>                 ##        paste(addGenerics[local], collapse = ", "), domain = "R-base"),
734,738c710,711
<                     stop(gettextf("in %s methods for export not found: %s",
<                                   sQuote(package),
<                                   paste(expMethods[missingMethods],
<                                         collapse = ", ")),
<                          domain = NA)
---
>                     stop(gettextf("in %s methods for export were not found: %s",
>                                   sQuote(package), paste(expMethods[missingMethods], collapse = ", ")), domain = "R-base")
770,771c743
< 			    warning(gettextf("multiple methods tables found for %s",
< 				    sQuote(mi)), call. = FALSE, domain = NA)
---
> 			    warning(gettextf("multiple methods tables found for %s", sQuote(mi)), call. = FALSE, domain = "R-base")
777,778c749
<                       warning(gettextf("failed to find metadata object for %s",
<                                        sQuote(mi)), call. = FALSE, domain = NA)
---
>                       warning(gettextf("failed to find metadata object for %s", sQuote(mi)), call. = FALSE, domain = "R-base")
783,786c754,755
<                 stop(gettextf("in package %s methods %s were specified for export but not defined",
<                               sQuote(package),
<                               paste(expMethods, collapse = ", ")),
<                      domain = NA)
---
>                 stop(gettextf("in package %s methods %s were specified for export but were not defined",
>                               sQuote(package), paste(sQuote(expMethods), collapse = ", ")), domain = "R-base")
813,814c782
<             packageStartupMessage(gettextf("Loading required namespace: %s",
<                                            package), domain = NA)
---
>         packageStartupMessage(gettextf("Loading required namespace: %s", sQuote(package), domain = "R-base"))
818,820c786
<                 msg <- conditionMessage(value)
<                 cat("Failed with error:  ",
<                     sQuote(msg), "\n", file = stderr(), sep = "")
---
>                 cat(gettextf("Failed with error:  %s", sQuote(conditionMessage(value)), domain = "R-base"), "\n", file = stderr(), sep = "")
848,849c814,815
< 		    warning(gettextf("%s failed in %s() for '%s', details:\n  call: %s\n  error: %s",
< 				     hookname, "unloadNamespace", nsname,
---
> 		    warning(gettextf("%s failed in %s function for namespace %s, details:\n  call: %s\n  error: %s",
> 				     sQuote(hookname), sQuote("unloadNamespace()"), sQuote(nsname),
852c818
< 			    call. = FALSE, domain = NA)
---
> 			    call. = FALSE, domain = "R-base")
865c831
< 		 domain = NA)
---
> 		 domain = "R-base")
901c867
<         stop("not a namespace")
---
>         stop(gettextf("'%s' argument is not a namespace", "ns"))
903c869
<         stop("operation not allowed on base namespace")
---
>         stop("operation is not allowed on base namespace")
962,964c928
<         stop(gettextf("duplicate import names %s",
<                       paste(sQuote(impnames[duplicated(impnames)]),
<                             collapse = ", ")), domain = NA)
---
>         stop(gettextf("duplicate import names %s", paste(sQuote(impnames[duplicated(impnames)]), collapse = ", ")), domain = "R-base")
969c933
<             msg <- gettext("replacing local value with import %s when loading %s")
---
>             msg <- gettext("replacing local value with import %s when loading namespace %s")
976c940
<             msg <- gettext("replacing previous import by %s when loading %s")
---
>             msg <- gettext("replacing previous import by %s when loading namespace %s")
982c946
<         msg <- gettext("replacing local value with import %s when loading %s")
---
>         msg <- gettext("replacing local value with import %s when loading namespace %s")
1004,1006c968
< 			warning(gettextf("found methods to import for function %s but not the generic itself",
< 					 sQuote(genName)),
<                                 call. = FALSE, domain = NA)
---
> 			warning(gettextf("found methods to import for function %s but not the generic itself", sQuote(genName)), call. = FALSE, domain = "R-base")
1041d1002
<                     msg <- gettext("replacing previous import %s by %s when loading %s")
1043c1004
<                     warning(sprintf(msg,
---
>                     warning(gettextf("replacing previous import %s by %s when loading %s",
1047c1008
<                             call. = FALSE, domain = NA)
---
>                             call. = FALSE, domain = "R-base")
1083,1084c1044,1045
<                                  "No methods found in package %s for request: %s when loading %s",
<                                  "No methods found in package %s for requests: %s when loading %s"),
---
>                                  "No methods were found in package %s for request: %s when loading %s",
>                                  "No methods were found in package %s for requests: %s when loading %s", domain = "R-base"),
1094,1095c1055,1056
<                               "requested method not found in environment/package %s: %s when loading %s",
<                               "requested methods not found in environment/package %s: %s when loading %s"),
---
>                               "requested method was not found in environment/package %s: %s when loading %s",
>                               "requested methods were not found in environment/package %s: %s when loading %s", domain = "R-base"),
1125,1126c1086
<                     warning(gettextf(
< 	"No generic function %s found corresponding to requested imported methods from package %s when loading %s (malformed exports?)",
---
>                     warning(gettextf("No generic function %s found corresponding to requested imported methods from package %s when loading %s (malformed exports?)",
1128c1088
< 			    domain = NA, call. = FALSE)
---
>                         domain = "R-base", call. = FALSE)
1147,1148c1107,1108
<                                   "classes %s are not exported by 'namespace:%s'"),
<                          paste(paste0('"', miss, '"'), collapse = ", "),
---
>                                   "classes %s are not exported by 'namespace:%s'", domain = "R-base"),
>                          paste(dQuote(miss), collapse = ", "),
1154c1114
<                                   "objects %s are not exported by 'namespace:%s'"),
---
>                                   "objects %s are not exported by 'namespace:%s'", domain = "R-base"),
1180,1181c1140,1141
<                                          "previous export '%s' is being replaced",
<                                          "previous exports '%s' are being replaced"),
---
>                                          "previous export %s is being replaced",
>                                          "previous exports %s are being replaced", domain = "R-base"),
1203c1163
<             stop(gettextf("undefined exports: %s", undef), domain = NA)
---
>             stop(gettextf("undefined exports: %s", undef), domain = "R-base")
1283,1284c1243
<         stop(gettextf("package %s has no 'NAMESPACE' file", sQuote(package)),
<              domain = NA)
---
>         stop(gettextf("package %s has no 'NAMESPACE' file", sQuote(package)), domain = "R-base")
1306,1308c1265
< 		stop(gettextf("empty name in directive '%s' in 'NAMESPACE' file",
< 			      as.character(e[[1L]])),
< 		     domain = NA)
---
> 		stop(gettextf("empty name in directive %s in 'NAMESPACE' file", sQuote(as.character(e[[1L]]))), domain = "R-base")
1422,1425c1379
<                            warning(gettextf("duplicate symbol names %s in useDynLib(\"%s\")",
<                                             paste(sQuote(names(symNames)[dup]),
<                                                   collapse = ", "), dyl),
<                                    domain = NA, call. = FALSE)
---
>                            warning(gettextf("duplicate symbol names %s in useDynLib(\"%s\")", paste(sQuote(names(symNames)[dup]), collapse = ", "), dyl), domain = "R-base", call. = FALSE)
1474,1476c1428
<                        stop(gettextf("bad 'S3method' directive: %s",
<                                      deparse(e)),
<                             call. = FALSE, domain = NA)
---
>                        stop(gettextf("bad 'S3method' directive: %s", deparse(e)), call. = FALSE, domain = "R-base")
1503,1504c1455
<                stop(gettextf("unknown namespace directive: %s", deparse(e, nlines=1L)),
<                     call. = FALSE, domain = NA)
---
>                stop(gettextf("unknown namespace directive: %s", deparse(e, nlines=1L)), call. = FALSE, domain = "R-base")
1553,1554c1504
<             warning(gettextf("S3 method %s was declared but not found",
<                              sQuote(method)), call. = FALSE)
---
>             warning(gettextf("S3 method %s was declared but was not found", sQuote(method)), call. = FALSE)
1562c1512
<     else stop("bad method")
---
>     else stop("invalid method")
1591,1592c1541,1542
< 		stop(gettextf("object '%s' not found whilst loading namespace '%s'",
< 			      genname, package), call. = FALSE, domain = NA)
---
>                 stop(gettextf("object %s was not found whilst loading namespace %s",
>                               sQuote(genname), sQuote(package)), call. = FALSE, domain = "R-base")
1624,1625c1574,1575
<                                  "S3 method %s was declared in NAMESPACE but not found",
<                                  "S3 methods %s were declared in NAMESPACE but not found"),
---
>                                  "S3 method %s was declared in 'NAMESPACE' file but was not found",
>                                  "S3 methods %s were declared in 'NAMESPACE' file but was not found", domain = "R-base"),
1684c1634
<                                 domain = NA)
---
>                                 domain = "R-base")
1707c1657
<                             domain = NA)
---
>                             domain = "R-base")
1744,1748c1694
<         stop(gettextf(
<             paste('While loading namespace "%s": "%s" differ in ncol(.), env=%d, newNS=%d.',
<                   "Maybe package installed with version of R newer than %s ?",
<                   sep="\n"),
<             package, "S3methods", p1, p2, getRversion()), domain = NA)
---
>         stop(gettextf("While loading namespace \"%s\": \"%s\" differ in ncol(.), env=%d, newNS=%d.\nMaybe package installed with version of R newer than %s ?", package, "S3methods", p1, p2, getRversion()), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/notyet.R R/src/library/base/R/notyet.R
20,21c20
<     stop(gettextf("'%s' is not implemented yet",
<                   as.character(sys.call(sys.parent())[[1L]])), call. = FALSE)
---
>     stop(gettextf("%s value is not implemented yet", sQuote(as.character(sys.call(sys.parent())[[1L]]))), call. = FALSE)
24c23
<     msg <- gettextf("argument '%s' is not used (yet)", arg)
---
>     msg <- gettextf("%s value is not used (yet)", sQuote(arg), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/octhex.R R/src/library/base/R/octhex.R
63c63
<     stop("'x' cannot be coerced to class \"octmode\"")
---
>     stop(gettextf("'%s' argument cannot be coerced to class %s", "x", dQuote("octmode")))
113c113
<     stop("'x' cannot be coerced to class \"hexmode\"")
---
>     stop(gettextf("'%s' argument cannot be coerced to class %s", "x", dQuote("hexmode")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/outer.R R/src/library/base/R/outer.R
41c41
<             if(!missing(...)) stop('using ... with FUN = "*" is an error')
---
>             if(!missing(...)) stop("using '...' with 'FUN = \"*\"' option is an error")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/pmax.R R/src/library/base/R/pmax.R
25c25
<     if(length(elts) == 0L) stop("no arguments")
---
>     if(length(elts) == 0L) stop(gettextf("no arguments passed to '%s' function", "pmax()"))
67c67
<     if(length(elts) == 0L) stop("no arguments")
---
>     if(length(elts) == 0L) stop(gettextf("no arguments passed to '%s' function", "pmin()"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/print.R R/src/library/base/R/print.R
103c103
<     if(length(nn) != ll) nn <- paste("Component", seq.int(ll))
---
>     if(length(nn) != ll) nn <- gettextf("Component %d", seq.int(ll), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/qr.R R/src/library/base/R/qr.R
34c34
<     if(is.na(p)) stop("invalid ncol(x)")
---
>     if(is.na(p)) stop(gettextf("invalid '%s' value", "ncol(x)"))
36,37c36,37
<     if(is.na(n)) stop("invalid nrow(x)")
<     if(1.0 * n * p > 2147483647) stop("too large a matrix for LINPACK")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(x)"))
>     if(1.0 * n * p > 2147483647) stop(gettextf("matrix %s is too large for LINPACK", dataname <- sQuote(deparse(substitute(x)))))
60,63c60,63
<     if( !is.qr(qr) ) stop("first argument must be a QR decomposition")
<     n <- as.integer(nrow(qr$qr)); if(is.na(n)) stop("invalid nrow(qr$qr)")
<     p <- as.integer(ncol(qr$qr)); if(is.na(p)) stop("invalid ncol(qr$qr)")
<     k <- as.integer(qr$rank);     if(is.na(k)) stop("invalid ncol(qr$rank)")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
>     n <- as.integer(nrow(qr$qr)); if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(qr$qr)"))
>     p <- as.integer(ncol(qr$qr)); if(is.na(p)) stop(gettextf("invalid '%s' value", "ncol(qr$qr)"))
>     k <- as.integer(qr$rank);     if(is.na(k)) stop(gettextf("invalid '%s' value", "ncol(qr$rank)"))
67,68c67,68
<     if(is.na(ny)) stop("invalid ncol(y)")
<     if(nrow(y) != n) stop("'qr' and 'y' must have the same number of rows")
---
>     if(is.na(ny)) stop(gettextf("invalid '%s' value", "ncol(y)"))
>     if(nrow(y) != n) stop("'qr' and 'y' arguments must have the same number of rows")
90c90
< 	if(z$info) stop("exact singularity in 'qr.coef'")
---
> 	if(z$info) stop("exact singularity in 'qr.coef()' function")
112c112
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
119c119
<     if(is.na(n)) stop("invalid nrow(qr$qr)")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(qr$qr)"))
122c122
<     if(is.na(ny)) stop("invalid NCOL(y)")
---
>     if(is.na(ny)) stop(gettextf("invalid '%s' value", "NCOL(y)"))
125c125
< 	stop("'qr' and 'y' must have the same number of rows")
---
> 	stop("'qr' and 'y' arguments must have the same number of rows")
138c138
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
145c145
<     if(is.na(n)) stop("invalid nrow(qr$qr)")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(qr$qr)"))
148c148
<     if(is.na(ny)) stop("invalid NCOL(y)")
---
>     if(is.na(ny)) stop(gettextf("invalid '%s' value", "NCOL(y)"))
150c150
< 	stop("'qr' and 'y' must have the same number of rows")
---
> 	stop("'qr' and 'y' arguments must have the same number of rows")
164,166c164,166
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
<     if(is.complex(qr$qr)) stop("not implemented for complex 'qr'")
<     if(isTRUE(attr(qr, "useLAPACK"))) stop("not supported for LAPACK QR")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
>     if(is.complex(qr$qr)) stop("'qr()' function is not implemented for complex 'qr' argument")
>     if(isTRUE(attr(qr, "useLAPACK"))) stop("'qr()' function is not supported for LAPACK QR")
170c170
<     if(is.na(n)) stop("invalid nrow(qr$qr)")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(qr$qr)"))
172c172
<     if(is.na(ny)) stop("invalid NCOL(y)")
---
>     if(is.na(ny)) stop(gettextf("invalid '%s' value", "NCOL(y)"))
174c174
< 	stop("'qr' and 'y' must have the same number of rows")
---
> 	stop("'qr' and 'y' arguments must have the same number of rows")
182,184c182,184
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
<     if(is.complex(qr$qr)) stop("not implemented for complex 'qr'")
<     if(isTRUE(attr(qr, "useLAPACK"))) stop("not supported for LAPACK QR")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
>     if(is.complex(qr$qr)) stop("'qr()' function is not implemented for complex 'qr' argument")
>     if(isTRUE(attr(qr, "useLAPACK"))) stop("'qr()' function is not supported for LAPACK QR")
186c186
<     if(is.na(n)) stop("invalid nrow(qr$qr)")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "nrow(qr$qr)"))
188c188
<     if(k > qr$rank) stop("'k' is too large")
---
>     if(k > qr$rank) stop(gettextf("'%s' argument is too large", "k"))
190c190
<     if(is.na(ny)) stop("invalid NCOL(y)")
---
>     if(is.na(ny)) stop(gettextf("invalid '%s' value", "NCOL(y)"))
192c192
< 	stop("'qr' and 'y' must have the same number of rows")
---
> 	stop("'qr' and 'y' arguments must have the same number of rows")
203c203
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
221c221
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
232c232
<     if(!is.qr(qr)) stop("argument is not a QR decomposition")
---
>     if(!is.qr(qr)) stop(gettextf("'%s' argument is not a QR decomposition", "qr"))
239c239
<     if(is.na(p)) stop("invalid NCOL(R)")
---
>     if(is.na(p)) stop(gettextf("invalid '%s' value", "NCOL(R)"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/rle.R R/src/library/base/R/rle.R
22c22
<         stop("'x' must be a vector of an atomic type")
---
>         stop(gettextf("'%s' argument must be a vector of an atomic type", "x"))
36c36
<     cat("", "Run Length Encoding\n", "  lengths:", sep=prefix)
---
>     cat(prefix, gettext("Run Length Encoding", domain = "R-base"), "\n", prefix, gettext("  lengths:", domain = "R-base"), sep = "")
38c38
<     cat("", "  values :", sep=prefix)
---
>     cat(prefix, gettext("  values :", domain = "R-base"), sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/rm.R R/src/library/base/R/rm.R
26c26
<        stop("... must contain names or character strings")
---
>        stop("'...' must contain names or character strings")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/rowsum.R R/src/library/base/R/rowsum.R
23,25c23,25
<     if (!is.numeric(x)) stop("'x' must be numeric")
<     if (length(group) != NROW(x)) stop("incorrect length for 'group'")
<     if (anyNA(group)) warning("missing values for 'group'")
---
>     if (!is.numeric(x)) stop(gettextf("'%s' argument must be numeric", "x"))
>     if (length(group) != NROW(x)) stop("incorrect length for 'group' argument")
>     if (anyNA(group)) warning("missing values for 'group' argument")
34,36c34,36
<     if (!is.data.frame(x)) stop("not a data frame") ## make MM happy
<     if (length(group) != NROW(x)) stop("incorrect length for 'group'")
<     if (anyNA(group)) warning("missing values for 'group'")
---
>     if (!is.data.frame(x)) stop("'x' argument is not a data frame") ## make MM happy
>     if (length(group) != NROW(x)) stop("incorrect length for 'group' argument")
>     if (anyNA(group)) warning("missing values for 'group' argument")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/scale.R R/src/library/base/R/scale.R
36c36
< 	    stop("length of 'center' must equal the number of columns of 'x'")
---
> 	    stop(gettextf("length of '%s' argument must equal the number of columns of '%s' argument", "center", "x"))
53c53
< 	    stop("length of 'scale' must equal the number of columns of 'x'")
---
> 	    stop(gettextf("length of '%s' argument must equal the number of columns of '%s' argument", "scale", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/seq.R R/src/library/base/R/seq.R
29,31c29,31
< 	    if(!is.finite(from)) stop("'from' must be a finite number")
<             1L:from
<         } else if(lf) 1L:lf else integer())
---
>             if(!is.finite(from)) stop(gettextf("'%s' argument must be a finite number", "from"))
>             seq_len(from)
>         } else if(lf) seq_len(lf) else integer())
40c40
<         if(!len) stop("argument 'length.out' must be of length 1")
---
>         if(!len) stop(gettextf("'%s' argument must be of length 1", "length.out"))
49,50c49,50
<     if (!missing(from) && length(from) != 1L) stop("'from' must be of length 1")
<     if (!missing(to) && length(to) != 1L) stop("'to' must be of length 1")
---
>     if (!missing(from) && length(from) != 1L) stop(gettextf("'%s' argument must be of length 1", "from"))
>     if (!missing(to) && length(to) != 1L) stop(gettextf("'%s' argument must be of length 1", "to"))
53c53
< 	stop("'from' must be a finite number")
---
>         stop(gettextf("'%s' argument must be a finite number", "from"))
56c56
< 	stop("'to' must be a finite number")
---
>         stop(gettextf("'%s' argument must be a finite number", "to"))
64c64
<             if (length(by) != 1L) stop("'by' must be of length 1")
---
>             if (length(by) != 1L) stop(gettextf("'%s' argument must be of length 1", "by"))
78c78
< 		stop("'by' argument is much too small")
---
> 		stop(gettextf("'%s' argument is much too small", "by"))
94c94
< 	stop("'length.out' must be a non-negative number")
---
> 	stop(gettextf("'%s' argument must be a non-negative number", "length.out"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/serialize.R R/src/library/base/R/serialize.R
24c24
< 	if(file == "") stop("'file' must be non-empty string")
---
> 	if(file == "") stop(gettextf("'%s' argument must be non-empty character string", "file"))
34c34
< 			  stop("invalid 'compress' argument: ", compress))
---
> 			  stop(gettextf("invalid 'compress' argument: %s", compress, domain = "R-base")))
39c39
<             warning("'compress' is ignored unless 'file' is a file name")
---
>             warning("'compress' argument is ignored unless 'file' argument is a file name")
43c43
<         stop("bad 'file' argument")
---
>         stop(gettextf("invalid '%s' argument", "file"))
54c54
<     else stop("bad 'file' argument")
---
>     else stop(gettextf("invalid '%s' argument", "file"))
64c64
<             stop("'connection' must be a connection")
---
>             stop("'connection' argument must be a connection")
80c80
<         stop("'connection' must be a connection")
---
>         stop("'connection' argument must be a connection")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/solve.R R/src/library/base/R/solve.R
22c22
< 	stop("this is the \"qr\" method for the generic function solve()")
---
> 	stop("this is the 'qr()' method for the generic function 'solve()'")
25c25
< 	stop("singular matrix 'a' in 'solve'")
---
> 	stop(gettextf("singular matrix '%s' in '%s' function", "a", "solve()"))
49c49
< 	warning("solve.default called with a \"qr\" object: use 'qr.solve'")
---
> 	warning("'solve.default()' function called with an object of class \"qr\": use 'qr.solve()' function")
69c69
< 	stop("singular matrix 'a' in solve")
---
> 	stop(gettextf("singular matrix '%s' in '%s' function", "a", "solve()"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/sort.R R/src/library/base/R/sort.R
60c60
<         stop("'decreasing' must be a length-1 logical vector.\nDid you intend to set 'partial'?")
---
>         stop("'decreasing' argument must be a logical vector of length 1.\nDid you intend to set 'partial'?")
101c101
<             stop("'partial' sorting not supported by radix method")
---
>             stop("'partial' sorting is not supported by 'radix()' method")
118c118
<         if(index.return) stop("'index.return' only for non-factors")
---
>         if(index.return) stop(gettextf("'%s' argument is valid only for non-factors", "index.return"))
124c124
<         stop("'x' must be atomic")
---
>         stop(gettextf("'%s' argument must be atomic", "x"))
131c131
<         stop("'index.return' only for 'na.last = NA'")
---
>         stop(gettextf("'%s' argument is valid only for 'na.last = NA' option", "index.return"))
240c240
<         stop("'x' must be atomic for 'sort.list'\nHave you called 'sort' on a list?")
---
>         stop("'x' argument must be atomic for 'sort.list()' function.\nHave you called 'sort()' function on a list?")
248c248
<         else stop("method = \"quick\" is only for numeric 'x'")
---
>         else stop("'method = \"quick\"' option is only for numeric 'x'")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/source.R R/src/library/base/R/source.R
34c34
< 	     else stop("'local' must be TRUE, FALSE or an environment")
---
> 	     else stop("'local' argument must be TRUE, FALSE or an environment")
37c37
< 	    stop("'echo' must be logical")
---
> 	    stop(gettextf("'%s' argument must be logical", "echo"))
39c39
< 	    warning("'verbose' is TRUE, 'echo' not; ... coercing 'echo <- TRUE'")
---
> 	    warning("'verbose' argument is TRUE, 'echo' argument is not; ... coercing 'echo <- TRUE'")
44c44
< 	cat("'envir' chosen:")
---
> 	cat(gettext("'envir' chosen:", domain = "R-base"))
74c74
<                 cat(gettextf('encoding = "%s" chosen', encoding), "\n", sep = "")
---
>                 cat(gettextf('encoding = "%s" chosen', encoding, domain = "R-base"), "\n", sep = "")
124c124
<             cat("--> parsed", length(exprs), "expressions; now eval(.)ing them:\n")
---
>             cat(sprintf(ngettext(length(exprs), "--> parsed %d expression; now evaluating them:", "--> parsed %d expressions; now evaluating them:", domain = "R-base"), length(exprs)), "\n", sep = "")
143c143
< 	if(!missing(file)) stop("specify either 'file' or 'exprs' but not both")
---
> 	if(!missing(file)) stop("specify either 'file' or 'exprs' argument but not both")
215c215
< 			  " ...\" ..." else " ....", "[TRUNCATED] "),
---
> 			  " ...\" ..." else " ....", gettext("[TRUNCATED] ", domain = "R-base")),
256c256
< 	stop(gettextf("'%s' is not an existing file", file))
---
> 	stop(gettextf("%s is not an existing file", sQuote(file)))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/srcfile.R R/src/library/base/R/srcfile.R
51c51,52
<     	cat("Timestamp: ", format(object$timestamp, usetz=TRUE), "\n", sep="")
---
>     	cat(gettextf("Timestamp: %s", format(object$timestamp, usetz=TRUE), domain = "R-base"), "\n", sep = "")
> 
53d53
<     cat('Encoding: "', object$encoding, '"', sep="")
55,56c55,59
<     	cat(', re-encoded to "', object$Enc, '"', sep="")
<     cat("\n")
---
>       cat(gettextf("Encoding: %s, re-encoded to %s", dQuote(object$encoding), dQuote(object$Enc), domain = "R-base"), "\n", sep = "")
> 	else
> 	  cat(gettextf("Encoding: %s", dQuote(object$encoding), domain = "R-base"), "\n", sep = "")
> 	
> 
78,80c81
<             warning(gettextf("Timestamp of %s has changed",
<                              sQuote(srcfile$filename)),
<                     call. = FALSE, domain = NA)
---
>             warning(gettextf("Timestamp of %s has changed", sQuote(srcfile$filename)), call. = FALSE, domain = "R-base")
222c223
<     	    stop("'x' and 'to' must refer to same file")
---
>     	    stop("'x' and 'to' arguments must refer to the same file")
226c227
<         cat("forcing class on") ## debug
---
>         cat(gettext("forcing class on", domain = "R-base")) ## debug
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/stop.R R/src/library/base/R/stop.R
25c25
<             warning("additional arguments ignored in stop()")
---
>             warning(gettextf("additional arguments ignored in '%s' function", "stop()"))
77c77
< 		    sprintf(gettext("%s and %s are not equal:\n  %s"),
---
> 		    sprintf(gettext("%s and %s are not equal:\n  %s", domain = "R-base"),
82,83c82,83
< 				     "%s is not TRUE",
< 				     "%s are not all TRUE"),
---
> 				     "variable %s is not TRUE",
> 				     "variables %s are not all TRUE", domain = "R-base"),
98,99c98
<             cat(gettext("additional arguments ignored in warning()"),
<                 "\n", sep = "", file = stderr())
---
>             cat(gettextf("additional arguments ignored in '%s' function", "warning()", domain = "R-base"), "\n", sep = "", file = stderr())
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/strwrap.R R/src/library/base/R/strwrap.R
167c167
<             stop("incorrect value for 'x'")
---
>             stop(gettextf("incorrect value for '%s' argument", "x"))
174c174
<             stop("incorrect value for 'x'")
---
>             stop(gettextf("incorrect value for '%s' argument", "x"))
181c181
<         stop("'x' and 'y' must have the same length")
---
>         stop(gettextf("'%s' and '%s' arguments must have the same length", "x", "y"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/summary.R R/src/library/base/R/summary.R
32c32
<     value <- if(is.logical(object)) # scalar or array!
---
>     value <- if(is.logical(object)) {# scalar or array!
36c36
<                dimnames(tb)[[1L]][iN] <- "NA's"
---
>                dimnames(tb)[[1L]][iN] <- gettext("NA's")
38,39c38,39
<            })
<     else if(is.numeric(object)) {
---
>            })# incl. NA s
>     } else if(is.numeric(object)) {
45,48c45,53
< 	names(qq) <- c("Min.", "1st Qu.", "Median", "Mean", "3rd Qu.", "Max.")
< 	if(any(nas))
< 	    c(qq, "NA's" = sum(nas))
< 	else qq
---
> 	if(any(nas)) {
> 	    qq <- c(qq, sum(nas))
> 	    names(qq) <- c(gettext("Min."), gettext("1st Qu."), gettext("Median"), gettext("Mean"), gettext("3rd Qu."), gettext("Max."), gettext("NA's"))
> 	    qq
> 	}
> 	else {
> 	    names(qq) <- c(gettext("Min."), gettext("1st Qu."), gettext("Median"), gettext("Mean"), gettext("3rd Qu."), gettext("Max."))
> 	    qq
> 	}
51,52c56
< 	sumry <- array("", c(n, 3L), list(names(object),
<                                           c("Length", "Class", "Mode")))
---
> 	sumry <- array("", c(n, 3L), list(names(object), c(gettext("Length", domain = "R-base"), gettext("Class", domain = "R-base"), gettext("Mode", domain = "R-base"))))
54c58
< 	for(i in 1L:n) {
---
> 	for(i in seq_len(n)) {
64c68,72
<     else c(Length = length(object), Class = class(object), Mode = mode(object))
---
>     else { 
> 	yy <- c(length(object), class(object), mode(object))
> 	names(yy) <- c(gettext("Length"), gettext("Class"), gettext("Mode"))
> 	yy
>     }
77c85
<     m <- match("NA's", names(x), 0)
---
>     m <- match(gettext("NA's"), names(x), 0)
79,83c87,97
<         if(length(a <- attr(x, "NAs")))
<             c(format(xx, digits=digits, ...), "NA's" = as.character(a))
<         else format(xx, digits=digits)
<     } else if(m && !is.character(x))
<         xx <- c(format(xx[-m], digits=digits, ...), "NA's" = as.character(xx[m]))
---
>         if(length(a <- attr(x, "NAs"))) {
>             xx <- c(format(xx, digits=digits, ...), as.character(a))
>             names(xx) <- c(gettext("Min."), gettext("1st Qu."), gettext("Median"), gettext("Mean"), gettext("3rd Qu."), gettext("Max."), gettext("NA's"))
> 	    xx
> 	}
>         else xx <- format(xx, digits=digits)
>     } else if(m && !is.character(x)) {
>         yy <- c(format(xx[-m], digits=digits, ...), as.character(xx[m]))
>         names(yy) <- c(gettext("Min."), gettext("1st Qu."), gettext("Median"), gettext("Mean"), gettext("3rd Qu."), gettext("Max."), gettext("NA's"))
> 	yy
> 	}
95c109
<     m <- match("NA's", names(xx), 0)
---
>     m <- match(gettext("NA's"), names(xx), 0)
97,99c111,116
<         xx <- if(length(a <- attr(x, "NAs")))
<             c(format(xx, digits=digits), "NA's" = as.character(a))
<         else format(xx, digits=digits)
---
>         if(length(a <- attr(x, "NAs"))) {
>             xx <- c(format(xx, digits=digits), as.character(a))
>             names(xx) <- c(gettext("Min."), gettext("1st Qu."), gettext("Median"), gettext("Mean"), gettext("3rd Qu."), gettext("Max."), gettext("NA's"))
> 	    xx
> 	}
>         else xx <- format(xx, digits=digits)
102,103c119,123
<     } else if(m && !is.character(x))
<         xx <- c(format(xx[-m], digits=digits), "NA's" = as.character(xx[m]))
---
>     } else if(m && !is.character(x)) {
>         xx <- c(format(xx[-m], digits=digits), as.character(xx[m]))
>         names(xx) <- c(gettext("Min."), gettext("1st Qu."), gettext("Median"), gettext("Mean"), gettext("3rd Qu."), gettext("Max."), gettext("NA's"))
> 	xx
>     }
119c139,147
< 	tt <- c(tt[o[ - drop]], "(Other)" = sum(tt[o[drop]]))
---
> 	tt <- c(tt[o[ - drop]], sum(tt[o[drop]]))
>         names(tt) <- c(names(tt)[ - drop], gettext("(Other)"))
> 	tt
> 	
>     }
>     if(ana) {
> 	tt2 <- c(tt, sum(nas))
> 	names(tt2) <- c(names(tt), gettext("NA's"))
> 	tt2
121c149
<     if(ana) c(tt, "NA's" = sum(nas)) else tt
---
>     else tt
182,183c210
< 	    warning("probably wrong encoding in names(.) of column ",
< 		paste(which(is.na(lw)), collapse = ", "))
---
> 	warning(gettextf("probably wrong encoding in 'names(.)' of column %s", paste(which(is.na(lw)), collapse = ", ")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/svd.R R/src/library/base/R/svd.R
22c22
<     if (any(!is.finite(x))) stop("infinite or missing values in 'x'")
---
>     if (any(!is.finite(x))) stop(gettextf("infinite or missing values in '%s' argument", "x"))
26c26
<     if(!n || !p) stop("a dimension is zero")
---
>     if(!n || !p) stop(gettextf("at least one dimension of '%s' argument is 0", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/sweep.R R/src/library/base/R/sweep.R
28c28
<             warning("STATS is longer than the extent of 'dim(x)[MARGIN]'")
---
>             warning("'STATS' argument is longer than the extent of 'dim(x)[MARGIN]'")
34c34
<                 warning("STATS does not recycle exactly across MARGIN")
---
>                 warning("'STATS' argument does not recycle exactly across 'MARGIN' argument")
40c40
<                 warning("length(STATS) or dim(STATS) do not match dim(x)[MARGIN]")
---
>                 warning("'length(STATS)' or 'dim(STATS)' do not match 'dim(x)[MARGIN]'")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/table.R R/src/library/base/R/table.R
162c162
<         cat ("< table of extent", paste(d, collapse=" x "), ">\n")
---
>         cat(gettextf("< table of extent %s>", paste(d, collapse = " x "), domain = "R-base"), "\n", sep = "")
182,184c182
< 	stop(gettextf("'object' must inherit from class %s",
<                       dQuote("table")),
<              domain = NA)
---
> 	stop(gettextf("'%s' argument must inherit from class %s", "object", dQuote("table"), domain = "R-base"), domain = NA)
192c190
< 	for(k in 1L:n.vars)
---
> 	for(k in seq_len(n.vars))
212,214c210
< 	stop(gettextf("'x' must inherit from class %s",
<                       dQuote("summary.table")),
<              domain = NA)
---
> 	stop(gettextf("'%s' argument must inherit from class %s", "x", dQuote("summary.table"), domain = "R-base"), domain = NA)
216c212
< 	cat("Call: "); print(x$call)
---
> 	cat(gettext("Call: ", domain = "R-base")); print(x$call)
218,219c214,215
<     cat("Number of cases in table:", x$n.cases, "\n")
<     cat("Number of factors:", x$n.vars, "\n")
---
>     cat(gettext("Number of cases in table: ", domain = "R-base"), x$n.cases, "\n", sep = "")
>     cat(gettext("Number of factors: ", domain = "R-base"), x$n.vars, "\n", sep = "")
221c217
< 	cat("Test for independence of all factors:\n")
---
> 	cat(gettext("Test for independence of all factors:", domain = "R-base"), "\n", sep = "")
223,226c219
< 	cat("\tChisq = ",	format(round(ch, max(0, digits - log10(ch)))),
< 	    ", df = ",		x$parameter,
< 	    ", p-value = ",	format.pval(x$p.value, digits, eps = 0),
< 	    "\n", sep = "")
---
> 	cat("\t", gettextf("Chisq = %s, df = %s, p-value = %s",	format(round(ch, max(0, digits - log10(ch)))), x$parameter, format.pval(x$p.value, digits, eps = 0), domain = "R-base"), "\n", sep = "")
228c221
< 	    cat("\tChi-squared approximation may be incorrect\n")
---
> 	    cat("\t", gettext("Chi-squared approximation may be incorrect", domain = "R-base"), "\n", sep = "")
268c261
<     if(!is.array(x)) stop("'x' is not an array")
---
>     if(!is.array(x)) stop(gettextf("'%s' argument is not an array", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/tabulate.R R/src/library/base/R/tabulate.R
22c22
< 	stop("'bin' must be numeric or a factor")
---
> 	stop("'bin' argument must be numeric or a factor")
28c28
<     if (is.na(nbins)) stop(gettextf("invalid value of %s", "'nbins'"), domain=NA)
---
>     if (is.na(nbins)) stop(gettextf("invalid '%s' value", "nbins"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/tapply.R R/src/library/base/R/tapply.R
25c25
<     if (!nI) stop("'INDEX' is of length zero")
---
>     if (!nI) stop(gettextf("'%s' argument is of length 0", "INDEX"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/taskCallback.R R/src/library/base/R/taskCallback.R
97c97
<             stop("'which' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "which"))
101c101
<                 stop(gettextf("no such element '%s'", which), domain = NA)
---
>                 stop(gettextf("no such element '%s'", which), domain = "R-base")
106c106
<                 stop("invalid 'which' argument")
---
>                 stop(gettextf("invalid '%s' argument", "which"))
108c108
<             stop("'which' must be character or numeric")
---
>             stop(gettextf("'%s' argument must be character or numeric", "which"))
145c145
<                     cat(gettextf("Removing %s", paste(discard, collapse=", ")), "\n")
---
>                     cat(gettextf("Removing %s", paste(discard, collapse=", "), domain = "R-base"), "\n", sep = "")
164c164
<                 cat(gettext("Registering 'evaluate' as low-level callback\n"))
---
>                 cat(gettext("Registering 'evaluate' as low-level callback", domain = "R-base"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/time.R R/src/library/base/R/time.R
30c30
<     on.exit(message("Timing stopped at: ", ppt(proc.time() - time)))
---
>     on.exit(gettextf("Timing stopped at: %s", ppt(proc.time() - time), domain = "R-base"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/toString.R R/src/library/base/R/toString.R
26c26
<     if( width < 0 ) stop("'width' must be positive")
---
>     if( width < 0 ) stop(gettextf("'%s' argument must be positive", "width"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/traceback.R R/src/library/base/R/traceback.R
47c47
<         cat(gettext("No traceback available"), "\n")
---
>         cat(gettext("No traceback available", domain = "R-base"), "\n", sep = "")
49c49
<         for(i in 1L:n) {
---
>         for(i in seq_len(n)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/unix/system.unix.R R/src/library/base/R/unix/system.unix.R
30c30
<         stop("'intern' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "intern"))
32c32
<         stop("'ignore.stdout' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "ignore.stdout"))
34c34
<         stop("'ignore.stderr' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "ignore.stderr"))
36c36
<         stop("'wait' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "wait"))
42c42
<             stop("'input' must be a character vector or 'NULL'")
---
>             stop(gettextf("'%s' argument must be a character vector or 'NULL'", "input"))
64c64
<         stop("'wait' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "wait"))
73c73
<         if (!isTRUE(stdout)) warning("setting stdout = TRUE")
---
>         if (!isTRUE(stdout)) warning("setting 'stdout = TRUE'")
81c81
<         if(length(stdout) != 1L) stop("'stdout' must be of length 1")
---
>         if(length(stdout) != 1L) stop(gettextf("'%s' argument must be of length 1", "stdout"))
93c93
<         if(length(stderr) != 1L) stop("'stderr' must be of length 1")
---
>         if(length(stderr) != 1L) stop(gettextf("'%s' argument must be of length 1", "stderr"))
99c99
<             stop("'input' must be a character vector or 'NULL'")
---
>             stop(gettextf("'%s' argument must be a character vector or 'NULL'", "input"))
117c117
<         warning("'which' was not found on this platform")
---
>         warning("'which' command was not found on this platform")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/version.R R/src/library/base/R/version.R
51,53c51
<             stop(gettextf("invalid version specification %s",
<                           paste(sQuote(unique(x[!ok])), collapse = ", ")),
<                  call. = FALSE, domain = NA)
---
>             stop(gettextf("invalid version specification %s", paste(sQuote(unique(x[!ok])), collapse = ", "), domain = "R-base"), call. = FALSE, domain = NA)
143c141
<     if(!is.numeric_version(x)) stop("wrong class")
---
>     if(!is.numeric_version(x)) stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("numeric_version")))
242c240
<            else if(!is.integer(value)) stop("invalid 'value'")
---
>            else if(!is.integer(value)) stop(gettextf("invalid '%s' value", "value"))
245c243
<            if(length(value) != 1L) stop("invalid 'value'")
---
>            if(length(value) != 1L) stop(gettextf("invalid '%s' value", "value"))
250c248
<        if(length(value) != 1L) stop("invalid 'value'")
---
>        if(length(value) != 1L) stop(gettextf("invalid '%s' value", "value"))
260,261c258
<         stop(gettextf("unary '%s' not defined for \"numeric_version\" objects",
<                       .Generic), domain = NA)
---
>         stop(gettextf("unary '%s' operator is not defined for objects of class %s", .Generic, dQuote("numeric_version")), domain = "R-base")
265,266c262
<         stop(gettextf("'%s' not defined for \"numeric_version\" objects",
<                       .Generic), domain = NA)
---
>         stop(gettextf("binary '%s' operator is not defined for objects of class %s", .Generic, dQuote("numeric_version")), domain = "R-base")
284,285c280
<         stop(gettextf("%s not defined for \"numeric_version\" objects",
<                       .Generic), domain = NA)
---
>         stop(gettextf("%s is not defined for objects of class %s", .Generic, dQuote("numeric_version"), domain = "R-base"), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/warnings.R R/src/library/base/R/warnings.R
38c38
<                            header = ngettext(n, "Warning message:\n", "Warning messages:\n"),
---
>                            header = ngettext(n, "Warning message:\n", "Warning messages:\n", domain = "R-base"),
46c46
<             stop("'tags' must be a character vector of the same length as 'x'")
---
>             stop(gettextf("'%s' argument must be a character vector of the same length as '%s'", "tags", "x"))
55c55
<                          nchar(sm[1L], "w") <= 75L)
---
>                          nchar(sm[1L], "w") <= options("width")[[1]])
57,59c57,58
<                 paste0(tags[i], "In ",
<                        temp[1L], if(length(temp) > 1L) " ...",
<                        " :", nl, msgs[i])
---
>                 paste(tags[i], gettextf("In command %s", sQuote(temp[1L]), domain = "R-base"), if(length(temp) > 1L) " ...",
>                       " :", nl, msgs[i], sep = "")
84c83
< 	cat("No warnings\n")
---
> 	cat(gettext("No warnings", domain = "R-base"), "\n", sep = "")
86c85
< 	print.warnings(x, header = paste(sum(cn), "identical warnings:\n"))
---
> 	print.warnings(x, header = sprintf(ngettext(sum(cn), "%d identical warning:\n", "%d identical warnings:\n", domain = "R-base"), sum(cn)))
89,90c88
< 		       header = gettextf("Summary of (a total of %d) warning messages:\n",
< 					 sum(cn)))
---
> 		       header = gettextf("Summary of (a total of %d) warning messages:\n", sum(cn)))
107,109c105,107
< 				 "In %s :\n extra argument %s will be disregarded",
< 				 "In %s :\n extra arguments %s will be disregarded"),
< 			paste(deparse(sys.call(which.call), control=c()), collapse="\n"),
---
> 				 "In command '%s':\n extra argument %s will be disregarded",
> 				 "In command '%s':\n extra arguments %s will be disregarded", domain = "R-base"),
> 			paste(deparse(sys.call(which.call), control=c())),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/windows/junctions.R R/src/library/base/R/windows/junctions.R
32c32
<             warning(gettextf("link '%s' already exists", link), domain = NA)
---
>             warning(gettextf("link '%s' already exists", link), domain = "R-base")
36,37c36
<             warning(gettextf("failed to create directory for link '%s", link),
<                     domain = NA)
---
>             warning(gettextf("failed to create directory for link '%s", link), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/windows/system.R R/src/library/base/R/windows/system.R
47c47
<         stop("'intern' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "intern"))
49c49
<         stop("'ignore.stdout' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "ignore.stdout"))
51c51
<         stop("'ignore.stderr' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "ignore.stderr"))
53c53
<         stop("'wait' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "wait"))
55c55
<         stop("'show.output.on.console' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "show.output.on.console"))
57c57
<         stop("'minimized' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "minimized"))
59c59
<         stop("'invisible' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "invisible"))
107c107
<                              rval), domain = NA)
---
>                              rval), domain = "R-base")
120c120
<         stop("'wait' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "wait"))
122c122
<         stop("'minimized' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "minimized"))
124c124
<         stop("'invisible' must be TRUE or FALSE")
---
>         stop(gettextf("'%s' argument must be TRUE or FALSE", "invisible"))
130,131c130,131
<     if(length(stdout) != 1L) stop("'stdout' must be of length 1")
<     if(length(stderr) != 1L) stop("'stderr' must be of length 1")
---
>     if(length(stdout) != 1L) stop(gettextf("'%s' argument must be of length 1", "stdout"))
>     if(length(stderr) != 1L) stop(gettextf("'%s' argument must be of length 1", "stderr"))
181c181
<                              rval), domain = NA)
---
>                              rval), domain = "R-base")
205,207c205,206
<                 stop(gettextf("'%s' could not be run", cmd0), domain = NA)
<             else stop(gettextf("'%s' execution failed with error code %d",
<                                cmd0, res), domain = NA)
---
>                 stop(gettextf("'%s' command could not be run", cmd0), domain = "R-base")
>             else stop(gettextf("'%s' command execution failed with error code %d", cmd0, res), domain = "R-base")
210,212c209,210
<                 warning(gettextf("'%s' could not be run", cmd0), domain = NA)
<             else warning(gettextf("'%s' execution failed with error code %d",
<                                   cmd0, res), domain = NA)
---
>                 warning(gettextf("'%s' command could not be run", cmd0), domain = "R-base")
>             else warning(gettextf("'%s' command execution failed with error code %d", cmd0, res), domain = "R-base")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/R/zapsmall.R R/src/library/base/R/zapsmall.R
22c22
<         stop("invalid 'digits'")
---
>         stop(gettextf("invalid '%s' argument", "digits"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/baseloader.R R/src/library/base/baseloader.R
34c34
<         if (! is.character(file)) halt("bad file name")
---
>         if (! is.character(file)) halt(gettext("bad file name"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/man/deparse.Rd R/src/library/base/man/deparse.Rd
13c13
< deparse(expr, width.cutoff = 60L,
---
> deparse(expr, width.cutoff = getOption("width"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/man/save.Rd R/src/library/base/man/save.Rd
23c23
<      file = stop("'file' must be specified"),
---
>      file = stop(gettextf("'\%s' argument must be specified", "file")),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/base/man/warnings.Rd R/src/library/base/man/warnings.Rd
27c27
<       header = ngettext(n, "Warning message:\n", "Warning messages:\n"),
---
>       header = ngettext(n, "Warning message:\n", "Warning messages:\n", domain = "R-base"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/compiler/R/cmp.R R/src/library/compiler/R/cmp.R
50c50
<     for (i in 1:length(args)) {
---
>     for (i in seq_len(length(args))) {
59c59
<     for (i in 1:length(args)) {
---
>     for (i in seq_len(length(args))) {
100c100
<             stop("not a proper evaluation environment")
---
>             stop("supplied 'env' argument is not a proper evaluation environment")
113c113
<                 stop("not a proper evaluation environment")
---
>                 stop("supplied 'env' argument is not a proper evaluation environment")
138c138
<             cntxt$stop("'ns' must be a namespace or a namespace imports environment",
---
>             cntxt$stop("'ns' argument must be a namespace or a namespace imports environment",
945c945
<         for (i in 1 : codeCount) {
---
>         for (i in seq_len(codeCount)) {
1009c1009
<                        cat(paste("Note:", addLocString(x, loc), "\n"))
---
>                        cat(paste(gettext("Note: ", domain = "R-compiler"), addLocString(x, loc), "\n"))
1250,1252c1250
<             emsg <- gettextf("possible error in '%s': %s",
<                              deparse(call, 20)[1], msg)
<             if (! is.null(signal)) signal(emsg)
---
>             if (! is.null(signal)) signal(gettextf("possible error in '%s': %s", deparse(call, 20)[1], msg))
1306,1307c1304
<             fmt <- "handler for '%s' is already defined for another package"
<             stop(gettextf(fmt, name), domain = NA)
---
>             stop(gettextf("handler for '%s' is already defined for another package", name), domain = "R-compiler")
1542,1543c1539
<             fmt <- "handler for '%s' is already defined for another package"
<             stop(gettextf(fmt, name), domain = NA)
---
>             stop(gettextf("handler for '%s' is already defined for another package", name), domain = "R-compiler")
1579,1580c1575
<             fmt <- "handler for '%s' is already defined for another package"
<             stop(gettextf(fmt, name), domain = NA)
---
>             stop(gettextf("handler for '%s' is already defined for another package", name), domain = "R-compiler")
2203c2198
<                 paste(sQuote(name), "is not a registered math1 function"),
---
>                 gettextf("%s is not a registered math1 function", sQuote(name)),
2718c2713
<             cmp(quote(stop("empty alternative in numeric switch")), cb, cntxt)
---
>             cmp(quote(stop("empty alternative in numeric 'switch()' function")), cb, cntxt)
2870,2872c2865
<         msg <- gettextf("no visible global function definition for '%s'",
<                         as.character(fun))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("no visible global function definition for '%s'", as.character(fun)), cntxt, loc)
2878,2880c2871
<         msg <- gettextf("no visible binding for global variable '%s'",
<                         as.character(var))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("no visible binding for global variable '%s'", as.character(var)), cntxt, loc)
2886,2888c2877
<         msg <- gettextf("no visible binding for '<<-' assignment to '%s'",
<                         as.character(symbol))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("no visible binding for '<<-' assignment to '%s'", as.character(symbol)), cntxt, loc)
2894,2896c2883
<         msg <- gettextf("wrong number of arguments to '%s'",
<                         as.character(fun))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("wrong number of arguments to '%s'", as.character(fun)), cntxt, loc)
2902,2903c2889
<         msg <- paste(var, "may be used in an incorrect context")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("%s may be used in an incorrect context", var), cntxt, loc)
2909,2910c2895
<         msg <- paste(fun, "used in wrong context: no loop is visible")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("%s used in wrong context: no loop is visible", fun), cntxt, loc)
2928,2929c2913,2914
<         msg <- gettext("more than one default provided in switch() call")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettext("more than one default provided in 'switch()' call"),
>                    cntxt, loc)
2934,2935c2919
<         msg <- gettext("'switch' with no alternatives")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettext("'switch()' function with no alternatives"), cntxt, loc)
2943,2944c2927
<         cntxt$warn(paste(msg, paste(funs, collapse = ", ")),
<                    cntxt, loc)
---
>         cntxt$warn(sprintf(msg, paste(funs, collapse = ", ")), cntxt, loc)
2950c2933
<         cat(paste(gettext("Error: compilation failed - "), msg, "\n"))
---
>         cat(paste(gettext("Error: compilation failed:", domain = "R-compiler"), " ", msg, "\n", sep = ""))
2997c2980
<         notifyCompilerError(paste(e$message, "at", deparse(e$call)))
---
>         notifyCompilerError(gettextf("%s at %s", paste(e$message, collapse = ""),  paste(deparse(e$call), collapse = ""), domain = "R-compiler"))
3003c2986
<         notifyCompilerError(paste(err$message, "at", deparse(err$call)))
---
>         notifyCompilerError(gettextf("%s at %s", paste(err$message, collapse = ""),  paste(deparse(err$call), collapse = ""), domain = "R-compiler"))
3022c3005
<                 cat(gettextf("compiling '%s'", f), "\n", sep = "")
---
>                 cat(gettextf("compiling %s", sQuote(f), domain = "R-compiler"), "\n", sep = "")
3027c3010
<     cat(gettextf("saving to file \"%s\" ... ", file))
---
>     cat(gettextf("saving to file %s ... ", sQuote(file), domain = "R-compiler"))
3029c3012
<     cat(gettext("done"), "\n", sep = "")
---
>     cat(gettext("done", domain = "R-compiler"), "\n", sep = "")
3070c3053
<         for (i in 1:nforms) {
---
>         for (i in seq_len(nforms)) {
3076c3059
<                     cat(paste0("compiling function \"", e[[2]], "\"\n"))
---
>                     cat(gettextf("compiling function %s", sQuote(e[[2]]), domain = "R-compiler"), "\n", sep = "")
3078,3079c3061
<                     cat(paste("compiling expression", deparse(e, 20)[1],
<                               "...\n"))
---
>                     cat(gettextf("compiling expression %s ...", sQuote(deparse(e, 20)[1]), domain = "R-compiler"), "\n", sep = "")
3085c3067
<         cat(gettextf("saving to file \"%s\" ... ", outfile))
---
>         cat(gettextf("saving to file %s ... ", sQuote(outfile), domain = "R-compiler"))
3087c3069
<         cat(gettext("done"), "\n", sep = "")
---
>         cat(gettext("done", domain = "R-compiler"), "\n", sep = "")
3095c3077
<         stop(gettextf("file '%s' does not exist", file), domain = NA)
---
>         stop(gettextf("file '%s' does not exist", file), domain = "R-compiler")
3121,3122c3103
<             stop(gettextf("'%s' is not a valid compiler option", n),
<                  domain = NA)
---
>             stop(gettextf("'%s' is not a valid compiler option", n), domain = "R-compiler")
3202c3183
<             "invalid compiler options: optimize(==%d)<2 and jitEnabled(==%d)>2",
---
>             "invalid compiler options: 'optimize(==%d)<2' and 'jitEnabled(==%d)>2'",
3224c3205
<             for (j in 1:argc) {
---
>             for (j in seq_len(argc)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/compiler/noweb/compiler.nw R/src/library/compiler/noweb/compiler.nw
621,623c621
<             emsg <- gettextf("possible error in '%s': %s",
<                              deparse(call, 20)[1], msg)
<             if (! is.null(signal)) signal(emsg)
---
>             if (! is.null(signal)) signal(gettextf("possible error in '%s': %s", deparse(call, 20)[1], msg))
1016c1014
<       exprs <- exprBuf[1:codeCount]
---
>       exprs <- exprBuf[seq_len(codeCount)]
1022c1020
<       srefs <- srcrefBuf[1:codeCount]
---
>       srefs <- srcrefBuf[seq_len(codeCount)]
1067c1065
<     for (i in 1 : codeCount) {
---
>     for (i in seq_len(codeCount)) {
1131c1129
<                        cat(paste("Note:", addLocString(x, loc), "\n"))
---
>                        cat(paste(gettext("Note: ", domain = "R-compiler"), addLocString(x, loc), "\n"))
1320,1322c1318
<         msg <- gettextf("no visible global function definition for '%s'",
<                         as.character(fun))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("no visible global function definition for '%s'", as.character(fun)), cntxt, loc)
1329,1331c1325
<         msg <- gettextf("no visible binding for global variable '%s'",
<                         as.character(var))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("no visible binding for global variable '%s'", as.character(var)), cntxt, loc)
1352,1353c1346
<         msg <- paste(var, "may be used in an incorrect context")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(paste(var, "may be used in an incorrect context"), cntxt, loc)
1362,1364c1355
<         msg <- gettextf("wrong number of arguments to '%s'",
<                         as.character(fun))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("wrong number of arguments to '%s'", as.character(fun)), cntxt, loc)
1385,1386c1376
<         msg <- paste(fun, "used in wrong context: no loop is visible")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("%s used in wrong context: no loop is visible", fun), cntxt, loc)
1397,1399c1387
<         msg <- gettextf("no visible binding for '<<-' assignment to '%s'",
<                         as.character(symbol))
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettextf("no visible binding for '<<-' assignment to '%s'", as.character(symbol)), cntxt, loc)
1423,1424c1411,1412
<         msg <- gettext("more than one default provided in switch() call")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettext("more than one default provided in 'switch()' call"),
>                    cntxt, loc)
1431,1432c1419
<         msg <- gettext("'switch' with no alternatives")
<         cntxt$warn(msg, cntxt, loc)
---
>         cntxt$warn(gettext("'switch()' function with no alternatives"), cntxt, loc)
1444,1445c1431
<         cntxt$warn(paste(msg, paste(funs, collapse = ", ")),
<                    cntxt, loc)
---
>         cntxt$warn(sprintf(msg, paste(funs, collapse = ", ")), cntxt, loc)
2136,2137c2122
<             fmt <- "handler for '%s' is already defined for another package"
<             stop(gettextf(fmt, name), domain = NA)
---
>             stop(gettextf("handler for '%s' is already defined for another package", name), domain = "R-compiler")
3333c3318
<                 paste(sQuote(name), "is not a registered math1 function"),
---
>                 gettextf("%s is not a registered math1 function", sQuote(name)),
4055c4040
<     cmp(quote(stop("empty alternative in numeric switch")), cb, cntxt)
---
>     cmp(quote(stop("empty alternative in numeric 'switch()' function")), cb, cntxt)
4571,4572c4556
<             fmt <- "handler for '%s' is already defined for another package"
<             stop(gettextf(fmt, name), domain = NA)
---
>             stop(gettextf("handler for '%s' is already defined for another package", name), domain = "R-compiler")
4745,4746c4729
<             fmt <- "handler for '%s' is already defined for another package"
<             stop(gettextf(fmt, name), domain = NA)
---
>             stop(gettextf("handler for '%s' is already defined for another package", name), domain = "R-compiler")
5113c5096
<         for (i in 1:nforms) {
---
>         for (i in seq_len(nforms)) {
5119c5102
<                     cat(paste0("compiling function \"", e[[2]], "\"\n"))
---
>                     cat(gettextf("compiling function %s", sQuote(e[[2]]), domain = "R-compiler"), "\n", sep = "")
5121,5122c5104
<                     cat(paste("compiling expression", deparse(e, 20)[1],
<                               "...\n"))
---
>                     cat(gettextf("compiling expression %s ...", sQuote(deparse(e, 20)[1]), domain = "R-compiler"), "\n", sep = "")
5128c5110
<         cat(gettextf("saving to file \"%s\" ... ", outfile))
---
>         cat(gettextf("saving to file %s ... ", sQuote(outfile), domain = "R-compiler"))
5130c5112
<         cat(gettext("done"), "\n", sep = "")
---
>         cat(gettext("done", domain = "R-compiler"), "\n", sep = "")
5158c5140
<         stop(gettextf("file '%s' does not exist", file), domain = NA)
---
>         stop(gettextf("file '%s' does not exist", file), domain = "R-compiler")
5193c5175
<                 cat(gettextf("compiling '%s'", f), "\n", sep = "")
---
>                 cat(gettextf("compiling %s", sQuote(f), domain = "R-compiler"), "\n", sep = "")
5198c5180
<     cat(gettextf("saving to file \"%s\" ... ", file))
---
>     cat(gettextf("saving to file %s ... ", sQuote(file), domain = "R-compiler"))
5200c5182
<     cat(gettext("done"), "\n", sep = "")
---
>     cat(gettext("done", domain = "R-compiler"), "\n", sep = "")
5242,5243c5224
<             stop(gettextf("'%s' is not a valid compiler option", n),
<                  domain = NA)
---
>             stop(gettextf("'%s' is not a valid compiler option", n), domain = "R-compiler")
5340c5321
<             "invalid compiler options: optimize(==%d)<2 and jitEnabled(==%d)>2",
---
>             "invalid compiler options: 'optimize(==%d)<2' and 'jitEnabled(==%d)>2'",
5390c5371
<             for (j in 1:argc) {
---
>             for (j in seq_len(argc)) {
5718c5699
<     for (i in 1:length(args)) {
---
>     for (i in seq_len(length(args))) {
5730c5711
<     for (i in 1:length(args)) {
---
>     for (i in seq_len(length(args))) {
5796c5777
<         stop("not a proper evaluation environment")
---
>         stop("supplied 'env' argument is not a proper evaluation environment")
5813c5794
<             stop("not a proper evaluation environment")
---
>             stop("supplied 'env' argument is not a proper evaluation environment")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/cairo.R R/src/library/grDevices/R/cairo.R
25c25
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
39c39
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
53c53
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/calc.R R/src/library/grDevices/R/calc.R
81c81
<     if(any(!is.finite(x))) stop("finite coordinates are needed")
---
>     if(any(!is.finite(x))) stop("finite coordinates are required")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/colorRamp.R R/src/library/grDevices/R/colorRamp.R
35c35
<     if (bias <= 0) stop("'bias' must be positive")
---
>     if (bias <= 0) stop(gettextf("'%s' argument must be positive", "bias"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/colorstuff.R R/src/library/grDevices/R/colorstuff.R
29c29
<         stop("numerical color values must be positive", domain = NA)
---
>         stop("numerical color values must be positive")
43c43
< 	    if(ncol(red) < 3L) stop("at least 3 columns needed")
---
> 	    if(ncol(red) < 3L) stop("at least 3 columns are needed")
70c70
<         stop("rgb values must be in [0, maxColorValue]")
---
>         stop("'r', 'g', and 'b' arguments must be in [0, maxColorValue]")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/convertColor.R R/src/library/grDevices/R/convertColor.R
73c73
<     } else stop("'gamma' must be a scalar or 'sRGB'")
---
>     } else stop("'gamma' argument must be a scalar or 'sRGB' value")
87c87
<     cat(gettextf("Color space converter: %s", x$name), "\n", sep = "")
---
>     cat(gettextf("Color space converter: %s", x$name, domain = "R-grDevices"), "\n", sep = "")
89c89
<         cat(gettextf("Reference white: %s", x$reference.white), "\n", sep = "")
---
>         cat(gettextf("Reference white: %s", x$reference.white, domain = "R-grDevices"), "\n", sep = "")
96c96
<         cat(gettextf("display gamma = %s", format(x$gamma)), "\n", sep = "")
---
>         cat(gettextf("display gamma = %s", format(x$gamma), domain = "R-grDevices"), "\n", sep = "")
276c276
<       stop("'from' must be a \"colorConverter\" object or a string")
---
>       stop(gettextf("'%s' argument must be an object of class %s or a string", "from", dQuote("colorConverter")))
280c280
<       stop("'to' must be a \"colorConverter\" object or a string")
---
>       stop(gettextf("'%s' argument must be an object of class %s or a string", "to", dQuote("colorConverter")))
289,290c289
<       stop(gettextf("'from.ref.white' disagrees with definition of %s",
<                     from$name), domain = NA)
---
>       stop(gettextf("'%s' argument disagrees with definition of '%s'", "from.ref.white", from$name))
296,297c295
<       stop(gettextf("'to.ref.white' disagrees with definition of %s",
<                     to$name), domain = NA)
---
>       stop(gettextf("'%s' argument disagrees with definition of '%s'", "to.ref.white", to$name))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/device.R R/src/library/grDevices/R/device.R
254c254
<         stop("dev.control() called without an open graphics device")
---
>         stop(gettextf("'%s' function called without an open graphics device", "dev.control()"))
265c265
<         stop("dev.displaylist() called without an open graphics device")
---
>         stop(gettextf("'%s' function called without an open graphics device", "dev.displaylist()"))
294c294
<         else stop(gettextf("device '%s' not found", dev), domain=NA)
---
>         else stop(gettextf("device '%s' was not found", dev), domain = "R-grDevices")
304,306c304,305
<             if(all(fe)) stop("no suitable unused file name for pdf()")
<             message(gettextf("dev.new(): using pdf(file=\"%s\")", tmp[!fe][1L]),
<                     domain=NA)
---
>             if(all(fe)) stop(gettextf("no suitable unused file name for '%s'", "pdf()"))
>             message(gettextf("dev.new(): using '%s'", paste("pdf(file=\"", tmp[!fe][1L], "\")", collapse = "")), domain = "R-grDevices")
313,315c312,313
<             if(all(fe)) stop("no suitable unused file name for postscript()")
<             message(gettextf("dev.new(): using postscript(file=\"%s\")",
<                              tmp[!fe][1L]), domain=NA)
---
>             if(all(fe)) stop(gettextf("no suitable unused file name for '%s'", "postscript()"))
>             message(gettextf("dev.new(): using '%s'", paste("postscript(file=\"", tmp[!fe][1L], "\")", collapse = "")), domain = "R-grDevices")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/gevents.R R/src/library/grDevices/R/gevents.R
38c38
< getGraphicsEvent <- function(prompt = "Waiting for input",
---
> getGraphicsEvent <- function(prompt = gettext("Waiting for input", domain = "R-grDevices"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/postscript.R R/src/library/grDevices/R/postscript.R
31,32c31
< 	stop(gettextf("invalid arguments in '%s' (need named args)",
<                       deparse(sys.call(sys.parent()))), domain = NA)
---
> 	stop(gettextf("invalid arguments in %s (need named args)", sQuote(deparse(sys.call(sys.parent())))), domain = "R-grDevice")
34c33
< 	stop("'name.opt' must be character, name of an existing list")
---
> 	stop("'name.opt' argument must be character, name of an existing list")
40,41c39
< 	} else stop(gettextf("cannot reset non-existent '%s'", name.opt),
<                     domain = NA)
---
> 	} else stop(gettextf("cannot reset non-existent '%s'", name.opt), domain = "R-grDevice")
45c43
< 	stop(gettextf("invalid options in '%s'", name.opt), domain = NA)
---
> 	stop(gettextf("invalid options in '%s'", name.opt), domain = "R-grDevices")
52,56c50,51
<                                  "invalid argument names %s in '%s'"),
<                          paste(sQuote(newnames[is.na(matches)]),
<                                collapse=", "),
<                          deparse(sys.call(sys.parent()))),
<                  domain = NA)
---
>                                  "invalid argument names %s in '%s'", domain = "R-grDevices"),
>                          paste(sQuote(newnames[is.na(matches)]), collapse=", "), deparse(sys.call(sys.parent()))), domain = NA)
68,78c63,69
< 		    warning(paste(sQuote(paste0(fn, "(", names(prev[ii]), ")" )),
<                                   collapse = " and "), " ",
<                             ngettext(as.integer(sum(ii)),
<                                      "differs between new and previous",
<                                      "differ between new and previous"),
<                             if(any(do.keep)) {
<                                 paste0("\n\t ==> ",
<                                        gettextf("NOT changing %s",
<                                                 paste(sQuote(names(prev[do.keep])),
<                                                       collapse=" & ")))
<                             } else "",
---
> 		    tmp_n <- paste(sQuote(paste0(fn, "(", names(prev[ii]), ")" )), collapse = " & ")
> 			if(any(do.keep))
> 			{
>                     warning(sprintf(ngettext(as.integer(sum(ii)),
>                                      "%s differs between new and previous\n\t ==> NOT changing %s",
>                                      "%s differ between new and previous\n\t ==> NOT changing %s", domain = "R-grDevices"),
> 					tmp_n, paste(sQuote(names(prev[do.keep])), collapse=" & ")),
80a72,77
> 			else
> 		    warning(sprintf(ngettext(as.integer(sum(ii)),
>                                      "%s differs between new and previous",
>                                      "%s differ between new and previous", domain = "R-grDevices"),
> 				     tmp_n), domain = NA, call. = FALSE)
> 		}
255c252
<               stop(gettextf("unknown family '%s'", family), domain = NA)
---
>               stop(gettextf("unknown family '%s'", family), domain = "R-grDevices")
258c255
<             stop("invalid 'family' argument")
---
>             stop(gettextf("invalid '%s' argument", "family"))
263,264c260
<     if(!checkIntFormat(file))
<         stop(gettextf("invalid 'file' argument '%s'", file), domain = NA)
---
>     if(!checkIntFormat(file)) stop(gettextf("invalid 'file' argument '%s'", file))
286,287c282
<     if(!checkIntFormat(file))
<         stop(gettextf("invalid 'file' argument '%s'", file), domain = NA)
---
>     if(!checkIntFormat(file)) stop(gettextf("invalid 'file' argument '%s'", file))
350c345
<               stop(gettextf("unknown family '%s'", family), domain = NA)
---
>               stop(gettextf("unknown family '%s'", family), domain = "R-grDevices")
353c348
<             stop("invalid 'family' argument")
---
>             stop(gettextf("invalid '%s' argument", "family"))
365,366c360
<     if(!checkIntFormat(file))
<         stop(gettextf("invalid 'file' argument '%s'", file), domain = NA)
---
>     if(!checkIntFormat(file)) stop(gettextf("invalid 'file' argument '%s'", file))
459c453
<         stop("Not a CID font")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "font", dQuote("CIDFont")))
488c482
<             stop(gettextf("font %s already in use", i), domain = NA)
---
>             stop(gettextf("font %s already in use", sQuote(i)), domain = "R-grDevices")
537,538c531
<                 stop(gettextf("invalid arguments in '%s' (must be font names)",
<                               "postscriptFonts"), domain = NA)
---
>                 stop(sprintf(gettext("invalid arguments in %s (must be font names)", domain = "R-grDevices"), sQuote("postscriptFonts")), domain = NA)
543,544c536
<                 stop(gettextf("invalid arguments in '%s' (need named args)",
<                               "postscriptFonts"), domain = NA)
---
>                 stop(sprintf(gettext("invalid arguments in %s (need named args)", domain = "R-grDevices"), sQuote("postscriptFonts")), domain = NA)
591,592c583
<                 stop(gettextf("invalid arguments in '%s' (must be font names)",
<                               "pdfFonts"), domain = NA)
---
>                 stop(sprintf(gettext("invalid arguments in %s (must be font names)", domain = "R-grDevices"), sQuote("pdfFonts")), domain = NA)
597,598c588
<                 stop(gettextf("invalid arguments in '%s' (need named args)",
<                               "pdfFonts"), domain = NA)
---
>                 stop(sprintf(gettext("invalid arguments in %s (need named args)", domain = "R-grDevices"), sQuote("pdfFonts")), domain = NA)
622,623c612
<         stop(gettextf("font encoding mismatch '%s'/'%s'",
<                       font$encoding, encoding), domain=NA)
---
>         stop(gettextf("font encoding mismatch '%s'/'%s'", font$encoding, encoding), domain = "R-grDevices")
959c948
<         stop("'file' must be a non-empty character string")
---
>         stop("'file' argument must be a non-empty character string")
980,981c969
<         stop(gettextf("status %d in running command '%s'", ret, cmd),
<              domain = NA)
---
>         stop(gettextf("status %d in running command '%s'", ret, cmd), domain = "R-grDevices")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/prettyDate.R R/src/library/grDevices/R/prettyDate.R
147c147
<                 stop("failed to add more ticks; 'min.n' too large?")
---
>                 stop("failed to add more ticks; 'min.n' argument too large?")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/recordplot.R R/src/library/grDevices/R/recordplot.R
36,37c36
<         stop(gettextf("argument is not of class %s", dQuote("recordedplot")),
<              domain = NA)
---
>         stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("recordedplot")), domain = "R-grDevices")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/smooth2d.R R/src/library/grDevices/R/smooth2d.R
29c29
< 	stop("'nbin' must be numeric of length 1 or 2")
---
> 	stop("'nbin' argument must be numeric of length 1 or 2")
38,39c38,39
< 	if(!is.numeric(bandwidth)) stop("'bandwidth' must be numeric")
< 	if(any(bandwidth <= 0)) stop("'bandwidth' must be positive")
---
> 	if(!is.numeric(bandwidth)) stop(gettextf("'%s' argument must be numeric", "bandwidth"))
> 	if(any(bandwidth <= 0)) stop(gettextf("'%s' argument must be positive", "bandwidth"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/unix/dev2bitmap.R R/src/library/grDevices/R/unix/dev2bitmap.R
23c23
<     if(missing(file)) stop("'file' is missing with no default")
---
>     if(missing(file)) stop("'file' argument is missing with no default")
25c25
<         stop("'file' must be a non-empty character string")
---
>         stop("'file' argument must be a non-empty character string")
67c67
<     if(missing(file)) stop("'file' is missing with no default")
---
>     if(missing(file)) stop("'file' argument is missing with no default")
69c69
<         stop("'file' must be a non-empty character string")
---
>         stop("'file' argument must be a non-empty character string")
110c110
<                  domain = NA)
---
>                  domain = "R-grDevices")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/unix/png.R R/src/library/grDevices/R/unix/png.R
42c42
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
77c77
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
110c110
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
144c144
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/unix/quartz.R R/src/library/grDevices/R/unix/quartz.R
54d53
<         msg <- "screen devices should not be used in examples etc"
56c55
<             stop(msg, domain = NA)
---
>             stop("screen devices should not be used in examples etc", domain = "R-grDevices")
58c57
<             warning(msg, immediate. = TRUE, noBreaks. = TRUE, domain = NA)
---
>             warning("screen devices should not be used in examples etc", immediate. = TRUE, noBreaks. = TRUE, domain = "R-grDevices")
72,73c71,72
<     if(!checkIntFormat(new$title)) stop("invalid 'title'")
<     if(!is.null(file) && !checkIntFormat(file)) stop("invalid 'file'")
---
>     if(!checkIntFormat(new$title)) stop(gettextf("invalid '%s' argument", "title"))
>     if(!is.null(file) && !checkIntFormat(file)) stop(gettextf("invalid '%s' argument", "file"))
131c130
<                 stop("invalid arguments in 'quartzFonts' (must be font names)")
---
>                 stop(gettextf("invalid arguments in %s (must be font names)", sQuote("quartzFonts")))
136c135
<                 stop("invalid arguments in 'quartzFonts' (need named args)")
---
>                 stop(gettextf("invalid arguments in %s (need named args)", sQuote("quartzFonts")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/unix/x11.R R/src/library/grDevices/R/unix/x11.R
65c65
<                 stop("X11 library is missing: install XQuartz from xquartz.macosforge.org", domain = NA)
---
>                 stop("X11 library is missing: install XQuartz from xquartz.macosforge.org", domain = "R-utils")
77d76
<         msg <- "screen devices should not be used in examples etc"
79c78
<             stop(msg, domain = NA)
---
>         stop("screen devices should not be used in examples etc", domain = "R-grDevices")
81c80
<             warning(msg, immediate. = TRUE, noBreaks. = TRUE, domain = NA)
---
>         warning("screen devices should not be used in examples etc", immediate. = TRUE, noBreaks. = TRUE, domain = "R-grDevices")
98c97
<     if(!checkIntFormat(new$title)) stop("invalid 'title'")
---
>     if(!checkIntFormat(new$title)) stop(gettextf("invalid '%s' argument", "title"))
112c111
<             stop('unknown family for X11(type = "XLib")')
---
>             stop("unknown family for 'X11(type = \"XLib\")'")
195c194
<                 stop("invalid arguments in 'X11Fonts' (must be font names)")
---
>                 stop(gettextf("invalid arguments in %s (must be font names)", sQuote("X11Fonts")))
200c199
<                 stop("invalid arguments in 'X11Fonts' (need named args)")
---
>                 stop(gettextf("invalid arguments in %s (need named args)", sQuote("X11Fonts")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/utils.R R/src/library/grDevices/R/utils.R
32c32
<         stop("'r' must be a \"range\", hence of length 2")
---
>         stop("'r' must be a 'range()' result, hence of length 2")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/windows/dev2bitmap.R R/src/library/grDevices/R/windows/dev2bitmap.R
23c23
<     if(missing(file)) stop("'file' is missing with no default")
---
>     if(missing(file)) stop("'file' argument is missing with no default")
25c25
<         stop("'file' must be a non-empty character string")
---
>         stop("'file' argument must be a non-empty character string")
67c67
<     if(missing(file)) stop("'file' is missing with no default")
---
>     if(missing(file)) stop("'file' argument is missing with no default")
69c69
<         stop("'file' must be a non-empty character string")
---
>         stop("'file' argument must be a non-empty character string")
111c111
<                  domain = NA)
---
>                  domain = "R-grDevices")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/windows/png.R R/src/library/grDevices/R/windows/png.R
44c44
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
82c82
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
114c114
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
148c148
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/windows/windows.R R/src/library/grDevices/R/windows/windows.R
69d68
<     msg <- "screen devices should not be used in examples etc"
71c70
<         stop(msg, domain = NA)
---
>         stop("screen devices should not be used in examples etc", domain = "R-grDevices")
73c72
<         warning(msg, immediate. = TRUE, noBreaks. = TRUE, domain = NA)
---
>         warning("screen devices should not be used in examples etc", immediate. = TRUE, noBreaks. = TRUE, domain = "R-grDevices")
138c137
<         stop("windows devices should not be used in examples etc", domain = NA)
---
>         stop("windows devices should not be used in examples etc", domain = "R-grDevices")
155c154
<         stop("windows devices should not be used in examples etc", domain = NA)
---
>         stop("windows devices should not be used in examples etc", domain = "R-grDevices")
157c156
<     if(!checkIntFormat(filename)) stop("invalid 'filename'")
---
>     if(!checkIntFormat(filename)) stop(gettextf("invalid '%s' argument", "filename"))
214c213
<         cat("object is not of class `SavedPlots'\n")
---
>         cat(gettextf("'%s' argument is not an object of class %s", "x", dQuote("SavedPlots"), domain = "R-grDevices"), "\n", sep = "")
217,218c216,217
<     cat("Saved Plots from R version 1.4.0 or later\n\n")
<     cat("  Contains", x[[2L]], "out of a maximum", x[[3L]], "plots\n")
---
>     cat(gettext("Saved Plots from R version 1.4.0 or later", domain = "R-grDevices"), "\n\n", sep = "")
>     cat(gettextf("  Contains %d out of a maximum %d plots", x[[2L]], x[[3L]], domain = "R-grDevices"), "\n", sep = "")
220,221c219,220
<     cat("  #plot calls are", paste(lens, collapse=", "), "\n")
<     cat("  Current position is plot", 1L + x[[4L]], "\n")
---
>     cat(gettext("  #plot calls are:", domain = "R-grDevices"), paste(lens, collapse=", "), "\n", sep = "")
>     cat(gettextf("  Current position is plot %d", 1L + x[[4L]], domain = "R-grDevices"), "\n", sep = "")
228c227
<     if(i > numplots || i < 1) stop("subscript out of range")
---
>     if(i > numplots || i < 1) stop("subscript is out of range")
285c284
<                 stop("invalid arguments in 'windowsFonts' (must be font names)")
---
>                 stop(gettextf("invalid arguments in %s (must be font names)", sQuote("windowsFonts")))
290c289
<                 stop("invalid arguments in 'windowsFonts' (need named args)")
---
>                 stop(gettextf("invalid arguments in %s (need named args)", sQuote("windowsFonts")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/R/xyz.coords.R R/src/library/grDevices/R/xyz.coords.R
41c41
<             if(setLab) xlab <- "Time"
---
>             if(setLab) xlab <- gettext("Time", domain = "R-grDevices")
54c54
< 		if(setLab) xlab <- "Index"
---
> 		if(setLab) xlab <- gettext("Index", domain = "R-grDevices")
87c87
< 	    if(setLab) xlab <- "Index"
---
> 	    if(setLab) xlab <- gettext("Index", domain = "R-grDevices")
112c112
<                                      "%d x values <= 0 omitted from logarithmic plot"),
---
>                             "%d x values <= 0 omitted from logarithmic plot", domain = "R-grDevices"),
120c120
<                                      "%d y values <= 0 omitted from logarithmic plot"),
---
>                             "%d y values <= 0 omitted from logarithmic plot", domain = "R-grDevices"),
150c150
< 	    if(ncol(x) < 2) stop("at least 2 columns needed")
---
> 	    if(ncol(x) < 2) stop("at least 2 columns are needed")
152c152
< 		if(setLab) xlab <- "Index"
---
> 		if(setLab) gettext("Index", domain = "R-grDevices")
216c216
<             if(setLab) xlab <- "Index"
---
>             if(setLab) xlab <- gettext("Index", domain = "R-grDevices")
241c241
<                                      "%d x values <= 0 omitted from logarithmic plot"),
---
>                                      "%d x values <= 0 omitted from logarithmic plot", domain = "R-grDevices"),
249c249
<                                      "%d y values <= 0 omitted from logarithmic plot"),
---
>                                      "%d y values <= 0 omitted from logarithmic plot", domain = "R-grDevices"),
257c257
<                                      "%d z values <= 0 omitted from logarithmic plot"),
---
>                                      "%d z values <= 0 omitted from logarithmic plot", domain = "R-grDevices"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/man/getGraphicsEvent.Rd R/src/library/grDevices/man/getGraphicsEvent.Rd
17c17
< getGraphicsEvent(prompt = "Waiting for input",
---
> getGraphicsEvent(prompt = gettext("Waiting for input", domain = "R-grDevices"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/axis_scales.c R/src/library/grDevices/src/axis_scales.c
28a29
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/cairo/cairoBM.c R/src/library/grDevices/src/cairo/cairoBM.c
40c40
< #ifdef Win32
---
> #ifdef _WIN32
61,69c61
< 
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #undef _
< #define _(String) dgettext ("grDevices", String)
< #else
< #define _(String) (String)
< #endif
< 
---
> #include "../localization.h"
90c82
< #ifdef Win32
---
> #ifdef _WIN32
109c101
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
115c107
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
131c123
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
139c131
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
153c145
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
161c153
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
175c167
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
188c180
<             warning("cairo error '%s'", cairo_status_to_string(res));
---
>             warning(_("cairo error '%s'"), cairo_status_to_string(res));
220c212
< 	warning("BM_Close_bitmap called on non-surface");
---
> 	warning(_("BM_Close_bitmap called on non-surface"));
284c276
<                     error("cairo error '%s'", cairo_status_to_string(res));
---
>                     error(_("cairo error '%s'"), cairo_status_to_string(res));
291c283
<                     error("cairo error '%s'", cairo_status_to_string(res));
---
>                     error(_("cairo error '%s'"), cairo_status_to_string(res));
311c303
<                     error("cairo error '%s'", cairo_status_to_string(res));
---
>                     error(_("cairo error '%s'"), cairo_status_to_string(res));
318c310
<                     error("cairo error '%s'", cairo_status_to_string(res));
---
>                     error(_("cairo error '%s'"), cairo_status_to_string(res));
338c330
<                     error("cairo error '%s'", cairo_status_to_string(res));
---
>                     error(_("cairo error '%s'"), cairo_status_to_string(res));
350c342
<                     error("cairo error '%s'", cairo_status_to_string(res));
---
>                     error(_("cairo error '%s'"), cairo_status_to_string(res));
471c463
< #if defined(Win32) && !defined(USE_FC)
---
> #if defined(_WIN32) && !defined(USE_FC)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/cairo/cairoFns.c R/src/library/grDevices/src/cairo/cairoFns.c
88a89
> #include "../localization.h"
458c459
< #ifdef Win32
---
> #ifdef _WIN32
759c760
< #ifdef Win32
---
> #ifdef _WIN32
768c769
< #ifdef Win32
---
> #ifdef _WIN32
801c802
< #ifdef Win32
---
> #ifdef _WIN32
861c862
<     if (!utf8Valid(str)) error("invalid string in Cairo_StrWidth");
---
>     if (!utf8Valid(str)) error(_("invalid string in Cairo_StrWidth"));
871c872
<     if (!utf8Valid(str)) error("invalid string in Cairo_Text");
---
>     if (!utf8Valid(str)) error(_("invalid string in Cairo_Text"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/colors.c R/src/library/grDevices/src/colors.c
30a31
> #include "localization.h"
69c70
<     	error(_("color intensity %s, not in [0,1]"), "NA");
---
>     	error(_("color intensity '%s' is not in [0,1]"), "NA");
78c79
<     	error(_("color intensity %s, not in 0:255"), "NA");
---
>     	error(_("color intensity '%s' is not in 0:255"), "NA");
87c88
< 	error(_("alpha level %s, not in [0,1]"), "NA"); 
---
> 	error(_("alpha level '%s' is not in [0,1]"), "NA"); 
96c97
<     	error(_("alpha level %s, not in 0:255"), "NA");
---
>     	error(_("alpha level '%s' is not in 0:255"), "NA");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/devCairo.c R/src/library/grDevices/src/devCairo.c
27a28
> #include "localization.h"
46c47
<     if (!R_devCairo) error("failed to load cairo DLL");
---
>     if (!R_devCairo) error(_("failed to load cairo DLL"));
55c56
<     if (Load_Rcairo_Dll() < 0) warning("failed to load cairo DLL");
---
>     if (Load_Rcairo_Dll() < 0) warning(_("failed to load cairo DLL"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/devPS.c R/src/library/grDevices/src/devPS.c
42a43
> #include <R_ext/Minmax.h>
54a56
> #include "localization.h"
56,58d57
< #ifndef max
< #define max(a,b) ((a > b) ? a : b)
< #endif
592c591
< 		warning("'FontBBox' could not be parsed");
---
> 		warning(_("'FontBBox' could not be parsed"));
600c599
< 		warning("'CharInfo' could not be parsed");
---
> 		warning(_("'CharInfo' could not be parsed"));
742c741
< 		warning(_("invalid string in '%s'"), "PostScriptStringWidth");
---
> 		warning(_("invalid string in '%s' function"), "PostScriptStringWidth()");
745c744
< 	    warning(_("invalid string in '%s'"), "PostScriptStringWidth");
---
> 	    warning(_("invalid string in '%s' function"), "PostScriptStringWidth()");
834,835c833,834
< 	    error(_("unknown encoding '%s' in 'PostScriptMetricInfo'"),
< 		  encoding);
---
> 	    error(_("unknown encoding '%s' in '%s' function"),
> 		  encoding, "PostScriptMetricInfo()");
883c882
< 	    error(_("invalid character (%04x) sent to 'PostScriptCIDMetricInfo' in a single-byte locale"),
---
> 	    error(_("invalid character (%04x) sent to 'PostScriptCIDMetricInfo()' function in a single-byte locale"),
891c890
< 		error(_("invalid character sent to 'PostScriptCIDMetricInfo' in a single-byte locale"));
---
> 		error(_("invalid character sent to 'PostScriptCIDMetricInfo()' in a single-byte locale"));
3118c3117
< 	error(_("filename too long in %s()"), "postscript");
---
> 	error(_("filename too long in '%s' call"), "postscript()");
3124c3123
< 	error(_("memory allocation problem in %s()"), "postscript");
---
> 	error(_("memory allocation problem in '%s' function"), "postscript()");
3142c3141
< 	error(_("encoding path is too long in %s()"), "postscript");
---
> 	error(_("encoding path is too long in '%s' function"), "postscript()");
3156c3155
< 	error(_("failed to load encoding file in %s()"), "postscript");
---
> 	error(_("failed to load encoding file in '%s' function"), "postscript()");
3725c3724
< #ifdef Win32
---
> #ifdef _WIN32
3754c3753
< #ifdef Win32
---
> #ifdef _WIN32
4332c4331
< 	error(_("unknown encoding '%s' in 'mbcsToSbcs'"), encoding);
---
> 	error(_("unknown encoding '%s' in '%s' function"), encoding, "mbcsToSbcs()");
4342,4343c4341,4342
< 	warning(_("conversion failure on '%s' in 'mbcsToSbcs': dot substituted for <%02x>"),
< 		in, (unsigned char) *i_buf),
---
> 	warning(_("conversion failure on '%s' in '%s' function: dot substituted for <%02x>"),
> 		in, "mbcsToSbcs()", (unsigned char) *i_buf),
4350,4351c4349,4350
< 	error("conversion failure from %s to %s on '%s' in 'mbcsToSbcs'",
< 	      (enc == CE_UTF8) ? "UTF-8" : "native", encoding, in);
---
> 	error(_("conversion failure from %s to %s on '%s' in '%s' function"),
> 	      (enc == CE_UTF8) ? "UTF-8" : "native", encoding, in, "mbcsToSbcs()");
4452c4451
< 	    warning(_("invalid string in '%s'"), "PS_Text");
---
> 	    warning(_("invalid string in '%s' function"), "PS_Text()");
4616c4615
< 	error(_("ran out of colors in xfig()"));
---
> 	error(_("ran out of colors in 'xfig()' function"));
4752c4751
< 	error(_("filename too long in %s()"), "xfig");
---
> 	error(_("filename too long in '%s' call"), "xfig()");
4758c4757
< 	error(_("memory allocation problem in %s()"), "xfig");
---
> 	error(_("memory allocation problem in '%s' function"), "xfig()");
4798c4797
< 	error(_("failed to load encoding file in %s()"), "xfig");
---
> 	error(_("failed to load encoding file in '%s' function"), "xfig()");
5871c5870
< 	error(_("filename too long in %s()"), "pdf");
---
> 	error(_("filename too long in '%s' call"), "pdf()");
5877c5876
< 	error(_("memory allocation problem in %s()"), "pdf");
---
> 	error(_("memory allocation problem in '%s' function"), "pdf()");
5927c5926
< 	warning(_("increasing the PDF version to 1.2"));
---
> 	warning(_("increasing the PDF version to %s"), "1.2");
5941c5940
< 	error(_("encoding path is too long in %s()"), "pdf");
---
> 	error(_("encoding path is too long in '%s' function"), "pdf()");
6332c6331
< 	warning(_("increasing the PDF version to 1.4"));
---
> 	warning(_("increasing the PDF version to %s"), "1.4");
6969c6968
< 	    warning(_("increasing the PDF version to 1.3"));
---
> 	    warning(_("increasing the PDF version to %s"), "1.3");
7266c7265
<             warning(_("Cannot open temporary file '%s' for compression (reason: %s); compression has been turned off for this device"), 
---
>             warning(_("cannot open temporary file '%s' for compression (reason: %s); compression has been turned off for this device"), 
7965c7964
< 	    warning(_("invalid string in '%s'"), "PDF_Text");
---
> 	    warning(_("invalid string in '%s' function"), "PDF_Text()");
8268c8267
< 	if(!isString(fam)) error(_("invalid 'family' parameter in %s"), call);
---
> 	if(!isString(fam)) error(_("invalid '%s' parameter in '%s'"), "family", call);
8272c8271
< 	error(_("invalid 'family' parameter in %s"), call);
---
> 	error(_("invalid '%s' parameter in '%s'"), "family", call);
8290c8289
< 	error(_("invalid 'fonts' parameter in %s"), call);
---
> 	error(_("invalid '%s' parameter in '%s'"), "fonts", call);
8296c8295
< 	error(_("invalid value of '%s'"), "fillOddEven");
---
> 	error(_("invalid '%s' value"), "fillOddEven");
8309c8308
< 	    error(_("unable to start %s() device"), "postscript");
---
> 	    error(_("unable to start '%s' device"), "postscript()");
8376c8375
< 	    error(_("unable to start %s() device"), "xfig");
---
> 	    error(_("unable to start '%s' device"), "xfig()");
8433c8432
< 	if(!isString(fam)) error(_("invalid 'family' parameter in %s"), call);
---
> 	if(!isString(fam)) error(_("invalid '%s' parameter in '%s'"), "family", call);
8437c8436
< 	error(_("invalid 'family' parameter in %s"), call);
---
> 	error(_("invalid '%s' parameter in '%s'"), "family", call);
8449c8448
< 	error(_("invalid 'fonts' parameter in %s"), call);
---
> 	error(_("invalid '%s' parameter in '%s'"), "fonts", call);
8459c8458
< 	error(_("invalid value of '%s'"), "fillOddEven");
---
> 	error(_("invalid '%s' value"), "fillOddEven");
8462c8461
< 	error(_("invalid value of '%s'"), "useCompression");
---
> 	error(_("invalid '%s' value"), "useCompression");
8476c8475
< 	    error(_("unable to start %s() device"), "pdf");
---
> 	    error(_("unable to start '%s' device"), "pdf()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/devPicTeX.c R/src/library/grDevices/src/devPicTeX.c
33a34
> #include "localization.h"
465c466
< 		warning(_("invalid string in '%s'"), "PicTeX_StrWidth");
---
> 		warning(_("invalid string in '%s' function"), "PicTeX_StrWidth()");
467c468
< 	    warning(_("invalid string in '%s'"), "PicTeX_StrWidth");
---
> 	    warning(_("invalid string in '%s' function"), "PicTeX_StrWidth()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/devQuartz.c R/src/library/grDevices/src/devQuartz.c
27a28,29
> #include "localization.h"
> 
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/devWindows.c R/src/library/grDevices/src/devWindows.c
34a35
> #include <R_ext/Minmax.h>
53,65c54
< /* there are conflicts with Rmath.h */
< #define imax2		Rf_imax2
< #define imin2		Rf_imin2
< int	imax2(int, int);
< int	imin2(int, int);
< 
< #ifdef ENABLE_NLS
< #define G_(String) libintl_dgettext("RGui", String)
< #define GN_(String) gettext_noop (String)
< #else /* not NLS */
< #define G_(String) (String)
< #define GN_(String) String
< #endif
---
> #include "localization.h"
580c569
< 	    snprintf(oops, 256, "[%s] Error at line %d.", optfile(), optline());
---
> 	    snprintf(oops, 256, _("[%s] Error at line %d."), optfile(), optline());
584c573
< 		strcpy(oops, "Insufficient memory. ");
---
> 		strcpy(oops, _("Insufficient memory. "));
595c584
< 		    snprintf(oops, 256, "Unknown style at line %d. ", optline());
---
> 		    snprintf(oops, 256, _("Unknown style at line %d. "), optline());
1234c1223
<     PrintWarnings();
---
>     PrintWarnings(NULL);
1257c1246
<     PrintWarnings();
---
>     PrintWarnings(NULL);
1816,1817c1805,1806
< 	if(strlen(dsp+4) >= 512) error(_("filename too long in %s() call"),
< 				       (dsp[0]=='p') ? "png" : "bmp");
---
> 	if(strlen(dsp+4) >= 512) error(_("filename too long in '%s' call"),
> 				       (dsp[0]=='p') ? "png()" : "bmp()");
1853c1842
< 	if(strlen(p+1) >= 512) error(_("filename too long in jpeg() call"));
---
> 	if(strlen(p+1) >= 512) error(_("filename too long in '%s' call"), "jpeg()");
1883c1872
< 	if(strlen(p+1) >= 512) error(_("filename too long in tiff() call"));
---
> 	if(strlen(p+1) >= 512) error(_("filename too long in '%s' call"), "tiff()");
1915c1904
< 	    error(_("filename too long in win.metafile() call"));
---
> 	    error(_("filename too long in '%s' call"), "win.metafile()");
2655,2658c2644,2647
< 	mx0 = imin2(mx0, points[i].x);
< 	mx1 = imax2(mx1, points[i].x);
< 	my0 = imin2(my0, points[i].y);
< 	my1 = imax2(my1, points[i].y);
---
> 	mx0 = min(mx0, points[i].x);
> 	mx1 = max(mx1, points[i].x);
> 	my0 = min(my0, points[i].y);
> 	my1 = max(my1, points[i].y);
2727,2730c2716,2719
< 	mx0 = imin2(mx0, points[i].x);
< 	mx1 = imax2(mx1, points[i].x);
< 	my0 = imin2(my0, points[i].y);
< 	my1 = imax2(my1, points[i].y);
---
> 	mx0 = min(mx0, points[i].x);
> 	mx1 = max(mx1, points[i].x);
> 	my0 = min(my0, points[i].y);
> 	my1 = max(my1, points[i].y);
3428c3417
< 	error(_("invalid device number in 'savePlot'"));
---
> 	error(_("invalid device number in 'savePlot()' function"));
3430c3419
<     if(!dd) error(_("invalid device in 'savePlot'"));
---
>     if(!dd) error(_("invalid device in 'savePlot()' function"));
3433c3422
< 	error(_("invalid filename argument in 'savePlot'"));
---
> 	error(_("invalid filename argument in 'savePlot()' function"));
3438c3427
< 	error(_("invalid type argument in 'savePlot'"));
---
> 	error(_("invalid type argument in 'savePlot()' function"));
3656c3645
< 	error(_("invalid value of '%s'"), "record");
---
> 	error(_("invalid '%s' value"), "record");
3660c3649
< 	error(_("invalid value of '%s'"), "rescale");
---
> 	error(_("invalid '%s' value"), "rescale");
3668c3657
< 	error(_("invalid value of '%s'"), "canvas");
---
> 	error(_("invalid '%s' value"), "canvas");
3679c3668
< 	error(_("invalid value of '%s'"), "buffered");
---
> 	error(_("invalid '%s' value"), "buffered");
3685c3674
< 	error(_("invalid value of '%s'"), "bg");
---
> 	error(_("invalid '%s' value"), "bg");
3692c3681
< 	error(_("invalid value of '%s'"), "title");
---
> 	error(_("invalid '%s' value"), "title");
3699c3688
< 	error(_("invalid value of '%s'"), "fillOddEven");
---
> 	error(_("invalid '%s' value"), "fillOddEven");
3703c3692
< 	error(_("invalid value of '%s'"), "family");
---
> 	error(_("invalid '%s' value"), "family");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/devices.c R/src/library/grDevices/src/devices.c
38,46c38
< 
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #undef _
< #define _(String) dgettext ("grDevices", String)
< #else
< #define _(String) (String)
< #endif
< 
---
> #include "localization.h"
60c52
<     if(listFlag == NA_LOGICAL) error(_("invalid argument"));
---
>     if(listFlag == NA_LOGICAL) error(_("invalid '%s' argument"), "args");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/grDevices.h R/src/library/grDevices/src/grDevices.h
24,31d23
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #undef _
< #define _(String) dgettext ("grDevices", String)
< #else
< #define _(String) (String)
< #endif
< 
Only in R/src/library/grDevices/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/qdBitmap.c R/src/library/grDevices/src/qdBitmap.c
32c32
< #define _(String) (String)
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/qdPDF.c R/src/library/grDevices/src/qdPDF.c
34c34
< #define _(String) (String)
---
> #include "localization.h"
110c110
< 	values[0] = CFSTR("Quartz R Device");
---
> 	values[0] = CFSTR(_("Quartz R Device"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grDevices/src/stubs.c R/src/library/grDevices/src/stubs.c
23a24
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/abline.R R/src/library/graphics/R/abline.R
34c34
<             warning(gettextf("only using the first two of %d regression coefficients", p), domain = NA)
---
>             warning(gettextf("only using the first two of %d regression coefficients", p), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/axis.R R/src/library/graphics/R/axis.R
73c73
<         stop("'side' must be in {1:4}")
---
>         stop("'side' argument must be in {1:4}")
77c77
<     else if(!is.numeric(axp) || length(axp) != 3) stop("invalid 'axp'")
---
>     else if(!is.numeric(axp) || length(axp) != 3) stop(gettextf("invalid '%s' argument", "axp"))
79c79
<     else if(!is.logical(log) || anyNA(log)) stop("invalid 'log'")
---
>     else if(!is.logical(log) || anyNA(log)) stop(gettextf("invalid '%s' argument", "log"))
84c84
<         else if(!is.numeric(usr) || length(usr) != 2) stop("invalid 'usr'")
---
>         else if(!is.numeric(usr) || length(usr) != 2) stop(gettextf("invalid '%s' argument", "usr"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/barplot.R R/src/library/graphics/R/barplot.R
98c98
< 	    stop("log scale error: 'xlim' <= 0")
---
> 	    stop(gettextf("log scale error: '%s' <= 0", "xlim"))
100c100
< 	    stop("log scale error: 'ylim' <= 0")
---
> 	    stop(gettextf("log scale error: '%s' <= 0", "ylim"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/boxplot.R R/src/library/graphics/R/boxplot.R
102c102
< 	stop("'formula' missing or incorrect")
---
> 	stop("formula missing or incorrect")
136c136
< 				     "Duplicated arguments %s are disregarded"),
---
> 				     "Duplicated arguments %s are disregarded", domain = "R-graphics"),
203c203
< 				 "Outliers (%s) in boxplot %d are not drawn"),
---
> 				 "Outliers (%s) in boxplot %d are not drawn", domain = "R-graphics"),
216,217c216
<         stop(gettextf("'at' must have same length as 'z$n', i.e. %d", n),
<              domain = NA)
---
>         stop(gettextf("'at' must have same length as 'z$n', i.e. %d", n), domain = "R-graphics")
308c307
<     for(i in 1L:n)
---
>     for(i in seq_len(n))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/contour.R R/src/library/graphics/R/contour.R
69c69
< 	    stop("'labels' is length zero.  Use 'drawlabels = FALSE' to suppress labels.")
---
> 	    stop(gettextf("'%s' is of length zero.  Use 'drawlabels = FALSE' option to suppress labels.", "labels"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/coplot.R R/src/library/graphics/R/coplot.R
122c122
<     bad.givens <- function() stop("invalid 'given.values'")
---
>     bad.givens <- function() stop(gettextf("invalid '%s' argument", "given.values"))
351,352c351
< 	cat("\n", gettextf("Missing rows: %s",
<                            paste0(missingrows, collapse = ", ")), "\n")
---
> 	cat("\n", gettextf("Missing rows: %s", paste0(missingrows, collapse = ", "), domain = "R-graphics"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/curve.R R/src/library/graphics/R/curve.R
30c30
< 	    stop(gettextf("'expr' must be a function, or a call or an expression containing '%s'", xname), domain = NA)
---
> 	    stop(gettextf("'expr' must be a function, or a call or an expression containing '%s'", xname), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/datetime.R R/src/library/graphics/R/datetime.R
90c90
<     if(!inherits(x, "POSIXt")) stop("wrong method")
---
>     if(!inherits(x, "POSIXt")) stop(gettextf("'%s' argument is not of class %s", "x", dQuote("POSIXt")))
96c96
< 	stop("Must specify 'breaks' in hist(<POSIXt>)")
---
>         stop("'breaks' argument must be specified")
116c116
<             if(is.na(valid)) stop("invalid specification of 'breaks'")
---
>             if(is.na(valid)) stop(gettextf("invalid '%s' argument", "breaks"))
175c175
<         else stop("invalid specification of 'breaks'")
---
>         else stop(gettextf("invalid '%s' argument", "breaks"))
256c256
<     if(!inherits(x, "Date")) stop("wrong method")
---
>     if(!inherits(x, "Date")) stop(gettextf("'%s' argument is not of class %s", "x", dQuote("Date")))
261c261
<         stop("Must specify 'breaks' in hist(<Date>)")
---
>         stop("'breaks' argument must be specified")
277c277
<             if(is.na(valid)) stop("invalid specification of 'breaks'")
---
>             if(is.na(valid)) stop(gettextf("invalid '%s' argument", "breaks"))
329c329
<         } else stop("invalid specification of 'breaks'")
---
>         } else stop(gettextf("invalid '%s' argument", "breaks"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/hist.R R/src/library/graphics/R/hist.R
26c26
< 	      main = paste("Histogram of", xname),
---
> 	      main = gettextf("Histogram of %s", xname, domain = "R-graphics"),
33c33
< 	stop("'x' must be numeric")
---
> 	stop(gettextf("'%s' argument must be numeric", "x"))
37c37
<     if(is.na(n)) stop("invalid length(x)")
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
71,72c71
<         ##     stop(gettextf("hist.default: pretty() error, breaks=%s",
<         ##                   format(breaks)), domain = NA)
---
>         ##     stop(gettextf("hist.default: pretty() error, breaks=%s", format(breaks)), domain = "R-graphics")
78c77
< 				 breaks), domain = NA)
---
> 				 breaks), domain = "R-graphics")
84,85c83
<                 stop(gettextf("hist.default: pretty() error, breaks=%s",
<                               format(breaks)), domain = NA)
---
>                 stop(gettextf("hist.default: pretty() error, breaks=%s", format(breaks)), domain = "R-graphics")
89,90c87
<                 stop(gettextf("Invalid breakpoints produced by 'breaks(x)': %s",
<                               format(breaks)), domain = NA)
---
>                 stop(gettextf("Invalid breakpoints produced by 'breaks(x)': %s", format(breaks)), domain = "R-graphics")
97c94
<     if(is.na(nB)) stop("invalid length(breaks)")
---
>     if(is.na(nB)) stop(gettextf("invalid '%s' value", "length(breaks)"))
128c125
< 	stop("negative 'counts'. Internal Error.", domain = NA)
---
> 	stop("negative 'counts'. Internal Error.", domain = "R-graphics")
156c153
< 					 "arguments %s are not made use of"),
---
> 					 "arguments %s are not made use of", domain = "R-graphics"),
167c164
< 	      main = paste("Histogram of", paste(x$xname, collapse="\n")),
---
> 	      main = gettextf("Histogram of %s", paste(x$xname, collapse="\n"), domain = "R-graphics"),
188c185
< 	    ylab <- if (!freq) "Density" else "Frequency"
---
> 	    ylab <- if (!freq) gettext("Density", domain = "R-graphics") else gettext("Frequency", domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/image.R R/src/library/graphics/R/image.R
129,131c129
<             stop(gettextf("%s can only be used with a regular grid",
<                           sQuote("useRaster = TRUE")),
<                  domain = NA)
---
>             stop(gettextf("%s can only be used with a regular grid", sQuote("useRaster = TRUE")), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/layout.R R/src/library/graphics/R/layout.R
37,38c37
<             stop(gettextf("layout matrix must contain at least one reference\nto each of the values {1 ... %d}\n",
<                           num.figures), domain = NA)
---
>             stop(gettextf("layout matrix must contain at least one reference\nto each of the values {1 ... %d}", num.figures), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/legend.R R/src/library/graphics/R/legend.R
45c45
<     if(length(title) > 1) stop("invalid 'title'")
---
>     if(length(title) > 1) stop(gettextf("invalid '%s' argument", "title"))
48c48
<     if(n.leg == 0) stop("'legend' is of length 0")
---
>     if(n.leg == 0) stop("'legend' argument is of length 0")
100c100
< 	stop("'text.width' must be numeric, >= 0")
---
> 	stop("'text.width' argument must be numeric, >= 0")
129c129
<                                  n.leg), domain = NA)
---
>                                  n.leg), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/matplot.R R/src/library/graphics/R/matplot.R
73,76c73
< 	message("matplot: doing ", k, " plots with ",
< 		paste0(" col= (", paste.ch(col), ")"),
< 		paste0(" pch= (", paste.ch(pch), ")"),
< 		" ...\n", domain=NA)
---
> 	message(gettextf("matplot: doing %d plots with %s %s ...", k, paste0(" col= (", paste.ch(col), ")"), paste0(" pch= (", paste.ch(pch), ")")), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/mosaicplot.R R/src/library/graphics/R/mosaicplot.R
182c182
<         stop("'x' must not have 0 dimensionality")
---
>         stop("'x' argument must not have 0 dimensionality")
185c185
<     Ind <- 1L:dx[1L]
---
>     Ind <- seq_len(dx[1L])
213c213
<             stop("invalid 'shade' specification")
---
>             stop(gettextf("invalid '%s' argument", "shade"))
314c314
<         rtxt <- "Standardized\nResiduals:"
---
>         rtxt <- gettext("Standardized\nResiduals:")
341c341
<         for(i in 1 : (2 * len)) {
---
>         for(i in seq_len(2 * len)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/pairs.R R/src/library/graphics/R/pairs.R
44c44
<           horInd = 1:nc, verInd = 1:nc,
---
>           horInd = seq_len(nc), verInd = seq_len(nc),
103c103
<         stop("invalid argument 'horInd'")
---
>         stop(gettextf("invalid '%s' argument", "hordInd"))
105c105
<         stop("invalid argument 'verInd'")
---
>         stop(gettextf("invalid '%s' argument", "verInd"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/pie.R R/src/library/graphics/R/pie.R
26c26
< 	stop("'x' values must be positive.")
---
> 	stop("'x' values must be positive")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/stem.R R/src/library/graphics/R/stem.R
21c21
<     if (!is.numeric(x) ) stop("'x' must be numeric")
---
>     if (!is.numeric(x) ) stop("'x' argument must be numeric")
24c24
<     if (is.na(n)) stop("invalid length(x)")
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
26c26
<     if (scale <= 0) stop("'scale' must be positive") # unlike S
---
>     if (scale <= 0) stop("'scale' argument must be positive") # unlike S
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/R/stripchart.R R/src/library/graphics/R/stripchart.R
43,44c43
< 	stop(gettextf("'at' must have length equal to the number %d of groups",
<                       n), domain = NA)
---
> 	stop(gettextf("'at' argument must have length equal to the number %d of groups", n), domain = "R-graphics")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/man/hist.Rd R/src/library/graphics/man/hist.Rd
15c15
<      main = paste("Histogram of" , xname),
---
>      main = gettextf("Histogram of \%s", xname, domain = "R-graphics"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/man/pairs.Rd R/src/library/graphics/man/pairs.Rd
22c22
<       horInd = 1:nc, verInd = 1:nc,
---
>       horInd = seq_len(nc), verInd = seq_len(nc),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/man/plothistogram.Rd R/src/library/graphics/man/plothistogram.Rd
17,18c17,18
<                main = paste("Histogram of",
<                             paste(x$xname, collapse = "\n")),
---
>                main = gettextf("Histogram of \%s",
>                             paste(x$xname, collapse = "\n"), domain = "R-graphics"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/base.c R/src/library/graphics/src/base.c
28a29
> #include "localization.h"
32,38d32
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #undef _
< #define _(String) dgettext ("graphics", String)
< #else
< #define _(String) (String)
< #endif
161c155
<     dpptr(dd)->new = dpSavedptr(dd)->new;
---
>     dpptr(dd)->newplot = dpSavedptr(dd)->newplot;
354c348
< 	  error("event 'GE_ScalePS' requires a single numeric value");
---
> 	  error(_("event 'GE_ScalePS' requires a single numeric value"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/graphics.c R/src/library/graphics/src/graphics.c
31a32
> #include "localization.h"
38,45d38
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #undef _
< #define _(String) dgettext ("grDevices", String)
< #else
< #define _(String) (String)
< #endif
< 
1790,1791c1783,1784
<      * gpptr(dd)->new to TRUE by par(new=TRUE)
<      * If gpptr(dd)->new is FALSE, we leave it that way (further GNewPlot's
---
>      * gpptr(dd)->newplot to TRUE by par(new=TRUE)
>      * If gpptr(dd)->newplot is FALSE, we leave it that way (further GNewPlot's
1793,1794c1786,1787
<      * If gpptr(dd)->new is TRUE, any subsequent drawing will dirty the plot
<      * and reset gpptr(dd)->new to FALSE
---
>      * If gpptr(dd)->newplot is TRUE, any subsequent drawing will dirty the plot
>      * and reset gpptr(dd)->newplot to FALSE
1805c1798
<     if (!gpptr(dd)->new) {
---
>     if (!gpptr(dd)->newplot) {
1870c1863
< 	G_ERR_MSG(_("outer margins too large (figure region too small)"));
---
> 	G_ERR_MSG(_("outer margins are too large (figure region is too small)"));
1872c1865
< 	G_ERR_MSG(_("figure region too large"));
---
> 	G_ERR_MSG(_("figure region is too large"));
1874c1867
< 	G_ERR_MSG(_("figure margins too large"));
---
> 	G_ERR_MSG(_("figure margins are too large"));
1876c1869
< 	G_ERR_MSG(_("plot region too large"));
---
> 	G_ERR_MSG(_("plot region is too large"));
2178c2171
<     dp->new = FALSE;
---
>     dp->newplot = FALSE;
2536c2529
< #ifndef WIN32
---
> #ifndef _WIN32
2547c2540
< #ifndef WIN32
---
> #ifndef _WIN32
2598c2591
< 	error(_("No graphics device is active"));
---
> 	error(_("no graphics device is active"));
2600c2593
<     gpptr(dd)->new = dpptr(dd)->new = FALSE;
---
>     gpptr(dd)->newplot = dpptr(dd)->newplot = FALSE;
3154c3147
< 	error(_("invalid argument to GBox"));
---
> 	error(_("invalid argument passed to '%s' function"), "GBox()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/graphics.h R/src/library/graphics/src/graphics.h
20,26d19
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #undef _
< #define _(String) dgettext ("graphics", String)
< #else
< #define _(String) (String)
< #endif
Only in R/src/library/graphics/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/par-common.c R/src/library/graphics/src/par-common.c
43c43
< 	R_DEV__(new) = FALSE;
---
> 	R_DEV__(newplot) = FALSE;
248c248
< 	    warning("`mgp[1:3]' are of differing sign");
---
> 	    warning(_("'mgp[1:3]' are of differing sign"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/par.c R/src/library/graphics/src/par.c
45a46
> #include "localization.h"
274c275
< 	R_DEV__(new) = FALSE;
---
> 	R_DEV__(newplot) = FALSE;
442c443
< 	    error(_("parameter \"i\" in \"mfg\" is out of range"));
---
> 	    error(_("parameter \"%s\" in \"mfg\" parameter is out of range"), "i");
444c445
< 	    error(_("parameter \"j\" in \"mfg\" is out of range"));
---
> 	    error(_("parameter \"%s\" in \"mfg\" parameter is out of range"), "j");
449c450
< 		warning(_("value of 'nr' in \"mfg\" is wrong and will be ignored"));
---
> 		warning(_("value of '%s' in \"mfg\" parameter is wrong and will be ignored"), "nr");
451c452
< 		warning(_("value of 'nc' in \"mfg\" is wrong and will be ignored"));
---
> 		warning(_("value of '%s' in \"mfg\" parameter is wrong and will be ignored"), "nc");
467c468
< 	R_DEV_2(new) = TRUE;
---
> 	R_DEV_2(newplot) = TRUE;
478,479c479,480
< 	    if(ix != 0) warning(_("calling par(new=TRUE) with no plot"));
< 	} else R_DEV__(new) = (ix != 0);
---
> 	    if(ix != 0) warning(_("calling 'par(new=TRUE)' with no plot"));
> 	} else R_DEV__(newplot) = (ix != 0);
897c898
< 	LOGICAL(value)[0] = dpptr(dd)->new;
---
> 	LOGICAL(value)[0] = dpptr(dd)->newplot;
926c927
<         if (dpptr(dd)->new) {
---
>         if (dpptr(dd)->newplot) {
1120c1121
< 	error(_("invalid argument passed to par()"));
---
> 	error(_("invalid argument passed to '%s' function"), "par()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/plot.c R/src/library/graphics/src/plot.c
26a27
> #include "localization.h"
28a30
> #include <R_ext/Minmax.h>
30c32
< #include <Rmath.h>  // Rexp10, fmin2, fmax2, imax2
---
> #include <Rmath.h>  // Rexp10, fmin2, fmax2
37c39
< 	error("invalid type passed to graphics function");
---
> 	error(_("invalid type passed to graphics function"));
185c187
< #ifndef Win32
---
> #ifndef _WIN32
197c199
< #ifndef Win32
---
> #ifndef _WIN32
209c211
< #ifndef Win32
---
> #ifndef _WIN32
217c219
<     else error(_("invalid font specification"));
---
>     else error(_("invalid '%s' specification"), "font");
473c475
< 	error(_("at least 3 arguments required"));
---
> 	error(_("at least 3 arguments are required"));
516c518
< 	    error(_("NAs not allowed in 'xlim'"));
---
> 	    error(_("NA values are not allowed in '%s'"), "xlim");
522c524
< 	    error(_("need finite 'xlim' values"));
---
> 	    error(_("'%s' needs finite values"), "xlim");
528c530
< 	    error(_("NAs not allowed in 'ylim'"));
---
> 	    error(_("NA values are not allowed in '%s'"), "ylim");
534c536
< 	    error(_("need finite 'ylim' values"));
---
> 	    error(_("'%s' needs finite values"), "ylim");
850c852
< 	error(_("'hadj' must be of length one"));
---
> 	error(_("'%s' argument must be of length 1"), "hadj");
862c864
< 	error(_("'gap.axis' must be of length one"));
---
> 	error(_("'%s' argument must be of length 1"), "gap.axis");
892c894
< 	error(_("'gap.axis' must be NA or a finite number"));
---
> 	error(_("'%s' argument must be NA or a finite number"), "gap.axis");
944c946
< 		error(_("'labels' is supplied and not 'at'"));
---
> 		error(_("'labels' argument is supplied and not 'at' argument"));
948,949c950
< 	    error(_("'at' and 'labels' lengths differ, %d != %d"),
< 		      length(at), length(lab));
---
> 	    error(_("'at' and 'labels' argument lengths differ, %d != %d"), length(at), length(lab));
1346c1347
< 	error(_("'x' and 'y' lengths differ in %s()"), subname);\
---
> 	error(_("'x' and 'y' argument lengths differ in '%s' function"), subname);\
1350c1351
<     PLOT_XY_DEALING("plot.xy");
---
>     PLOT_XY_DEALING("plot.xy()");
1820c1821
< 	error("unable to allocate memory (in GPath)");
---
> 	error("unable to allocate memory (in 'GPath()')");
1826c1827
<             error("invalid 'x' or 'y' (in 'GPath')");
---
>             error("invalid 'x' or 'y' arguments (in 'GPath()')");
2104c2105
<     PLOT_XY_DEALING("text");
---
>     PLOT_XY_DEALING("text()");
2189c2190
<     for (i = 0; i < imax2(n,ntxt); i++) {
---
>     for (i = 0; i < max(n,ntxt); i++) {
2466,2467c2467,2468
<     gpnewsave = gpptr(dd)->new;
<     dpnewsave = dpptr(dd)->new;
---
>     gpnewsave = gpptr(dd)->newplot;
>     dpnewsave = dpptr(dd)->newplot;
2478,2479c2479,2480
< 	gpnewsave = gpptr(dd)->new;
< 	dpnewsave = dpptr(dd)->new;
---
> 	gpnewsave = gpptr(dd)->newplot;
> 	dpnewsave = dpptr(dd)->newplot;
2529,2530c2530,2531
< 	gpptr(dd)->new = gpnewsave;
< 	dpptr(dd)->new = dpnewsave;
---
> 	gpptr(dd)->newplot = gpnewsave;
> 	dpptr(dd)->newplot = dpnewsave;
2811c2812
< 		error(_("invalid a=, b= specification"));
---
> 		error(_("invalid '%s' specification"), "a=, b=");
2820c2821
< 	    error(_("'a' and 'b' must be finite"));
---
> 	    error(_("'a' and 'b' arguments must be finite"));
3027c3028
< 	    error(_("invalid number of points in %s"), "locator()");
---
> 	    error(_("invalid number of points in '%s' function"), "locator()");
3167c3168
< 	    error(_("invalid number of points in %s"), "identify()");
---
> 	    error(_("invalid number of points in '%s' function"), "identify()");
3183c3184
< 	    warning(_("more 'labels' than points"));
---
> 	    warning(_("more labels than points"));
3241c3242
< 		    REprintf(_("warning: nearest point already identified\n"));
---
> 		    REprintf(_("warning: nearest point is already identified\n"));
3852c3853
< 	    error(_("invalid 'thermometers[, 1:2]'"));
---
> 	    error(_("invalid 'thermometers[, %s]'"), "1:2");
4012c4013
< 	error("unable to allocate memory (in xspline)");
---
> 	error(_("unable to allocate memory (in 'xspline()')"));
4064c4065
<     if(!R_FINITE(x1)) error("invalid '%s' argument", "x1");
---
>     if(!R_FINITE(x1)) error(_("invalid '%s' argument"), "x1");
4067c4068
<     if(!R_FINITE(x2)) error("invalid '%s' argument", "x2");
---
>     if(!R_FINITE(x2)) error(_("invalid '%s' argument"), "x2");
4070c4071
<     if(!R_FINITE(y1)) error("invalid '%s' argument", "y1");
---
>     if(!R_FINITE(y1)) error(_("invalid '%s' argument"), "y1");
4073c4074
<     if(!R_FINITE(y2)) error("invalid '%s' argument", "y2");
---
>     if(!R_FINITE(y2)) error(_("invalid '%s' argument"), "y2");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/plot3d.c R/src/library/graphics/src/plot3d.c
25a26
> #include "localization.h"
37c38
< 	error("invalid type passed to graphics function");
---
> 	error(_("invalid type passed to graphics function"));
1112c1113
< 	error(_("invalid 'x' limits"));
---
> 	error(_("invalid '%s' limits"), "x");
1114c1115
< 	error(_("invalid 'y' limits"));
---
> 	error(_("invalid '%s' limits"), "y");
1116c1117
< 	error(_("invalid 'z' limits"));
---
> 	error(_("invalid '%s' limits"), "z");
1137c1138
< 	error(_("'xlab' must be a character vector of length 1"));
---
> 	error(_("'%s' argument must be a character vector of length 1"), "xlab");
1139c1140
< 	error(_("'ylab' must be a character vector of length 1"));
---
> 	error(_("'%s' argument must be a character vector of length 1"), "ylab");
1141c1142
< 	error(_("'zlab' must be a character vector of length 1"));
---
> 	error(_("'%s' argument must be a character vector of length 1"), "zlab");
1932c1933
< 	    error(_("missing 'x' values"));
---
> 	    error(_("missing '%s' values"), "x");
1934c1935
< 	    error(_("increasing 'x' values expected"));
---
> 	    error(_("increasing '%s' values expected"), "x");
1939c1940
< 	    error(_("missing 'y' values"));
---
> 	    error(_("missing '%s' values"), "y");
1941c1942
< 	    error(_("increasing 'y' values expected"));
---
> 	    error(_("increasing '%s' values expected"), "y");
1958c1959
< 	    warning(_("all z values are equal"));
---
> 	    warning(_("all 'z' values are equal"));
1960c1961
< 	    warning(_("all z values are NA"));
---
> 	    warning(_("all 'z' values are NA"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/graphics/src/stem.c R/src/library/graphics/src/stem.c
29c29
< #include <Rmath.h> /* for imin2 and imax2 */
---
> #include <Rmath.h>
32a33
> #include <R_ext/Minmax.h>
35,40c36
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("graphics", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
69c65
< 	mm = imin2(2, imax2(0, (int)(r*c/25)));
---
> 	mm = min(2, max(0, (int)(r*c/25)));
105d100
<     Rprintf("  The decimal point is ");
107c102,106
< 	Rprintf("at the |\n\n");
---
> 	Rprintf(_("  The decimal point is at the |\n\n"));
>     else
> 	{
> 	if(pdigits > 0)
> 		Rprintf(n_("  The decimal point is %d digit to the right of the |\n\n", "  The decimal point is %d digits to the right of the |\n\n", pdigits), pdigits);
109,110c108,109
< 	Rprintf("%d digit(s) to the %s of the |\n\n",abs(pdigits),
< 		(pdigits > 0) ? "right" : "left");
---
> 		Rprintf(n_("  The decimal point is %d digit to the left of the |\n\n", "  The decimal point is %d digits to the left of the |\n\n", -pdigits), -pdigits);
> 	}
147c146
<     if(TYPEOF(x) != REALSXP || TYPEOF(scale) != REALSXP) error("invalid input");
---
>     if(TYPEOF(x) != REALSXP || TYPEOF(scale) != REALSXP) error(_("invalid input"));
189c188
< 		    error("count for a bin exceeds INT_MAX");
---
> 		    error(_("count for a bin exceeds INT_MAX"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/components.R R/src/library/grid/R/components.R
41c41
<       stop("invalid 'at' location in 'axis'")
---
>       stop(gettextf("invalid '%s' component of argument 'x'", "at"))
47c47
<       stop("invalid to specify axis labels when 'at' is NULL")
---
>       stop(gettextf("invalid to specify axis labels when 'at' component of argument 'x' is NULL", "at"))
52c52
<       stop("'labels' and 'at' locations must have same length")
---
>       stop(gettextf("'%s' and '%s' components of argument 'x' must have same length", "labels", "at"))
170c170
< 	stop("logical 'label' supplied of length 0")
---
> 	stop("'label' argument must be of length > 0")
298c298
< 	stop("logical 'label' supplied of length 0")
---
> 	stop("'label' argument must be of length > 0")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/curve.R R/src/library/grid/R/curve.R
443c443
<         stop("'x1', 'y1', 'x2', and 'y2' must be units")
---
>         stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must be objects of class %s", "x1", "y1", "x2", "y2", dQuote("unit")))
448c448
<         stop("'shape' must be between -1 and 1")
---
>         stop(gettextf("'%s' component of argument 'x' must be between -1 and 1", "shape"))
451c451
<         stop("'squareShape' must be between -1 and 1")
---
>         stop(gettextf("'%s' component of argument 'x' must be between -1 and 1", "squareShape"))
454c454
<         stop("'arrow' must be an arrow object or NULL")
---
>         stop(gettextf("'%s' component of argument 'x' must be an object of class %s or NULL", "arror", dQuote("arrow")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/edit.R R/src/library/grid/R/edit.R
35c35
<       stop("invalid 'edit' information")
---
>       stop(gettextf("'%s' argument is not an object of class %s", "edit", dQuote("gEdit")))
50c50
<     stop("'gEditList' can only contain 'gEdit' objects")
---
>     stop("'gEditList()' can only contain objects of class \"gEdit\"")
67c67
<         stop("invalid 'edit' information")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "edits", dQuote("gEditList")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/frames.R R/src/library/grid/R/frames.R
136c136
<     stop("invalid 'frame'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "frame", dQuote("frame")))
138c138
<     stop("invalid 'grob'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "grob", dQuote("grob")))
150c150
<     stop("invalid 'row' and/or 'col' (no such cell in frame layout)")
---
>     stop("invalid 'row' and/or 'col' arguments (no such cell in frame layout)")
327c327
<     stop("invalid 'frame'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "frame", dQuote("frame")))
329c329
<     stop("invalid 'grob'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "grob", dQuote("grob")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/function.R R/src/library/grid/R/function.R
22c22
<         stop("invalid 'n'")
---
>         stop(gettextf("invalid '%s' component of argument 'x'", "n"))
26c26
<         stop("invalid 'f'")
---
>         stop(gettextf("invalid '%s' component of argument 'x'", "f"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/gpar.R R/src/library/grid/R/gpar.R
42,43c42
<       stop(gettextf("'gpar' element '%s' must not be length 0", gparname),
<            domain = NA)
---
>       stop(gettextf("'gpar' element '%s' must not be length 0", gparname), domain = "R-grid")
65c64
<                        domain=NA)
---
>                        domain="R-grid")
123c122
<       stop("invalid 'linemitre' value")
---
>       stop(gettextf("invalid '%s' value", "linemitre"))
128c127
<       stop("invalid 'alpha' value")
---
>       stop(gettextf("invalid '%s' value", "alpha"))
203c202
<     stop("argument must be a 'gpar' object")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gp", dQuote("gpar")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/grid.R R/src/library/grid/R/grid.R
98c98
<     stop("must specify at least one viewport")
---
>     stop("'pushViewport()' must specify at least one viewport")
152c152
<             stop("Down viewport failed to record on display list")
---
>             stop("down viewport failed to record on display list")
158c158
<         warning("Down viewport incorrectly recorded on display list")
---
>         warning("down viewport incorrectly recorded on display list")
274c274
<         stop("Invalid number of generations")
---
>         stop("invalid number of generations")
279c279
<             stop("Invalid number of generations")
---
>             stop("invalid number of generations")
522c522
<         stop("'expr' must return a grob or gList")
---
>         stop(gettextf("'%s' component of argument 'x' must return an object of class %s or class %s", "expr", dQuote("grob"), dQuote("gList")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/grob.R R/src/library/grid/R/grob.R
44c44
<             stop("invalid 'grob' argument")
---
>             stop(gettextf("'%s' argument is not an object of class %s", "grob", dQuote("grob")))
61c61
<       stop("invalid 'vp' slot")
---
>       stop(gettextf("invalid '%s' argument", "vp"))
113c113
<     stop("invalid 'grob' class")
---
>     stop(gettextf("invalid %s class", dQuote("grob")))
141,142c141
<       stop(ngettext(sum(bad), "invalid grob name", "invalid grob names"),
<            domain = NA)
---
>       stop(ngettext(sum(bad), "invalid grob name", "invalid grob names", domain = "R-grid"), domain = NA)
182c181
<         stop("unable to coerce to \"gList\"")
---
>         stop("unable to coerce 'x' argument to an object of class \"gList\"")
210c209
<     stop("invalid element to add to \"gList\"")
---
>     stop("invalid element to add to an object of class \"gList\"")
255c254
<     stop("can only set 'children' for a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("gTree")))
258c257
<     stop("'children' must be a \"gList\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "children", dQuote("gList")))
279c278
<     stop("it is only valid to get 'children' from a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
306c305
<     stop("invalid \"gTree\" class")
---
>     stop(gettextf("invalid %s class", dQuote("gTree")))
352c351
<     stop("'allDevices' not yet implemented")
---
>     stop("'allDevices' argument is not yet implemented")
356c355
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
358c357
<     stop("invalid 'grep' value")
---
>     stop(gettextf("invalid '%s' value", "grep"))
373c372
<     stop("it is only valid to get a child from a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
377c376
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
382c381
<       stop("invalid 'grep' value")
---
>       stop(gettextf("invalid '%s' value", "grep"))
395c394
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
397c396
<     stop("invalid 'grep' value")
---
>     stop(gettextf("invalid '%s' value", "grep"))
420c419
<     stop("it is only valid to set a child of a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
422c421
<     stop("it is only valid to set a 'grob' as child of a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "newGrob", dQuote("grob")))
426c425
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
428c427
<     stop("invalid 'grep' value")
---
>     stop(gettextf("invalid '%s' value", "grep"))
437,438c436
<           stop(gettextf("New 'grob' name (%s) does not match 'gPath' (%s)",
<                         newGrob$name, gPath), domain = NA)
---
>           stop(gettextf("New 'grob' name (%s) does not match 'gPath' (%s)", newGrob$name, gPath), domain = "R-grid")
456c454
<     stop("'allDevices' not yet implemented")
---
>     stop("'allDevices' argument is not yet implemented")
460c458
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
462c460
<     stop("invalid 'grep' value")
---
>     stop(gettextf("invalid '%s' value", "grep"))
471c469
<         stop("it is only valid to add a 'grob' to a \"gTree\"")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "child", dQuote("grob")))
479c477
<             stop("it is only valid to add a child to a \"gTree\"")
---
>             stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
481c479
<             stop("invalid 'grep' value")
---
>             stop(gettextf("invalid '%s' value", "grep"))
487,489c485
<                 warning(gettextf("'gPath' (%s) not found",
<                                  as.character(gPath)),
<                         domain = NA)
---
>                 warning(gettextf("'gPath' (%s) was not found", as.character(gPath)), domain = "R-grid")
502c498
<     stop("'allDevices' not yet implemented")
---
>     stop("'allDevices' argument is not yet implemented")
506c502
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
508c504
<     stop("invalid 'grep' value")
---
>     stop(gettextf("invalid '%s' value", "grep"))
532c528
<         stop("it is only valid to remove a child from a \"gTree\"")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
536c532
<         stop("invalid 'gPath'")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
538c534
<         stop("invalid 'grep' value")
---
>         stop(gettextf("invalid '%s' value", "grep"))
554,555c550
<             warning(gettextf("'gPath' (%s) not found", as.character(gPath)),
<                     domain = NA)
---
>             warning(gettextf("'gPath' (%s) was not found", as.character(gPath)), domain = "R-grid")
567c562
<     stop("'allDevices' not yet implemented")
---
>     stop("'allDevices' argument is not yet implemented")
571c566
<     stop("invalid 'gPath'")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gPath", dQuote("gPath")))
573c568
<     stop("invalid 'grep' value")
---
>     stop(gettextf("invalid '%s' value", "grep"))
596c591
<             stop("it is only valid to edit a child of a \"gTree\"")
---
>             stop(gettextf("'%s' argument is not an object of class %s", "grob", dQuote("gTree")))
598c593
<             stop("invalid 'grep' value")
---
>             stop(gettextf("invalid '%s' value", "grep"))
604,606c599
<                 warning(gettextf("'gPath' (%s) not found",
<                                  as.character(gPath)),
<                         domain = NA)
---
>                 warning(gettextf("'gPath' (%s) was not found", as.character(gPath)), domain = "R-grid")
740c733
<     stop("invalid 'result'")
---
>     stop(gettextf("invalid '%s' argument", "result"))
1051c1044
<         warning(gettextf("slot '%s' not found", i), domain = NA)
---
>         warning(gettextf("slot '%s' was not found", i), domain = "R-grid")
1198c1191
<     stop(gettextf("'gPath' (%s) not found", as.character(gPath)), domain = NA)
---
>     stop(gettextf("'gPath' (%s) was not found", as.character(gPath)), domain = "R-grid")
1210c1203
<     stop("it is only valid to add a child to a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
1362c1355
<     stop(gettextf("'gPath' (%s) not found", gPath), domain = NA)
---
>     stop(gettextf("'gPath' (%s) was not found", gPath), domain = "R-grid")
1373c1366
<     stop("it is only valid to remove a child from a \"gTree\"")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "gTree", dQuote("gTree")))
1538,1540c1531
<     stop(gettextf("gPath (%s) not found",
<                   paste(gPath, name, sep=.grid.pathSep)),
<                   domain = NA)
---
>     stop(gettextf("'gPath' (%s) was not found", paste(gPath, name, sep=.grid.pathSep)), domain = "R-grid")
1634c1625
<         stop(gettextf("gPath (%s) not found", name), domain = NA)
---
>         stop(gettextf("'gPath' (%s) was not found", name), domain = "R-grid")
1666c1657
<     stop(gettextf("grob '%s' not found", name), domain = NA)
---
>     stop(gettextf("'grob' (%s) was not found", name), domain = "R-grid")
1679c1670
<     stop(gettextf("grob '%s' not found", name), domain = NA)
---
>     stop(gettextf("'grob' (%s) was not found", name), domain = "R-grid")
1960,1961c1951
<     warning("this function is redundant and will disappear in future versions",
<             domain = NA)
---
>     warning("this function is redundant and will disappear in future versions", domain = "R-grid")
2228c2218
<         stop("can only reorder 'children' for a \"gTree\"")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("gTree")))
2239c2229
<             stop("Invalid 'order'")
---
>             stop(gettextf("invalid '%s' value", "order"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/highlevel.R R/src/library/grid/R/highlevel.R
102c102
<     for (i in 1L:nplots) {
---
>     for (i in seq_len(nplots)) {
138c138
<     stop("'l' must be a layout")
---
>     stop("'l' argument must be a layout")
148,149c148,149
<   for (i in 1L:l$nrow)
<     for (j in 1L:l$ncol) {
---
>   for (i in seq_len(l$nrow))
>     for (j in seq_len(l$ncol)) {
272c272
<     stop("'pch' and 'labels' not the same length")
---
>     stop("'pch' and 'labels' arguments are not of the same length")
282c282
<   for (i in 1L:nkeys) {
---
>   for (i in seq_len(nkeys)) {
319c319
<     if (length(hgap) != 1) stop("'hgap' must be single unit")
---
>     if (length(hgap) != 1) stop("'hgap' argument must be single unit")
322c322
<     if (length(vgap) != 1) stop("'vgap' must be single unit")
---
>     if (length(vgap) != 1) stop("'vgap' argument must be single unit")
329,330c329,330
<     if(nrow < 1) stop("'nrow' must be >= 1")
<     if(ncol < 1) stop("'ncol' must be >= 1")
---
>     if(nrow < 1) stop("'nrow' argument must be >= 1")
>     if(ncol < 1) stop("'ncol' argument must be >= 1")
406c406
<   pch <- 1L:3
---
>   pch <- seq_len(3)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/ls.R R/src/library/grid/R/ls.R
64c64
<         stop("invalid 'print' argument")
---
>         stop(gettextf("invalid '%s' argument", "print"))
76c76
<         result <- lapply(display.list[1L:dl.index], gridList,
---
>         result <- lapply(display.list[seq_len(dl.index)], gridList,
699c699
<         stop("invalid listing")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("flatGridListing")))
720c720
<         stop("invalid 'listing'")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("flatGridListing")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/origin.R R/src/library/grid/R/origin.R
24c24
<     stop("invalid 'origin'")
---
>     stop(gettextf("invalid '%s' value", "origin"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/primitives.R R/src/library/grid/R/primitives.R
26c26
<         stop("'length' must be a 'unit' object")
---
>         stop(gettextf("'%s' argument is not an object of class %s", "length", dQuote("unit")))
80c80
<     stop("'x' and 'y' must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
83c83
<     stop("'x' and 'y' must have length 1")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be of length 1", "x", "y"))
115c115
<     stop("'x' and 'y' must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
118c118
<     stop("'x' and 'y' must have length 1")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be of length 1", "x", "y"))
120c120
<       stop("invalid 'arrow' argument")
---
>       stop(gettextf("invalid '%s' component of argument 'x'", "arrow"))
157c157
<     stop("'x' and 'y' must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
159c159
<       stop("invalid 'arrow' argument")
---
>       stop(gettextf("invalid '%s' component of argument 'x'", "arrow"))
237c237
<       stop("'x' and 'y' must be units")
---
>       stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
239c239
<       stop("it is invalid to specify both 'id' and 'id.lengths'")
---
>       stop("it is invalid to specify both 'id' and 'id.lengths' components of argument 'x'")
241c241
<       stop("'x' and 'y' must be same length")
---
>       stop(gettextf("'%s' and '%s' components of argument 'x' must be same length", "x", "y"))
243c243
<       stop("'x' and 'y' and 'id' must all be same length")
---
>       stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must all be same length", "x", "y", "id"))
247c247
<       stop("'x' and 'y' and 'id.lengths' must specify same overall length")
---
>       stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must specify same overall length", "x", "y", "id.lengths"))
251c251
<       stop("invalid 'arrow' argument")
---
>       stop(gettextf("invalid '%s' component of argument 'x'", "arrow"))
332c332
<       stop("invalid 'arrow' argument")
---
>       stop(gettextf("invalid '%s' component of argument 'x'", "arrow"))
423c423
<     stop("'x' and 'y' must be units or NULL")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be objects of class %s or NULL", "x", "y", dQuote("unit")))
425c425
<     stop("'length' must be a 'unit' object")
---
>     stop(gettextf("'%s' component of argument 'x' must be an object of class %s", "length", dQuote("unit")))
538c538
<     .Defunct(msg="'arrowsGrob' is defunct; use 'arrow' arguments to line drawing functions")
---
>     .Defunct(msg="'arrowsGrob()' is defunct; use 'arrow' arguments to line drawing functions")
547c547
<     .Defunct(msg="'grid.arrows' is defunct; use 'arrow' arguments to line drawing functions")
---
>     .Defunct(msg="'grid.arrows()' is defunct; use 'arrow' arguments to line drawing functions")
557c557
<     stop("'x' and 'y' must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
559c559
<     stop("it is invalid to specify both 'id' and 'id.lengths'")
---
>     stop("it is invalid to specify both 'id' and 'id.lengths' components of argument 'x'")
561c561
<     stop("'x' and 'y' must be same length")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be same length", "x", "y"))
563c563
<     stop("'x' and 'y' and 'id' must all be same length")
---
>     stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must all be same length", "x", "y", "id"))
567c567
<     stop("'x' and 'y' and 'id.lengths' must specify same overall length")
---
>     stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must specify same overall length", "x", "y", "id.lengths"))
653c653
<         stop("'x' and 'y' must be units")
---
>         stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
655c655
<         stop("it is invalid to specify both 'id' and 'id.lengths'")
---
>         stop("it is invalid to specify both 'id' and 'id.lengths' components of argument 'x'")
657c657
<         stop("'x' and 'y' must be same length")
---
>         stop(gettextf("'%s' and '%s' components of argument 'x' must be same length", "x", "y"))
659c659
<         stop("'x' and 'y' and 'id' must all be same length")
---
>         stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must all be same length", "x", "y", "id"))
665c665
<         stop("'x' and 'y' and 'id.lengths' must specify same overall length")
---
>         stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must specify same overall length", "x", "y", "id.lengths"))
667c667
<     	stop("'x' and 'y' and 'pathId.lengths' must specify same overall length")
---
>     	stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must specify same overall length", "x", "y", "pathId.lengths"))
774c774
<     stop("x and y must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be objects of class %s", "x", "y", dQuote("unit")))
776c776
<     stop("it is invalid to specify both 'id' and 'id.lengths'")
---
>     stop("it is invalid to specify both 'id' and 'id.lengths' components of argument 'x'")
780c780
<     stop("'x' and 'y' must be same length")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must have same length", "x", "y"))
782c782
<     stop("'x' and 'y' and 'id' must all be same length")
---
>     stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must all be same length", "x", "y", "id"))
786c786
<     stop("'x' and 'y' and 'id.lengths' must specify same overall length")
---
>     stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must specify same overall length", "x", "y", "id.lengths"))
790c790
<       stop("invalid 'arrow' argument")
---
>       stop(gettextf("invalid '%s' component of argument 'x'", "arrow"))
792c792
<     stop("'shape' must be between -1 and 1")
---
>     stop(gettextf("'%s' component of argument 'x' must be between -1 and 1", "shape"))
950c950
<         stop("x and y must be units")
---
>         stop(gettextf("'%s' and '%s' components of argument 'x' must be objects of class %s", "x", "y", dQuote("unit")))
952c952
<         stop("it is invalid to specify both 'id' and 'id.lengths'")
---
>         stop("it is invalid to specify both 'id' and 'id.lengths' components of argument 'x'")
956c956
<         stop("'x' and 'y' must be same length")
---
>         stop(gettextf("'%s' and '%s' components of argument 'x' must be same length", "x", "y"))
958c958
<         stop("'x' and 'y' and 'id' must all be same length")
---
>         stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must all be same length", "x", "y", "id"))
962c962
<         stop("'x' and 'y' and 'id.lengths' must specify same overall length")
---
>         stop(gettextf("'%s' and '%s' and '%s' components of argument 'x' must specify same overall length", "x", "y", "id.lengths"))
971c971
<             id <- rep(1L:n, x$id.lengths)
---
>             id <- rep(seq_len(n), x$id.lengths)
980c980
<         stop("invalid 'arrow' argument")
---
>         stop(gettextf("invalid '%s' component of argument 'x'", "arrow"))
1037c1037
<     stop("'x', 'y', and 'r' must be units")
---
>     stop(gettextf("'%s', '%s' and '%s' components must be units", "x", "y", "r"))
1108c1108
<     stop("'x', 'y', 'width', and 'height' must be units")
---
>     stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must be units", "x", "y", "width", "height"))
1210c1210
<         stop("'x', 'y', 'width', and 'height' must be units")
---
>         stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must be units", "x", "y", "width", "height"))
1384c1384
<     stop("'x' and 'y' must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
1387c1387
<     stop("invalid 'rot' value")
---
>     stop(gettextf("invalid '%s' component of argument 'x'", "rot"))
1505c1505
<     stop("zero-length 'pch'")
---
>     stop("zero-length 'pch' argument")
1517c1517
<     stop("'x', 'y' and 'size' must be units")
---
>     stop(gettextf("'%s', '%s' and '%s' components must be units", "x", "y", "size"))
1519c1519
<     stop("'x' and 'y' must be 'unit' objects and have the same length")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be objects of class %s and have the same length", "x", "y", dQuote("unit")))
1596c1596
<     stop("'x', 'y', 'width', and 'height' must be units")
---
>     stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must be units", "x", "y", "width", "height"))
1599c1599
<     stop("'x', 'y', 'width', and 'height' must all be units of length 1")
---
>     stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must all be units of length 1", "x", "y", "width", "height"))
1644c1644
<     stop("'x' and 'y' must be units")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must be units", "x", "y"))
1646c1646
<     stop("'x' and 'y' must all be units of length 1")
---
>     stop(gettextf("'%s' and '%s' components of argument 'x' must all be units of length 1", "x", "y"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/roundRect.R R/src/library/grid/R/roundRect.R
47c47
<         stop("'x', 'y', 'width', and 'height' must be units")
---
>         stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must be objects of class %s", "x", "y", "width", "height", dQuote("unit")))
49c49
<         stop("'r' must be a 'unit' object")
---
>         stop(gettextf("'%s' component of argument 'x' must be an object of class %s", "r", dQuote("unit")))
54c54
<         stop("'x', 'y', 'width', and 'height' must have length 1")
---
>         stop(gettextf("'%s', '%s', '%s', and '%s' components of argument 'x' must have length 1", "x", "y", "width", "height"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/unit.R R/src/library/grid/R/unit.R
32c32
<         stop("'x' and 'units' must have length > 0")
---
>         stop("'x' and 'units' arguments must be of length > 0")
57c57
<     stop("'x' argument must be a unit object")
---
>     stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("unit")))
246,247c246
<     stop(gettextf("operator '%s' not meaningful for units", .Generic),
<          domain = NA)
---
>     stop(gettextf("operator '%s' not meaningful for units", .Generic), domain = "R-grid")
284,285c283
<     stop(gettextf("'Summary' function '%s' not meaningful for units",
<                   .Generic), domain = NA)
---
>     stop(gettextf("'Summary' function '%s' not meaningful for units", .Generic), domain = "R-grid")
521c519
<     cat("Class 'unit.arithmetic' [1:", length(object), "] ", sep="")
---
>     cat(gettextf("Class 'unit.arithmetic' [1:%d] ", length(object), domain = "R-grid"))
580c578
<         stop("invalid 'unit' object")
---
>         stop(gettextf("invalid '%s' argument", "x"))
590c588
<   warning("'unit.rep' has been deprecated in favour of a unit method for the generic rep function", domain = NA)
---
>   warning("'unit.rep()' has been deprecated in favour of a unit method for the generic 'rep()' function", domain = "R-grid")
618c616
<    warning("'unit.length' has been deprecated in favour of a unit method for the generic length function", domain = NA)
---
>    warning("'unit.length()' has been deprecated in favour of a unit method for the generic 'length()' function", domain = "R-grid")
682c680
<                stop("invalid 'theta'"))
---
>                stop(gettextf("invalid '%s' value", "theta")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/R/viewport.R R/src/library/grid/R/viewport.R
40c40
<     stop("'x', 'y', 'width', and 'height' must all be units of length 1")
---
>     stop(gettextf("'%s', '%s', '%s' and '%s' arguments must all be units of length 1", "x", "y", "width", "height"))
42c42
<     stop("invalid 'gp' value")
---
>     stop(gettextf("invalid '%s' value", "gp"))
48c48
<                    stop("invalid 'clip' value"))
---
>                    stop(gettextf("invalid '%s' value", "clip")))
54c54
<     stop("invalid 'xscale' in viewport")
---
>     stop(gettextf("invalid '%s' argument in viewport", "xscale"))
57c57
<     stop("invalid 'yscale' in viewport")
---
>     stop(gettextf("invalid '%s' argument in viewport", "yscale"))
60c60
<     stop("invalid 'angle' in viewport")
---
>     stop(gettextf("invalid '%s' argument in viewport", "angle"))
62c62
<     stop("invalid 'layout' in viewport")
---
>     stop(gettextf("invalid '%s' argument in viewport", "layout"))
66c66
<       stop("invalid 'layout.pos.row' in viewport")
---
>       stop(gettextf("invalid '%s' argument in viewport", "layout.pos.row"))
71c71
<       stop("invalid 'layout.pos.col' in viewport")
---
>       stop(gettextf("invalid '%s' argument in viewport", "layout.pos.col"))
289c289
<     stop("'parent' must be a viewport and 'children' must be a 'vpList' in 'vpTree'")
---
>     stop("'parent' argument must be a viewport and 'children' argument must be a 'vpList' in 'vpTree'")
326c326
<                     "invalid viewport names"),
---
>                     "invalid viewport names", domain = "R-grid"),
403c403
<             stop("must specify at least one of 'x' or 'xscale'")
---
>             stop(gettextf("at least one of '%s' or '%s' arguments must be specified", "x", "xscale"))
408c408
<             stop("must specify at least one of 'y' or 'yscale'")
---
>             stop(gettextf("at least one of '%s' or '%s' arguments must be specified", "y", "yscale"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/gpar.c R/src/library/grid/src/gpar.c
21a22
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/grid.c R/src/library/grid/src/grid.c
23a24
> #include "localization.h"
518c519
<         snprintf(msg, 1024, "Viewport '%s' was not found", 
---
>         snprintf(msg, 1024, _("Viewport '%s' was not found"), 
662c663
<         snprintf(msg, 1024, "Viewport '%s' was not found", 
---
>         snprintf(msg, 1024, _("Viewport '%s' was not found"), 
3637c3638
<     return Rf_CreateAtVector(axp, usr, n, FALSE);
---
>     return CreateAtVector(axp, usr, n, FALSE);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/grid.h R/src/library/grid/src/grid.h
27a28
> #include <R_ext/Minmax.h>
30,35d30
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("grid", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/layout.c R/src/library/grid/src/layout.c
21a22
> #include "localization.h"
600c601
<         error(_("invalid 'layout.pos.row'"));
---
>         error(_("invalid '%s' argument"), "layout.pos.row");
604c605
<         error(_("invalid 'layout.pos.col'"));
---
>         error(_("invalid '%s' argument"), "layout.pos.col");
Only in R/src/library/grid/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/matrix.c R/src/library/grid/src/matrix.c
22a23
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/state.c R/src/library/grid/src/state.c
22a23
> #include "localization.h"
353c354
<                 gridState = VECTOR_ELT(data, imin2(nState, 2));
---
>                 gridState = VECTOR_ELT(data, min(nState, 2));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/unit.c R/src/library/grid/src/unit.c
21a22
> #include "localization.h"
85c86
< 	warning("unit attribute 'data' is of incorrect type");
---
> 	warning(_("unit attribute 'data' is of incorrect type"));
1706c1707
<             error(_("Viewport has zero dimension(s)"));
---
>             error(_("Viewport has zero dimensions"));
1737c1738
<             error(_("Viewport has zero dimension(s)"));
---
>             error(_("Viewport has zero dimensions"));
1902c1903
< 	error(_("Invalid unit"));
---
> 	error(_("invalid '%s' argument"), "unit");
1918c1919
< 	    error(_("'units' must be character"));
---
> 	    error(_("'%s' argument must be character"), "units");
1921c1922
< 	error(_("'units' must be of length > 0"));
---
> 	error(_("'%s' argument must be of length > 0"), "units");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/util.c R/src/library/grid/src/util.c
21a22
> #include "localization.h"
273c274
< 	error("grid grob object is empty");
---
> 	error(_("grid grob object is empty"));
285c286
< 	error("grid grob object is empty");
---
> 	error(_("grid grob object is empty"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/grid/src/viewport.c R/src/library/grid/src/viewport.c
21a22
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/BasicClasses.R R/src/library/methods/R/BasicClasses.R
165c165
< 		    domain = NA)
---
> 		    domain = "R-methods")
169,170c169
<     setMethod("slotsFromS3", "oldClass", function(object) getClass("oldClass")@slots,
<               where = envir)
---
>     setMethod("slotsFromS3", "oldClass", function(object) getClass("oldClass")@slots, where = envir)
172,173c171
<     setClass("ts", contains = "structure", representation(tsp = "numeric"),
<              prototype = prototype(NA, tsp = rep(1,3)), where = envir)
---
>     setClass("ts", contains = "structure", representation(tsp = "numeric"), prototype = prototype(NA, tsp = rep(1,3)), where = envir)
225c223
<         cat("Object of class \"", cl, "\"\n", sep = "")
---
>         cat(gettextf("An object of class %s", dQuote(cl), domain = "R-methods"), "\n", sep = "")
231c229
<             cat('Slot "', what, '":\n', sep = "")
---
>             cat(gettextf("Slot %s:", dQuote(what), domain = "R-methods"), "\n", sep = "")
262,263c260
<                 stop(gettextf(
<                     "unnamed argument to initialize() for S3 class must have a class definition; %s does not",
---
>                 stop(gettextf("unnamed argument passed to 'initialize()' for S3 class must have a class definition; %s does not",
265c262
<                      domain = NA)
---
>                      domain = "R-methods")
279c276
< 			       dQuote(Classi)), domain = NA)
---
> 			       dQuote(Classi)), domain = "R-methods")
353c350
<                               domain = NA),
---
>                               domain = "R-methods"),
366,368c363
<                         stop(gettextf("class %s is VIRTUAL; not meaningful to create an S4 object from this class",
<                                       dQuote(cl)),
<                              domain = NA)
---
>                         stop(gettextf("class %s is VIRTUAL; not meaningful to create an S4 object from this class", dQuote(cl)), domain = "R-methods")
375,377c370,371
<                             stop(gettextf("object must be a valid data part for class %s; not true of type %s",
< 					  dQuote(cl), dQuote(class(data))),
<                                  domain = NA)
---
>                             stop(gettextf("object must be a valid data part for class %s; not true of type %s", dQuote(cl), dQuote(class(data))),
>                                  domain = "R-methods")
440c434
<                   stop("cannot specify matrix() arguments when specifying '.Data'")
---
>                   stop("cannot specify arguments for 'matrix()' method when specifying '.Data'")
482c476
<                   stop("cannot specify array() arguments when specifying '.Data'")
---
>                   stop("cannot specify arguments for 'array()' method when specifying '.Data'")
595c589
<         cat("An object of class ", dQuote(class(object)), "\n")
---
>         cat(gettextf("An object of class %s", dQuote(class(object)), domain = "R-methods"), "\n", sep = "")
624c618
<                               stop("unnamed argument to new() must be an environment for the new object")
---
>                               stop("unnamed argument passed to 'new()' method must be an environment for the new object")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/BasicFunsList.R R/src/library/methods/R/BasicFunsList.R
156c156
<              domain = NA)
---
>              domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/ClassExtensions.R R/src/library/methods/R/ClassExtensions.R
87c87
<           stop(gettextf("S3Part() is only defined for classes set up by setOldCLass(), basic classes or subclasses of these:  not true of class %s", dQuote(class(object))), domain = NA)
---
>           stop(gettextf("'S3Part()' method is only defined for classes set up by 'setOldCLass()' method, basic classes or subclasses of these: not true of class %s", dQuote(class(object))), domain = "R-methods")
98c98
<       stop(gettextf("the 'S3Class' argument must be a superclass of %s:  not true of class %s", dQuote(class(object)), dQuote(S3Class)), domain = NA)
---
>       stop(gettextf("the 'S3Class' argument must be a superclass of %s: not true of class %s", dQuote(class(object)), dQuote(S3Class)), domain = "R-methods")
118c118
<       stop(gettextf("replacement value must extend class %s, got %s", dQuote(needClass), dQuote(S3Class[[1L]])), domain = NA)
---
>       stop(gettextf("replacement value must extend class %s, got %s", dQuote(needClass), dQuote(S3Class[[1L]])), domain = "R-methods")
160c160
<                   to, dQuote(class(from))), domain = NA)
---
>                   to, dQuote(class(from))), domain = "R-methods")
226c226
<                        dQuote(class(coerce))), domain = NA)
---
>                        dQuote(class(coerce))), domain = "R-methods")
268c268
<                                  TO, dQuote(FROM), TO, dQuote(class(value))), domain = NA)
---
>                                  TO, dQuote(FROM), TO, dQuote(class(value))), domain = "R-methods")
302c302
<                              to, dQuote(Class)), domain = NA)
---
>                              to, dQuote(Class)), domain = "R-methods")
317c317
<                       dQuote(class(replace))), domain = NA)
---
>                       dQuote(class(replace))), domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/ClassUnion.R R/src/library/methods/R/ClassUnion.R
26c26
<                      "Class must be an empty virtual class with NULL prototype"
---
>                      gettext("Class must be an empty virtual class with NULL prototype")
40c40
<             stop(gettextf("the member classes must be defined: not true of %s",
---
>             stop(sprintf(gettext("the member classes must be defined: not true of %s", domain = "R-methods"),
65c65
<         stop(gettextf("unable to create union class:  could not set members %s",
---
>         stop(sprintf(gettext("unable to create union class: could not set members %s", domain = "R-methods"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/Methods.R R/src/library/methods/R/Methods.R
43c43
<                       .isSingleName(name)), domain = NA)
---
>                       .isSingleName(name)), domain = "R-methods")
59c59
<             stop(msg, domain = NA)
---
>             stop(msg, domain = "R-methods")
116c116
<                           name), domain = NA)
---
>                           name), domain = "R-methods")
134c134
<         stop(gettextf("must supply a function skeleton for %s, explicitly or via an existing function", sQuote(name)), domain = NA)
---
>         stop(gettextf("must supply a function skeleton for %s, explicitly or via an existing function", sQuote(name)), domain = "R-methods")
175,176c175,176
<                 thisPName <- if(identical(thisPackage, ".GlobalEnv"))
<                     "the global environment" else paste("package", sQuote(thisPackage))
---
> #                thisPName <- if(identical(thisPackage, ".GlobalEnv"))
> #                    gettext("the global environment") else gettextf("package %s", sQuote(thisPackage))
179,182c179,184
<                     message(gettextf(
<                        "Creating a generic function for %s from %s in %s\n    (from the saved implicit definition)",
<                                      sQuote(name), sQuote(package),
<                                      thisPName), domain = NA)
---
> 		  if(identical(thisPackage, ".GlobalEnv"))
>                     message(gettextf("Creating a generic function for %s from %s in the global environment (from the saved implicit definition)",
>                                      sQuote(name), sQuote(package), domain = "R-methods"), domain = NA)
> 		  else 
>                     message(gettextf("Creating a generic function for %s from %s in package %s (from the saved implicit definition)",
>                                      sQuote(name), sQuote(package), sQuote(thisPackage), domain = "R-methods"), domain = NA)
186,189c188,191
<                     message(gettextf(
<                          "Creating a new generic function for %s in %s",
<                                      sQuote(name), thisPName),
<                          domain = NA)
---
> 		  if(identical(thisPackage, ".GlobalEnv"))
>                     message(gettextf("Creating a new generic function for %s in the global environment", sQuote(name)), domain = "R-methods")
> 		  else
>                     message(gettextf("Creating a new generic function for %s in package %s", sQuote(name), sQuote(thisPackage)), domain = "R-methods")
194,198c196,201
<                 warning(gettextf(
< 			"no generic version of %s on package %s is allowed;\n   a new generic will be assigned for %s",
<                                  sQuote(name), sQuote(package),
<                                  thisPName),
<                         domain = NA)
---
> 	      if(identical(thisPackage, ".GlobalEnv"))
>                 warning(gettextf("no generic version of %s on package %s is allowed; a new generic will be assigned for the global environment",
>                                  sQuote(name), sQuote(package)), domain = "R-methods")
> 	      else
>                 warning(gettextf("no generic version of %s on package %s is allowed; a new generic will be assigned for package %s",
>                                  sQuote(name), sQuote(package), sQuote(thisPackage)), domain = "R-methods")
293,295c296
<         warning(gettextf("function %s appears to be a generic function, but with generic name %s",
<                          sQuote(f), sQuote(gen)),
<                 domain = NA)
---
>         warning(gettextf("function %s appears to be a generic function, but with generic name %s", sQuote(f), sQuote(gen)), domain = "R-methods")
327c328
<                 domain = NA)
---
>                 domain = "R-methods")
399c400
<              domain = NA)
---
>              domain = "R-methods")
466c467
<              domain = NA)
---
>              domain = "R-methods")
489c490
<                                   getPackageName(where)), domain = NA)
---
>                                   getPackageName(where)), domain = "R-methods")
495c496
<                 message(strwrap(msg), domain = NA)
---
>                 message(strwrap(msg), domain = "R-methods")
506c507
<              domain = NA)
---
>              domain = "R-methods")
514,515c515,516
<             thisPName <- if(identical(thisPackage, ".GlobalEnv"))
<                              "the global environment" else paste("package", sQuote(thisPackage))
---
> #            thisPName <- if(identical(thisPackage, ".GlobalEnv"))
> #            gettext("the global environment") else gettextf("package %s", sQuote(thisPackage))
517,518c518,519
<                 message(gettextf("Creating a generic function from function %s in %s",
<                                  sQuote(f), thisPName), domain = NA)
---
> 	 if(identical(thisPackage, ".GlobalEnv"))
>           message(gettextf("Creating a generic function from function %s in the global environment", sQuote(f)), domain = "R-methods")
520,522c521,529
<                 message(gettextf("Creating a generic function for %s from package %s in %s",
<                                  sQuote(f), sQuote(fdef@package), thisPName),
<                         domain = NA)
---
>           message(gettextf("Creating a generic function from function %s in package %s", sQuote(f), sQuote(thisPackage)), domain = "R-methods")
>         else {
> 	 if(identical(thisPackage, ".GlobalEnv"))
>           message(gettextf("Creating a generic function for %s from package %s in the global environment",
>                            sQuote(f), sQuote(fdef@package), domain = "R-methods"), domain = NA)
> 	 else
>           message(gettextf("Creating a generic function for %s from package %s in package %s",
>                            sQuote(f), sQuote(fdef@package), sQuote(thisPackage), domain = "R-methods"), domain = NA)
> 	}
529c536
<                           f, getPackageName(where)), domain = NA)
---
>                           f, getPackageName(where)), domain = "R-methods")
537c544
<              domain = NA)
---
>              domain = "R-methods")
553c560
<                                domain = NA, call. = FALSE)
---
>                                domain = "R-methods", call. = FALSE)
584c591
< 			 dQuote(class(definition))), domain = NA)
---
> 			 dQuote(class(definition))), domain = "R-methods")
629c636
<                 domain = NA)
---
>                 domain = "R-methods")
633c640
<         warning(gettextf("no method found for function %s and signature %s",
---
>         warning(sprintf(gettext("no method found for function %s and signature %s", domain = "R-methods"),
649c656
<                 domain = NA)
---
>                 domain = "R-methods")
666c673
<                 domain = NA)
---
>                 domain = "R-methods")
701c708
<                deparse(where)), domain = NA)
---
>                deparse(where)), domain = "R-methods")
718c725
< 	stop(gettextf("no generic function found for '%s'", f), domain = NA)
---
> 	stop(gettextf("no generic function found for %s", sQuote(f)), domain = "R-methods")
731,732c738,739
< 	    stop(gettextf("no method found for function '%s' and signature %s",
< 			  f, paste(signature, collapse = ", ")))
---
> 	    stop(sprintf(gettext("no method found for function '%s' and signature %s", domain = "R-methods"),
> 			  f, paste(signature, collapse = ", ")), domain = NA)
740c747
<     stop("defunct methods list search", domain = NA)
---
>     stop("defunct methods list search", domain = "R-Methods")
807c814
<             cat("* mlist environment with", length(mlist),"potential methods\n")
---
>             cat(gettextf("* mlist environment with %d potential methods", length(mlist), domain = "R-methods"), "\n", sep = "")
814,816c821
<               stop(gettextf("no method for %s matches class %s",
<                             sQuote("..."), dQuote(signature)),
<                    domain = NA)
---
>               stop(gettextf("no method for %s matches class %s", sQuote("..."), dQuote(signature)), domain = "R-methods")
825,826c830,831
< 	    if(verbose) cat("  no direct match found to signature (",
< 			    paste(signature, collapse=", "),")\n", sep="")
---
> 	    if(verbose) cat(sprintf(gettext("  no direct match found to signature (%s)", domain = "R-methods"),
> 			    paste(signature, collapse = ", "), domain = NA), "\n", sep = "")
829,830c834
< 		    allmethods <- .getMethodsTable(fdef, fenv, check=FALSE,
<                                                    inherited=TRUE)
---
> 		    allmethods <- .getMethodsTable(fdef, fenv, check=FALSE, inherited=TRUE)
844,845c848
< 	    else stop(gettextf("no method found for signature %s",
< 			       paste(signature, collapse=", ")))
---
> 	    else stop(gettextf("no method found for signature %s", paste(signature, collapse=", "), domain = "R-methods"), domain = NA)
856c859
<                  domain = NA)
---
>                  domain = "R-methods")
859,860c862
< 	stop("selectMethod(): mlist is not an environment or NULL :\n",
< 	     "** should no longer happen!", domain = NA)
---
> 	stop("selectMethod(): mlist is not an environment or NULL :\n** should no longer happen!", domain = "R-methods")
903,906c905
<             stop(gettextf(
< 		"bad class specified for element %d (should be a single character string)",
< 		i), domain = NA)
< 
---
>             stop(gettextf("bad class specified for element %d (should be a single character string)", i), domain = "R-methods")
944c943
<                       dQuote(class(f))), domain = NA)
---
>                       dQuote(class(f))), domain = "R-methods")
949c948
< 	cat(file = con, "no applicable functions\n")
---
> 	cat(file = con, gettext("no applicable functions", domain = "R-methods"), "\n", sep = "")
967d965
<         out <- paste0("\nFunction \"", f, "\":\n")
969c967
<             cat(file = con, out, "<not an S4 generic function>\n")
---
>             cat(file = con, "\n", gettextf("Function %s:\n<not an S4 generic function>", sQuote(f), domain = "R-methods"), "\n", sep = "")
1114c1112
<         stop("must supply 'generic.function' or 'class'")
---
>         stop(gettextf("'%s' or '%s' argument must be supplied", "generic.function", "class"))
1142c1140
<                 domain = NA)
---
>                 domain = "R-methods")
1164c1162
<                         domain = NA)
---
>                         domain = "R-methods")
1189c1187
<                             domain = NA)
---
>                             domain = "R-methods")
1213c1211
<                  domain = NA)
---
>                  domain = "R-methods")
1235c1233
<                         domain = NA)
---
>                         domain = "R-methods")
1242c1240
<               stop(MSG, domain = NA),
---
>               stop(MSG, domain = "R-methods"),
1290c1288
<         stop("callGeneric() must be called from within a method body")
---
>         stop("'callGeneric()' function must be called from within a method body")
1382c1380
<         stop(gettextf('expected a non-empty character string for argument name'), domain = NA)
---
>         stop(gettextf("expected a non-empty character string for argument name"), domain = "R-methods")
1384c1382
<         stop(gettextf('generic function supplied was not created for %s',
---
>         stop(gettextf("generic function supplied was not created for %s",
1386c1384
<              domain = NA)
---
>              domain = "R-methods")
1400c1398
<                            domain = NA)
---
>                            domain = "R-methods")
1434c1432
<                 domain = NA)
---
>                 domain = "R-methods")
1457c1455
<                       dQuote(class(what))), domain = NA)
---
>                       dQuote(class(what))), domain = "R-methods")
1497c1495
< 	return(gettext("original function is prohibited as a generic function"))
---
> 	return(gettext("original function is prohibited as a generic function", domain = "R-methods"))
1499c1497
< 	return(gettext("not both functions!"))
---
> 	return(gettext("not both functions!", domain = "R-methods"))
1505c1503
<                                   deparse(substitute(f1))))
---
>                                   deparse(substitute(f1)), domain = "R-methods"))
1507c1505
<                                   deparse(substitute(f2))))
---
>                                   deparse(substitute(f2)), domain = "R-methods"))
1514c1512
< 	    return(gettext("formal arguments differ (in default values?)"))
---
> 	    return(gettext("formal arguments differ (in default values?)", domain = "R-methods"))
1522c1520
< 			    paste(a2, collapse = ", ")))
---
> 			    paste(a2, collapse = ", "), domain = "R-methods"))
1534c1532
<                         paste(f2@signature, collapse = ", ")))
---
>                         paste(f2@signature, collapse = ", "), domain = "R-methods"))
1538c1536
<                         .dQ(gpString(f2@package))))
---
>                         .dQ(gpString(f2@package)), domain = "R-methods"))
1542c1540
<                         .dQ(gpString(f2@group))))
---
>                         .dQ(gpString(f2@group)), domain = "R-methods"))
1546c1544
<                         .dQ(f1@generic), .dQ(f2@generic)))
---
>                         .dQ(f1@generic), .dQ(f2@generic), domain = "R-methods"))
1586c1584
<              domain = NA)
---
>              domain = "R-methods")
1593c1591
<                 domain = NA)
---
>                 domain = "R-methods")
1602c1600
<           stop(gettextf("only FALSE is meaningful for 'inherited', when 'where' is supplied (got %s)", inherited), domain = NA)
---
>           stop(gettextf("only FALSE is meaningful for 'inherited', when 'where' is supplied (got %s)", inherited))
1666c1664
<                       .notSingleString(f)), domain = NA)
---
>                       .notSingleString(f)), domain = "R-methods")
1682c1680
< 		     domain = NA)
---
> 		     domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/MethodsList.R R/src/library/methods/R/MethodsList.R
63c63
<     if(anyDuplicated(mnames))
---
>     if(anyDuplicated(mnames)) {
65,66c65
<              level, paste("\"", unique(mnames[duplicated(mnames)]), "\"",
<                           collapse=", ")), domain = NA)
---
>              level, paste(dQuote(unique(mnames[duplicated(mnames)])), collapse = ", "), domain = "R-methods"), domain = NA) }
77c76
<                  domain = NA)
---
>                  domain = "R-methods")
123c122
<                 domain = NA)
---
>                 domain = "R-methods")
132,134c131
<         stop(gettextf("inserting method into non-methods-list object (class %s)",
<                       dQuote(.class1(mlist))),
<              domain = NA)
---
>         stop(gettextf("inserting method into non-methods-list object (class %s)", dQuote(.class1(mlist))), domain = "R-methods")
230c227
<                  domain = NA)
---
>                  domain = "R-methods")
236c233
<              domain = NA)
---
>              domain = "R-methods")
399c396
<                domain = NA)
---
>                domain = "R-methods")
472c469
<              domain = NA)
---
>              domain = "R-methods")
500c497
<                      i), domain = NA)
---
>                      i), domain = "R-methods")
506c503
<              domain = NA)
---
>              domain = "R-methods")
522c519
< 	    else function(...) warning(..., call. = FALSE)
---
> 	    else function(...) warning(..., call. = FALSE, domain = NA)
526,528c523,524
< 				 "no definition for classes %s"),
< 			paste(dQuote(unknown), collapse = ", ")),
< 		domain = NA)
---
> 				 "no definition for classes %s", domain = "R-methods"),
> 			paste(dQuote(unknown), collapse = ", ")))
537c533
<              domain = NA)
---
>              domain = "R-methods")
540c536
<                       length(signature), length(anames), sQuote(fun@generic)), domain = NA)
---
>                       length(signature), length(anames), sQuote(fun@generic)), domain = "R-methods")
556c552
<                           sQuote(fun@generic), domain = NA))
---
>                           sQuote(fun@generic), domain = "R-methods"))
562c558
<                           sQuote(fun@generic), domain = NA))
---
>                           sQuote(fun@generic), domain = "R-methods"))
580c576
<                                   "in the method signature for function %s invalid argument names in the signature: %s"),
---
>                                   "in the method signature for function %s invalid argument names in the signature: %s", domain = "R-methods"),
636c632
<     cat(file=con, "<Empty Methods List>\n")
---
>     cat(file=con, gettext("<Empty Methods List>", domain = "R-methods"), "\n", sep = "")
643,644c639
<         labels[[i]] <- paste0(args[[i]], " = \"", sigi, "\"",
<                               collapse = ", ")
---
>         labels[[i]] <- paste(args[[i]], " = \"", sigi, "\"", sep = "", collapse = ", ")
652c647
<       cat(file=con, (if(includeDefs) "## Signature:" else ""), labels[[i]])
---
>       cat(file=con, (if(includeDefs) gettext("## Signature:", domain = "R-methods") else ""), labels[[i]])
666,669c661
<               paste0(names(defFrom), " = \"",
<                      as.character(defFrom), "\"",
<                      collapse = ", "),
<                ")", if(includeDefs) "\n", sep="")
---
>               paste(names(defFrom), " = \"", as.character(defFrom), "\"", sep = "", collapse = ", "), ")", if(includeDefs) "\n", sep = "")
698c690
< 	     domain = NA)
---
> 	     domain = "R-methods")
758,759c750,759
<     .message("A shell of methods documentation has been written",
<              .fileDesc(filename), ".\n")
---
>     if(is.character(filename)) {
>         if(nzchar(filename))
>             .message(gettextf("A shell of methods documentation has been written to the file %s.\n", sQuote(filename)), domain = "R-methods")
>         else
>             .message("A shell of methods documentation has been written to the standard output connection.\n", domain = "R-methods")
>     }
>     else if(inherits(filename, "connection"))
>             .message(gettextf("A shell of methods documentation has been written to the connection %s.\n", sQuote(summary(filename)$description)), domain = "R-methods")
>     else # what, indeed?
>     .message("A shell of methods documentation has been written.\n", domain = "R-methods")
804c804
<                 warning(gettextf("skipping methods list element %s of unexpected class %s\n\n",
---
>                 warning(sprintf(gettext("skipping methods list element %s of unexpected class %s\n\n", domain = "R-methods"),
915c915
<             "Use of the \"MethodsList\" meta data objects is deprecated."
---
>             gettext("Use of the \"MethodsList\" meta data objects is deprecated.", domain = "R-methods")
919c919
< 		dQuote(this))
---
> 		dQuote(this), domain= "R-methods")
921,922c921,922
<             gettextf("In %s: use of \"MethodsList\" metadata objects is deprecated.",
<                      deparse(this))
---
>             gettextf("In command %s: use of \"MethodsList\" metadata objects is deprecated.",
>                      sQuote(deparse(this)), domain= "R-methods")
924,925c924,925
<       , if(!missing(instead)) gettextf("Use %s instead. ", dQuote(instead))
<       , "See ?MethodsList. (This warning is shown once per session.)"))
---
>       , if(!missing(instead)) gettextf("Use %s instead. ", dQuote(instead), domain= "R-methods")
>       , gettext("See ?MethodsList. (This warning is shown once per session.)", domain= "R-methods")))
931c931
<             "Use of the \"MethodsList\" meta data objects is defunct."
---
>             gettext("Use of the \"MethodsList\" meta data objects is defunct.", domain = "R-methods")
934c934
<                      dQuote(this))
---
>                      dQuote(this), domain = "R-methods")
936,937c936,937
<             gettextf("In %s: use of \"MethodsList\" metadata objects is defunct.",
<                      deparse(this))
---
>             gettextf("In command %s: use of \"MethodsList\" metadata objects is defunct.",
>                      deparse(this), domain = "R-methods")
939,940c939,940
<       , if(!missing(instead)) gettextf("Use %s instead. ", dQuote(instead))
<       , "See ?MethodsList."))
---
>       , if(!missing(instead)) gettextf("Use %s instead. ", dQuote(instead), domain= "R-methods")
>       , gettext("See ?MethodsList.", domain= "R-methods")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/MethodsListClass.R R/src/library/methods/R/MethodsListClass.R
103,105c103
<                stop(gettextf("invalid object for formal method definition: type %s",
<                              dQuote(typeof(def))),
<                     domain = NA)
---
>                stop(gettextf("invalid object for formal method definition: type %s", dQuote(typeof(def))), domain = "R-methods")
163c161
<                                 domain = NA)
---
>                                 domain = "R-methods")
170c168
<                     stop(gettextf("'initialize' method returned an object of class %s instead of the required class %s",
---
>                     stop(sprintf(gettext("'initialize' method returned an object of class %s instead of the required class %s", domain = "R-methods"),
222c220
<                   cat("An object of class \"", class(object), "\":\n", sep="")
---
>                   cat(gettextf("An object of class %s:", dQuote(class(object)), domain = "R-methods"), "\n", sep = "")
225c223
<                       cat("(All from \"", unique(pkg), "\")\n", sep="")
---
>                       cat(gettextf("(All objects are from package %s)", unique(sQuote(pkg)), domain = "R-methods"), "\n", sep = "")
229,230c227
< 		      dimnames(mat) <- list(c("Object:", "Package:"),
< 					    rep("", length(data)))
---
> 		      dimnames(mat) <- list(c(gettext("Object:", domain = "R-methods"), gettext("Package:", domain = "R-methods")), rep("", length(data)))
239,241c236,238
<                                        "Reported %d ambiguous selection out of %d for function %s\n",
<                                        "Reported %d ambiguous selections out of %d for function %s\n"),
<                               nreport, length(object@allSelections), object@generic))
---
>                                        "Reported %d ambiguous selection out of %d for function %s",
>                                        "Reported %d ambiguous selections out of %d for function %s", domain = "R-methods"),
>                               nreport, length(object@allSelections), sQuote(object@generic)), "\n", sep = "")
247,249c244,245
<                       cat(gettextf(
<                                    '%d: target "%s": chose "%s" (others: %s)',
<                                    i,target[[i]], selected[[i]], paste0('"', these, '"', collapse =", ")))
---
>                       cat(sprintf(gettext("%d: target %s: chose %s (others: %s)", domain = "R-methods"),
>                                    i, dQuote(target[[i]]), dQuote(selected[[i]]), paste(dQuote(these), collapse = ", ")))
251c247
<                           cat(gettextf("\n    Notes: %s.\n", notei))
---
>                           cat("\n    ", gettextf("Notes: %s.", notei, domain = "R-methods"), "\n", sep = "")
259c255
<                   cat(gettextf("class generator function for class %s from package %s\n",
---
>                   cat(gettextf("class generator function for class %s from package %s",
261c257
<                                sQuote(object@package)))
---
>                                sQuote(object@package), domain = "R-methods"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/NextMethod.R R/src/library/methods/R/NextMethod.R
71c71
<                  domain = NA)
---
>                  domain = "R-methods")
105c105
<                       dQuote(class(method))), domain = NA)
---
>                       dQuote(class(method))), domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/RClassUtils.R R/src/library/methods/R/RClassUtils.R
152c152
<                      domain = NA)
---
>                      domain = "R-methods")
169c169
<         warning(gettextf("in constructing the prototype for class %s, slots in prototype and not in class: %s",
---
>         warning(sprintf(gettext("in constructing the prototype for class %s, slots in prototype and not in class: %s", domain = "R-methods"),
191c191
<         stop(gettextf("in making the prototype for class %s elements of the prototype failed to match the corresponding slot class: %s",
---
>         stop(sprintf(gettext("in making the prototype for class %s elements of the prototype failed to match the corresponding slot class: %s", domain = "R-methods"),
193,197c193
<                       paste(pnames[check],
<                             "(class",
<                             .dQ(slotDefs[match(pnames[check], slotNames)]),
<                             ")",
<                             collapse = ", ")),
---
>                       paste(pnames[check], gettextf("(class %s)", .dQ(slotDefs[match(pnames[check], slotNames)])), collapse = ", ")),
249c245
<         warning(gettextf("potential cycle in class inheritance: %s has duplicates in superclasses and subclasses (%s)",
---
>         warning(sprintf(gettext("potential cycle in class inheritance: %s has duplicates in superclasses and subclasses (%s)", domain = "R-methods"),
288c284
< #                                 "): coercion to some may fail")
---
> #                                 "): coercion to some may fail", domain = NA)
299c295
< #                                paste0(c(Class, ext)[dupClasses], collapse = ", ")))
---
> #                                paste0(c(Class, ext)[dupClasses], collapse = ", ")), domain = NA)
410c406
<                  domain = NA)
---
>                  domain = "R-methods")
416c412
<                         domain = NA)
---
>                         domain = "R-methods")
449c445
<     else stop("'Class' must be a valid class definition or class")
---
>     else stop("'Class' argument must be a valid class definition or class")
511c507
<                domain = NA)
---
>                domain = "R-methods")
517c513
<                domain = NA)
---
>                domain = "R-methods")
614c610
<                        stop("'externalptr' objects cannot be initialized from new()")
---
>                        stop("'externalptr' objects cannot be initialized from function 'new()'")
634,635c630
<                           msg <- paste0("Calling new() on an undefined and non-basic class (\"",
<                                         Class, "\")")
---
>                           msg <- gettextf("Calling function 'new()' on an undefined and non-basic class (\"%s\")", Class)
638,639c633
<                               gettextf("initializing objects from class %s with these arguments is not supported",
<                                        dQuote(Class))
---
>                               gettextf("initializing objects from class %s with these arguments is not supported", dQuote(Class))
645c639
<       stop(msg, domain = NA)
---
>       stop(msg, domain = "R-methods")
683c677
<                domain = NA)
---
>                domain = "R-methods")
694c688
<                      domain = NA)
---
>                      domain = "R-methods")
718c712
<                        domain = NA)
---
>                        domain = "R-methods")
748c742
<                                domain = NA)
---
>                                domain = "R-methods")
754c748
<                            domain = NA)
---
>                            domain = "R-methods")
778c772
<                            domain = NA)
---
>                            domain = "R-methods")
786c780
<                    domain = NA)
---
>                    domain = "R-methods")
814c808
<                    domain = NA)
---
>                    domain = "R-methods")
819c813
<                   warning("prototype is a list with named elements (could be ambiguous):  better to use function prototype() to avoid trouble.")
---
>                   warning("prototype is a list with named elements (could be ambiguous): better to use function 'prototype()' to avoid trouble.")
831,834c825,826
<                                     "named elements of prototype do not correspond to slot names: %s"),
<                            paste(.dQ(pnames[is.na(match(pnames, slots))]),
<                                  collapse =", ")),
<                    domain = NA)
---
>                                     "named elements of prototype do not correspond to slot names: %s", domain = "R-methods"),
>                            paste(.dQ(pnames[is.na(match(pnames, slots))]), collapse = ", ")), domain = NA)
886c878
<     function(Class, complete = TRUE, propertiesAreCalled = "Slots")
---
>     function(Class, complete = TRUE)
896,901c888,901
<     cat(if(isTRUE(ClassDef@virtual)) "Virtual ",
< 	"Class ", .dQ(Class),
< 	## Show the package if that is non-trivial:
< 	if(nzchar(pkg <- ClassDef@package))
< 	c(" [", if(pkg != ".GlobalEnv") "package" else "in", " \"", pkg,"\"]"),
< 	"\n", sep="")
---
>      pkg <- ClassDef@package
>     if(isTRUE(ClassDef@virtual) && nzchar(pkg) && pkg != ".GlobalEnv")
>      cat(gettextf("Virtual Class %s [package in %s]", .dQ(Class), sQuote(pkg), domain = "R-methods"))
>     else if(!isTRUE(ClassDef@virtual) && nzchar(pkg) && pkg != ".GlobalEnv")
>      cat(gettextf("Class %s [package in %s]", .dQ(Class), sQuote(pkg), domain = "R-methods"))
>     else if(isTRUE(ClassDef@virtual) && nzchar(pkg) && pkg == ".GlobalEnv")
>      cat(gettextf("Virtual Class %s [in %s]", .dQ(Class), sQuote(pkg), domain = "R-methods"))
>     else if(!isTRUE(ClassDef@virtual) && nzchar(pkg) && pkg == ".GlobalEnv")
>      cat(gettextf("Class %s [in %s]", .dQ(Class), sQuote(pkg), domain = "R-methods"))
>     else if(isTRUE(ClassDef@virtual) && !nzchar(pkg))
>      cat(gettextf("Virtual Class %s", .dQ(Class), domain = "R-methods"))
>     else if(!isTRUE(ClassDef@virtual) && !nzchar(pkg))
>      cat(gettextf("Class %s", .dQ(Class), domain = "R-methods"))
>     cat("\n") 
904c904,905
<         printPropertiesList(x, propertiesAreCalled)
---
> 	cat("\n", gettext("Slots:", domain = "R-methods"), "\n", sep = "")
>         printPropertiesList(x)
907,908c908
<         cat("\nNo ", propertiesAreCalled, ", prototype of class \"",
<             .class1(ClassDef@prototype), "\"\n", sep="")
---
>         cat("\n", gettextf("No slots, prototype of class %s", dQuote(.class1(ClassDef@prototype)), domain = "R-methods"), "\n", sep = "")
911c911
<         cat("\nExtends: ")
---
>         cat("\n", gettextf("Class %s consists of following classes: ", .dQ(Class), domain = "R-methods"), sep = "")
916c916
<         cat("\nKnown Subclasses: ")
---
>         cat("\n", gettext("Known Subclasses: ", domain = "R-methods"), sep = "")
921c921
< printPropertiesList <- function(x, propertiesAreCalled) {
---
> printPropertiesList <- function(x) {
924c924
<         cat("\n",propertiesAreCalled, ":\n", sep="")
---
> #        cat("\n", gettext("Slots:", domain = "R-methods"), "\n", sep = "")
927c927
<         dimnames(text) <- list(c("Name:", "Class:"), rep.int("", n))
---
>         dimnames(text) <- list(c(gettext("Name:", domain = "R-methods"), gettext("Class:", domain = "R-methods")), rep.int("", n))
938a939
>     directly <- logical(length(ext))
942,957c943,974
<             how[i] <-
<                 if(length(eli@by))
< 		    paste("by class", paste0("\"", eli@by, "\", distance ",
< 					     eli@distance, collapse = ", "))
<                 else if(isTRUE(eli@dataPart))
<                     "from data part"
<                 else "directly"
<             if(!eli@simple) {
<                 if(is.function(eli@test) && !isTRUE(body(eli@test))) {
<                     how[i] <-
<                         paste0(how[i], if(is.function(eli@coerce))
<                               ", with explicit test and coerce" else
<                               ", with explicit test")
<                 }
<                 else if(is.function(eli@coerce))
<                     how[i] <- paste0(how[i], ", with explicit coerce")
---
> 	   if(!eli@simple && is.function(eli@test) && !isTRUE(body(eli@test)) && is.function(eli@coerce) && length(eli@by)) { #1
> 		tmp_N <- paste(dQuote(eli@by), ", ", gettextf("distance %d", eli@distance), sep = "", collapse = ", ")
> 		how[i] <- gettextf("Class %s, by class %s, with explicit test and coerce", dQuote(what[i]), tmp_N, domain = "R-methods")
> 	   } else if(!eli@simple && is.function(eli@test) && !isTRUE(body(eli@test)) && is.function(eli@coerce) && isTRUE(eli@dataPart)) { #2
> 		how[i] <- gettextf("Class %s, from data part, with explicit test and coerce", dQuote(what[i]), domain = "R-methods")
> 	   } else if(!eli@simple && is.function(eli@test) && !isTRUE(body(eli@test)) && is.function(eli@coerce)) { #3
> 		how[i] <- gettextf("Class %s, directly, with explicit test and coerce", dQuote(what[i]), domain = "R-methods");
> 		directly[i] <- TRUE
> 	   } else if(!eli@simple && is.function(eli@test) && !isTRUE(body(eli@test)) && !is.function(eli@coerce) && length(eli@by)) { #4
> 		tmp_N <- paste(dQuote(eli@by), ", ", gettextf("distance %d", eli@distance), sep = "", collapse = ", ")
> 		how[i] <- gettextf("Class %s, by class %s, with explicit test", dQuote(what[i]), tmp_N, domain = "R-methods")
> 	   } else if(!eli@simple && is.function(eli@test) && !isTRUE(body(eli@test)) && !is.function(eli@coerce) && isTRUE(eli@dataPart)) { #5
> 		how[i] <- gettextf("Class %s, from data part, with explicit test", dQuote(what[i]), domain = "R-methods")
> 	   } else if(!eli@simple && is.function(eli@test) && !isTRUE(body(eli@test)) && !is.function(eli@coerce)) { #6
> 		how[i] <- gettextf("Class %s, directly, with explicit test", dQuote(what[i]), domain = "R-methods");
> 		directly[i] <- TRUE
> 	   } else if(!eli@simple && !(is.function(eli@test) && !isTRUE(body(eli@test))) && is.function(eli@coerce) && length(eli@by)) { #7
> 		tmp_N <- paste(dQuote(eli@by), ", ", gettextf("distance %d", eli@distance), sep = "", collapse = ", ")
> 		how[i] <- gettextf("Class %s, by class %s, with explicit coerce", dQuote(what[i]), tmp_N, domain = "R-methods")
> 	   } else if(!eli@simple && !(is.function(eli@test) && !isTRUE(body(eli@test))) && is.function(eli@coerce) && isTRUE(eli@dataPart)) { #8
> 		how[i] <- gettextf("Class %s, from data part, with explicit coerce", dQuote(what[i]), domain = "R-methods")
> 	   } else if(!eli@simple && !(is.function(eli@test) && !isTRUE(body(eli@test))) && is.function(eli@coerce)) { #9
> 		how[i] <- gettextf("Class %s, directly, with explicit coerce", dQuote(what[i]), domain = "R-methods");
> 		directly[i] <- TRUE
> 	   } else if(length(eli@by)) { #12
> 		tmp_N <- paste(dQuote(eli@by), ", ", gettextf("distance %d", eli@distance), sep = "", collapse = ", ")
>                 how[i] <- gettextf("Class %s, by class %s", dQuote(what[i]), tmp_N, domain = "R-methods")
> 	   } else if(isTRUE(eli@dataPart)) { #11
> 		how[i] <- gettextf("Class %s, from data part", dQuote(what[i]), domain = "R-methods")
> 	   } else { # 10
> 		how[i] <- gettextf("Class %s, directly", dQuote(what[i]), domain = "R-methods");
> 		directly[i] <- TRUE
963,964c980,981
<     else if(all(!nzchar(how)) ||  all(how == "directly")) {
<         what <- paste0('"', what, '"')
---
>     else if(all(!nzchar(how)) ||  all(directly == TRUE)) {
>         what <- dQuote(what)
966c983
<             what <- c(paste0(what[-length(what)], ","), what[[length(what)]])
---
>             what <- c(paste(what[-length(what)], collapse = ", "), what[[length(what)]])
969,970c986
<     else cat(file = printTo, "\n",
< 	     paste0("Class \"", what, "\", ", how, "\n"), sep = "")
---
>     else { cat(file = printTo, "\n"); cat(file = printTo, how, sep = "\n") }
977c993
<   showClass(x, propertiesAreCalled="Slots")
---
>   showClass(x)
1142c1158
<                  domain = NA)
---
>                  domain = "R-methods")
1153c1169,1173
<                     whatError <-  "contain itself"
---
>                 stop(gettextf("class %s may not contain itself: it contains class %s, with a circular relation back to %s",
>                              dQuote(className),
>                              dQuote(exti@by),
>                              dQuote(className)),
>                      domain = "R-methods")
1156,1160c1176,1177
<                     whatError <- "have itself as a subclass"
<                 }
<                 ## this is not translatable
<                 stop(sprintf("class %s may not %s: it contains class %s, with a circular relation back to %s",
<                              dQuote(className), whatError,
---
>                 stop(gettextf("class %s may not have itself as a subclass: it contains class %s, with a circular relation back to %s",
>                              dQuote(className),
1163c1180,1181
<                      domain = NA)
---
>                      domain = "R-methods")
>                 }
1188c1206
<                 warning(gettextf("class %s is inheriting an inconsistent superclass structure from class %s, inconsistent with %s",
---
>                 warning(sprintf(gettext("class %s is inheriting an inconsistent superclass structure from class %s, inconsistent with %s", domain = "R-methods"),
1198c1216
<           warning(gettextf("unable to find a consistent ordering of superclasses for class %s: order chosen is inconsistent with the superclasses of %s",
---
>           warning(sprintf(gettext("unable to find a consistent ordering of superclasses for class %s: order chosen is inconsistent with the superclasses of %s", domain = "R-methods"),
1318c1336
<     message <- paste("for function", f, message)
---
>     message <- gettextf("for function %s: %s", f, message)
1322,1323c1340
<         message <- paste("Required method", message, "not defined for signature",
<                          target)
---
>         message <- gettextf("Required method %s not defined for signature %s", message, target)
1325c1342
<             message <- paste(message, ", required for signature", defined)
---
>             message <- gettextf("Required method %s not defined for signature %s, required for signature %s", message, target, defined)
1327c1344
<     else message <- paste("Required method not defined", message)
---
>     else message <- gettextf("Required method not defined: %s", message)
1345c1362
<         stop("\"class\" is a reserved slot name and cannot be redefined")
---
>         stop("'class' is a reserved slot name and cannot be redefined")
1357c1374
<               stop("Data part is undefined for general S4 object")
---
>               stop("Data part ('.Data' slot) is undefined for general S4 object")
1370c1387
<                  domain = NA)
---
>                  domain = "R-methods")
1417c1434
<                domain = NA)
---
>                domain = "R-methods")
1472c1489
<                   .dQ(prevDataPartClass), .dQ(value)), domain = NA)
---
>                   .dQ(prevDataPartClass), .dQ(value)), domain = "R-methods")
1516c1533
< ###    if(!strictBy) message("Extends: ",from, ": ", paste(what, collapse = ", "))
---
> ###    if(!strictBy) message(gettextf("Extends: %s: ",from),  paste(what, collapse = ", "), domain = NA)
1529c1546
< ###    if(!strictBy) message("Subclasses: ",by, ": ", paste(what, collapse = ", "))
---
> ###    if(!strictBy) message(gettextf("Subclasses: %s: ",by), paste(what, collapse = ", "), domain = NA)
1729,1731c1746,1747
<             stop(sprintf("trying to change the argument list of %s with %d arguments to have arguments (%s)",
<                          functionName, n, paste(newArgs, collapse = ", ")),
<                  domain = NA)
---
>             stop(sprintf(gettext("trying to change the argument list of %s with %d arguments to have arguments (%s)", domain = "R-methods"),
>                          functionName, n, paste(newArgs, collapse = ", ")), domain = NA)
1737,1740c1753,1754
<             stop(sprintf("get rid of variables in definition %s (%s); they conflict with the needed change to argument names (%s)",
<                          functionName,
<                          paste(checkFor[!is.na(match(checkFor, locals))], collapse = ", "),
<                          paste(newArgs, collapse = ", ")), domain = NA)
---
>             stop(sprintf(gettext("get rid of variables in definition %s (%s); they conflict with the needed change to argument names (%s)", domain = "R-methods"),
>                          functionName, paste(checkFor[!is.na(match(checkFor, locals))], collapse = ", "), paste(newArgs, collapse = ", ")), domain = NA)
1750c1764
<                 sprintf("NOTE: arguments in definition %s changed from (%s) to (%s)",
---
>                 message(sprintf(gettext("NOTE: arguments in definition %s changed from (%s) to (%s)", domain = "R-methods"),
1753,1754c1767
<                         paste(newArgs, collapse = ", "))
<             message(msg, domain = NA)
---
>                         paste(newArgs, collapse = ", ")), domain = NA)
1765,1766c1778,1779
<                  domain = NA)
<         validity <- substituteFunctionArgs(validity, "object", functionName = sprintf("validity method for class '%s'", Class))
---
>                  domain = "R-methods")
>         validity <- substituteFunctionArgs(validity, "object", functionName = gettextf("validity method for class \"%s\"", Class))
1833c1846
<                domain = NA)
---
>                domain = "R-methods")
1878c1891
<                  domain = NA)
---
>                  domain = "R-methods")
1993c2006
<                     domain = NA)
---
>                     domain = "R-methods")
2014c2027
<         message(gettextf("Note: the specification for class %s in package %s seems equivalent to one from package %s: not turning on duplicate class definitions for this class.",
---
>         message(gettextf("Note: the specification for class %s in package %s seems equivalent to one from package %s and is not turning on duplicate class definitions for this class",
2018c2031
<                     domain = NA)
---
>                     domain = "R-methods")
2072,2075c2085,2088
< 				"Found more than one class \"%s\" in cache; using the first, from namespace '%s'",
<                            value[[1]]@className, pkgs[1]), domain=NA)
<                                message("Also defined by ",
<                                        paste(sQuote(pkgs[-1]), collapse = " "))
---
> 				"Found more than one class %s in cache; using the first, from namespace '%s'",
> 				dQuote(value[[1]]@className), pkgs[1]), domain = "R-methods")
>                                message(gettextf("Also defined by %s",
>                                        paste(sQuote(pkgs[-1]), collapse = " ")))
2144,2146c2157
< 	    message(gettextf(paste("From .checkSubclasses(): subclass %s of class %s is not local and",
< 				   "is not updated for new inheritance information currently;",
<                                    "\n[where=%s, where2=%s]"),
---
> 	    message(gettextf("From .checkSubclasses(): subclass %s of class %s is not local and is not updated for new inheritance information currently;\n[where=%s, where2=%s]",
2148c2159
<                     domain = NA)
---
>                     domain = "R-methods")
2155c2166
<                   call. = FALSE, domain = NA)
---
>                   call. = FALSE, domain = "R-methods")
2160,2163c2171,2173
<             message(sprintf(paste( # currently only seen from setClassUnion() -> setIs() ->
<                 "Debugging .checkSubclasses(): assignClassDef(what=\"%s\", *, where=%s, force=TRUE);\n",
<                 "E := environment(): %s; parent.env(E): %s"), what, format(cwhere),
<                 format(E <- environment()), format(parent.env(E))))
---
>             message(gettextf( # currently only seen from setClassUnion() -> setIs() ->
>                 "Debugging .checkSubclasses(): assignClassDef(what=\"%s\", *, where=%s, force=TRUE);\nE := environment(): %s; parent.env(E): %s", what, format(cwhere),
>                 format(E <- environment()), format(parent.env(E)), domain = NA))
2347c2357
<                               length(nodes), length(short)), domain = NA)
---
>                               length(nodes), length(short)), domain = "R-methods")
2465c2475
< ##                 "\n\n(Warnings generated once per package per session)")
---
> ##                 "\n\n(Warnings generated once per package per session)", domain = NA)
2476c2486
< ##             className, "\" have apparent S3 methods.\n\nThese will be hidden by the S3 class that this class contains. (See ?Methods)\n\n", msg)
---
> ##             className, "\" have apparent S3 methods.\n\nThese will be hidden by the S3 class that this class contains. (See ?Methods)\n\n", msg, domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/RMethodUtils.R R/src/library/methods/R/RMethodUtils.R
39c39
<                     domain = NA)
---
>                     domain = "R-methods")
49c49
<                  domain = NA)
---
>                  domain = "R-methods")
78c78
<              domain = NA)
---
>              domain = "R-methods")
90,92c90,91
<                               "non-arguments found in the signature: %s"),
<                      paste(signature[not.s.in.a], collapse = ", ")),
<              domain = NA)
---
>                               "non-arguments found in the signature: %s", domain = "R-methods"),
>                      paste(signature[not.s.in.a], collapse = ", ")), domain = NA)
111c110
< 	"the formal arguments of the generic function for %s (%s) differ from those of the non-generic to be used as the default (%s)"),
---
> 	"the formal arguments of the generic function for %s (%s) differ from those of the non-generic to be used as the default (%s)", domain = "R-methods"),
114,115c113
< 			 paste(formalArgs(fdefault), collapse = ", ")),
<                  domain = NA)
---
> 			 paste(formalArgs(fdefault), collapse = ", ")), domain = NA)
170c168
<                               "non-arguments found in the signature: %s"),
---
>                               "non-arguments found in the signature: %s", domain = "R-methods"),
213,215c211
<         message(gettextf("making a generic for special function %s",
<                          sQuote(f)),
<                 domain = NA)
---
>         message(gettextf("making a generic for special function %s", sQuote(f), domain = "R-methods"), domain = NA)
236,238c232,233
< 	msg <- gettextf("invalid call in method dispatch to '%s' (no default method)",
< 			name)
< 	body(fdefault) <- substitute(stop(MESSAGE, domain = NA),
---
> 	msg <- gettextf("invalid call in method dispatch to '%s' (no default method)", name)
> 	body(fdefault) <- substitute(stop(MESSAGE, domain = "R-methods"),
290c285
<     cat("called doPrimitiveMethod\n\n")
---
>     cat(gettext("called 'doPrimitiveMethod()'", domain = "R-methods"), "\n\n", sep = "")
306c301
<     msig <- paste0(nm, '"', as.vector(signature), '"')
---
>     msig <- paste0(nm, dQuote(as.vector(signature)))
308c303
<     gettextf("in method for %s with signature %s: ", sQuote(f), sQuote(msig))
---
>     gettextf("In method for %s with signature %s: ", sQuote(f), msig, domain = "R-methods")
333c328
<     ##         warning(gettextf("%s function arguments omitted from method arguments, (%s), were found in method definition",
---
>     ##         warning(sprintf(gettext("%s function arguments omitted from method arguments, (%s), were found in method definition", domain = "R-methods"),
343c338
<              call. = TRUE, domain = NA)
---
>              call. = TRUE, domain = "R-methods")
347c342
<                  gettextf("expanding the signature to include omitted arguments in definition: %s",
---
>                  sprintf(gettext("expanding the signature to include omitted arguments in definition: %s", domain = "R-methods"),
401c396
<                  call. = FALSE, domain = NA)
---
>                  call. = FALSE, domain = "R-methods")
488,489c483
<             stop(gettextf("no generic function found for %s", sQuote(f)),
<                  domain = NA)
---
>             stop(gettextf("no generic function found for %s", sQuote(f)), domain = "R-methods")
505c499
<             message("Empty function name in .getGeneric")
---
>             message("Empty function name in .getGeneric", domain = "R-methods")
720c714
<         warning(sprintf("Methods list objects are not maintained in this version of R:  request for function %s may return incorrect information",
---
>         warning(gettextf("Methods list objects are not maintained in this version of R:  request for function %s may return incorrect information",
722c716
<                 domain = NA)
---
>                 domain = "R-methods")
804,805c798
<     ##     warning(sprintf("package %s seems to have out-of-date methods; need to reinstall from source",
<     ##                      sQuote(getPackageName(where[[1L]]))))
---
>     ##     warning(gettextf("package %s seems to have out-of-date methods; need to reinstall from source", sQuote(getPackageName(where[[1L]]))))
912c905
< 		domain = NA)
---
> 		domain = "R-methods")
962c955
<                 sprintf(" found on: %s; using the first one",
---
>                 sprintf(gettext(" found on: %s; using the first one", domain = "R-methods"),
1091c1084
<         stop(gettextf("invalid value from generic function %s, class %s, expected %s",
---
>         stop(gettextf("invalid value from generic function %s, class %s, expected one of %s",
1094,1095c1087,1088
<                       paste(dQuote(classes), collapse = " or ")),
<              domain = NA)
---
>                       paste(dQuote(classes), collapse = ", ")),
>              domain = "R-methods")
1191,1193c1184
<                                  sQuote(fname),
<                                  paste(as.character(x[[2L]]), collapse = "\n")),
<                         domain = NA)
---
>                                  sQuote(fname), paste(as.character(x[[2L]]), collapse = "\n")), domain = "R-methods")
1239,1241c1230
<             stop(sprintf("internal error: Bad methods list object in fixing methods for primitive function %s",
<                           sQuote(f)),
<                  domain = NA)
---
>             stop(gettextf("internal error: Bad methods list object in fixing methods for primitive function %s", sQuote(f)), domain = "R-methods")
1266c1255
< .ChangeFormals <- function(def, defForArgs, msg = "<unidentified context>")
---
> .ChangeFormals <- function(def, defForArgs, msg = "<unidentified context>") #IVORY: basically untranslatable due to 'msg' argument
1270,1271c1259
<                       msg, dQuote(class(def))),
<              domain = NA)
---
>                       msg, dQuote(class(def))), domain = "R-methods")
1274,1275c1262
<                       msg, dQuote(class(def))),
<              domain = NA)
---
>                       msg, dQuote(class(def))), domain = "R-methods")
1279,1282c1266,1267
<         stop(gettextf("trying to change the formal arguments in %s, but the number of existing arguments is less than the number of new arguments: (%s) vs (%s)",
<                       msg, paste0("\"", old, "\"", collapse=", "),
<                       paste0("\"", new, "\"", collapse=", ")),
<              domain = NA)
---
>         stop(sprintf(gettext("trying to change the formal arguments in %s, but the number of existing arguments is less than the number of new arguments: (%s) vs (%s)", domain = "R-methods"),
>                       msg, paste(dQuote(old), collapse = ", "), paste(dQuote(new), collapse = ", ")), domain = NA)
1284,1287c1269,1270
<         warning(gettextf("trying to change the formal arguments in %s, but the number of existing arguments is greater than the number of new arguments (the extra arguments won't be used): (%s) vs (%s)",
<                          msg, paste0("\"", old, "\"", collapse=", "),
<                          paste0("\"", new, "\"", collapse=", ")),
<                 domain = NA)
---
>         warning(sprintf(gettext("trying to change the formal arguments in %s, but the number of existing arguments is greater than the number of new arguments (the extra arguments won't be used): (%s) vs (%s)", domain = "R-methods"),
>                          msg, paste(dQuote(old), collapse = ", "), paste(dQuote(new), collapse = ", ")), domain = NA)
1299,1301c1282,1283
< 	stop(gettextf("in changing formal arguments in %s, some of the old names are not in fact arguments: %s",
< 		      msg, paste0("\"", old[is.na(match(old, names(dlist)))], "\"", collapse=", ")),
< 	     domain = NA)
---
> 	stop(sprintf(gettext("in changing formal arguments in %s, some of the old names are not in fact arguments: %s", domain = "R-methods"),
> 		      msg, paste(dQuote(old[is.na(match(old, names(dlist)))]), collapse = ", ")), domain = NA)
1317c1299
<                 stop("botched namespace: failed to find 'base' namespace in its parents", domain = NA)
---
>                 stop("botched namespace: failed to find 'base' namespace in its parents", domain = "R-methods")
1468,1470c1450
<         warning(gettextf("%s is not a generic function (or not visible here)",
<                          sQuote(f)),
<                 domain = NA)
---
>         warning(gettextf("%s is not a generic function (or not visible here)", sQuote(f)), domain = "R-methods")
1493,1495c1473
< 		    stop(gettextf("invalid element in the \"groupMembers\" slot (class %s)",
< 				  dQuote(class(x))),
<                          domain = NA)
---
> 		    stop(gettextf("invalid element in the \"groupMembers\" slot (class %s)", dQuote(class(x))), domain = "R-methods")
1597c1575
<                       deparse(sys.call(sys.parent()), nlines = 1)), domain = NA)
---
>                       deparse(sys.call(sys.parent()), nlines = 1)), domain = "R-methods")
1617c1595
<             warning(gettextf("multiple direct matches: %s; using the first of these", .pasteC(classes)), domain = NA)
---
>             warning(gettextf("multiple direct matches: %s; using the first of these", .pasteC(classes)), domain = "R-methods")
1663,1664c1641
<             warning(gettextf("multiple equivalent inherited matches: %s; using the first of these",
<                              .pasteC(classes)), domain = NA)
---
>             warning(gettextf("multiple equivalent inherited matches: %s; using the first of these", .pasteC(classes)), domain = "R-methods")
1681c1658
<         "non-empty string; got \"\""
---
>         gettext("non-empty string; got \"\"")
1683c1660
<         paste("single string; got a character vector of length", length(what))
---
>         gettextf("single string; got a character vector of length %d", length(what))
1685,1686c1662
<         gettextf("single string; got an object of class %s",
<                  dQuote(class(what)[[1L]]))
---
>         gettextf("single string; got an object of class %s", dQuote(class(what)[[1L]]))
1744,1746c1720,1721
<                           gettextf("multiple definitions exist for class %s, but the supplied package (%s) is not one of them (%s)",
<                                    dQuote(classi), sQuote(pkgi),
<                                    paste(dQuote(get(classi, envir = .classTable)), collapse = ", ")))
---
>                           sprintf(gettext("multiple definitions exist for class %s, but the supplied package (%s) is not one of them (%s)", domain = "R-methods"),
>                                    dQuote(classi), sQuote(pkgi), paste(dQuote(get(classi, envir = .classTable)), collapse = ", ")))
1751,1753c1726,1727
<                           gettextf("multiple definitions exist for class %s; should specify one of them (%s), e.g. by className()",
<                                    dQuote(classi),
<                                    paste(dQuote(get(classi, envir = .classTable)), collapse = ", ")))
---
>                           sprintf(gettext("multiple definitions exist for class %s; should specify one of them (%s), e.g. by className()", domain = "R-methods"),
>                                    dQuote(classi), paste(dQuote(get(classi, envir = .classTable)), collapse = ", ")))
1766,1767c1740
<                 msgi <- gettextf("no definition found for class %s",
<                                  dQuote(classi))
---
>                 msgi <- gettextf("no definition found for class %s", dQuote(classi), domain = "R-methods")
1847,1849c1820
<             stop(gettextf("non-function action: %s",
<                           sQuote(fname)),
<                  domain = NA)
---
>             stop(gettextf("non-function action: %s", sQuote(fname)), domain = "R-methods")
1851,1853c1822
<             stop(gettextf("action function %s has no arguments, should have at least 1",
<                           sQuote(fname)),
<                  domain = NA)
---
>             stop(gettextf("action function %s has no arguments, should have at least 1", sQuote(fname)), domain = "R-methods")
1902c1871
<             warning(gettextf("some actions are missing: %s",
---
>             warning(sprintf(gettext("some actions are missing: %s", domain = "R-methods"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/SClasses.R R/src/library/methods/R/SClasses.R
29,31c29
<         stop(gettextf("%s has a sealed class definition and cannot be redefined",
<                       dQuote(Class)),
<              domain = NA)
---
>         stop(gettextf("Class %s has a sealed class definition and cannot be redefined", dQuote(Class)), domain = "R-methods")
36c34
<             stop("Argument \"representation\" cannot be used if argument \"slots\" is supplied")
---
>             stop("Argument 'representation' cannot be used if argument 'slots' is supplied")
46c44
<             stop("only arguments 'Class' and 'where' can be supplied when argument 'representation' is a 'classRepresentation' object")
---
>             stop("only arguments 'Class' and 'where' can be supplied when argument 'representation' is a \"classRepresentation\" object")
80c78
<                        domain = NA)
---
>                        domain = "R-methods")
89c87
<                      domain = NA)
---
>                      domain = "R-methods")
94c92
<                      domain = NA)
---
>                      domain = "R-methods")
99c97
<                      domain = NA)
---
>                      domain = "R-methods")
104c102
<                      domain = NA)
---
>                      domain = "R-methods")
132c130
<             stop(gettextf("element %d of the representation was not a single character string", i), domain = NA)
---
>             stop(gettextf("element %d of the representation was not a single character string", i), domain = "R-methods")
136,138c134,135
<         stop(gettextf("duplicate class names among superclasses: %s",
<                       paste(.dQ(includes[duplicated(includes)]),
<                             collapse = ", ")),
---
>         stop(sprintf(gettext("duplicate class names among superclasses: %s", domain = "R-methods"),
>                       paste(.dQ(includes[duplicated(includes)]),  collapse = ", ")),
145c142
<                               "duplicated slot names: %s"),
---
>                               "duplicated slot names: %s", domain = "R-methods"),
165c162
<             stop("only one data object (unnamed argument to prototype) allowed")
---
>             stop("only one data object (unnamed argument passed to 'prototype()' function) allowed")
279c276
<                      domain = NA)
---
>                      domain = "R-methods")
317c314
<              domain = NA)
---
>              domain = "R-methods")
328c325
<             domain = NA)
---
>             domain = "R-methods")
343c340
<              domain = NA)
---
>              domain = "R-methods")
353c350
<             domain = NA)
---
>             domain = "R-methods")
392c389
<                     domain = NA)
---
>                     domain = "R-methods")
399c396
<                     domain = NA)
---
>                     domain = "R-methods")
481,482c478,479
< 	      paste("slots in class definition but not in object:",
< 		    paste0('"', slotNames[badSlots], '"', collapse = ", ")))
---
> 	      paste(gettext("slots in class definition but not in object:"),
> 		    paste0("'", slotNames[badSlots], "'", collapse = ", ")))
491,492c488
< 			paste0("undefined class for slot \"", slotNames[[i]],
< 			       "\" (\"", classi, "\")"))
---
> 			gettextf("undefined class for slot '%s' (\"%s\")", slotNames[[i]], classi))
510,513c506,507
< 			paste0("invalid object for slot \"", slotNames[[i]],
< 			       "\" in class \"", Class,
< 			       "\": got class \"", class(sloti),
< 			       "\", should be or extend class \"", classi, "\""))
---
> 			gettextf("invalid object for slot '%s' in class \"%s\": got class \"%s\", should be or extend class \"%s\"", slotNames[[i]],
> 			       Class, class(sloti), classi))
520,521c514
< 	    errori <- paste0("In slot \"", slotNames[[i]],
< 			     "\" of class \"", class(sloti), "\": ", errori)
---
> 	    errori <- gettextf("In slot '%s' of class \"%s\": %s", slotNames[[i]], class(sloti), errori)
534,535c527
< 			paste0("superclass \"", superClass,
< 			       "\" not defined in the environment of the object's class"))
---
> 			gettextf("superclass \"%s\" not defined in the environment of the object's class", superClass))
553d544
< 	    msg <- gettextf("invalid class %s object", dQuote(Class))
555c546
< 		stop(paste(paste0(msg, ":"),
---
> 		stop(paste(gettextf("invalid class %s object:", dQuote(Class), domain = "R-methods"), " ", 
558c549
< 	    else stop(msg, ": ", errors, domain = NA)
---
> 	    else stop(gettextf("invalid class %s object:", dQuote(Class), domain = "R-methods"), " ", errors, domain = NA)
610c601
<                             domain = NA)
---
>                             domain = "R-methods")
617c608
<                      domain = NA)
---
>                      domain = "R-methods")
623c614
<                     domain = NA)
---
>                     domain = "R-methods")
687c678
<                              domain = NA)
---
>                              domain = "R-methods")
694,696c685,686
<                 stop(gettextf("duplicated slot names: %s",
<                               paste(sQuote(snames[duplicated(snames)]),
<                                     collapse = ", ")), domain = NA)
---
>                 stop(sprintf(ngettext(length(duplicated(snames)), "duplicated slot name: %s", "duplicated slot names: %s", domain = "R-methods"),
>                               paste(sQuote(snames[duplicated(snames)]), collapse = ", ")), domain = NA)
701c691
<                                       "invalid names for slots of class %s: %s"),
---
>                                       "invalid names for slots of class %s: %s", domain = "R-methods"),
767c757
<                      domain = NA)
---
>                      domain = "R-methods")
772c762
<                      domain = NA)
---
>                      domain = "R-methods")
787c777
<                                          "multiple definitions of class %s visible (%s); using the definition\n   in package %s for %s"),
---
>                                          "multiple definitions of class %s visible (%s); using the definition\n   in package %s for %s", domain = "R-methods"),
837,838c827,828
<     stop(gettextf("class definition cannot extend more than one of these data types: %s",
< 		  paste0('"',type, '"', collapse = ", ")),
---
>     stop(gettext("class definition cannot extend more than one of these data types:", domain = "R-methods"),
> 		  paste0(dQuote(type), collapse = ", "),
844c834
<          domain = NA)
---
>          domain = "R-methods")
848c838
<   ##                 type, class), domain = NA)
---
>   ##                 type, class), domain = "R-methods")
922c912
<                 warning(gettextf("multiple class definitions for %s from packages: %s; picking the first",
---
>                 warning(sprintf(gettext("multiple class definitions for class %s from packages: %s; picking the first", domain = "R-methods"),
929c919
<                 stop(gettextf("no package name supplied and no class definition found for %s",
---
>                 stop(gettextf("no package name supplied and no class definition found for class %s",
931c921
<                      domain = NA)
---
>                      domain = "R-methods")
981c971
<                  domain = NA, call. = FALSE)
---
>                  domain = "R-methods", call. = FALSE)
983c973
<             stop(gettextf("All %s names must be nonempty in:\n(%s)", what,
---
>             stop(sprintf(gettext("All %s names must be nonempty in:\n(%s)", domain = "R-methods"), what,
987c977
<             stop(gettextf("All %s names must be distinct in:\n(%s)", what,
---
>             stop(sprintf(gettext("All %s names must be distinct in:\n(%s)", domain = "R-methods"), what,
1012c1002
<              domain = NA)
---
>              domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/addedFunctions.R R/src/library/methods/R/addedFunctions.R
40c40
<         stop(gettextf('expected a non-empty character string for argument name'), domain = NA)
---
>         stop(gettextf("expected a non-empty character string for argument 'name'"), domain = "R-methods")
59c59
< 	     domain = NA)
---
> 	     domain = "R-methods")
82,84c82
<             stop(gettextf("%s is not one of the element names",
<                           sQuote(name)),
<                  domain = NA)
---
>             stop(gettextf("%s is not one of the element names", sQuote(name)), domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/as.R R/src/library/methods/R/as.R
52c52
<                     stop(sprintf("internal problem in as(): %s is(object, \"%s\") is TRUE, but the metadata asserts that the 'is' relation is FALSE",
---
>                     stop(sprintf("internal problem in 'as()' function: %s is(object, \"%s\") is TRUE, but the metadata asserts that the 'is' relation is FALSE",
54c54
<                          domain = NA)
---
>                          domain = "R-methods")
78c78
< 		stop(gettextf("no method or default for coercing %s to %s",
---
> 		stop(gettextf("no method or default scheme for coercing %s to %s",
81c81
<                      domain = NA)
---
>                      domain = "R-methods")
84,85c84
< 		cacheMethod("coerce", sig, asMethod, fdef = coerceFun,
< 			    inherited = inherited)
---
> 		cacheMethod("coerce", sig, asMethod, fdef = coerceFun, inherited = inherited)
189c188
<         stop(gettextf("no method or default for as() replacement of %s with Class=\"%s\"",
---
>         stop(gettextf("no method or default for 'as()' function replacement of %s with class=\"%s\"",
192c191
<              domain = NA)
---
>              domain = "R-methods")
213,215c212
<             stop(gettextf("trying to set an 'as' relation from %s to itself",
<                           dQuote(.class1(from))),
<                  domain = NA)
---
>             stop(gettextf("trying to set an 'as' relation from %s to itself", dQuote(.class1(from))), domain = "R-methods")
220,222c217
<             stop(gettextf("class %s is not defined in this environment",
<                           dQuote(to)),
<                  domain = NA)
---
>             stop(gettextf("class %s is not defined in this environment", dQuote(to)), domain = "R-methods")
224,226c219
<             stop(gettextf("class %s is a class union: 'coerce' relations to a class union are not meaningful",
<                           dQuote(to)),
<                  domain = NA)
---
>             stop(gettextf("class %s is a class union: 'coerce' relations to a class union are not meaningful", dQuote(to)), domain = "R-methods")
236,238c229,230
<                stop(gettextf("'as' method should have one argument, or match the arguments of coerce(): got  (%s)",
<                            paste(formalArgs(def), collapse = ", ")),
<                   domain = NA)
---
>                stop(sprintf(gettext("'as' method should have one argument, or match the arguments of 'coerce()' function: got (%s)", domain = "R-methods"),
>                            paste(formalArgs(def), collapse = ", ")), domain = NA)
252c244
<                     stop(gettextf("a 'replace' method definition in 'setAs' must be a function of two arguments, got %d", length(args)), domain = NA)
---
>                     stop(gettextf("a 'replace' method definition in 'setAs' function must be a function of two arguments, got %d", length(args)), domain = "R-methods")
258,259c250,251
<                     warning(gettextf("argument names in 'replace' changed to agree with 'coerce<-' generic:\n%s", paste(deparse(replace), sep="\n    ")),
<                             domain = NA)
---
>                     warning(gettextf("argument names in 'replace' method changed to agree with 'coerce<-' generic function:\n%s", paste(deparse(replace), sep="\n    ")),
>                             domain = "R-methods")
274c266
<           warning("direct use of coerce() is deprecated:  use as(from, class(to)) instead", domain = NA)
---
>           warning("direct use of 'coerce()' method is deprecated: use 'as(from, class(to))' instead", domain = "R-methods")
282c274
<           warning("direct use of coerce() is deprecated:  use as(from, class(to)) <- value instead", domain = NA)
---
>           warning("direct use of 'coerce()' method is deprecated: use 'as(from, class(to)) <- value' instead", domain = "R-methods")
378,379c370
<         value <- substitute(if(strict) EXPR else from,
<                            list(EXPR = expr))
---
>         value <- substitute(if(strict) EXPR else from, list(EXPR = expr))
396,397c387
<     prevCoerce <- !is.null(selectMethod("coerce", sig, TRUE, FALSE,
<                                         fdef = cdef))
---
>     prevCoerce <- !is.null(selectMethod("coerce", sig, TRUE, FALSE, fdef = cdef))
401,402c391
<     prevRepl <- !is.null(selectMethod("coerce<-", sig, TRUE, FALSE,
<                                       fdef = rdef))
---
>     prevRepl <- !is.null(selectMethod("coerce<-", sig, TRUE, FALSE, fdef = rdef))
408c397
<                     domain = NA)
---
>                     domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/fixPrevious.R R/src/library/methods/R/fixPrevious.R
32,34c32
<             warning(gettextf("object %s not found",
<                              sQuote(what)),
<                     domain = NA)
---
>             warning(gettextf("object %s was not found", sQuote(what)), domain = "R-methods")
58c56
<                             domain = NA)
---
>                             domain = "R-methods")
61,64c59
<                 warning(gettextf("no definition for the class of %s (class %s) found",
<                                  sQuote(what),
<                                  dQuote(class)),
<                         domain = NA)
---
>                 warning(gettextf("no definition for the class of %s (class %s) found", sQuote(what), dQuote(class)), domain = "R-methods")
67,69c62
<             warning(gettextf("object %s not changed (it does not appear to be from a version of R earlier than 1.8.0)",
<                              sQuote(what)),
<                     domain = NA)
---
>             warning(gettextf("object %s not changed (it does not appear to be from a version of R earlier than 1.8.0)", sQuote(what)), domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/is.R R/src/library/methods/R/is.R
151c151
<              domain = NA)
---
>              domain = "R-methods")
167c167
< 		 domain = NA)
---
> 		 domain = "R-methods")
172c172
<              domain = NA)
---
>              domain = "R-methods")
229c229
<                 call. = FALSE, domain = NA)
---
>                 call. = FALSE, domain = "R-methods")
254c254
<                                           "class %s is missing slots from class %s (%s), and no coerce method was supplied"),
---
>                                           "class %s is missing slots from class %s (%s), and no coerce method was supplied", domain = "R-methods"),
266c266
<                                           "slots in class %s must extend corresponding slots in class %s: fails for %s"),
---
>                                           "slots in class %s must extend corresponding slots in class %s: fails for %s", domain = "R-methods"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/methodsTable.R R/src/library/methods/R/methodsTable.R
86c86
<            domain = NA)
---
>            domain = "R-methods")
265c265
<            domain = NA)
---
>            domain = "R-methods")
333c333
<                          domain = NA)
---
>                          domain = "R-methods")
388,391c388,390
<         stop("package slot missing from signature for generic ",
<              sQuote(method@generic), "\n",
<              "and classes ", paste(sig, collapse = ", "), "\n",
<              "cannot use with duplicate class names (the package may need to be re-installed)",
---
>         stop(sprintf(gettext("package slot missing from signature for generic %s\n and classes %s\ncannot use with duplicate class names (the package may need to be re-installed)", domain = "R-methods"),
>              sQuote(method@generic), 
>              paste(sig, collapse = ", ")), 
422c421
<                  domain = NA)
---
>                  domain = "R-methods")
473c472
<           stop(gettextf("invalid or unset methods table in generic function %s", sQuote(fdef@generic)), damain = NA)
---
>           stop(gettextf("invalid or unset methods table in generic function %s", sQuote(fdef@generic)), damain = "R-methods")
485,488c484,485
< 	    if(hasGroup) paste0(" Group generics: ",
< 				plist(vapply(groupGenerics, slot,
< 					     character(1), "generic")), "\n"),
< 	    sep='')
---
> 	    if(hasGroup) paste0(gettext(" Group generics: ", domain = "R-methods"),
> 				plist(vapply(groupGenerics, slot, character(1), "generic")), "\n"), sep = '')
547,548c544
<         if(verbose) cat(" .fI> #{additional group methods}:",
<                         length(groupmethods),"\n")
---
>         if(verbose) cat(" .fI> #{additional group methods}:", length(groupmethods),"\n")
581,582c577
<         if(verbose) cat(" .fI> length(methods) = ", length(methods),
<                         " --> ambiguity\n")
---
>         if(verbose) cat(" .fI> length(methods) = ", length(methods), " --> ambiguity\n")
596c591
<                    domain = NA)
---
>                    domain = "R-methods")
613c608
<                   domain = NA)
---
>                   domain = "R-methods")
668c663
<     message(gettextf("Note: method with signature %s chosen for function %s,\n target signature %s.\n %s would also be valid",
---
>     message(sprintf(gettext("Note: method with signature %s chosen for function %s,\n target signature %s.\n %s would also be valid", domain = "R-methods"),
672,673c667
< 		     paste0('"', possible[is.na(match(possible, selected))], '"',
< 			    collapse=", ")),
---
> 		     paste0(dQuote(possible[is.na(match(possible, selected))]), collapse = ", ")),
739c733
<                                  "found %d equally good next methods"),
---
>                                  "found %d equally good next methods", domain = "R-methods"),
760c754
<          domain = NA)
---
>          domain = "R-methods")
763c757
<     stop("Internal error in finding inherited methods; didn't return a unique method", domain = NA)
---
>     stop("Internal error in finding inherited methods; didn't return a unique method", domain = "R-methods")
816c810
<     for(j in 1L:n) {
---
>     for(j in seq_len(n)) {
822c816
<     if(verbose) { cat("** individual arguments' distances:\n"); print(containsDist) }
---
>     if(verbose) { cat(gettext("** individual arguments' distances:", domain = "R-methods"), "\n", sep = ""); print(containsDist) }
824c818
<     for(i in 1L:nArg) {
---
>     for(i in seq_len(nArg)) {
831,832c825,826
<     if(verbose) cat("** final methods' distances: (",
< 		    paste(formatC(dist), collapse= ", "), ")\n", sep='')
---
>     if(verbose) cat(sprintf(gettext("** final methods' distances: (%s)", domain = "R-methods"),
> 		    paste(formatC(dist), collapse = ", ")), "\n", sep = "")
846c840
<     for(i in 1:n) {
---
>     for(i in seq_len(n)) {
849,850c843
< 	if(verbose) cat(sprintf(" .. method %d: length(sig) = %d < nArg = %d\n",
< 				i, length(sig), nArg))
---
> 	if(verbose) cat(gettextf(" .. method %d: length(sig) = %d < nArg = %d\n", i, length(sig), nArg, domain = "R-methods"))
877,880c870,871
< 	cat(if(any(best)) paste(" have best ones",
< 				paste(format(seqn[best]),collapse=","))
< 	    else if(any(dominated)) paste(" can eliminate dominated ones,",
< 				    paste(format(seqn[dominated]),collapse=",")),
---
> 	cat(if(any(best)) paste(gettext(" have best ones", domain = "R-methods"), paste(format(seqn[best]), collapse = ", "))
> 	    else if(any(dominated)) paste(gettext(" can eliminate dominated ones,", domain = "R-methods"), paste(format(seqn[dominated]),collapse = ", ")),
904c895
<                                "Selecting %d methods of minimum distance"),
---
>                                "Selecting %d methods of minimum distance", domain = "R-methods"),
913c904
<                                       "Selecting %d non-group methods"),
---
>                                       "Selecting %d non-group methods", domain = "R-methods"),
925c916
<                                        "Selecting %d partially exact-matching methods"),
---
>                                        "Selecting %d partially exact-matching methods", domain = "R-methods"),
936c927
<                           "Choosing method %s from %d ambiguous possibilities"),
---
>                           "Choosing method %s from %d ambiguous possibilities", domain = "R-methods"),
948,949c939
<   if(verbose) cat("   .disambiguateM*(): notes =\n\t",
< 		  attr(condObject, "notes"), "\n")
---
>   if(verbose) cat("   .disambiguateM*(): notes =\n\t", attr(condObject, "notes"), "\n")
1060c1050
<     doFun <- function(func, pkg) cf("Function: ", func, " (package ", pkg, ")\n")
---
>     doFun <- function(func, pkg) cf(gettextf("Function: %s (package %s)", func, pkg, domain = "R-methods"), "\n")
1077c1067
< 	    cf("<No methods>\n\n")
---
> 	    cf(gettext("<No methods>\n\n", domain = "R-methods"))
1098,1101c1088,1090
< 		cf("    (inherited from: ", sigString(d), ")\n")
<             if(!.identC(m@generic, f) && length(m@generic) == 1L &&
<                nzchar(m@generic))
< 		cf("    (definition from function \"", m@generic, "\")\n")
---
> 		cf("    ", gettextf("(inherited from: %s)", sigString(d), domain = "R-methods"), "\n")
>             if(!.identC(m@generic, f) && length(m@generic) == 1L && nzchar(m@generic))
> 		cf("    ", gettextf("(definition from function %s)", sQuote(m@generic), domain = "R-methods"), "\n")
1103c1092,1093
<                 cf("  (", length(pkgs), " methods defined for this signature, with different packages)\n")
---
>                 cf(sprintf(ngettext(length(pkgs), "  (%d methods defined for this signature, with different packages)\n",
> 				 "  (%d methods defined for this signature, with different packages)\n", domain = "R-methods"), length(pkgs)))
1130,1131c1120
<                                stop("failed to find expected group generic function: ",
<                                     what)
---
>                                stop("failed to find expected group generic function: ", what)
1153c1142
<            domain = NA)
---
>            domain = "R-methods")
1193,1194c1182
<       warning(gettextf("trying to check signature length of group generic '%s', but it is not a group generic", what),
<               domain = NA)
---
>       warning(gettextf("trying to check signature length of group generic %s, but it is not a group generic", sQuote(what)), domain = "R-methods")
1219,1220c1207,1208
<       warning(gettextf("trying to check signature length of generic '%s', but it is not a generic function: i = %d, funs = %s, gnames = %s",
<                        what,  i, paste(unlist(funs), collapse = ", "),
---
>       warning(sprintf(gettext("trying to check signature length of generic %s, but it is not a generic function: i = %d, funs = %s, gnames = %s", domain = "R-methods"),
>                        sQuote(what),  i, paste(unlist(funs), collapse = ", "),
1250c1238
<     paste(labels[rep.int(1L:n, rep.int(m,n))], new[rep.int(1L:m,n)], sep ="#")
---
>     paste(labels[rep.int(seq_len(n), rep.int(m,n))], new[rep.int(1L:m,n)], sep ="#")
1443,1445c1431
< 	warning("something weird:  inconsistent number of args in methods table strings:",
< 		paste(nargs,collapse = ", ")," (using the largest value)",
<                 domain = NA)
---
>         warning(gettextf("something weird: inconsistent number of args in methods table strings: %s (using the largest value)", paste(nargs,collapse = ", "), domain= "R-methods"), domain = NA)
1475c1461
<            domain = NA)
---
>            domain = "R-methods")
1577,1578c1563,1564
<       ##         warning(gettextf("No eligible subclasses for argument '%s' found, so no contribution to analysis",
<       ##                          colnames(sigs)[[j]]), domain  = NA)
---
>       ##         warning(gettextf("No eligible subclasses for argument %s found, so no contribution to analysis",
>       ##                          sQuote(colnames(sigs)[[j]])), domain  = NA)
1593,1595c1579,1581
<         warning(gettextf("undefined classes (%s) will be ignored for argument '%s'",
<                          paste0('"',unique(.undefClasses),'"', collapse=", "),
<                          colnames(sigs)[[j]]), domain = NA)
---
>         warning(sprintf(gettext("undefined classes (%s) will be ignored for argument %s", domain = "R-methods"),
>                          paste0(dQuote(unique(.undefClasses)), collapse = ", "),
>                          sQuote(colnames(sigs)[[j]])), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/oldClass.R R/src/library/methods/R/oldClass.R
40c40
<                    domain = NA)
---
>                    domain = "R-methods")
79c79
<                        domain = NA)
---
>                        domain = "R-methods")
100c100
<                   stop(gettextf('the S3 class of the prototype, "%s", is undefined; only allowed when this is the S3 class being registered ("%s")', .class1(prototype), mainClass), domain = NA)
---
>                   stop(gettextf('the S3 class of the prototype, "%s", is undefined; only allowed when this is the S3 class being registered ("%s")', .class1(prototype), mainClass), domain = "R-methods")
121c121
<             domain = NA)
---
>             domain = "R-methods")
192c192
<                       domain = NA)
---
>                       domain = "R-methods")
197c197
<                gettextf("invalid S4 class corresponding to S3 class: slots in  S4 version must extend corresponding slots in S3 version: fails for %s",
---
>                sprintf(gettext("invalid S4 class corresponding to S3 class: slots in  S4 version must extend corresponding slots in S3 version: fails for %s", domain = "R-methods"),
214c214
<         stop(gettextf("explicit coercion of old-style class (%s) is not defined", paste(class(from), collapse = ", ")), domain = NA)
---
>         stop(sprintf(gettext("explicit coercion of old-style class (%s) is not defined", domain = "R-methods"), paste(class(from), collapse = ", ")), domain = NA)
220c220
<          domain = NA)
---
>          domain = "R-methods")
229c229
<         stop(gettextf("argument 'Classes' must be a vector of two classes; got an argument of length %d", length(Classes)), domain = NA)
---
>         stop(gettextf("argument 'Classes' must be a vector of two classes; got an argument of length %d", length(Classes)), domain = "R-methods")
234c234
<                                  dQuote(cl)), domain = NA)
---
>                                  dQuote(cl)), domain = "R-methods")
262c262
<                      domain = NA)
---
>                      domain = "R-methods")
291c291
<                     domain = NA)
---
>                     domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/packageName.R R/src/library/methods/R/packageName.R
65c65
< #              warning("The package name \"", pkg, "\" was inferred, but not found in that package")
---
> #              warning(gettextf("The package name \"%s\" was inferred, but not found in that package", pkg))
78c78
<                 domain = NA)
---
>                 domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/promptClass.R R/src/library/methods/R/promptClass.R
96c96
<                           dQuote(clName)), domain = NA)
---
>                           dQuote(clName)), domain = "R-methods")
101c101
<                                  dQuote(clName), whereClass), domain = NA)
---
>                                  dQuote(clName), whereClass), domain = "R-methods")
109c109
<                                           "no definition of class %s in the specified position, %s, definitions on : %s"),
---
>                                           "no definition of class %s in the specified position, %s, definitions on : %s", domain = "R-methods"),
268,269c268,277
<     .message("A shell of class documentation has been written",
<              .fileDesc(filename), ".\n")
---
>     if(is.character(filename)) {
>         if(nzchar(filename))
>     	    .message(gettextf("A shell of class documentation has been written to the file %s.\n", sQuote(filename), domain = "R-methods"))
>         else
>     	    .message("A shell of class documentation has been written to the standard output connection.\n", domain = "R-methods")
>     }
>     else if(inherits(filename, "connection"))
>     	    .message(gettextf("A shell of class documentation has been written to the connection %s.\n", sQuote(summary(filename)$description)), domain = "R-methods")
>     else # what, indeed?
>     .message("A shell of class documentation has been written.\n", domain = "R-methods")
274,285c282
< .fileDesc <- function(file) {
<     if(is.character(file)) {
< 	if(nzchar(file))
< 	    paste(" to the file", sQuote(file))
< 	else
< 	    " to the standard output connection"
<     }
<     else if(inherits(file, "connection"))
< 	paste(" to the connection",
<               sQuote(summary(file)$description))
<     else "" # what, indeed?
< }
---
> #IVORY UPDATE: functionality of .fileDesc() is now incorporated in above methods
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/refClass.R R/src/library/methods/R/refClass.R
44c44
<                  domain = NA)
---
>                  domain = "R-methods")
69c69
<             stop(gettextf("a call to superClass() is in the method %s but there is no superclass definition of this method for class %s",
---
>             stop(gettextf("a call to 'superClass()' is in the method %s but there is no superclass definition of this method for class %s",
72c72
<                  domain = NA)
---
>                  domain = "R-methods")
121,122c121,122
<             warning(gettextf("methods declared in usingMethods() but not found: %s",
<                 paste0(declared[! declared %in% allMethods], collapse = ", ")))
---
>             warning(sprintf(gettext("methods declared in usingMethods() but not found: %s", domain = "R-methods"),
>                 paste0(declared[! declared %in% allMethods], collapse = ", ")), domain = NA)
136,138c136
<         stop(gettextf("%s is not a reference class",
<                       dQuote(Class)),
<              domain = NA)
---
>         stop(gettextf("%s is not a reference class", dQuote(Class)), domain = "R-methods")
149c147
<              domain = NA)
---
>              domain = "R-methods")
228c226
<                         domain = NA)
---
>                         domain = "R-methods")
262c260
<              domain = NA)
---
>              domain = "R-methods")
280,283c278
<              '
< Returns the result of coercing the object to
< Class.  No effect on the object itself.
< '
---
>              'Returns the result of coercing the object to Class. No effect on the object itself.'
299c294
<                               domain = NA)
---
>                               domain = "R-methods")
309c304
<                       domain = NA)
---
>                       domain = "R-methods")
314,320c309
<              '
< Imports value, replacing the part of the current object
< corresponding to Class (if argument Class is missing
< it is taken to be class(value)).  The Class must be one
< of the reference superclasses of the current class (or
< that class itself, but then you could just overrwite the object).
< '
---
>              'Imports value, replacing the part of the current object corresponding to Class (if argument Class is missing it is taken to be class(value)).  The Class must be one of the reference superclasses of the current class (or that class itself, but then you could just overrwite the object).'
336c325
<                               domain = NA)
---
>                               domain = "R-methods")
342,344c331
<                  stop(gettextf("%s is not one of the reference super classes for this object",
<                                dQuote(Class)),
<                       domain = NA)
---
>                  stop(gettextf("Class %s is not one of the reference super classes for this object", dQuote(Class)), domain = "R-methods")
346c333
<          callSuper = function(...) stop("direct calls to callSuper() are invalid:  should only be called from another method"),
---
>          callSuper = function(...) stop("direct calls to 'callSuper()' are invalid: should only be called from another method"),
374c361
<                       domain = NA)
---
>                       domain = "R-methods")
378,385c365
<              ' Insert trace debugging for the specified method.  The arguments are
<  the same as for the trace() function in package "base".  The first argument
<  should be the name of the method to be traced, quoted or not.
< 
<  The additional argument classMethod= can be supplied as TRUE (by name only)
<  in order to trace a method in a generator object (e.g., "new") rather than
<  in the objects generated from that class.
< '
---
>              gettext(" Insert trace debugging for the specified method.  The arguments are the same as for the trace() function in package \"base\".  The first argument should be the name of the method to be traced, quoted or not.\n\n The additional argument classMethod= can be supplied as TRUE (by name only) in order to trace a method in a generator object (e.g., \"new\") rather than in the objects generated from that class.")
389,390c369
<              ' Untrace the method given as the first argument.
< '
---
>              "Untrace the method given as the first argument."
395c374
< 		 cat('Prototypical reference class object\n')
---
> 		 cat(gettext("Prototypical reference class object", domain = "R-methods"), "\n", sep = "")
397,398c376
< 		 cat('Reference class object of class ', classLabel(cl), '\n',
< 		     sep = "")
---
>              cat(gettextf("Reference class object of class %s", classLabel(class(.self)), domain = "R-methods"), "\n", sep = "")
401c379
< 		     cat('Field "', fi, '":\n', sep = "")
---
>                  cat(gettextf("Field %s:", dQuote(fi), domain = "R-methods"), "\n", sep = "")
407,413c385
<              ' Reference methods used by this method are named as the arguments
<  either quoted or unquoted.  In the code analysis phase of installing the
<  the present method, the declared methods will be included.  It is essntial
<  to declare any methods used in a nonstandard way (e.g., via an apply function).
<  Methods called directly do not need to be declared, but it is harmless to do so.
<  $usingMethods() does nothing at run time.
< '
---
>              gettext(" Reference methods used by this method are named as the arguments  either quoted or unquoted.  In the code analysis phase of installing the  the present method, the declared methods will be included.  It is essntial  to declare any methods used in a nonstandard way (e.g., via an apply function). Methods called directly do not need to be declared, but it is harmless to do so. $usingMethods() does nothing at run time.")
512,513c484
<               function(object) showRefClassDef(object$def, "Generator for class"),
<               where = envir)
---
>               function(object) showRefClassDef(object$def, gettext("Generator for class", domain = "R-methods")), where = envir)
581c552
<              domain = NA)
---
>              domain = "R-methods")
589c560
<         stop("arguments to methods() must be named, or one named list")
---
>         stop("arguments to 'methods()' must be named, or one named list")
622,627c593
<     '
< Returns the named vector of classes
< for the fields in this class.  Fields
< defined with accessor functions have
< class "activeBindingFunction".
< '
---
>     'Returns the named vector of classes for the fields in this class. Fields defined with accessor functions have class "activeBindingFunction".'
634,639c600
<     '
< Prints simple documentation for the method or field
< specified by argument topic, which should be the name
< of the method or field, quoted or not.  With no topic,
< prints the definition of the class.
< '
---
>     'Prints simple documentation for the method or field specified by argument topic, which should be the name of the method or field, quoted or not.  With no topic, prints the definition of the class.'
642,643c603
< c('Usage:  $help(topic) where topic is the name of a method (quoted or not)',
<   paste('The definition of class', className, 'follows.')))
---
> gettext("Usage:  $help(topic) where topic is the name of a method (quoted or not)"), gettextf("The definition of class %s follows.", dQuote(className)))
657,658c617
<                          sQuote(topic),
<                          dQuote(className)))
---
>                          sQuote(topic), dQuote(className), domain = "R-methods"))
677c636
<              domain = NA)
---
>              domain = "R-methods")
691c650
<                  domain = NA)
---
>                  domain = "R-methods")
755c714
<                      domain = NA)
---
>                      domain = "R-methods")
812,815c771,772
<         stop(gettextf(
< 	"invalid assignment for reference class field %s, should be from class %s or a subclass (was class %s)",
< 		      sQuote(fieldName), dQuote(fieldClass), dQuote(class(value))),
<              call. = FALSE)
---
>         stop(gettextf("invalid assignment for reference class field %s, should be from class %s or a subclass (was class %s)",
>                        sQuote(fieldName), dQuote(fieldClass), dQuote(class(value))), call. = FALSE)
819,820c776
<             stop(gettextf("invalid replacement: reference class field %s is read-only",
<                           sQuote(fieldName)),
---
>             stop(gettextf("invalid replacement: reference class field %s is read-only", sQuote(fieldName)),
842c798
<                                               domain = NA)
---
>                                               domain = "R-methods")
846c802
<             stop(gettextf("no definition found for inherited class: %s",
---
>             stop(sprintf(gettext("no definition found for inherited class: %s", domain = "R-methods"),
885c841
<                      domain = NA)
---
>                      domain = "R-methods")
890c846
<                      domain = NA)
---
>                      domain = "R-methods")
908c864
<                  domain = NA)
---
>                  domain = "R-methods")
964c920
<                 , domain = NA)
---
>                 , domain = "R-methods")
1029c985
<                  domain = NA)
---
>                  domain = "R-methods")
1034c990
<              domain = NA)
---
>              domain = "R-methods")
1051c1007
<              domain = NA)
---
>              domain = "R-methods")
1059,1060c1015
<         stop(gettextf("not a reference class: %s", ClassDef@name),
<              domain = NA)
---
>         stop(gettextf("not a reference class: %s", ClassDef@name), domain = "R-methods")
1069,1072c1024,1028
<     cat("Class method definition")
<     if(!.identC(cl, "refMethodDef"))
<         cat(sprintf(" (class %s)", dQuote(cl)))
<     cat(sprintf(" for method %s()\n", object@name))
---
>     if(!.identC(cl, "refMethodDef")) {
>      cat(gettextf("Class method definition (class %s) for method %s", dQuote(cl), sQuote(paste(object@name, "()", collapse = "")), domain = "R-methods"), "\n", sep = "")
>     } else {
>     cat(gettextf("Class method definition for method %s", sQuote(paste(object@name, "()", collapse = "")), domain = "R-methods"), "\n", sep = "")
>     }
1078c1034
<         .printNames("\nMethods used: ", object@mayCall)
---
>         .printNames(gettext("Methods used: ", domain = "R-methods"), object@mayCall)
1082c1038
<     names <- paste0('"', names, '"')
---
>     names <- sQuote(names)
1084c1040
<         cat(header, "\n", sep = "")
---
>         cat("\n", header, "\n    ", sep = "")
1087c1043
<         cat(header, ": ", sep = "")
---
>         cat("\n", header, ": ", sep = "")
1093,1094c1049,1050
< showRefClassDef <- function(object, title = "Reference Class") {
<     cat(title," \"", object@className,"\":\n", sep="")
---
> showRefClassDef <- function(object, title = gettext("Reference Class", domain = "R-methods")) {
>     cat(title," ", dQuote(object@className),":\n", sep = "")
1097c1053,1054
<         printPropertiesList(fields, "Class fields")
---
>         cat("\n", gettext("Class fields:", domain = "R-methods"), "\n", sep = "")
> 	printPropertiesList(fields)
1100c1057
<             .printNames("Locked Fields", locked, FALSE)
---
>             .printNames(gettext("Locked Fields", domain = "R-methods"), locked, FALSE)
1103c1060
<         cat("\nNo fields defined\n")
---
>         cat("\n", gettext("No fields defined", domain = "R-methods"), "\n", sep = "")
1106c1063
<         .printNames("\nClass Methods: ", methods)
---
>         .printNames(gettext("Class Methods: ", domain = "R-methods"), methods)
1108c1065
<         cat ("\nNo Class Methods\n")
---
>         cat ("\n", gettext("No Class Methods", domain = "R-methods"), "\n", sep = "")
1111c1068
<         .printNames("Reference Superclasses: ", supers)
---
>         .printNames(gettext("Reference Superclasses: ", domain = "R-methods"), supers)
1169c1126
<                 domain = NA)
---
>                 domain = "R-methods")
1177c1134
<                 domain = NA)
---
>                 domain = "R-methods")
1182c1139
<                 domain = NA)
---
>                 domain = "R-methods")
1225c1182
<              domain = NA)
---
>              domain = "R-methods")
1231c1188
<                     domain = NA)
---
>                     domain = "R-methods")
1239c1196
<                  domain = NA)
---
>                  domain = "R-methods")
1248c1205
<                      domain = NA)
---
>                      domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/show.R R/src/library/methods/R/show.R
24c24
< 	"the 'oldMethods' argument is deprecated, as it has been unused since R 1.7.0")
---
> 	gettext("the 'oldMethods' argument is deprecated, as it has been unused since R 1.7.0", domain = "R-methods"))
26c26
<         cat("An object of class ", classLabel(cl), "\n", sep="")
---
>         cat(gettextf("An object of class %s", classLabel(cl), domain = "R-methods"), "\n", sep = "")
38c38
< 	    cat("Slot ", deparse(what), ":\n", sep="")
---
>             cat(gettextf("Slot %s:", deparse(what), domain = "R-methods"), "\n", sep = "")
44c44
<         ## NBB:  This relies on the delicate fact
---
>         ## NBB:  This relies on the delicate fact (as of version 1.7 at least)
57c57
<            domain = NA)
---
>            domain = "R-methods")
60c60
<         cat("Slot ",s, ":\n", sep="")
---
>         cat(gettextf("Slot %s:", dQuote(s), domain = "R-methods"), "\n", sep = "")
76d75
< 		  nonStandard <-
78,79c77,78
< 			  "" else paste0(" (Class ", classLabel(cl),")")
<                   cat("Method Definition",nonStandard,":\n\n", sep = "")
---
>                   	cat(gettext("Method Definition:", domain = "R-methods"), "\n\n", sep = "")
> 		      else cat(gettextf("Method Definition (Class %s):", dQuote(classLabel(cl)), domain = "R-methods"), "\n\n", sep = "")
82c81
<                   cat("\nSignatures:\n")
---
>                   cat("\n", gettext("Signatures:", domain = "R-methods"), "\n", sep = "")
89c88
<                   cat("\nExcluded from nextMethod:\n")
---
>                   cat("\n", gettext("Excluded from nextMethod:", domain = "R-methods"), "\n", sep = "")
95,103c94,102
<                   cat(class(object)," for \"", object@generic,
<                       "\" defined from package \"", object@package,
<                       "\"\n", sep = "")
<                   if(length(object@group))
<                       cat("  belonging to group(s):",
<                           paste(unlist(object@group), collapse =", "), "\n")
<                   if(length(object@valueClass))
<                       cat("  defined with value class: \"", object@valueClass,
<                           "\"\n", sep="")
---
> 		if(length(object@group) && length(object@valueClass))
>                   cat(sprintf(gettext("Class %s for generic %s defined from package %s\n  belonging to group(s): %s\n  defined with value class: %s\n", domain = "R-methods"), dQuote(class(object)), dQuote(object@generic), sQuote(object@package), paste(unlist(object@group), collapse =", "), dQuote(object@valueClass)))
> 		else if(!length(object@group) && length(object@valueClass))
>                   cat(gettextf("Class %s for generic %s defined from package %s\n  defined with value class: %s\n", dQuote(class(object)), dQuote(object@generic), sQuote(object@package), dQuote(object@valueClass), domain = "R-methods"))
> 		else if(length(object@group) && !length(object@valueClass))
>                   cat(sprintf(gettext("Class %s for generic %s defined from package %s\n  belonging to group(s): %s\n", domain = "R-methods"), dQuote(class(object)), dQuote(object@generic), sQuote(object@package), paste(unlist(object@group), collapse =", ")))
> 		else
>                   cat(gettextf("Class %s for generic %s defined from package %s", dQuote(class(object)), dQuote(object@generic), sQuote(object@package), domain = "R-methods"), "\n", sep = "")
> 
106,109c105
<                   cat("Methods may be defined for arguments: ",
<                       paste(object@signature, collapse=", "), "\n",
< 			    "Use  showMethods(\"", object@generic,
< 			    "\")  for currently available ones.\n", sep="")
---
>                   cat(sprintf(gettext("Methods may be defined for arguments: %s\nUse 'showMethods(\"%s\")' for currently available ones.", domain = "R-methods"), paste(object@signature, collapse=", "), object@generic), "\n", sep = "")
111c107
<                       cat("(This generic function excludes non-simple inheritance; see ?setIs)\n");
---
>                       cat(gettext("(This generic function excludes non-simple inheritance; see '?setIs')"), "\n", sep = "");
117,118c113
<                     cat("Extended class definition (", classLabel(class(object)),
<                         ")\n")
---
>                     cat(gettextf("Extended class definition (%s)", classLabel(class(object)), domain = "R-methods"), "\n", sep = "")
125,126c120
<         message(gettextf("An object of class %s", dQuote(class(object))),
<                 domain = NA)
---
>         message(gettextf("An object of class %s", dQuote(class(object))), domain = "R-methods")
153c147
<         else stop(gettextf("invalid call to 'classLabel': expected a name or a class definition, got an object of class %s", classLabel(class(Class))), domain = NA)
---
>         else stop(gettextf("invalid call passed to 'classLabel': expected a name or a class definition, got an object of class %s", classLabel(class(Class))), domain = "R-methods")
156d149
< 	packageName <-
158c151
< 		" (from the global environment)"
---
> 		gettextf("Class %s (from the global environment)", dQuote(className))
160,161c153
< 		paste0(" (from package \"", packageName, "\")")
<        paste0('"', className, '"', packageName)
---
> 		gettextf("Class %s (from package %s)", dQuote(className), sQuote(packageName))
164c156
<        paste0('"', className, '"')
---
>        dQuote(className)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/trace.R R/src/library/methods/R/trace.R
87c87
<                  domain = NA)
---
>                  domain = "R-methods")
141c141
< 		      sQuote(what)), domain = NA)
---
> 		      sQuote(what)), domain = "R-methods")
143c143
<         message(".TraceWithMethods: after computing what, whereF", domain = NA)
---
>         message(".TraceWithMethods: after computing what, whereF", domain = "R-methods")
154c154
<                  domain = NA)
---
>                  domain = "R-methods")
182c182
<             warning(gettextf("cannot untrace method for %s; no method defined for this signature: %s",
---
>             warning(sprintf(gettext("cannot untrace method for %s; no method defined for this signature: %s", domain = "R-methods"),
193c193
<             message(".TraceWithMethods: untrace case", domain = NA)
---
>             message(".TraceWithMethods: untrace case", domain = "R-methods")
215c215
<                         domain = NA)
---
>                         domain = "R-methods")
262c262
<         message(".TraceWithMethods: about to assign or setMethod", domain = NA)
---
>         message(".TraceWithMethods: about to assign or setMethod", domain = "R-methods")
330,333c330,331
< 	    untcall <- paste0("untrace(\"", what,
< 			      "\", where = getNamespace(\"", pname, "\"))")
<             .message("Warning: Tracing only in the namespace; to untrace you will need:\n    ",
<                      untcall, "\n")
---
> 	    untcall <- paste("untrace(\"", what, "\", where = getNamespace(\"", pname, "\"))", sep="")
>             .message(gettext("Warning: Tracing only in the namespace; to untrace you will need:", domain = "R-methods"), "\n    ", untcall, "\n")
381c379
<                  domain = NA)
---
>                  domain = "R-methods")
471,472c469
<         cat("Object with tracing code, class \"", class(object),
<         "\"\nOriginal definition: \n", sep="")
---
>         cat(gettextf("An object with tracing code, class %s\nOriginal definition:\n", dQuote(class(object)), domain = "R-methods"), sep = "")
474c471
<         cat("\n## (to see the tracing code, look at body(object))\n")
---
>         cat("\n## ", gettext("(to see the tracing code, look at body(object))", domain = "R-methods"), "\n", sep = "")
477,478c474
<         cat("Object of class \"", class(object),
<             "\", from source\n", sep = "")
---
>         cat(gettextf("An object of class %s, from source:", dQuote(class(object)), domain = "R-methods"), "\n", sep = "")
480c476
<         cat("\n## (to see original from package, look at object@original)\n")
---
>         cat("\n## ", gettext("(to see original from package, look at object@original)", domain = "R-methods"), "\n", sep = "")
502,503c498,499
<     cat("Object of class \"", class(object), "\"\n", sep = "")
<     cat("Source environment created ", format(object@dateCreated), "\n")
---
>     cat(gettextf("An object of class %s", dQuote(class(object)), domain = "R-methods"), "\n", sep = "")
>     cat(gettextf("Source environment created %s", format(object@dateCreated), domain = "R-methods"), "\n", sep = "")
505c501
<         cat("For package \"",object@packageName, "\"\n", sep = "")
---
>         cat(gettextf("For package %s", sQuote(object@packageName), domain = "R-methods"), "\n", sep = "")
507c503
<         cat("From source file \"", object@sourceFile, "\"\n", sep = "")
---
>         cat(gettextf("From source file %s", sQuote(object@sourceFile), domain = "R-methods"), "\n", sep = "")
514c510
<     cat("Tracing", call, msg, "\n")
---
>     cat(gettext("Tracing ", domain = "R-methods"), call, " ", msg, "\n", sep = "")
528c524
<         message(strwrap(msg), domain = NA)
---
>         message(strwrap(msg), domain = "R-methods")
558c554
<                 domain = NA)
---
>                 domain = "R-methods")
629,630c625
<     message(sprintf("Constructing traceable class %s", dQuote(traceClassName)),
<             domain = NA)
---
>     message(sprintf("Constructing traceable class %s", dQuote(traceClassName)), domain = "R-methods")
633,635c628
<     message(gettextf("Environment of class %s is locked; using global environment for new class",
<                      dQuote(className)),
<             domain = NA)
---
>     message(gettextf("Environment of class %s is locked; using global environment for new class", dQuote(className)), domain = "R-methods")
693c686
<             warning(gettextf("objects found in multiple packages: using %s and ignoring %s",
---
>             warning(sprintf(gettext("objects found in multiple packages: using %s and ignoring %s", domain = "R-methods"),
720c713
<                  domain = NA)
---
>                  domain = "R-methods")
733c726
<              domain = NA)
---
>              domain = "R-methods")
780,781c773,774
<                      "cannot find an environment corresponding to package name \'%s\"",
<                      package), domain = NA)
---
>                      "cannot find an environment corresponding to package name '%s'",
>                      package), domain = "R-methods")
797c790
<                 domain = NA)
---
>                 domain = "R-methods")
806c799
<             warning(gettextf("cannot insert these (not found in source): %s",
---
>             warning(sprintf(gettext("cannot insert these (not found in source): %s", domain = "R-methods"),
817c810
<             warning(gettextf("cannot insert methods for these functions (methods table not found in source): %s",
---
>             warning(sprintf(gettext("cannot insert methods for these functions (methods table not found in source): %s", domain = "R-methods"),
840c833
<     ##                 domain = NA)
---
>     ##                 domain = "R-methods")
874c867
<         message(gettextf("Non-function objects are not currently inserted (not traceable): %s",
---
>         message(sprintf(gettext("Non-function objects are not currently inserted (not traceable): %s", domain = "R-methods"),
877c870
<         message(gettextf("New functions are not currently inserted (not untraceable): %s",
---
>         message(sprintf(gettext("New functions are not currently inserted (not untraceable): %s", domain = "R-methods"),
880c873
<         message(gettextf("Modified functions inserted through trace(): %s",
---
>         message(sprintf(gettext("Modified functions inserted through trace(): %s", domain = "R-methods"),
906c899
<                          f), domain = NA)
---
>                          f), domain = "R-methods")
924c917
<             message(gettextf("Methods inserted for function %s(): %s",
---
>             message(sprintf(gettext("Methods inserted for function %s(): %s", domain = "R-methods"),
931c924
<     message("Pretend we inserted class ", class, domain = NA)
---
>     message(gettextf("Pretend we inserted class %s", class), domain = "R-methods")
941c934
<                  domain = NA)
---
>                  domain = "R-methods")
954c947
<                 , domain = NA)
---
>                 , domain = "R-methods")
960c953
<                  domain = NA)
---
>                  domain = "R-methods")
967c960
<                domain = NA)
---
>                domain = "R-methods")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/R/zzz.R R/src/library/methods/R/zzz.R
29c29
<     cat("initializing class and method definitions ...")
---
>     cat(gettext("initializing class and method definitions ...", domain = "R-methods"))
90c90
<     cat(" done\n")
---
>     cat(gettext(" done", domain = "R-methods"), "\n", sep = "")
143,144c143
<           warning("apparently bad method or class metadata in saved environment;\n",
<                   "move the file or remove the class/method")
---
>           warning("apparently bad method or class metadata in saved environment;\nmove the file or remove the class/method")
156c155
< .dQ <- function (x) paste0('"', x, '"')
---
> .dQ <- function (x) dQuote(x)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/man/RClassUtils.Rd R/src/library/methods/man/RClassUtils.Rd
97c97
< showClass(Class, complete=TRUE, propertiesAreCalled="Slots")
---
> showClass(Class, complete=TRUE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/src/class_support.c R/src/library/methods/src/class_support.c
25a26
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/src/do_substitute_direct.c R/src/library/methods/src/do_substitute_direct.c
23d22
< #define NO_NLS
26a26
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/src/init.c R/src/library/methods/src/init.c
25a26
> #include "localization.h"
Only in R/src/library/methods/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/src/methods.h R/src/library/methods/src/methods.h
21,26d20
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("methods", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/src/methods_list_dispatch.c R/src/library/methods/src/methods_list_dispatch.c
29,30c29
< #undef _
< 
---
> #include "localization.h"
217c216
< 	error(_("no \"allMethods\" slot found in object of class \"%s\" used as methods list for function '%s'"),
---
> 	error(_("no 'allMethods' slot found in object of class \"%s\" used as methods list for function '%s'"),
355c354
< 	error("S language method selection got an error when called from internal dispatch for function '%s'",
---
> 	error(_("S language method selection got an error when called from internal dispatch for function '%s'"),
357c356
< 				     "Function name for method selection called internally"));
---
> 				     _("Function name for method selection called internally")));
391c390
< 		  check_single_string(gpackage, FALSE, "The \"package\" slot in generic function object");
---
> 		  check_single_string(gpackage, FALSE, _("The 'package' slot in generic function object"));
412c411
< 		check_single_string(gpackage, FALSE, "The \"package\" slot in generic function object");
---
> 		check_single_string(gpackage, FALSE, _("The 'package' slot in generic function object"));
424,425c423,424
<     else check_single_string(name, TRUE, "The argument \"f\" to getGeneric");
<     check_single_string(package, FALSE, "The argument \"package\" to getGeneric");
---
>     else check_single_string(name, TRUE, _("The argument 'f' passed to getGeneric"));
>     check_single_string(package, FALSE, _("The argument 'package' passed to getGeneric"));
454c453
< 	const char *fname = check_single_string(fsym, TRUE, "The function name in the call to standardGeneric");
---
> 	const char *fname = check_single_string(fsym, TRUE, _("The function name in the call to standardGeneric"));
531c530
<     if (!isSymbol(symbol)) error("'symbol' must be a SYMSXP");
---
>     if (!isSymbol(symbol)) error(_("'symbol' must be a SYMSXP expression"));
663c662
< 	error("internal error in 'callNextMethod': '.nextMethod' was not assigned in the frame of the method call");
---
> 	error(_("internal error in 'callNextMethod': '.nextMethod' was not assigned in the frame of the method call"));
670c669
< 	        error("internal error in 'callNextMethod': '.Generic' was not assigned in the frame of the method call");
---
> 	        error("internal error in 'callNextMethod()': '.Generic' was not assigned in the frame of the method call");
842c841
< 				       "The internal prefix (e.g., \"C\") for a meta-data object");
---
> 				       _("The internal prefix (e.g., \"C\") for a meta-data object"));
844c843
< 				     "The name of the object (e.g,. a class or generic function) to find in the meta-data");
---
> 				     _("The name of the object (e.g,. a class or generic function) to find in the meta-data"));
846c845
< 				   "The name of the package for a meta-data object");
---
> 				   _("The name of the package for a meta-data object"));
985c984
< 	error("generic \"%s\" seems not to have been initialized for table dispatch---need to have '.SigArgs' and '.AllMtable' assigned in its environment");
---
> 	error(_("generic \"%s\" seems not to have been initialized for table dispatch---need to have '.SigArgs' and '.AllMtable' assigned in its environment"));
989c988
< 	error("'.SigArgs' is shorter than '.SigLength' says it should be");
---
> 	error(_("'.SigArgs' is shorter than '.SigLength' says it should be"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/src/utils.c R/src/library/methods/src/utils.c
21a22
> #include "localization.h"
31c32
< 	error("'R_get_primname' called on a non-primitive");
---
> 	error(_("'R_get_primname' called on a non-primitive"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/tests/basicRefClass.R R/src/library/methods/tests/basicRefClass.R
307c307
<     message("Plotting to ", viewerFile)
---
>     message(gettextf("Plotting to %s", viewerFile))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/methods/tests/mixinInitialize.R R/src/library/methods/tests/mixinInitialize.R
36c36
<       "elements of slot \"a\" must be positive"
---
>       gettext("elements of slot \"a\" must be positive")
47c47
<           message("muststop reports: ", value)
---
>           message(gettextf("muststop reports: %s", value))
51,52c51,52
<       stop(gettextf("The expression  %s should have thrown an error, but instead returned an object of class \"%s\"",
<            deparse(substitute(expr))[[1]], class(value)))
---
>       stop(gettextf("The expression %s should have thrown an error, but instead returned an object of class %s",
>            sQuote(deparse(substitute(expr))[[1]]), dQuote(class(value))))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/clusterApply.R R/src/library/parallel/R/clusterApply.R
100c100
<     if (length(args) == 0) stop("need at least one argument")
---
>     if (length(args) == 0) stop("at least one argument is needed")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/detectCores.R R/src/library/parallel/R/detectCores.R
59c59
<         msg <- sprintf("%d simultaneous processes spawned", nc)
---
>         msg <- sprintf(ngettext(nc, "%d simultaneous process spawned", "%d simultaneous processes spawned", domain = "R-parallel"), nc)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/snow.R R/src/library/parallel/R/snow.R
27c27
<     if(is.null(cl)) stop("no cluster 'cl' supplied and none is registered")
---
>     if(is.null(cl)) stop("no cluster 'cl' argument supplied and none is registered")
47c47
<     if (!inherits(cl, "cluster")) stop("not a valid cluster");
---
>     if (!inherits(cl, "cluster")) stop("'cl' argument is not a valid object of class \"cluster\"");
209,213c209,213
<     ## These will not translate
<     if (count == 1)
<         stop("one node produced an error: ", firstmsg, domain = NA)
<     else if (count > 1)
<         stop(count, " nodes produced errors; first error: ", firstmsg, domain = NA)
---
>     if(count > 0)
>     stop(sprintf(ngettext(count,
> 		"%d node produced an error: %s",
> 		"%d nodes produced errors; first error: %s", domain = "R-parallel"),
> 		count, firstmsg), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/snowSOCK.R R/src/library/parallel/R/snowSOCK.R
69c69
<         cat("Manually start worker on", machine, "with\n    ", cmd, "\n")
---
>         cat(gettextf("Manually start 'worker' on %s with\n    %s\n", machine, cmd, domain = "R-parallel"))
143,145c143,151
<     msg <- sprintf(ngettext(length(hosts),
<                             "socket cluster with %d nodes on host %s",
<                             "socket cluster with %d nodes on hosts %s"),
---
>     if(length(hosts) == 1)
>     msg <- sprintf(ngettext(nc,
>                             "socket cluster with %d node on host %s",
>                             "socket cluster with %d nodes on host %s", domain = "R-parallel"),
>                    nc, sQuote(hosts))
>     else
>     msg <- sprintf(ngettext(nc,
>                             "socket cluster with %d node on hosts %s",
>                             "socket cluster with %d nodes on hosts %s", domain = "R-parallel"),
156,158c162
<     msg <- gettextf("node of a socket cluster on host %s with pid %d",
<                     sQuote(x[["host"]]), pid)
<     cat(msg, "\n", sep = "")
---
>     cat(gettextf("node of a socket cluster on host %s with pid %d", sQuote(x[["host"]]), pid, domain = "R-parallel"), "\n", sep = "")
212c216
<     if (is.na(port)) stop("PORT must be specified")
---
>     if (is.na(port)) stop("'port' argument must be specified")
217c221
<     msg <- sprintf("starting worker pid=%d on %s at %s\n",
---
>     msg <- gettextf("starting worker pid=%d on %s at %s\n",
219c223
<                    format(Sys.time(), "%H:%M:%OS3"))
---
>                    format(Sys.time(), "%H:%M:%OS3"), domain = "R-parallel")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/unix/forkCluster.R R/src/library/parallel/R/unix/forkCluster.R
22c22
<     if(is.na(nnodes) || nnodes < 1L) stop("'nnodes' must be >= 1")
---
>     if(is.na(nnodes) || nnodes < 1L) stop(gettextf("'%s' argument must be >= 1", "nnodes"))
72c72
<         msg <- sprintf("starting worker pid=%d on %s at %s\n",
---
>         msg <- gettextf("starting worker pid=%d on %s at %s\n",
74c74
<                        format(Sys.time(), "%H:%M:%OS3"))
---
>                        format(Sys.time(), "%H:%M:%OS3"), domain = "R-parallel")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/unix/mcfork.R R/src/library/parallel/R/unix/mcfork.R
50c50
<     if (!is.numeric(child)) stop("invalid 'child' argument")
---
>     if (!is.numeric(child)) stop(gettextf("invalid '%s' argument", "child"))
62c62
<             else stop("'children' must be a list of processes or a single process")
---
>             else stop("'children' argument must be a list of processes or a single process")
65c65
<         stop("'children' must be a list of processes or a single process")
---
>         stop("'children' argument must be a list of processes or a single process")
73c73
<     if (!is.numeric(child)) stop("invalid 'child' argument")
---
>     if (!is.numeric(child)) stop(gettextf("invalid '%s' argument", "child"))
98,99c98
<     else stop(gettextf("'process' must be of class %s", dQuote("process")),
<               domain = NA)
---
>     else stop(gettextf("'process' argument must be of class %s", dQuote("process")), domain = "R-parallel")
107c106
<         stop("'child' must be a valid child process")
---
>         stop("'child' argument must be a valid child process")
110c109
<     if (!is.raw(what)) stop("'what' must be a character or raw vector")
---
>     if (!is.raw(what)) stop("'what' argument must be a character or raw vector")
155c154
<         warning("closeAll() is a no-op in the master process", domain = NA)
---
>         warning("'closeAll()' is a no-op in the master process", domain = "R-parallel")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/unix/mclapply.R R/src/library/parallel/R/unix/mclapply.R
28c28
<         stop("'mc.cores' must be >= 1")
---
>         stop(gettextf("'%s' argument must be >= 1", "mc.cores"))
150c150
<                                          "%d parallel function calls did not deliver results"),
---
>                                          "%d parallel function calls did not deliver results", domain = "R-parallel"),
178c178
<             on.exit(mcexit(1L, structure("fatal error in wrapper code", class="try-error")))
---
>             on.exit(mcexit(1L, structure(gettext("fatal error in wrapper code"), class="try-error")))
226c226
<                                  "scheduled cores %s did not deliver results, all values of the jobs will be affected"),
---
>                                  "scheduled cores %s did not deliver results, all values of the jobs will be affected", domain = "R-parallel"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/unix/mcparallel.R R/src/library/parallel/R/unix/mcparallel.R
27c27
<         on.exit(mcexit(1L, structure("fatal error in wrapper code",
---
>         on.exit(mcexit(1L, structure(gettext("fatal error in wrapper code"),
56c56
<     if (!is.numeric(pids)) stop("invalid 'jobs' argument")
---
>     if (!is.numeric(pids)) stop(gettextf("invalid '%s' argument", "jobs"))
111c111
<                                  "%d parallel jobs did not deliver results"),
---
>                                  "%d parallel jobs did not deliver results", domain = "R-parallel"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/unix/pvec.R R/src/library/parallel/R/unix/pvec.R
24c24
<     if (!is.vector(v)) stop("'v' must be a vector")
---
>     if (!is.vector(v)) stop("'v' argument must be a vector")
27c27
<     if(cores < 1L) stop("'mc.cores' must be >= 1")
---
>     if(cores < 1L) stop(gettextf("'%s' argument must be >= 1", "mc.cores"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/R/windows/mcdummies.R R/src/library/parallel/R/windows/mcdummies.R
24,25c24,25
<     if(cores < 1L) stop("'mc.cores' must be >= 1")
<     if(cores > 1L) stop("'mc.cores' > 1 is not supported on Windows")
---
>     if(cores < 1L) stop(gettextf("'%s' argument must be >= 1", "mc.cores"))
>     if(cores > 1L) stop("'mc.cores' argument > 1 is not supported on Windows")
32c32
<     if (!is.vector(v)) stop("'v' must be a vector")
---
>     if (!is.vector(v)) stop("'v' argument must be a vector")
34,35c34,35
<     if(cores < 1L) stop("'mc.cores' must be >= 1")
<     if(cores > 1L) stop("'mc.cores' > 1 is not supported on Windows")
---
>     if(cores < 1L) stop(gettextf("'%s' argument must be >= 1", "mc.cores"))
>     if(cores > 1L) stop("'mc.cores' argument > 1 is not supported on Windows")
45,46c45,46
<     if(cores < 1L) stop("'mc.cores' must be >= 1")
<     if(cores > 1L) stop("'mc.cores' > 1 is not supported on Windows")
---
>     if(cores < 1L) stop(gettextf("'%s' argument must be >= 1", "mc.cores"))
>     if(cores > 1L) stop("'mc.cores' argument > 1 is not supported on Windows")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/src/fork.c R/src/library/parallel/src/fork.c
31c31
< #define NO_NLS
---
> 
35c35
< 
---
> #include "localization.h"
238c238
<     Dprintf("WARNING: child %d was to be removed but it doesn't exist\n", pid);
---
>     Dprintf(_("WARNING: child %d was to be removed but it doesn't exist\n"), pid);
435,436c435
< 	Dprintf("child process %d got SIGUSR1; child_exit_status=%d\n", 
< 		getpid(), child_exit_status);
---
> 	Dprintf(_("child process %d got SIGUSR1; child_exit_status=%d\n"), getpid(), child_exit_status);
498c497
< 	Dprintf("parent[%d] created pipes: comm (%d->%d), sir (%d->%d)\n",
---
>     Dprintf(_("parent[%d] created pipes: comm (%d->%d), sir (%d->%d)\n"),
552c551
< 	Dprintf("child process %d started\n", getpid());
---
> 	Dprintf(_("child process %d started\n"), getpid());
621c620
<     if (TYPEOF(sFDS) != INTSXP) error("descriptors must be integers");
---
>     if (TYPEOF(sFDS) != INTSXP) error(_("descriptors must be integers"));
693c692
<     Dprintf("child %d: send_master (%lld bytes)\n", getpid(), (long long)len);
---
>     Dprintf(n_(len, "child %d: send_master (%lld byte)\n", "child %d: send_master (%lld bytes)\n"), getpid(), len);
717c716
<     if (TYPEOF(what) != RAWSXP) error("what must be a raw vector");
---
>     if (TYPEOF(what) != RAWSXP) error(_("what must be a raw vector"));
772c771
< 			    error("file descriptor is too large for select()");
---
> 			    error(_("file descriptor is too large for select()"));
785c784
< 		    error("file descriptor is too large for select()");
---
> 		    error(_("file descriptor is too large for select()"));
881c880
<     Dprintf(" - read select %d children: ", sr);
---
>     Dprintf(_(" - read select %d children: "), sr);
911c910
<     Dprintf("read_child_ci(%d) - read length returned %lld\n", pid, (long long)n);
---
>     Dprintf(_(" read_child_ci(%d) - read length returned %lld\n"), pid, (long long)n);
924c923
< 	    Dprintf("read_child_ci(%d) - read %lld at %lld returned %lld\n",
---
> 	    Dprintf(_("read_child_ci(%d) - read %lld at %lld returned %lld\n"),
955c954
<     if (!ci) Dprintf("read_child(%d) - pid is not in the list of children\n", pid);
---
>     if (!ci) Dprintf(_("read_child(%d) - pid is not in the list of children\n"), pid);
1123c1122
< 	Dprintf("child %d is waiting for permission to exit\n", getpid());
---
> 	Dprintf(_("child %d is waiting for permission to exit\n"), getpid());
1133c1132
<     error(_("'mcexit' failed"));
---
>     error(_("'mcexit()' function failed"));
Only in R/src/library/parallel/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/src/ncpus.c R/src/library/parallel/src/ncpus.c
21a22
> #include "localization.h"
92c93
< 		error("in reading processor information, probable cause: %d",
---
> 		error(_("in reading processor information, probable cause: %d"),
177c178
< 	warning("GetLogicalProcessorInformation is not supported on this OS.");
---
> 	warning(_("GetLogicalProcessorInformation is not supported on this OS."));
190,191c191,192
<                 if (!buffer) error("allocation failure");
<             } else error("in reading processor information, probable cause: %d", GetLastError());
---
>                 if (!buffer) error(_("allocation failure"));
>             } else error(_("in reading processor information, probable cause: %d"), GetLastError());
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/parallel/src/parallel.h R/src/library/parallel/src/parallel.h
24,29d23
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("parallel", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/profile/Common.R R/src/library/profile/Common.R
77,78c77
<             warning(gettextf('package %s in options("defaultPackages") was not found', sQuote(pkg)),
<                     call. = FALSE, domain = NA)
---
>             warning(gettextf("package %s in options(\"defaultPackages\") was not found", sQuote(pkg)), call. = FALSE, domain = "R-profile")
89,90c88
<             warning('package "methods" in options("defaultPackages") was not found',
<                     call. = FALSE)
---
>             warning("package 'methods' in options(\"defaultPackages\") was not found", call. = FALSE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/splines/R/splineClasses.R R/src/library/splines/R/splineClasses.R
44c44
<         stop("must have at least 'ord' knots")
---
>         stop(sprintf(ngettext(ord, "at least '%s' (=%d) knots is needed", "at least '%s' (=%d) knots are needed", domain = "R-splines"), "ord", ord), domain = NA)
51c51
<     if(length(derivs) < 1L) stop("empty 'derivs'")
---
>     if(length(derivs) < 1L) stop("empty 'derivs' argument")
58,60c58
<         stop(gettextf("need at least %s (=%d) knots",
<                       "2*ord -1", 2*ord -1),
<              domain = NA)
---
>         stop(sprintf(ngettext(2*ord-1, "at least '%s' (=%d) knots is needed", "at least '%s' (=%d) knots are needed", domain = "R-splines"), "2*ord - 1", 2*ord-1), domain = NA)
81,82c79
< 			  knots[ord], knots[nk - degree], "outer.ok = TRUE"),
< 		 domain = NA)
---
> 		      knots[ord], knots[nk - degree], "outer.ok = TRUE", domain = "R-splines"), domain = NA)
88,90c85,87
<         rep.int((1L:nx)[in.x], rep.int(ord, nnx))
<     } else rep.int(1L:nx, rep.int(ord, nx))
<     jj <- c(outer(1L:ord, attr(temp, "Offsets"), "+"))
---
>         rep.int(seq_len(nx)[in.x], rep.int(ord, nnx))
>     } else rep.int(seq_len(nx), rep.int(ord, nx))
>     jj <- c(outer(seq_len(ord), attr(temp, "Offsets"), "+"))
96,97c93
<                           "splineDesign(*, sparse=TRUE)"),
<                  domain = NA)
---
>                           "splineDesign(*, sparse=TRUE)", domain = "R-splines"), domain = NA)
147c143
<         stop(gettextf("must have at least 'ord'=%d points", ord), domain=NA)
---
>         stop(sprintf(ngettext(ord, "at least 'ord'=%d point is required", "at least 'ord'=%d points are required", domain = "R-splines"), ord), domain = NA)
244c240
<     if(ord < 2) stop("'ord' must be >= 2")
---
>     if(ord < 2) stop(gettextf("'%s' argument must be integer >= %d", "ord", 2))
250c246
< 	knots <- c(x[(lenx - (ord - 2)):lenx] - period, x, x[1L:ord] + period)
---
> 	knots <- c(x[(lenx - (ord - 2)):lenx] - period, x, x[seq_len(ord)] + period)
257c253
<     sys.mat <- coeff.mat[, (1L:lenx)]
---
>     sys.mat <- coeff.mat[, seq_len(lenx)]
379,380c375
< 	stop(gettextf("'deriv' must be between 0 and %d", ord - 1),
<              domain = NA)
---
> 	stop(gettextf("'deriv' must be between 0 and %d", ord - 1), domain = "R-splines")
401,402c396
< 	stop(gettextf("'deriv' must be between 0 and %d", ord - 1),
<              domain = NA)
---
> 	stop(gettextf("'deriv' must be between 0 and %d", ord - 1), domain = "R-splines")
435c429
< 	coeff <- t(t(coeff[, -1]) * (1L:ord))# 1L:ord = the 'k' in k* x^{k-1}
---
> 	coeff <- t(t(coeff[, -1]) * seq_len(ord))# seq_len(ord) = the 'k' in k* x^{k-1}
483c477
< 	coeff <- t(t(coeff[, -1]) * (1L:ord))# 1L:ord = the 'k' in k* x^{k-1}
---
> 	coeff <- t(t(coeff[, -1]) * seq_len(ord))# seq_len(ord) = the 'k' in k* x^{k-1}
538,539c532
< 		   paste0(4:29, "th"))[1L:(dim(coeff)[2L])])
<     cat("polynomial representation of spline")
---
> 		   paste0(4:29, "th"))[seq_len(dim(coeff)[2L])])
541c534,536
< 	cat(" for", deparse(as.vector(form)))
---
>     cat(gettextf("polynomial representation of spline for %s", deparse(as.vector(form)), domain = "R-splines"))
>     else
>     cat(gettext("polynomial representation of spline", domain = "R-splines"))
551c546
<     cat("\nPeriod:", format(x[["period"]]), "\n")
---
>     cat("\n", gettext("Period:", domain = "R-splines"), " ", format(x[["period"]]), "\n", sep = "")
559d553
<     cat("bSpline representation of spline")
561c555,557
< 	cat(" for", deparse(as.vector(form)))
---
>     cat(gettextf("bSpline representation of spline for %s", deparse(as.vector(form)), domain = "R-splines"))
>     else
>     cat(gettext("bSpline representation of spline", domain = "R-splines"))
598c594
<     for(i in 1L:(nkm1))
---
>     for(i in seq_len(nkm1))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/splines/R/splines.R R/src/library/splines/R/splines.R
23c23
<     if(ord <= 1) stop("'degree' must be integer >= 1")
---
>     if(ord <= 1) stop(gettextf("'%s' argument must be integer >= %d", "degree", 1))
38,39c38,39
<             warning(gettextf("'df' was too small; have used %d",
<                              ord - (1L - intercept)), domain = NA)
---
>             warning(gettextf("'%s' argument was too small; have used %d", "df",
>                              ord - (1L - intercept)), domain = "R-splines")
52c52
<         scalef <- gamma(1L:ord)# factorials
---
>         scalef <- gamma(seq_len(ord))# factorials
58c58
<             xl <- cbind(1, outer(x[ol] - k.pivot, 1L:degree, "^"))
---
>             xl <- cbind(1, outer(x[ol] - k.pivot, seq_len(degree), "^"))
65c65
<             xr <- cbind(1, outer(x[or] - k.pivot, 1L:degree, "^"))
---
>             xr <- cbind(1, outer(x[or] - k.pivot, seq_len(degree), "^"))
81c81
<     dimnames(basis) <- list(nx, 1L:n.col)
---
>     dimnames(basis) <- list(nx, seq_len(n.col))
111,112c111,112
<             warning(gettextf("'df' was too small; have used %d",
<                              1L + intercept), domain = NA)
---
>             warning(gettextf("'%s' argument was too small; have used %d", "df",
>                              1L + intercept), domain = "R-splines")
153c153
<     dimnames(basis) <- list(nx, 1L:n.col)
---
>     dimnames(basis) <- list(nx, seq_len(n.col))
Only in R/src/library/splines/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/splines/src/splines.c R/src/library/splines/src/splines.c
29,34c29
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("splines", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
154c149
< 	error(_("'ord' must be a positive integer"));
---
> 	error(_("'%s' argument must be a positive integer"), "ord");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ARMAtheory.R R/src/library/stats/R/ARMAtheory.R
39c39
<             A[, 1L:p] <- A[, 1L:p] + A[, p2.1:(p + 2L)]
---
>             A[,  seq_len(p)] <- A[, seq_len(p)] + A[, p2.1:(p + 2L)]
54c54
<         Acf <- c(1, Acf[1L:lag.max])
---
>         Acf <- c(1, Acf[seq_len(lag.max)])
57c57
<         Acf <- filter(c(x, rep(0, q)), rev(x), sides=1)[-(1L:q)]
---
>         Acf <- filter(c(x, rep(0, q)), rev(x), sides=1)[-seq_len(q)]
69c69
<     if(order.max <= 0) stop("'acf' must be of length two or more")
---
>     if(order.max <= 0) stop(gettextf("'%s' argument must have length >= %d", "acf", 2))
73,74c73,74
<     nm <- paste0("ar(",1L:order.max, ")")
<     matrix(z$coefs, order.max, order.max, dimnames=list(nm, 1L:order.max))
---
>     nm <- paste0("ar(",seq_len(order.max), ")")
>     matrix(z$coefs, order.max, order.max, dimnames=list(nm, seq_len(order.max)))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/C.R R/src/library/stats/R/C.R
24c24
<     if(!nlevels(object)) stop("object not interpretable as a factor")
---
>     if(!nlevels(object)) stop("'object' argument is not interpretable as a factor")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/HoltWinters.R R/src/library/stats/R/HoltWinters.R
72,73c72
<         st <- decompose(ts(x[1L:wind], start = start(x), frequency = f),
<                         seasonal)
---
>         st <- decompose(ts(x[seq_len(wind)], start = start(x), frequency = f), seasonal)
87c86
<     if (is.na(lenx)) stop("invalid length(x)")
---
>     if (is.na(lenx)) stop(gettextf("invalid '%s' value", "length(x)"))
130,131c129
<                         warning(gettextf("optimization difficulties: %s",
<                                          sol$message), domain = NA)
---
>                         warning(gettextf("optimization difficulties: %s", sol$message), domain = "R-stats")
147,148c145
<                         warning(gettextf("optimization difficulties: %s",
<                                          sol$message), domain = NA)
---
>                         warning(gettextf("optimization difficulties: %s", sol$message), domain = "R-stats")
166,167c163
<                         warning(gettextf("optimization difficulties: %s",
<                                          sol$message), domain = NA)
---
>                         warning(gettextf("optimization difficulties: %s", sol$message), domain = "R-stats")
193,194c189
<                         warning(gettextf("optimization difficulties: %s",
<                                          sol$message), domain = NA)
---
>                         warning(gettextf("optimization difficulties: %s", sol$message), domain = "R-stats")
225c220
<                            final.fit$seasonal[1L:len]),
---
>                            final.fit$seasonal[seq_len(len)]),
242c237
<                                     s = if (!is.logical(gamma) || gamma) final.fit$seasonal[len + 1L:f]),
---
>                                     s = if (!is.logical(gamma) || gamma) final.fit$seasonal[len + seq_len(f)]),
263c258
<             sum(1, (h > 1) * sapply(1L:(h-1), function(j) crossprod(psi(j))))
---
>             sum(1, ifelse(h > 1, sapply(seq_len(h-1), function(j) crossprod(psi(j))), 0))
275c270
<         fit <- fit + as.vector((1L:n.ahead)*object$coefficients[2L])
---
>         fit <- fit + as.vector(seq_len(n.ahead)*object$coefficients[2L])
279,280c274
<             fit <- fit + rep(object$coefficients[-(1L:(1+(!is.logical(object$beta) || object$beta)))],
<                              length.out=length(fit))
---
>             fit <- fit + rep(object$coefficients[-(seq_len(1+(!is.logical(object$beta) || object$beta)))], length.out=length(fit))
282,283c276
<             fit <- fit * rep(object$coefficients[-(1L:(1+(!is.logical(object$beta) || object$beta)))],
<                              length.out=length(fit))
---
>             fit <- fit * rep(object$coefficients[-(seq_len(1+(!is.logical(object$beta) || object$beta)))], length.out=length(fit))
287c280
<       int <- qnorm((1 + level) / 2) * sqrt(sapply(1L:n.ahead,vars))
---
>       int <- qnorm((1 + level) / 2) * sqrt(sapply(seq_len(n.ahead), vars))
293,294c286
<        start = end(lag(fitted(object)[,1], k = -1)),
<        frequency  = frequency(fitted(object)[,1])
---
>        start = end(lag(fitted(object)[,1], k = -1)), frequency  = frequency(fitted(object)[,1])
304c296
<               ylab = "Observed / Fitted", main = "Holt-Winters filtering",
---
>               ylab = gettext("Observed / Fitted"), main = gettext("Holt-Winters filtering"),
341,347c333,351
<     cat("Holt-Winters exponential smoothing",
<         if (is.logical(x$beta) && !x$beta) "without" else "with", "trend and",
<         if (is.logical(x$gamma) && !x$gamma) "without" else
<         paste0(if (is.logical(x$beta) && !x$beta) "with ", x$seasonal),
<         "seasonal component.")
<     cat("\n\nCall:\n", deparse (x$call), "\n\n", sep = "")
<     cat("Smoothing parameters:\n")
---
>     if (is.logical(x$beta) && !x$beta)
>      if (is.logical(x$gamma) && !x$gamma)
>       cat(gettext("Holt-Winters exponential smoothing without trend and without seasonal component.", domain = "R-stats"))
>      else
> 	if (x$seasonal == "additive")
>          cat(gettext("Holt-Winters exponential smoothing without trend and with additive seasonal component.", domain = "R-stats"))
> 	else
>          cat(gettext("Holt-Winters exponential smoothing without trend and with multiplicative seasonal component.", domain = "R-stats"))
>     else
>      if (is.logical(x$gamma) && !x$gamma)
>       cat(gettext("Holt-Winters exponential smoothing with trend and without seasonal component.", domain = "R-stats"))
>      else
> 	if (x$seasonal == "additive")
>          cat(gettext("Holt-Winters exponential smoothing with trend and additive seasonal component.", domain = "R-stats"))
> 	else
>          cat(gettext("Holt-Winters exponential smoothing with trend and multiplicative seasonal component.", domain = "R-stats"))
> 
>     cat("\n\n", gettext("Call:", domain = "R-stats"), "\n", deparse (x$call), "\n\n", sep = "")
>     cat(gettext("Smoothing parameters:", domain = "R-stats"), "\n", sep = "")
352c356
<     cat("Coefficients:\n")
---
>     cat(gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
385c389
<     for (i in 1L:f)
---
>     for (i in seq_len(f))
393,394c397
<     seasonal <- ts(rep(figure, periods+1)[seq_len(l)],
<                    start = start(x), frequency = f)
---
>     seasonal <- ts(rep(figure, periods+1)[seq_len(l)], start = start(x), frequency = f)
420c423
<          main = paste("Decomposition of", x$type, "time series"),
---
>          main = if (x$type == "additive") gettext("Decomposition of additive time series") else gettext("Decomposition of multiplicative time series"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/StructTS.R R/src/library/stats/R/StructTS.R
85c85
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
113,114c113
<             warning(gettextf("possible convergence problem: 'optim' gave code = %d and message %s",
<                              res$convergence, sQuote(res$message)), domain = NA)
---
>             warning(gettextf("possible convergence problem: 'optim' gave code = %d and message %s", res$convergence, sQuote(res$message)), domain = "R-stats")
152,153c151,152
<     cat("\nCall:", deparse(x$call, width.cutoff = 75L), "", sep = "\n")
<     cat("Variances:\n")
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n", deparse(x$call, width.cutoff = 75L), "\n\n", sep = "")
>     cat(gettext("Variances:", domain = "R-stats"), "\n", sep = "")
178c177
<     plot(stdres, type = "h", main = "Standardized Residuals", ylab = "")
---
>     plot(stdres, type = "h", main = gettext("Standardized Residuals"), ylab = "")
180c179
<     acf(object$residuals, plot = TRUE, main = "ACF of Residuals",
---
>     acf(object$residuals, plot = TRUE, main = gettext("ACF of Residuals"),
185,186c184,185
<     plot(1L:nlag, pval, xlab = "lag", ylab = "p value", ylim = c(0,1),
<          main = "p values for Ljung-Box statistic")
---
>     plot(1L:nlag, pval, xlab = gettext("Lag"), ylab = gettext("p-value"), ylim = c(0,1),
>          main = gettext("p-values for Ljung-Box statistic"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/TukeyHSD.R R/src/library/stats/R/TukeyHSD.R
88,90c88,89
<     cat("  Tukey multiple comparisons of means\n")
<     cat("    ", format(100*attr(x, "conf.level"), 2),
<         "% family-wise confidence level\n", sep = "")
---
>     cat("  ", gettext("Tukey multiple comparisons of means", domain = "R-stats"), "\n", sep = "")
>     cat("    ", gettextf("%s%% family-wise confidence level", format(100*attr(x, "conf.level"), 2), domain = "R-stats"), "\n", sep = "")
92,93c91,92
<         cat("    factor levels have been ordered\n")
<     cat("\nFit: ", deparse(attr(x, "orig.call"), 500L), "\n\n", sep = "")
---
>         cat("    ", gettext("factor levels have been ordered", domain = "R-stats"), "\n", sep = "")
>     cat("\n", gettext("Fit: ", domain = "R-stats"), deparse(attr(x, "orig.call"), 500L), "\n\n", sep = "")
119,121c118,119
<         title(main = paste0(format(100 * attr(x, "conf.level"), digits = 2L),
<                             "% family-wise confidence level\n"),
<               xlab = paste("Differences in mean levels of", names(x)[i]))
---
>         title(main = paste(gettextf("%s%% family-wise confidence level", format(100 * attr(x, "conf.level"), digits = 2L), domain = "R-stats"), "\n", sep = ""),
>               xlab = gettextf("Differences in mean levels of %s", names(x)[i], domain = "R-stats"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/acf.R R/src/library/stats/R/acf.R
37c37
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
41c41
<         stop("'sampleT' and 'nser' must be integer")
---
>         stop("'sampleT' and 'nser' arguments must be integer")
46c46
<         stop("'lag.max' must be at least 0")
---
>         stop(gettextf("'%s' argument must be at least %d", "lag.max", 0))
69c69
<     if(!is.numeric(x)) stop("'x' must be numeric")
---
>     if(!is.numeric(x)) stop(gettextf("'%s' argument must be numeric", "x"))
76c76
<     if (lag.max < 1) stop("'lag.max' must be at least 1")
---
>     if (lag.max < 1) stop(gettextf("'%s' argument must be at least %d", "lag.max", 1))
79c79
<         if(anyNA(x)) stop("NAs in 'x'")
---
>         if(anyNA(x)) stop("NA values in 'x'")
85c85
<         lag <- outer(1L:lag.max, lag/x.freq)
---
>         lag <- outer(seq_len(lag.max), lag/x.freq)
92c92
<         lag <- array((1L:lag.max)/x.freq, dim=c(lag.max,1L,1L))
---
>         lag <- array(seq_len(lag.max)/x.freq, dim=c(lag.max,1L,1L))
106c106
<     function (x, ci = 0.95, type = "h", xlab = "Lag", ylab = NULL,
---
>     function (x, ci = 0.95, type = "h", xlab = gettext("Lag", domain = "R-stats"), ylab = NULL,
120c120
<     if((nser <- ncol(x$lag)) < 1L) stop("x$lag must have at least 1 column")
---
>     if((nser <- ncol(x$lag)) < 1L) stop("'x$lag' must have at least 1 column")
123,125c123,125
<                        correlation = "ACF",
<                        covariance = "ACF (cov)",
<                        partial = "Partial ACF")
---
>                        correlation = gettext("ACF", domain = "R-stats"),
>                        covariance = gettext("ACF (cov)", domain = "R-stats"),
>                        partial = gettext("Partial ACF", domain = "R-stats"))
127c127,128
<         snames <- paste("Series ", if (nser == 1L) x$series else 1L:nser)
---
>         if(nser == 1L) snames <- gettextf("Series %s", x$series)
> 	else snames <- gettextf("Series %s", seq_len(nser))
132c133
<         warning("can use ci.type=\"ma\" only if first lag is 0")
---
>         warning("can use 'ci.type=\"ma\"' only if first lag is 0")
161c162
<         ylim <- range(x$acf[, 1L:nser, 1L:nser], na.rm = TRUE)
---
>         ylim <- range(x$acf[, seq_len(nser), seq_len(nser)], na.rm = TRUE)
164c165
< 	    for (i in 1L:nser) {
---
> 	    for (i in seq_len(nser)) {
171c172
<     for (I in 1L:Npgs) for (J in 1L:Npgs) {
---
>     for (I in seq_len(Npgs)) for (J in seq_len(Npgs)) {
174,175c175,176
<         iind <- (I-1)*nr + 1L:nr
<         jind <- (J-1)*nr + 1L:nr
---
>         iind <- (I-1)*nr + seq_len(nr)
>         jind <- (J-1)*nr + seq_len(nr)
177c178
<             message(gettextf("Page [%d,%d]: i =%s; j =%s", I, J, paste(iind,collapse=","), paste(jind,collapse=",")), domain = NA)
---
>             message(gettextf("Page [%d,%d]: i =%s; j =%s", I, J, paste(iind,collapse=","), paste(jind,collapse=",")), domain = "R-stats")
220,221c221
<     acf.out <- acf(X, lag.max = lag.max, plot = FALSE, type = type,
<                    na.action = na.action)
---
>     acf.out <- acf(X, lag.max = lag.max, plot = FALSE, type = type, na.action = na.action)
246,248c246,248
<     msg <- c("Autocorrelations", "Autocovariances", "Partial autocorrelations")
<     cat("\n", msg[type]," of series ", sQuote(x$series), ", by lag\n\n",
<         sep = "")
---
>     if(type == 1) cat("\n", gettextf("Autocorrelations of series %s, by lag", sQuote(x$series), domain = "R-stats"), "\n\n", sep = "")
>     else if(type == 2) cat("\n", gettextf("Autocovariances of series %s, by lag", sQuote(x$series), domain = "R-stats"), "\n\n", sep = "")
>     else cat("\n", gettextf("Partial autocorrelations of series %s, by lag", sQuote(x$series), domain = "R-stats"), "\n\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/add.R R/src/library/stats/R/add.R
60c60
< 	    cat("trying +", tt, "\n", sep = "")
---
> 	    cat(gettextf("trying +%s", tt, domain = "R-stats"), "\n", sep = "")
63,64c63
< 	nfit <- update(object, as.formula(paste("~ . +", tt)),
<                        evaluate = FALSE)
---
> 	nfit <- update(object, as.formula(paste("~ . +", tt)), evaluate = FALSE)
81c80
< 	aod[, c("LRT", "Pr(>Chi)")] <- list(dev, P)
---
> 	aod[, c("LRT", gettext("Pr(>Chi)", domain = NA))] <- list(dev, P)
83,84c82,83
<     head <- c("Single term additions", "\nModel:", deparse(formula(object)),
< 	      if(scale > 0) paste("\nscale: ", format(scale), "\n"))
---
>     head <- paste(gettext("Single term additions", domain = "R-stats"), "\n\n", gettext("Model:", domain = "R-stats"), "\n", paste(deparse(formula(object)), collapse = ""),
> 	      if(scale > 0) paste("\n", gettext("scale: ", domain = "R-stats"), format(scale), "\n", sep = ""), sep = "", collapse = "")
104,105c103
< 	warning("attempting model selection on an essentially perfect fit is nonsense",
< 		call. = FALSE)
---
> 	warning("attempting model selection on an essentially perfect fit is nonsense", call. = FALSE)
111a110
> 	#dev <- table[[which(names(table) == gettext("Sum of Sq", domain = "R-stats"))]]
155c154
<                                      "using the %d/%d rows from a combined fit"),
---
>                                      "using the %d/%d rows from a combined fit", domain = "R-stats"),
194c193
<     if(scale > 0) names(aod) <- c("Df", "Sum of Sq", "RSS", "Cp")
---
>     if(scale > 0) names(aod) <- c(gettext("Df", domain = NA), gettext("Sum of Sq", domain = NA), gettext("RSS", domain = NA), gettext("Cp", domain = NA))
196a196
> 	#dev <- aod[[which(names(aod) == gettext("Sum of Sq", domain = "R-stats"))]]
206c206
<         aod[, "Pr(>Chi)"] <- dev
---
>         aod[, gettext("Pr(>Chi)", domain = NA)] <- dev
209c209
< 	aod[, c("F value", "Pr(>F)")] <- Fstat(aod, aod$RSS[1L], rdf)
---
> 	aod[, c(gettext("F value", domain = NA), gettext("Pr(>F)", domain = NA))] <- Fstat(aod, aod$RSS[1L], rdf)
211,212c211,212
<     head <- c("Single term additions", "\nModel:", deparse(formula(object)),
< 	      if(scale > 0) paste("\nscale: ", format(scale), "\n"))
---
>     head <- paste(gettext("Single term additions", domain = "R-stats"), "\n\n", gettext("Model:", domain = "R-stats"), "\n", paste(deparse(formula(object)), collapse = ""),
> 	      if(scale > 0) paste("\n", gettext("scale: ", domain = "R-stats"), format(scale), "\n", sep = ""), sep = "", collapse = "")
218,219c218
< add1.glm <- function(object, scope, scale = 0, test=c("none", "Rao", "LRT",
<                                                  "Chisq", "F"),
---
> add1.glm <- function(object, scope, scale = 0, test=c("none", "Rao", "LRT", "Chisq", "F"),
273c272
<                                      "using the %d/%d rows from a combined fit"),
---
>                                      "using the %d/%d rows from a combined fit", domain = "R-stats"),
331c330
<         aod[, "Pr(>Chi)"] <- dev
---
>         aod[, gettext("Pr(>Chi)", domain = NA)] <- dev
340c339
<         aod[, "Pr(>Chi)"] <- dev
---
>         aod[, gettext("Pr(>Chi)", domain = NA)] <- dev
343,344c342
<             warning(gettextf("F test assumes quasi%s family", fam),
<                     domain = NA)
---
>             warning(gettextf("F test assumes 'quasi%s' family", fam), domain = "R-stats")
346c344
< 	aod[, c("F value", "Pr(>F)")] <- Fstat(aod, rdf)
---
> 	aod[, c(gettext("F value", domain = NA), gettext("Pr(>F)", domain = NA))] <- Fstat(aod, rdf)
348,349c346,347
<     head <- c("Single term additions", "\nModel:", deparse(formula(object)),
< 	      if(scale > 0) paste("\nscale: ", format(scale), "\n"))
---
>     head <- paste(gettext("Single term additions", domain = "R-stats"), "\n\n", gettext("Model:", domain = "R-stats"), "\n", paste(deparse(formula(object)), collapse = ""),
> 	      if(scale > 0) paste("\n", gettext("scale: ", domain = "R-stats"), format(scale), "\n", sep = ""), sep = "", collapse = "")
380c378
< 	    cat("trying -", tt, "\n", sep = "")
---
> 	    cat(gettextf("trying - %s", tt, domain = "R-stats"), "\n", sep = "")
401c399
<         aod[, c("LRT", "Pr(>Chi)")] <- list(dev, P)
---
>         aod[, c("LRT", gettext("Pr(>Chi)", domain = NA))] <- list(dev, P)
403,404c401,402
<     head <- c("Single term deletions", "\nModel:", deparse(formula(object)),
< 	      if(scale > 0) paste("\nscale: ", format(scale), "\n"))
---
>     head <- paste(gettext("Single term deletions", domain = "R-stats"), "\n\n", gettext("Model:", domain = "R-stats"), "\n", paste(deparse(formula(object)), collapse = ""),
> 	      if(scale > 0) paste("\n", gettext("scale: ", domain = "R-stats"), format(scale), "\n", sep = ""), sep = "", collapse = "")
455c453
<     if(scale > 0) names(aod) <- c("Df", "Sum of Sq", "RSS", "Cp")
---
>     if(scale > 0) names(aod) <- c(gettext("Df", domain = NA), gettext("Sum of Sq", domain = NA), gettext("RSS", domain = NA), gettext("Cp", domain = NA))
457a456
> 	#dev <- aod[[which(names(aod) == gettext("Sum of Sq", domain = "R-stats"))]]
467c466
<         aod[, "Pr(>Chi)"] <- dev
---
>         aod[, gettext("Pr(>Chi)", domain = NA)] <- dev
468a468
> 	#dev <- aod[[which(names(aod) == gettext("Sum of Sq", domain = "R-stats"))]]
478c478
< 	aod[, c("F value", "Pr(>F)")] <- list(Fs, P)
---
> 	aod[, c(gettext("F value", domain = NA), gettext("Pr(>F)", domain = NA))] <- list(Fs, P)
480,481c480,481
<     head <- c("Single term deletions", "\nModel:", deparse(formula(object)),
< 	      if(scale > 0) paste("\nscale: ", format(scale), "\n"))
---
>     head <- paste(gettext("Single term deletions", domain = "R-stats"), "\n\n", gettext("Model:", domain = "R-stats"), "\n", paste(deparse(formula(object)), collapse = ""),
> 	      if(scale > 0) paste("\n", gettext("scale: ", domain = "R-stats"), format(scale), "\n", sep = ""), sep = "", collapse = "")
567c567
<         aod[, "Pr(>Chi)"] <- dev
---
>         aod[, gettext("Pr(>Chi)", domain = NA)] <- dev
575c575
<         aod[, "Pr(>Chi)"] <- dev
---
>         aod[, gettext("Pr(>Chi)", domain = NA)] <- dev
578,579c578
<             warning(gettextf("F test assumes 'quasi%s' family", fam),
<                     domain = NA)
---
>             warning(gettextf("F test assumes 'quasi%s' family", fam), domain = "R-stats")
590c589
< 	aod[, c("F value", "Pr(>F)")] <- list(Fs, P)
---
> 	aod[, c(gettext("F value", domain = NA), gettext("Pr(>F)", domain = NA))] <- list(Fs, P)
592c591
<     head <- c("Single term deletions", "\nModel:", deparse(formula(object)),
---
>     head <- paste(gettext("Single term deletions", domain = "R-stats"), "\n\n", gettext("Model:", domain = "R-stats"), "\n", paste(deparse(formula(object)), collapse = ""),
594c593
< 	      paste("\nscale: ", format(scale), "\n"))
---
> 	      paste("\n", gettext("scale: ", domain = "R-stats"), format(scale), "\n", xep = ""), sep = "", collapse = "")
636c635
<                                       "lower scope has terms %s not included in model"),
---
>                                       "lower scope has terms %s not included in model", domain = "R-stats"),
666c665
<                                       "upper scope has terms %s not included in model"),
---
>                                       "upper scope has terms %s not included in model", domain = "R-stats"),
717,722c716,720
< 	heading <- c("Stepwise Model Path \nAnalysis of Deviance Table",
< 		     "\nInitial Model:", deparse(formula(object)),
< 		     "\nFinal Model:", deparse(formula(fit)),
< 		     "\n")
< 	aod <- data.frame(Step = I(change), Df = ddf, Deviance = dd,
<                           "Resid. Df" = rdf, "Resid. Dev" = rd, AIC = AIC,
---
> 	heading <- paste(gettext("Stepwise Model Path", domain = "R-stats"), "\n", gettext("Analysis of Deviance Table", domain = "R-stats"),
> 		     "\n", gettext("Initial Model: ", domain = "R-stats"), paste(deparse(formula(object)), collapse = ""),
> 		     "\n", gettext("Final Model: ", domain = "R-stats"), paste(deparse(formula(fit)), collapse = ""),
> 		     "\n", sep = "", collapse = "")
> 	aod <- data.frame(Step = I(change), Df = ddf, Deviance = dd, "Resid. Df" = rdf, "Resid. Dev" = rd, AIC = AIC,
723a722
> 	names(aod) <- c(gettext("Step", domain = NA), gettext("Df", domain = NA), gettext("Deviance", domain = NA), gettext("Resid. Df", domain = NA), gettext("Resid. Dev", domain = NA), gettext("AIC", domain = NA))
726c725
<             cn[cn == "AIC"] <- "Cp"
---
>             cn[cn == gettext("AIC", domain = NA)] <- gettext("Cp", domain = NA)
774,775c773
< 	cat("Start:  AIC=", format(round(bAIC, 2)), "\n",
< 	    cut.string(deparse(formula(fit))), "\n\n", sep = "")
---
> 	cat(gettextf("Start:  AIC=%s", format(round(bAIC, 2)), domain = "R-stats"), "\n", cut.string(deparse(formula(fit))), "\n\n", sep = "")
838,839c836
< 	    cat("\nStep:  AIC=", format(round(bAIC, 2)), "\n",
< 		cut.string(deparse(formula(fit))), "\n\n", sep = "")
---
> 	    cat("\n", gettextf("Step:  AIC=%s", format(round(bAIC, 2)), domain = "R-stats"), "\n", cut.string(deparse(formula(fit))), "\n\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/addmargins.R R/src/library/stats/R/addmargins.R
34c34
<     if(is.null(dim(A))) stop("'A' must be an array or table")
---
>     if(is.null(dim(A))) stop(gettextf("'%s' argument must be an array or table", "A"))
79,81c79
< 	    stop(gettextf(
< 		"length of FUN, %d,\n does not match the length of the margins, %d",
< 			  length(FUN), n.sid), domain = NA)
---
> 	    stop(gettextf("length of FUN, %d, does not match the length of the margins, %d", length(FUN), n.sid), domain = "R-stats")
141c139
< 	skip <- prod(d[1L:margin])
---
> 	skip <- prod(d[seq_len(margin)])
153,157c151,154
< 	for(i in 1L:n.mar) {
< 	    mtab <- if(n.dim > 1)
< 			apply(A, (1L:n.dim)[-margin], FUN[[i]])
< 		    else
< 			FUN[[i]](A)
---
> 	for(i in seq_len(n.mar)) {
> 	    mtab <- if(n.dim > 1) {
> 		apply(A, seq_len(n.dim)[-margin], FUN[[i]])
> 	    } else FUN[[i]](A)
175,177c172,173
<     for(i in 1L:n.sid)
< 	new.A <- expand.one(A = new.A, margin = margin[i], FUN = FUN[[i]],
< 			    fnames = fnames[[i]])
---
>     for(i in seq_len(n.sid))
> 	new.A <- expand.one(A = new.A, margin = margin[i], FUN = FUN[[i]], fnames = fnames[[i]])
184c180
< 	cat("Margins computed over dimensions\nin the following order:\n")
---
> 	cat(gettext("Margins computed over dimensions in the following order:", domain = "R-stats"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/aggregate.R R/src/library/stats/R/aggregate.R
45c45
<         stop("'by' must be a list")
---
>         stop(gettextf("'%s' argument must be a list", "by"))
47c47
<         names(by) <- paste0("Group.", seq_along(by))
---
>         names(by) <- gettextf("Group.%d", seq_along(by))
51c51
<         names(by)[ind] <- paste0("Group.", ind)
---
>         names(by)[ind] <- gettextf("Group.%d", ind)
55c55
<         stop("arguments must have same length")
---
>         stop("arguments must have the same length")
143c143
<         stop("'formula' missing or incorrect")
---
>         stop(gettextf("'%s' argument is missing or incorrect", "formula"))
219,220c219
<         stop(gettextf("cannot change frequency from %g to %g",
<                       ofrequency, nfrequency), domain = NA)
---
>         stop(gettextf("cannot change frequency from %g to %g", ofrequency, nfrequency), domain = "R-stats")
237c236
<     x <- apply(array(c(x[1 : nend, ]),
---
>     x <- apply(array(c(x[seq_len(nend), ]),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/anova.R R/src/library/stats/R/anova.R
26,28c26,29
<     dev.col <- match("Deviance", colnames(table))
<     if (test == "Rao") dev.col <- match("Rao", colnames(table))
<     if (is.na(dev.col)) dev.col <- match("Sum of Sq", colnames(table))
---
>     dev.col <- match(gettext("Deviance", domain = NA), colnames(table))
>     if (test == "Rao") dev.col <- match(gettext("Rao", domain = NA), colnames(table))
>     if (is.na(dev.col)) dev.col <- match(gettext("Sum of Sq", domain = NA), colnames(table))
> #     oldnames <- names(table)
31c32
<                dfs <- table[, "Df"]
---
>                dfs <- table[, gettext("Df", domain = NA)]
35c36
< 	       cbind(table,
---
> 	       xx <- cbind(table,
37a39
> #	      names(xx) <- c(oldnames, gettext("Pr(>Chi)", domain = NA))
40c42
<                dfs <- table[, "Df"]
---
>                dfs <- table[, gettext("Df", domain = NA)]
44c46
< 	       cbind(table,
---
> 	       xx <- cbind(table,
47a50
> #	      names(xx) <- c(oldnames, gettext("F", domain = NA), gettext("Pr(>F)", domain = NA))
50,52c53,55
<                if ("RSS" %in% names(table)) { # an lm object
<                    cbind(table, Cp = table[, "RSS"] +
<                          2*scale*(n - table[, "Res.Df"]))
---
>                if (!is.na(match(gettext("RSS", domain = NA), names(table)))) { # an lm object
>                    xx <- cbind(table, Cp = table[, gettext("RSS", domain = NA)] +
>                          2*scale*(n - table[, gettext("Res.Df", domain = NA)]))
54,55c57,58
<                    cbind(table, Cp = table[, "Resid. Dev"] +
<                          2*scale*(n - table[, "Resid. Df"]))
---
>                    xx <- cbind(table, Cp = table[, gettext("Resid. Dev", domain = NA)] +
>                          2*scale*(n - table[, gettext("Resid. Df", domain = NA)]))
56a60
> #	      names(xx) <- c(oldnames, gettext("Cp", domain = NA))
57a62
> 	xx
65c70
< 	     cs.ind = 1:k, tst.ind = k+1, zap.ind = integer(),
---
> 	     cs.ind = seq_len(k), tst.ind = k+1, zap.ind = integer(),
78c83
<     ##	  columns {cs.ind}= numbers, such as coefficients & std.err  [def.: 1L:k]
---
>     ##	  columns {cs.ind}= numbers, such as coefficients & std.err  [def.: seq_len(k)]
82c87
< 	stop("'x' must be coefficient matrix/data frame")
---
> 	stop("'x' argument must be coefficient matrix or data frame")
87c92
<             warning("option \"show.coef.Pvalues\" is invalid: assuming TRUE")
---
>             warning(gettextf("option \"%s\" is invalid: assuming TRUE", "show.coef.Pvalues"))
93c98
< 	stop("'P.values' is TRUE, but 'has.Pvalue' is not")
---
> 	stop("'P.values' argument is TRUE, but 'has.Pvalue' argument is not")
102c107
<     if(!missing(cs.ind) && length(cs.ind) > k) stop("wrong k / cs.ind")
---
>     if(!missing(cs.ind) && length(cs.ind) > k) stop("wrong 'cs.ind' argument")
122c127
<     if(any(r.ind <- !((1L:nc) %in% c(cs.ind, tst.ind, if(has.Pvalue) nc))))
---
>     if(any(r.ind <- !((seq_len(nc)) %in% c(cs.ind, tst.ind, if(has.Pvalue) nc))))
141c146
<             warning("option \"show.signif.stars\" is invalid: assuming TRUE")
---
>             warning(gettextf("option \"%s\" is invalid: assuming TRUE", "show.signif.stars"))
162,163c167
< 	cat("---\nSignif. codes:  ", sleg, sep = "",
< 	    fill = w+4 + max(nchar(sleg,"bytes") - nchar(sleg)))# +4: "---"
---
> 	cat("---\n", gettext("Signif. codes:  ", domain = "R-stats"), sleg, sep = "", fill = w+4 + max(nchar(sleg,"bytes") - nchar(sleg)))# +4: "---"
174c178
<     if(is.null(cn <- colnames(x))) stop("'anova' object must have colnames")
---
>     if(is.null(cn <- colnames(x))) stop("an object of class \"anova\" must have colnames")
176c180
<     zap.i <- 1L:(if(has.P) nc-1 else nc)
---
>     zap.i <- if(has.P) seq_len(nc-1) else seq_len(nc)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/aov.R R/src/library/stats/R/aov.R
31,32c31,32
<                               "there are %d Error terms: only 1 is allowed",
<                               "there are %d Error terms: only 1 is allowed"),
---
>                               "there is %d Error term: only 1 is allowed",
>                               "there are %d Error terms: only 1 is allowed", domain = "R-stats"),
73c73
<         nmstrata <- c("(Intercept)", nmstrata)
---
>         nmstrata <- c(gettext("(Intercept)", domain = NA), nmstrata)
80c80
<         asgn.e <- er.fit$assign[qr.e$pivot[1L:rank.e]]
---
>         asgn.e <- er.fit$assign[qr.e$pivot[seq_len(rank.e)]]
109c109
<             if(is.null(dny)) dny <- paste0("Y", 1L:nc)
---
>             if(is.null(dny)) dny <- paste0("Y", seq_len(nc))
152c152
<         cat("Call:\n   ")
---
>         cat(gettext("Call:", domain = "R-stats"), "\n   ", sep = "")
156c156
<     asgn <- x$assign[qrx$pivot[1L:x$rank]]
---
>     asgn <- x$assign[qrx$pivot[seq_len(x$rank)]]
166c166
<     nmeffect <- c("(Intercept)", attr(x$terms, "term.labels"))[1+uasgn]
---
>     nmeffect <- c(gettext("(Intercept)", domain = NA), attr(x$terms, "term.labels"))[1+uasgn]
185c185
<     cat("\nTerms:\n")
---
>     cat("\n", gettext("Terms:", domain = "R-stats"), "\n", sep = "")
196,197c196,197
<             } else rn <- "Sum of Squares"
<             dimnames(tmp) <- list(c(rn, "Deg. of Freedom"), "Residuals")
---
>             } else rn <- gettext("Sum of Squares", domain = "R-stats")
>             dimnames(tmp) <- list(c(rn, gettext("Deg. of Freedom", domain = NA)), gettext("Residuals", domain = NA))
201,202c201
<             cat(if(length(rs) > 1L) "Residual standard errors:"
<                  else "Residual standard error:", sapply(rs, format))
---
>             cat(ngettext(length(rs), "Residual Standard Error:", "Residual Standard Errors:", domain = "R-stats"), sapply(rs, format))
206c205
<                      list(c("Sum of Squares", "Deg. of Freedom"), "<empty>")))
---
>                      list(c(gettext("Sum of Squares", domain = NA), gettext("Deg. of Freedom", domain = NA)), gettext("<empty>", domain = NA))))
212c211
<             nmeffect <- c(nmeffect, "Residuals")
---
>             nmeffect <- c(nmeffect, gettext("Residuals", domain = NA))
219,220c218,219
<         } else rn <- "Sum of Squares"
<         dimnames(tmp) <- list(c(rn, "Deg. of Freedom"), nmeffect)
---
>         } else rn <- gettext("Sum of Squares", domain = NA)
>         dimnames(tmp) <- list(c(rn, gettext("Deg. of Freedom", domain = NA)), nmeffect)
228,229c227
<             cat(if(length(rs) > 1L) "Residual standard errors:"
<                 else "Residual standard error:", sapply(rs, format))
---
>             cat(ngettext(length(rs), "Residual Standard Error:", "Residual Standard Errors:", domain = "R-stats"), sapply(rs, format))
234c232
<         R <- R[1L:min(dim(R)), , drop=FALSE]
---
>         R <- R[seq_len(min(dim(R))), , drop=FALSE]
237,238c235,236
<             cat(paste(nc - rank, "out of", nc, "effects not estimable\n"))
<             R <- R[, 1L:rank, drop = FALSE]
---
>             cat(gettextf("%d out of %d effects not estimable", nc - rank, nc, domain = "R-stats"), "\n", sep = "")
>             R <- R[, seq_len(rank), drop = FALSE]
243,244c241,242
<             cat("Estimated effects may be unbalanced\n")
<         else cat("Estimated effects are balanced\n")
---
>             cat(gettext("Estimated effects may be unbalanced", domain = "R-stats"), "\n", sep = "")
>         else cat(gettext("Estimated effects are balanced", domain = "R-stats"), "\n", sep = "")
292c290
<     asgn <- object$assign[object$qr$pivot[1L:object$rank]]
---
>     asgn <- object$assign[object$qr$pivot[seq_len(object$rank)]]
299c297
<     nmeffect <- c("(Intercept)", attr(object$terms, "term.labels"))
---
>     nmeffect <- c(gettext("(Intercept)", domain = NA), attr(object$terms, "term.labels"))
308c306
<         for (y in 1L:nresp) {
---
>         for (y in seq_len(nresp)) {
311c309
<             names(ans)[y] <- paste(" Response", cn)
---
>             names(ans)[y] <- gettextf("Response %s", cn, domain = "R-stats")
319c317
<                 stop("the 'split' argument must be a list")
---
>                 stop(gettextf("'%s' argument must be a list", "split"))
324c322
<                                       "unknown names %s in the 'split' list"),
---
>                                       "unknown names %s in the 'split' list", domain = "R-stats"),
331,332c329
<             split <- splitInteractions(split, attr(Terms, "factors"),
<                                        nmeffect, asgn, df.names)
---
>             split <- splitInteractions(split, attr(Terms, "factors"), nmeffect, asgn, df.names)
337c334
<     for (y in 1L:nresp) {
---
>     for (y in seq_len(nresp)) {
365c362
<             nmrows <- c(nmrows,  "Residuals")
---
>             nmrows <- c(nmrows,  gettext("Residuals", domain = NA))
369d365
<         x <- list(Df = df, "Sum Sq" = ss, "Mean Sq" = ms)
370a367,368
>             x <- list(Df = df, "Sum Sq" = ss, "Mean Sq" = ms, "F value" = 0, "Pr(>F)" = 0)
> 	    names(x) <- c(gettext("Df", domain = NA), gettext("Sum Sq", domain = NA), gettext("Mean Sq", domain = NA), gettext("F value", domain = NA), gettext("Pr(>F)", domain = NA))
373a372
> 	    #x[[which(names(x) == gettext("F value", domain = NA))]] <- TT
374a374
> 	    #x[[which(names(x) == gettext("Pr(>F)", domain = NA))]] <- TP
376a377,379
>         } else {
>          x <- list(Df = df, "Sum Sq" = ss, "Mean Sq" = ms)
> 	 names(x) <- c(gettext("Df", domain = NA), gettext("Sum Sq", domain = NA), gettext("Mean Sq", domain = NA))
381c384
<         pm <- pmatch("(Intercept)", row.names(x), 0L)
---
>         pm <- pmatch(gettext("(Intercept)", domain = NA), row.names(x), 0L)
396,397c399
<         print(x[[1L]], digits = digits, symbolic.cor = symbolic.cor,
<               signif.stars = signif.stars)
---
>         print(x[[1L]], digits = digits, symbolic.cor = symbolic.cor, signif.stars = signif.stars)
438c440
<                    else 1L:ncol(x)
---
>                    else seq_len(ncol(x))
447c449
<     R <- R[1L:min(dim(R)), , drop=FALSE]
---
>     R <- R[seq_len(min(dim(R))), , drop=FALSE]
455c457
<                 p1 <- 1L:rank
---
>                 p1 <- seq_len(rank)
482c484
<         cat("\nCall:\n")
---
>         cat("\n", gettext("Call:", domain = "R-stats"), "\n", sep = "")
486c488
<         cat("Note: The results below are on the weighted scale\n")
---
>         cat(gettext("Note: The results below are on the weighted scale", domain = "R-stats"), "\n", sep = "")
488c490
<     if(nx[1L] == "(Intercept)") {
---
>     if(nx[1L] == gettext("(Intercept)", domain = NA)) {
491c493
<             cat("\nGrand Means:\n")
---
>             cat("\n", gettext("Grand Means:", domain = "R-stats"), "\n", sep = "")
493c495
<         } else cat("\nGrand Mean: ", format(mn[1L]), "\n", sep = "")
---
>         } else cat("\n", gettext("Grand Mean: ", domain = "R-stats"), format(mn[1L]), "\n", sep = "")
498c500
<         cat("\nStratum ", ii, ": ", i, "\n", sep = "")
---
>         cat("\n", gettextf("Stratum %d: %s", ii, i, domain = "R-stats"), "\n", sep = "")
508c510
<         cat("Note: The results below are on the weighted scale\n")
---
>         cat(gettext("Note: The results below are on the weighted scale", domain = "R-stats"), "\n", sep = "")
511c513
<     if(strata[1L] == "(Intercept)") {
---
>     if(strata[1L] == gettext("(Intercept)", domain = NA)) {
515,516c517
<     x <- setNames(vector(length = length(strata), mode = "list"),
< 		  paste("Error:", strata))
---
>     x <- setNames(vector(length = length(strata), mode = "list"), gettextf("Error: %s", strata, domain = "R-stats"))
551c552
<         asgn <- object$assign[qro$pivot[1L:object$rank]]
---
>         asgn <- object$assign[qro$pivot[seq_len(object$rank)]]
554,555c555
<         nmeffect <- c("(Intercept)",
<                       attr(object$terms, "term.labels"))[1L + uasgn]
---
>         nmeffect <- c(gettext("(Intercept)", domain = NA), attr(object$terms, "term.labels"))[1L + uasgn]
557,558c557
<         res <- matrix(0, nrow = nterms, ncol = ncol(effects),
<                       dimnames = list(nmeffect, colnames(contrast)))
---
>         res <- matrix(0, nrow = nterms, ncol = ncol(effects), dimnames = list(nmeffect, colnames(contrast)))
570c569
<                 stop("'coef' must define a contrast, i.e., sum to 0")
---
>                 stop("'coef' argument must define a contrast, i.e., sum to 0")
572c571
<                 stop("'coef' must have same length as 'contrast.obj'")
---
>                 stop(gettextf("'%s' and '%s' arguments must have the same length", "coef", "contrast.obj"))
578,580c577
<                        stop(gettextf("each element of '%s' must be logical",
<                                      substitute(contrasts.list)),
<                             domain = NA)
---
>                        stop(gettextf("each element of '%s' must be logical", substitute(contrasts.list)), domain = "R-stats")
613c610
<             stop("'object' does not include an error 'qr' component")
---
>             stop("'object' argument does not include an error 'qr' component")
625c622
<                 asgn <- strata$assign[strata$qr$pivot[1L:strata$rank]]
---
>                 asgn <- strata$assign[strata$qr$pivot[seq_len(strata$rank)]]
627c624
<                 nm <- c("(Intercept)", attr(strata$terms, "term.labels"))
---
>                 nm <- c(gettext("(Intercept)", domain = NA), attr(strata$terms, "term.labels"))
665c662
<                 stop("'coef' must define a contrast, i.e., sum to 0")
---
>                 stop("'coef' argument must define a contrast, i.e., sum to 0")
667c664
<                 stop("'coef' must have same length as 'contrast.obj'")
---
>                 stop(gettextf("'%s' and '%s' arguments must have the same length", "coef", "contrast.obj"))
673,675c670
<                            stop(gettextf("each element of '%s' must be logical",
<                                          substitute(contrasts.obj)),
<                                 domain = NA)
---
>                            stop(gettextf("each element of '%s' must be logical", substitute(contrasts.obj)), domain = "R-stats")
687c682
<             colnames(contrast) <- paste("Contrast", seq(ncol(contrast)))
---
>             colnames(contrast) <- gettextf("Contrast %s", seq(ncol(contrast)), domain = "R-stats")
690c685
<     weights <- weights[-match("(Intercept)", names(weights))]
---
>     weights <- weights[-match(gettext("(Intercept)", domain = NA), names(weights))]
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/approx.R R/src/library/stats/R/approx.R
89c89
<     if (is.na(nx)) stop("invalid length(x)")
---
>     if (is.na(nx)) stop(gettextf("invalid '%s' value", "length(x)"))
92c92
< 	    stop("need at least two non-NA values to interpolate")
---
> 	    stop("at least two non-NA values to interpolate are needed")
102c102
< 	if (n <= 0) stop("'approx' requires n >= 1")
---
> 	if (n <= 0) stop(gettextf("'%s' argument must be at least %d", "n", 1))
130c130
<     if (is.na(nx)) stop("invalid length(x)")
---
>     if (is.na(nx)) stop(gettextf("invalid '%s' value", "length(x)"))
133c133
< 	    stop("need at least two non-NA values to interpolate")
---
> 	    stop("at least two non-NA values to interpolate are needed")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ar.R R/src/library/stats/R/ar.R
53,54c53,54
<         stop("'x' must be numeric")
<     if(any(is.na(x) != is.na(x[,1]))) stop("NAs in 'x' must be the same row-wise")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
>     if(any(is.na(x) != is.na(x[,1]))) stop("NA values in 'x'")
64,65c64,65
<     if (order.max < 1L) stop("'order.max' must be >= 1")
<     else if (order.max >= n.obs) stop("'order.max' must be < 'n.obs'")
---
>     if (order.max < 1L) stop(gettextf("'%s' argument must be >= %d", "order.max", 1))
>     else if (order.max >= n.obs) stop("'order.max' argument must be < 'n.obs' argument")
171c171
<     cat("\nCall:\n", deparse(x$call), "\n\n", sep = "")
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n", deparse(x$call), "\n\n", sep = "")
179c179
<             cat("Coefficients:\n")
---
>             cat(gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
184,185c184
<         if(!is.null(xint <- x$x.intercept) && !is.na(xint))
<             cat("\nIntercept: ", format(xint, digits = digits),
---
>         if(!is.null(xint <- x$x.intercept) && !is.na(xint)) {
187,190c186,188
<                 " (", format(x$asy.se.coef$x.mean, digits = digits),
<                 ") ", "\n", sep = "")
<         cat("\nOrder selected", x$order, " sigma^2 estimated as ",
<             format(x$var.pred, digits = digits))
---
>             cat("\n", gettext("Intercept: ", domain = "R-stats"), format(xint, digits = digits), " (", format(x$asy.se.coef$x.mean, digits = digits), ") ", "\n", sep = "")
> 	}
>         cat("\n", gettextf("Order selected %s sigma^2 estimated as %s", x$order, format(x$var.pred, digits = digits), domain = "R-stats"), sep = "")
198c196
<     if (n.ahead < 1L) stop("'n.ahead' must be at least 1")
---
>     if (n.ahead < 1L) stop(gettextf("'%s' argument must be at least %d", "n.ahead", 1))
231c229
<             warning("'se.fit' not yet implemented for multivariate models")
---
>             warning("'se.fit()' not yet implemented for multivariate models")
267c265
<     if(anyNA(x)) stop("NAs in 'x'")
---
>     if(anyNA(x)) stop("NA values in 'x'")
269c267
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
278,279c276,277
<     if (order.max < 0L) stop ("'order.max' must be >= 0")
<     else if (order.max >= n.used) stop("'order.max' must be < 'n.used'")
---
>     if (order.max < 0L) stop(gettextf("'%s' argument must be >= %d", "order.max", 0))
>     else if (order.max >= n.used) stop("'order.max' argument must be < 'n.used' argument")
342c340
<     if(anyNA(x)) stop("NAs in 'x'")
---
>     if(anyNA(x)) stop("NA values in 'x'")
347c345
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
359,360c357,358
<     if (order.max < 0L)	     stop("'order.max' must be >= 0")
<     if (order.max >= n.used) stop("'order.max' must be < 'n.used'")
---
>     if (order.max < 0L)	     stop(gettextf("'%s' argument must be >= %d", "order.max", 0))
>     if (order.max >= n.used) stop("'order.max' argument must be < 'n.used' argument")
392,395c390,391
<             warning(paste("model order: ", m,
<                           "singularities in the computation of the projection matrix",
<                           "results are only valid up to model order", m - 1L),
<                     domain = NA)
---
>             warning(gettextf("model order: %d singularities in the computation of the projection matrix results are only valid up to model order %d", m, m - 1L),
>                     domain = "R-stats")
484c480
<     if(any(is.na(x) != is.na(x[,1]))) stop("NAs in 'x' must be the same row-wise")
---
>     if(any(is.na(x) != is.na(x[,1]))) stop("NA values in 'x'")
498c494
<         stop("'order.max' must be >= 1")
---
>         stop(gettextf("'%s' argument must be >= %d", "order.max", 1))
519,521c515,517
<         for (i in 1L:order)
<             resid[-(1L:order), ] <- resid[-(1L:order),] - x[(order - i + 1L):(n.used - i), ] %*% t(ar[i, , ])
<         resid[1L:order, ] <- NA
---
>         for (i in seq_len(order))
>             resid[-seq_len(order), ] <- resid[-seq_len(order),] - x[(order - i + 1L):(n.used - i), ] %*% t(ar[i, , ])
>         resid[seq_len(order), ] <- NA
533c529
<     dimnames(partialacf) <- list(1L:order.max, snames, snames)
---
>     dimnames(partialacf) <- list(seq_len(order.max), snames, snames)
551c547
<     if(anyNA(x)) stop("NAs in 'x'")
---
>     if(anyNA(x)) stop("NA values in 'x'")
563,564c559,560
<     if (order.max < 1L) stop("'order.max' must be >= 1")
<     else if (order.max >= n.used) stop("'order.max' must be < 'n.used'")
---
>     if (order.max < 1L) stop(gettextf("'%s' argument must be >= %d", "order.max", 1))
>     else if (order.max >= n.used) stop("'order.max' argument must be < 'n.used' argument")
576c572
<     ar <- if (order) coefs[order, 1L:order] else numeric()
---
>     ar <- if (order) coefs[order, seq_len(order)] else numeric()
607c603
<         stop("NAs in 'x'")
---
>         stop("NA values in 'x'")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/arima.R R/src/library/stats/R/arima.R
38c38
<         if(p > 0) mod$T[1L:p, 1L] <- phi
---
>         if(p > 0) mod$T[seq_len(p), 1L] <- phi
40c40
< 	    mod$Pn[1L:r, 1L:r] <-
---
> 	    mod$Pn[seq_len(r), seq_len(r)] <-
64c64
<         if(ncxreg > 0) x <- x - xreg %*% par[narma + (1L:ncxreg)]
---
>         if(ncxreg > 0) x <- x - xreg %*% par[narma + seq_len(ncxreg)]
76c76
<         if(ncxreg > 0) x <- x - xreg %*% par[narma + (1L:ncxreg)]
---
>         if(ncxreg > 0) x <- x - xreg %*% par[narma + seq_len(ncxreg)]
86c86
<         all(Mod(polyroot(c(1, -ar[1L:p]))) > 1)
---
>         all(Mod(polyroot(c(1, -ar[seq_len(p)]))) > 1)
95c95
<         roots <- polyroot(c(1, ma[1L:q0]))
---
>         roots <- polyroot(c(1, ma[seq_len(q0)]))
107c107
<         stop("only implemented for univariate time series")
---
>         stop("'arima()' method is implemented only for univariate time series")
112c112
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
119c119
<             stop("'order' must be a non-negative numeric vector of length 3")
---
>             stop("'order' argument must be a non-negative numeric vector of length 3")
123c123
<                 stop("'seasonal' must be a list with component 'order'")
---
>                 stop("'seasonal' argument must be a list with component 'order'")
126c126
<                 stop("'seasonal$order' must be a non-negative numeric vector of length 3")
---
>                 stop("'seasonal$order' component must be a non-negative numeric vector of length 3")
129,130c129,130
<             else ("'seasonal' is of the wrong length")
<         } else stop("'seasonal' must be a list with component 'order'")
---
>             else ("'seasonal' argument is of the wrong length")
>         } else stop("'seasonal' argument must be a list with component 'order'")
134,136c134,135
<     arma <- as.integer(c(order[-2L], seasonal$order[-2L], seasonal$period,
<                          order[2L], seasonal$order[2L]))
<     narma <- sum(arma[1L:4L])
---
>     arma <- as.integer(c(order[-2L], seasonal$order[-2L], seasonal$period, order[2L], seasonal$order[2L]))
>     narma <- sum(arma[seq_len(4)])
151c150
<         if (NROW(xreg) != n) stop("lengths of 'x' and 'xreg' do not match")
---
>         if (NROW(xreg) != n) stop(gettextf("lengths of '%s' and '%s' arguments must match", "x", "xreg"))
159c158
<             if(ncxreg == 1L) nmxreg else paste0(nmxreg, 1L:ncxreg)
---
>             if(ncxreg == 1L) nmxreg else paste0(nmxreg, seq_len(ncxreg))
177c176
<     else if(length(fixed) != narma + ncxreg) stop("wrong length for 'fixed'")
---
>     else if(length(fixed) != narma + ncxreg) stop(gettextf("'%s' argument is of the wrong length", "fixed"))
185c184
<             warning("some AR parameters were fixed: setting transform.pars = FALSE")
---
>             warning("some AR parameters were fixed: setting 'transform.pars = FALSE'")
193c192
<         orig.xreg <- (ncxreg == 1L) || any(!mask[narma + 1L:ncxreg])
---
>         orig.xreg <- (ncxreg == 1L) || any(!mask[narma + seq_len(ncxreg)])
225c224
<             stop("'init' is of the wrong length")
---
>             stop(gettextf("'%s' argument is of the wrong length", "init"))
230c229
<                 if(!arCheck(init[1L:arma[1L]]))
---
>                 if(!arCheck(init[seq_len(arma[1L])]))
233c232
<                 if(!arCheck(init[sum(arma[1L:2L]) + 1L:arma[3L]]))
---
>                 if(!arCheck(init[sum(arma[seq_len(2)]) + seq_len(arma[3L])]))
251,252c250
<             warning(gettextf("possible convergence problem: optim gave code = %d",
<                              res$convergence), domain = NA)
---
>             warning(gettextf("possible convergence problem: optim gave code = %d", res$convergence), domain = "R-stats")
257c255
<         if(ncxreg > 0) x <- x - xreg %*% coef[narma + (1L:ncxreg)]
---
>         if(ncxreg > 0) x <- x - xreg %*% coef[narma + seq_len(ncxreg)]
273c271
<                 if(!arCheck(init[1L:arma[1L]]))
---
>                 if(!arCheck(init[seq_len(arma[1L])]))
276c274
<                 if(!arCheck(init[sum(arma[1L:2L]) + 1L:arma[3L]]))
---
>                 if(!arCheck(init[sum(arma[seq_len(2)]) + seq_len(arma[3L])]))
284c282
<                 ind <- arma[1L] + 1L:arma[2L]
---
>                 ind <- arma[1L] + seq_len(arma[2L])
288c286
<                 ind <- sum(arma[1L:3L]) + 1L:arma[4L]
---
>                 ind <- sum(arma[seq_len(3)]) + seq_len(arma[4L])
302,303c300
<             warning(gettextf("possible convergence problem: optim gave code = %d",
<                              res$convergence), domain = NA)
---
>             warning(gettextf("possible convergence problem: optim gave code = %d", res$convergence), domain = "R-stats")
308c305
<                 ind <- arma[1L] + 1L:arma[2L]
---
>                 ind <- arma[1L] + seq_len(arma[2L])
313c310
<                 ind <- sum(arma[1L:3L]) + 1L:arma[4L]
---
>                 ind <- sum(arma[seq_len(3)]) + seq_len(arma[4L])
337c334
<             arimaSS(x - xreg %*% coef[narma + (1L:ncxreg)], mod)
---
>             arimaSS(x - xreg %*% coef[narma + seq_len(ncxreg)], mod)
344,347c341,344
<     if (arma[1L] > 0L) nm <- c(nm, paste0("ar", 1L:arma[1L]))
<     if (arma[2L] > 0L) nm <- c(nm, paste0("ma", 1L:arma[2L]))
<     if (arma[3L] > 0L) nm <- c(nm, paste0("sar", 1L:arma[3L]))
<     if (arma[4L] > 0L) nm <- c(nm, paste0("sma", 1L:arma[4L]))
---
>     if (arma[1L] > 0L) nm <- c(nm, paste0("ar", seq_len(arma[1L])))
>     if (arma[2L] > 0L) nm <- c(nm, paste0("ma", seq_len(arma[2L])))
>     if (arma[3L] > 0L) nm <- c(nm, paste0("sar", seq_len(arma[3L])))
>     if (arma[4L] > 0L) nm <- c(nm, paste0("sma", seq_len(arma[4L])))
351c348
<             ind <- narma + 1L:ncxreg
---
>             ind <- narma + seq_len(ncxreg)
376c373
<     cat("\nCall:", deparse(x$call, width.cutoff = 75L), "", sep = "\n")
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n", deparse(x$call, width.cutoff = 75L), "\n\n", sep = "")
378c375
<         cat("Coefficients:\n")
---
>         cat(gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
391,393c388
<         cat("\nsigma^2 estimated as ", format(x$sigma2, digits = digits),
<             ":  log likelihood = ", format(round(x$loglik, 2L)),
<             ",  aic = ", format(round(x$aic, 2L)), "\n", sep = "")
---
>         cat("\n", gettextf("sigma^2 estimated as %s:  log likelihood = %s,  aic = %s", format(x$sigma2, digits = digits), format(round(x$loglik, 2L)), format(round(x$aic, 2L)), domain = "R-stats"), "\n", sep = "")
395,398c390
<         cat("\nsigma^2 estimated as ",
<             format(x$sigma2, digits = digits),
<             ":  part log likelihood = ", format(round(x$loglik,2)),
<             "\n", sep = "")
---
>         cat("\n", gettextf("sigma^2 estimated as %s:  part log likelihood = %s", format(x$sigma2, digits = digits), format(round(x$loglik,2)), domain = "R-stats"), "\n", sep = "")
418c410
<     narma <- sum(arma[1L:4L])
---
>     narma <- sum(arma[seq_len(4)])
426c418
<         else drop(as.matrix(newxreg) %*% coefs[-(1L:narma)])
---
>         else drop(as.matrix(newxreg) %*% coefs[-seq_len(narma)])
430c422
<         ma <- coefs[arma[1L] + 1L:arma[2L]]
---
>         ma <- coefs[arma[1L] + seq_len(arma[2L])]
435c427
<         ma <- coefs[sum(arma[1L:3L]) + 1L:arma[4L]]
---
>         ma <- coefs[sum(arma[seq_len(3)]) + seq_len(arma[4L])]
456,457c448,449
<     if(anyNA(phi))   warning(gettextf("NAs in '%s'", "phi"), domain=NA)
<     if(anyNA(theta)) warning(gettextf("NAs in '%s'", "theta"), domain=NA)
---
>     if(anyNA(phi))   warning(gettextf("NA values in '%s'", "phi"), domain = "R-stats")
>     if(anyNA(theta)) warning(gettextf("NA values in '%s'", "theta"), domain = "R-stats")
463c455
<     if(p > 0) T[1L:p, 1L] <- phi
---
>     if(p > 0) T[seq_len(p), 1L] <- phi
482c474
<         Pn[1L:r, 1L:r] <- switch(match.arg(SSinit),
---
>         Pn[seq_len(r), seq_len(r)] <- switch(match.arg(SSinit),
485c477
<                                  stop("invalid 'SSinit'"))
---
>                                  stop(gettextf("invalid '%s' argument", "SSinit")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/arma0.R R/src/library/stats/R/arma0.R
37c37
<         all(Mod(polyroot(c(1, -ar[1L:p]))) > 1)
---
>         all(Mod(polyroot(c(1, -ar[seq_len(p)]))) > 1)
46c46
<         roots <- polyroot(c(1, ma[1L:q0]))
---
>         roots <- polyroot(c(1, ma[seq_len(q0)]))
63c63
<         stop("'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
74,75c74
<             if(!is.numeric(seasonal$order) || length(seasonal$order) != 3L
<                || any(seasonal$order < 0))
---
>             if(!is.numeric(seasonal$order) || length(seasonal$order) != 3L || any(seasonal$order < 0))
79c78
<             else ("'seasonal' is of the wrong length")
---
>             else gettextf("'%s' argument is of the wrong length", "seasonal")
86c85
<     narma <- sum(arma[1L:4L])
---
>     narma <- sum(arma[seq_len(4)])
102c101
<         if(NROW(xreg) != n) stop("lengths of 'x' and 'xreg' do not match")
---
>         if(NROW(xreg) != n) stop(gettextf("lengths of '%s' and '%s' arguments must match", "x", "xreg"))
108c107
<             colnames(xreg) <- paste0("xreg", 1L:ncxreg)
---
>             colnames(xreg) <- paste0("xreg", seq_len(ncxreg))
114c113
<     else if(length(fixed) != narma + ncxreg) stop("wrong length for 'fixed'")
---
>     else if(length(fixed) != narma + ncxreg) stop(gettextf("'%s' argument is of the wrong length", "fixed"))
117c116
<     if(transform.pars && any(!mask[1L:narma])) {
---
>     if(transform.pars && any(!mask[seq_len(narma)])) {
126c125
<         if(qr(na.omit(xreg))$rank < ncol(xreg)) stop("'xreg' is collinear")
---
>         if(qr(na.omit(xreg))$rank < ncol(xreg)) stop("'xreg' argument is collinear")
128c127
<             cn <- paste0("xreg", 1L:ncxreg)
---
>             cn <- paste0("xreg", seq_len(ncxreg))
133c132
<             warning("NAs present: setting 'delta' to -1")
---
>             warning("NA values are present: setting 'delta' to -1")
140c139
<         orig.xreg <- (ncxreg == 1) || any(!mask[narma + 1L:ncxreg])
---
>         orig.xreg <- (ncxreg == 1) || any(!mask[narma + seq_len(ncxreg)])
160c159
<             stop("'init' is of the wrong length")
---
>             stop(gettextf("'%s' argument is of the wrong length", "init"))
163c162
<             if(any(!mask[1L:narma]))
---
>             if(any(!mask[seq_len(narma)]))
167c166
<                 if(!arCheck(init[1L:arma[1L]]))
---
>                 if(!arCheck(init[seq_len(arma[1L])]))
170c169
<                 if(!arCheck(init[sum(arma[1L:2]) + 1L:arma[3L]]))
---
>                 if(!arCheck(init[sum(arma[seq_len(2)]) + seq_len(arma[3L])]))
174c173
<                 ind <- arma[1L] + 1L:arma[2L]
---
>                 ind <- arma[1L] + seq_len(arma[2L])
178c177
<                 ind <- sum(arma[1L:3]) + 1L:arma[4L]
---
>                 ind <- sum(arma[seq_len(3)]) + seq_len(arma[4L])
192,193c191
<         warning(gettextf("possible convergence problem: optim gave code = %d",
<                          code), domain = NA)
---
>         warning(gettextf("possible convergence problem: optim gave code = %d", code), domain = "R-stats")
213,216c211,214
<     if(arma[1L] > 0) nm <- c(nm, paste0("ar", 1L:arma[1L]))
<     if(arma[2L] > 0) nm <- c(nm, paste0("ma", 1L:arma[2L]))
<     if(arma[3L] > 0) nm <- c(nm, paste0("sar", 1L:arma[3L]))
<     if(arma[4L] > 0) nm <- c(nm, paste0("sma", 1L:arma[4L]))
---
>     if(arma[1L] > 0) nm <- c(nm, paste0("ar", seq_len(arma[1L])))
>     if(arma[2L] > 0) nm <- c(nm, paste0("ma", seq_len(arma[2L])))
>     if(arma[3L] > 0) nm <- c(nm, paste0("sar", seq_len(arma[3L])))
>     if(arma[4L] > 0) nm <- c(nm, paste0("sma", seq_len(arma[4L])))
221c219
<             ind <- narma + 1L:ncxreg
---
>             ind <- narma + seq_len(ncxreg)
246,247c244,246
<     cat("\nCall:", deparse(x$call, width.cutoff = 75L), "", sep = "\n")
<     cat("Coefficients:\n")
---
>     cat("\n")
>     cat(gettext("Call:", domain = "R-stats"), deparse(x$call, width.cutoff = 75L), "", sep = "\n")
>     cat(gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
258,262c257,258
<         cat("\nsigma^2 estimated as ",
<             format(x$sigma2, digits = digits),
<             ":  log likelihood = ", format(round(x$loglik,2)),
<             ",  aic = ", format(round(x$aic,2)),
<             "\n", sep = "")
---
>         cat("\n", gettextf("sigma^2 estimated as %s:  log likelihood = %s,  aic = %s", format(x$sigma2, digits = digits), format(round(x$loglik,2)),
>             format(round(x$aic,2)), domain = "R-stats"), "\n", sep = "")
264,266c260
<         cat("\nsigma^2 estimated as ",
<             format(x$sigma2, digits = digits),
<             ":  part log likelihood = ", format(round(x$loglik,2)),
---
>         cat("\n", gettextf("sigma^2 estimated as %s:  part log likelihood = %s", format(x$sigma2, digits = digits), format(round(x$loglik,2)), domain = "R-stats"),
286c280
<     narma <- sum(arma[1L:4L])
---
>     narma <- sum(arma[seq_len(4)])
293,294c287,288
<         data <- data - as.matrix(xreg) %*% coefs[-(1L:narma)]
<         xm <- drop(as.matrix(newxreg) %*% coefs[-(1L:narma)])
---
>         data <- data - as.matrix(xreg) %*% coefs[-seq_len(narma)]
>         xm <- drop(as.matrix(newxreg) %*% coefs[-seq_len(narma)])
298c292
<         ma <- coefs[arma[1L] + 1L:arma[2L]]
---
>         ma <- coefs[arma[1L] + seq_len(arma[2L])]
303c297
<         ma <- coefs[sum(arma[1L:3L]) + 1L:arma[4L]]
---
>         ma <- coefs[sum(arma[seq_len(3)]) + seq_len(arma[4L])]
338,339c332,333
<     for(i in 1L:nlag) pval[i] <- Box.test(rs, i, type="Ljung-Box")$p.value
<     plot(1L:nlag, pval, xlab = "lag", ylab = "p value", ylim = c(0,1),
---
>     for(i in seq_len(nlag)) pval[i] <- Box.test(rs, i, type="Ljung-Box")$p.value
>     plot(seq_len(nlag), pval, xlab = "lag", ylab = "p value", ylim = c(0,1),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/bandwidths.R R/src/library/stats/R/bandwidths.R
60,61c60,61
<     if (is.na(n)) stop("invalid length(x)")
<     if(!is.numeric(x)) stop("invalid 'x'")
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
>     if(!is.numeric(x)) stop(gettextf("invalid '%s' value", "x"))
63c63
<     if (is.na(nb) || nb <= 0L) stop("invalid 'nb'")
---
>     if (is.na(nb) || nb <= 0L) stop(gettextf("invalid '%s' value", "nb"))
79c79
<         stop("sample is too sparse to find TD", domain = NA)
---
>         stop("sample is too sparse to find TD", domain = "R-stats")
97,98c97
< 		message(gettextf("increasing bw.SJ() search interval (%d) to [%.4g,%.4g]",
<                                  itry, lower, upper), domain = NA)
---
> 		message(gettextf("increasing bw.SJ() search interval (%d) to [%.4g,%.4g]", itry, lower, upper), domain = "R-stats")
112,113c111,112
<     if (is.na(n)) stop("invalid length(x)")
<     if(!is.numeric(x)) stop("invalid 'x'")
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
>     if(!is.numeric(x)) stop(gettextf("invalid '%s' value", "x"))
115c114
<     if (is.na(nb) || nb <= 0L) stop("invalid 'nb'")
---
>     if (is.na(nb) || nb <= 0L) stop(gettextf("invalid '%s' value", "nb"))
133,134c132,133
<     if (is.na(n)) stop("invalid length(x)")
<     if(!is.numeric(x)) stop("invalid 'x'")
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
>     if(!is.numeric(x)) stop(gettextf("invalid '%s' value", "x"))
136c135
<     if (is.na(nb) || nb <= 0L) stop("invalid 'nb'")
---
>     if (is.na(nb) || nb <= 0L) stop(gettextf("invalid '%s' value", "nb"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/biplot.R R/src/library/stats/R/biplot.R
31c31
< 	if(is.null(xlabs)) xlabs <- 1L:n
---
> 	if(is.null(xlabs)) xlabs <- seq_len(n)
37c37
< 	if(is.null(ylabs)) ylabs <- paste("Var", 1L:p)
---
> 	if(is.null(ylabs)) ylabs <- paste("Var", seq_len(p))
84c84
<     if(length(choices) != 2L) stop("length of choices must be 2")
---
>     if(length(choices) != 2L) stop(gettextf("'%s' argument must be of length %d", "choices", 2))
86,87c86
< 	stop(gettextf("object '%s' has no scores", deparse(substitute(x))),
<              domain = NA)
---
> 	stop(gettextf("object '%s' has no scores", deparse(substitute(x))), domain = "R-stats")
91c90
<     if(scale < 0 || scale > 1) warning("'scale' is outside [0, 1]")
---
>     if(scale < 0 || scale > 1) warning(gettextf("'%s' argument is outside [0,1]", "scale"))
101c100
<     if(length(choices) != 2L) stop("length of choices must be 2")
---
>     if(length(choices) != 2L) stop(gettextf("'%s' argument must be of length %d", "choices", 2))
103,104c102
< 	stop(gettextf("object '%s' has no scores", deparse(substitute(x))),
<              domain = NA)
---
> 	stop(gettextf("object '%s' has no scores", deparse(substitute(x))), domain = "R-stats")
110c108
<     if(scale < 0 || scale > 1) warning("'scale' is outside [0, 1]")
---
>     if(scale < 0 || scale > 1) warning(gettextf("'%s' argument is outside [0,1]", "scale"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/birthday.R R/src/library/stats/R/birthday.R
24a25
>     if (k < 2) return(1)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/cancor.R R/src/library/stats/R/cancor.R
25c25
<     if((nr <- nrow(x)) != nrow(y)) stop("unequal number of rows in 'cancor'")
---
>     if((nr <- nrow(x)) != nrow(y)) stop("unequal number of rows in 'cancor()'")
28c28
<     if(!nr || !ncx || !ncy) stop("dimension 0 in 'x' or 'y'")
---
>     if(!nr || !ncx || !ncy) stop("dimension 0 in 'x' or 'y' argument")
53,54c53,54
<     dx <- qx$rank;	if(!dx) stop("'x' has rank 0")
<     dy <- qy$rank;	if(!dy) stop("'y' has rank 0")
---
>     dx <- qx$rank;	if(!dx) stop(gettextf("'%s' argument has rank 0", "x"))
>     dy <- qy$rank;	if(!dy) stop(gettextf("'%s' argument has rank 0", "y"))
56c56
<     z <- svd(qr.qty(qx, qr.qy(qy, diag(1, nr, dy)))[1L:dx,, drop = FALSE],
---
>     z <- svd(qr.qty(qx, qr.qy(qy, diag(1, nr, dy)))[seq_len(dx),, drop = FALSE],
58,63c58,62
<     xcoef <- backsolve((qx$qr)[1L:dx, 1L:dx, drop = FALSE], z$u)
<     rownames(xcoef) <- colnames(x)[qx$pivot][1L:dx]
<     ycoef <-  backsolve((qy$qr)[1L:dy, 1L:dy, drop = FALSE], z$v)
<     rownames(ycoef) <- colnames(y)[qy$pivot][1L:dy]
<     list(cor = z$d, xcoef = xcoef, ycoef = ycoef, xcenter = xcenter,
< 	 ycenter = ycenter)
---
>     xcoef <- backsolve((qx$qr)[seq_len(dx), seq_len(dx), drop = FALSE], z$u)
>     rownames(xcoef) <- colnames(x)[qx$pivot][seq_len(dx)]
>     ycoef <-  backsolve((qy$qr)[seq_len(dy), seq_len(dy), drop = FALSE], z$v)
>     rownames(ycoef) <- colnames(y)[qy$pivot][seq_len(dy)]
>     list(cor = z$d, xcoef = xcoef, ycoef = ycoef, xcenter = xcenter, ycenter = ycenter)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/cmdscale.R R/src/library/stats/R/cmdscale.R
23c23
< 	stop("NA values not allowed in 'd'")
---
> 	stop("NA values are not allowed in 'd' argument")
25,26c25,26
< 	if (eig)  warning(  "eig=TRUE is disregarded when list.=FALSE")
< 	if(x.ret) warning("x.ret=TRUE is disregarded when list.=FALSE")
---
> 	if (eig)  warning(gettextf("'%s' option is disregarded when '%s'", "eig=TRUE", "list.=FALSE"))
> 	if(x.ret) warning(gettextf("'%s' option is disregarded when '%s'", "x.ret=TRUE", "list.=FALSE"))
49c49
< 	stop(gettextf("invalid value of %s", "'n'"), domain = NA)
---
> 	stop(gettextf("invalid '%s' value", "n"), domain = "R-stats")
57c57
<         i2 <- n + (i <- 1L:n)
---
>         i2 <- n + (i <- seq_len(n))
75,76c75
<         warning(gettextf("only %d of the first %d eigenvalues are > 0", k1, k),
<                 domain = NA)
---
>         warning(gettextf("only %d of the first %d eigenvalues are > 0", k1, k), domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/contrast.R R/src/library/stats/R/contrast.R
35,37c35
< 		warning(sprintf(
< 		"contrast function '%s' does not support 'sparse = TRUE'",
< 				ctr), domain = NA)
---
> 		warning(gettextf("contrast function '%s' does not support 'sparse = TRUE'", ctr), domain = "R-stats")
69c67
< 	    cm[,1L:nc] <- value
---
> 	    cm[,seq_len(nc)] <- value
73c71
< 	} else cm <- value[, 1L:n1, drop=FALSE]
---
> 	} else cm <- value[, seq_len(n1), drop=FALSE]
91,93c89
< 	    stop(gettextf("%s needs package 'Matrix' correctly installed",
<                           "contr*(.., sparse=TRUE)"),
<                  domain = NA)
---
> 	    stop(gettextf("%s needs package 'Matrix' correctly installed", "contr*(.., sparse=TRUE)"), domain = "R-stats")
102,104c98
< 	stop(gettextf("%s needs package 'Matrix' correctly installed",
<                       "contr*(.., sparse=TRUE)"),
<              domain = NA)
---
> 	stop(gettextf("%s needs package 'Matrix' correctly installed", "contr*(.., sparse=TRUE)"), domain = "R-stats")
145,146c139
< 	    stop(gettextf("contrasts not defined for %d degrees of freedom",
<                           n - 1L), domain = NA)
---
> 	    stop(gettextf("contrasts not defined for %d degrees of freedom", n - 1L), domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/cor.R R/src/library/stats/R/cor.R
24,27c24,25
<     na.method <-
< 	pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs",
< 		      "everything", "na.or.complete"))
<     if(is.na(na.method)) stop("invalid 'use' argument")
---
>     na.method <- pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs", "everything", "na.or.complete"))
>     if(is.na(na.method)) stop(gettextf("invalid '%s' argument", "use"))
35c33
<     if(!(is.numeric(x) || is.logical(x))) stop("'x' must be numeric")
---
>     if(!(is.numeric(x) || is.logical(x))) stop(gettextf("'%s' argument must be numeric", "x"))
38c36
<         if(!(is.numeric(y) || is.logical(y))) stop("'y' must be numeric")
---
>         if(!(is.numeric(y) || is.logical(y))) stop(gettextf("'%s' argument must be numeric", "y"))
77c75
<              if(ncx == 0) stop("'x' is empty")
---
>              if(ncx == 0) stop("'x' argument is empty")
128,130c126,127
< 	pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs",
< 		      "everything", "na.or.complete"))
<     if(is.na(na.method)) stop("invalid 'use' argument")
---
> 	pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs", "everything", "na.or.complete"))
>     if(is.na(na.method)) stop(gettextf("invalid '%s' argument", "use"))
179,181c176,177
< 	pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs",
< 		      "everything", "na.or.complete"))
<     if(is.na(na.method)) stop("invalid 'use' argument")
---
> 	pmatch(use, c("all.obs", "complete.obs", "pairwise.complete.obs", "everything", "na.or.complete"))
>     if(is.na(na.method)) stop(gettextf("invalid '%s' argument", "use"))
203c199
<     r[cbind(1L:p,1L:p)] <- 1 # exact in diagonal
---
>     r[cbind(seq_len(p), seq_len(p))] <- 1 # exact in diagonal
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/cpgram.R R/src/library/stats/R/cpgram.R
24c24
<              main = paste("Series: ", deparse(substitute(ts))),
---
>              main = paste(gettext("Series: ", domain = "R-stats"), deparse(substitute(ts))),
29c29
< 	stop("only implemented for univariate time series")
---
> 	stop("'cpgram()' is implemented only for univariate time series")
39,40c39,40
< 	y <- y[1L:n]
< 	x <- x[1L:n]
---
> 	y <- y[seq_len(n)]
> 	x <- x[seq_len(n)]
48c48
< 	 ylim=c(0, 1), xaxs="i", yaxs="i", xlab="frequency",
---
> 	 ylim=c(0, 1), xaxs="i", yaxs="i", xlab=gettext("frequency", domain = "R-stats"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/cutree.R R/src/library/stats/R/cutree.R
22c22
<         stop("invalid 'tree' ('merge' component)")
---
>         stop("invalid 'tree' argument ('merge' component)")
33c33
<         if(getOption("verbose")) message("cutree(): k(h) = ", k, domain = NA)
---
>         if(getOption("verbose")) message("cutree(): k(h) = ", k, domain = "R-stats")
38,39c38
<             stop(gettextf("elements of 'k' must be between 1 and %d", n),
<                  domain = NA)
---
>             stop(gettextf("elements of 'k' must be between 1 and %d", n), domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/dendrogram.R R/src/library/stats/R/dendrogram.R
35c35
<     for (k in 1L:nMerge) {
---
>     for (k in seq_len(nMerge)) {
188,189c188,189
< 	    "dendrogram entries must be 1,2,..,%d (in any order), to be coercible to \"hclust\"",
< 	    n), domain=NA)
---
> 	    "dendrogram entries must be 1,2,..,%d (in any order), to be coercible to an object of class \"hclust\"",
> 	    n), domain = "R-stats")
254c254
< 		    stop("dendrogram node with non-positive #{branches}")
---
> 		    stop("dendrogram node with non-positive number of branches")
274c274
< 		    warning("midcache() of non-binary dendrograms only partly implemented")
---
> 		    warning("'midcache()' of non-binary dendrograms only partly implemented")
293d292
<     cat("'dendrogram' ")
295c294
< 	cat("leaf '", format(attr(x, "label"), digits = digits),"'", sep = "")
---
> 	cat(gettextf("dendrogram leaf '%s', at height %s", format(attr(x, "label"), digits = digits), format(attr(x,"height"), digits = digits), domain = "R-stats"), "\n", sep = "")
297,298c296
< 	cat("with", length(x), "branches and",
< 	    attr(x,"members"), "members total")
---
> 	cat(gettextf("dendrogram with %d branches and %d members total, at height %s", length(x), attr(x,"members"), format(attr(x,"height"), digits = digits), domain = "R-stats"), "\n", sep = "")
300d297
<     cat(", at height", format(attr(x,"height"), digits = digits), "\n")
336,337c333
< 	    cat("[dendrogram w/ ", le, " branches and ", memb, " members at h = ",
< 		format(hgt, digits = digits.d), if(give.attr) at, "]",
---
> 	    cat("[", gettextf("dendrogram with %d branches and %d members at height %s", le, memb, format(hgt, digits = digits.d), domain = "R-stats"), if(give.attr) at, "]",
352,354c348,350
< 	    cat("leaf",
< 		if(is.character(at$label)) paste("", at$label,"", sep = '"') else
< 		format(object, digits = digits.d),"")
---
> 	    cat(gettextf("leaf %s",
> 		if(is.character(at$label)) dQuote(at$label) else
> 		format(object, digits = digits.d), domain = "R-stats"))
461,465c457,460
< 	cat(if(inner)"inner node" else "leaf", ":")
< 	if(!is.null(nPar)) { cat(" with node pars\n"); str(nPar) }
< 	cat(if(inner )paste(" height", formatC(yTop),"; "),
< 	    "(x1,x2)= (", formatC(x1, width = 4), ",", formatC(x2, width = 4), ")",
< 	    "--> xTop=", formatC(xTop, width = 8), "\n", sep = "")
---
> 	if(inner) cat(gettext("inner node:", domain = "R-stats"))
> 	else cat(gettextf("leaf:", domain = "R-stats"))
> 	if(!is.null(nPar)) { cat(gettext(" with node pars", domain = "R-stats"), "\n", sep = ""); str(nPar) }
> 	cat(if(inner) paste(" height", formatC(yTop),"; "), "(x1,x2)= (", formatC(x1, width = 4), ",", formatC(x2, width = 4), ")", "--> xTop=", formatC(xTop, width = 8), "\n", sep = "")
543c538
< 		    cat('-- with "label"',format(nodeText))
---
> 		    cat("-- with \"label\"",format(nodeText))
554c549
< 		    cat('-- with "edgetext"',format(edgeText))
---
> 		    cat("-- with \"edgetext\"",format(edgeText))
635c630
< 		   for(k in 1L:K) {
---
> 		   for(k in seq_len(K)) {
660c655
< 	    for(k in 1L:K) {
---
> 	    for(k in seq_len(K)) {
769c764
<     for(j in 1L:k) ## recurse
---
>     for(j in seq_len(k)) ## recurse
803,806c798,801
<             msg <- ngettext(length(nms),
<                             "extra argument %s is not of class \"%s\"",
<                             "extra arguments %s are not of class \"%s\"s")
< 	    stop(sprintf(msg, paste(nms, collapse=", "), "dendrogram"),
---
> 	    stop(sprintf(ngettext(length(nms),
>                             "extra argument %s is not of class \"dendrogram\"",
>                             "extra arguments %s are not of class \"dendrogram\"", domain = "R-stats"),
> 			paste(nms, collapse = ", ")),
824c819
<         stop(msg, domain = NA)
---
>         stop(msg, domain = "R-stats")
898c893
<     else rowInd <- 1L:nr
---
>     else rowInd <- seq_len(nr)
905c900
< 		stop('Colv = "Rowv" but nrow(x) != ncol(x)')
---
> 		stop("Colv = \"Rowv\" but nrow(x) != ncol(x)")
917c912
<     else colInd <- 1L:nc
---
>     else colInd <- seq_len(nc)
924c919
< 	    if(is.null(rownames(x))) (1L:nr)[rowInd] else rownames(x)
---
> 	    if(is.null(rownames(x))) seq_len(nr)[rowInd] else rownames(x)
928c923
< 	    if(is.null(colnames(x))) (1L:nc)[colInd] else colnames(x)
---
> 	    if(is.null(colnames(x))) seq_len(nc)[colInd] else colnames(x)
948c943
< 	    stop("'ColSideColors' must be a character vector of length ncol(x)")
---
> 	    stop(gettextf("'%s' argument must be a character vector of length '%s'", "ColSideColors", "ncol(x)"))
954c949
< 	    stop("'RowSideColors' must be a character vector of length nrow(x)")
---
> 	    stop(gettextf("'%s' argument must be a character vector of length '%s'", "RowSideColors", "nrow(x)"))
960c955
< 	cat("layout: widths = ", lwid, ", heights = ", lhei,"; lmat=\n")
---
> 	cat(gettextf("layout: widths = %s, heights = %s; lmat=\n", paste(lwid, collapse = " "), paste(lhei, collapse = " "), domain = "R-stats"))
973c968
< 	image(rbind(if(revC) nr:1L else 1L:nr), col = RowSideColors[rowInd], axes = FALSE)
---
> 	image(rbind(if(revC) sort(seq_len(nr), decreasing = TRUE) else seq_len(nr)), col = RowSideColors[rowInd], axes = FALSE)
977c972
< 	image(cbind(1L:nc), col = ColSideColors[colInd], axes = FALSE)
---
> 	image(cbind(seq_len(nc)), col = ColSideColors[colInd], axes = FALSE)
987c982
<     } else iy <- 1L:nr
---
>     } else iy <- seq_len(nr)
989c984
<     image(1L:nc, 1L:nr, x, xlim = 0.5+ c(0, nc), ylim = 0.5+ c(0, nr),
---
>     image(seq_len(nc), seq_len(nr), x, xlim = 0.5+ c(0, nc), ylim = 0.5+ c(0, nr),
991c986
<     axis(1, 1L:nc, labels = labCol, las = 2, line = -0.5, tick = 0,
---
>     axis(1, seq_len(nc), labels = labCol, las = 2, line = -0.5, tick = 0,
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/density.R R/src/library/stats/R/density.R
46c46
<         stop("argument 'x' must be numeric")
---
>         stop(gettextf("'%s' argument must be numeric", "x"))
52c52
<         else stop("'x' contains missing values")
---
>         else stop("'x' argument contains missing values")
55c55
<     if(is.na(N)) stop(gettextf("invalid value of %s", "length(x)"), domain = NA)
---
>     if(is.na(N)) stop(gettextf("invalid '%s' value", "length(x)"))
69c69
<             stop("'x' and 'weights' have unequal length")
---
>             stop(gettextf("'%s' and '%s' arguments must have the same length", "x", "weights"))
71c71
<             stop("'weights' must all be finite")
---
>             stop("'weights' argument must all be finite")
73c73
<             stop("'weights' must not be negative")
---
>             stop("'weights' argument must not be negative")
82c82
<             warning("sum(weights) != 1  -- will not get true density")
---
>             warning("'sum(weights) != 1'  -- will not get true density")
109c109
<             stop("need at least 2 points to select a bandwidth automatically")
---
>             stop("at least 2 points are needed to select a bandwidth automatically")
119c119
<     if (!is.finite(bw)) stop("non-finite 'bw'")
---
>     if (!is.finite(bw)) stop(gettextf("non-finite '%s' argument", "bw"))
121c121
<     if (bw <= 0) stop("'bw' is not positive.")
---
>     if (bw <= 0) stop(gettextf("'%s' argument is not positive", "bw"))
127,128c127,128
<     if (!is.finite(from)) stop("non-finite 'from'")
<     if (!is.finite(to)) stop("non-finite 'to'")
---
>     if (!is.finite(from)) stop(gettextf("non-finite '%s' argument", "from"))
>     if (!is.finite(to)) stop(gettextf("non-finite '%s' argument", "to"))
160c160
<     kords <- pmax.int(0, Re(kords)[1L:n]/length(y))
---
>     kords <- pmax.int(0, Re(kords)[seq_len(n)]/length(y))
168c168
< plot.density <- function(x, main = NULL, xlab = NULL, ylab = "Density",
---
> plot.density <- function(x, main = NULL, xlab = NULL, ylab = gettext("Density", domain = "R-stats"),
172c172
< 	xlab <- paste("N =", x$n, "  Bandwidth =", formatC(x$bw))
---
> 	xlab <- gettextf("N = %s   Bandwidth = %s", x$n, formatC(x$bw), domain = "R-stats")
181,183c181,183
<     cat("\nCall:\n\t", deparse(x$call),
< 	"\n\nData: ", x$data.name, " (", x$n, " obs.);",
< 	"\tBandwidth 'bw' = ", formatC(x$bw, digits = digits), "\n\n", sep = "")
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n\t", deparse(x$call),
> 	"\n\n", sprintf(ngettext(x$n, "Data: %s (%d observation);", "Data: %s (%d observations);", domain = "R-stats"), x$data.name, x$n),
> 	"\t", gettextf("Bandwidth 'bw' = %s", formatC(x$bw, digits = digits), domain = "R-stats"), "\n\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/deriv.R R/src/library/stats/R/deriv.R
28c28
<     else stop("invalid formula in deriv")
---
>     else stop("invalid formula in 'deriv()'")
42c42
<     else stop("invalid formula in deriv")
---
>     else stop("invalid formula in 'deriv()'")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/diffinv.R R/src/library/stats/R/diffinv.R
26c26
<     if (!is.vector(x)) stop ("'x' is not a vector")
---
>     if (!is.vector(x)) stop(gettextf("'%s' argument is not a vector", "x"))
28c28
<     if (lag < 1L || differences < 1L) stop ("bad value for 'lag' or 'differences'")
---
>     if (lag < 1L || differences < 1L) stop ("bad value for 'lag' or 'differences' argument")
36c36
<         if(is.na(n)) stop(gettextf("invalid value of %s", "length(x)"), domain = NA)
---
>         if (is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
44c44
< 		       lag, 1L, xi[1L:lag])
---
> 		       lag, 1L, xi[seq_len(lag)])
57c57
<             for (i in 1L:m)
---
>             for (i in seq_len(m))
65c65
<         stop ("'x' is not a vector or matrix")
---
>         stop(gettextf("'%s' argument is not a vector or matrix", "x"))
78c78
<     if(!is.vector(x)) stop("'x' is not a vector")
---
>     if(!is.vector(x)) stop(gettextf("'%s' argument is not a vector", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/dist.R R/src/library/stats/R/dist.R
73c73
<         if(ncol(m) != p) warning("non-square matrix")
---
>         if(ncol(m) != p) warning(gettextf("'%s' argument is not a square matrix", "m"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/distn.R R/src/library/stats/R/distn.R
155c155
<     if(length(x) != K) stop("x[] and prob[] must be equal length vectors.")
---
>     if(length(x) != K) stop("'x' and 'prob' arguments must be equal length vectors")
161c161
<     if(any(x < 0)) stop("'x' must be non-negative")
---
>     if(any(x < 0)) stop("'x' argument must be non-negative")
235c235
< 	if (!missing(prob)) stop("'prob' and 'mu' both specified")
---
> 	if (!missing(prob)) stop("'prob' and 'mu' arguments are both specified")
244c244
< 	if (!missing(prob)) stop("'prob' and 'mu' both specified")
---
> 	if (!missing(prob)) stop("'prob' and 'mu' arguments are both specified")
253c253
< 	if (!missing(prob)) stop("'prob' and 'mu' both specified")
---
> 	if (!missing(prob)) stop("'prob' and 'mu' arguments are both specified")
262c262
<         if (!missing(prob)) stop("'prob' and 'mu' both specified")
---
>         if (!missing(prob)) stop("'prob' and 'mu' arguments are both specified")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/dummy.coef.R R/src/library/stats/R/dummy.coef.R
114c114
<     if(int > 0)
---
>     if(int > 0) {
115a116,117
> 	names(res) <- c(gettext("(Intercept)", domain = "R-stats"), names(res[-1L]))
>     }
171c173
<     tl <- c("(Intercept)", tl)
---
>     tl <- c(gettext("(Intercept)", domain = "R-stats"), tl)
192c194
< 			    structure(cf[!na], names="(Intercept)")
---
> 			    structure(cf[!na], names=gettext("(Intercept)", domain = "R-stats"))
201c203
< 			    structure(cf, names="(Intercept)")
---
> 			    structure(cf, names=gettext("(Intercept)", domain = "R-stats"))
214c216
< 			structure(cf, names="(Intercept)")
---
> 			structure(cf, names=gettext("(Intercept)", domain = "R-stats"))
258,259c260,261
< 		ans[lin0 - 1L, addcol + (1L:nc1)] <- colnames(this)
< 		ans[lin0:line, addcol + (1L:nc1)] <- format(this, ...)
---
> 		ans[lin0 - 1L, addcol + seq_len(nc1)] <- colnames(this)
> 		ans[lin0:line, addcol + seq_len(nc1)] <- format(this, ...)
278,279c280,281
< 		ans[line-1L, 1L:n1] <- names(this)
< 		ans[line,    1L:n1] <- format(this, ...)
---
> 		ans[line-1L, seq_len(n1)] <- names(this)
> 		ans[line,    seq_len(n1)] <- format(this, ...)
283c285
< 		ans[line, 1L:n1] <- format(this, ...)
---
> 		ans[line, seq_len(n1)] <- format(this, ...)
289c291
<     cat(if(missing(title)) "Full coefficients are" else title, "\n")
---
>     cat(if(missing(title)) gettext("Full coefficients are:", domain = "R-stats") else title, "\n", sep = "")
297c299
< 	print.dummy_coef(x[[strata]], ..., title=paste("\n     Error:", strata))
---
> 	print.dummy_coef(x[[strata]], ..., title=paste("\n    ", gettext("Error:", domain = "R-stats"), strata, sep = " "))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ecdf.R R/src/library/stats/R/ecdf.R
41c41
<     cat("Empirical CDF \nCall: ")
---
>     cat(gettext("Empirical CDF", domain = "R-stats"), "\n", gettext("Call: ", domain = "R-stats"), sep = "")
44c44
<     i1 <- 1L:min(3L,n)
---
>     i1 <- seq_len(min(3L,n))
54,57c54,55
<     header <- paste("Empirical CDF:	 ", n,
<                     "unique values with summary\n")
<     structure(summary(knots(object), ...),
<               header = header, class = "summary.ecdf")
---
>     header <- gettextf("Empirical CDF:	  %d unique values with summary\n", n, domain = "R-stats")
>     structure(summary(knots(object), ...), header = header, class = "summary.ecdf")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/embed.R R/src/library/stats/R/embed.R
39c39
<         data <- x[1L:m + rep.int(dimension:1L, rep.int(m, dimension)) - 1L]
---
>         data <- x[seq_len(m) + rep.int(dimension:1L, rep.int(m, dimension)) - 1L]
43c43
<         stop ("'x' is not a vector or matrix")
---
>         stop(gettextf("'%s' argument is not a vector or matrix", "x"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/factanal.R R/src/library/stats/R/factanal.R
99c99
<                               "%d factors are too many for %d variables"),
---
>                               "%d factors are too many for %d variables", domain = "R-stats"),
118c118
<                        "'start' must have %d rows"),
---
>                        "'start' must have %d rows", domain = "R-stats"),
121c121
<     if(nc < 1) stop("no starting values supplied")
---
>     if(nc < 1) stop("no starting values specified")
127,128c127
<             cat("start", i, "value:", format(nfit$criteria[1L]),
<                 "uniqs:", format(as.vector(round(nfit$uniquenesses, 4))), "\n")
---
>             cat(gettextf("start %d value: %s uniqs: %s", i, format(nfit$criteria[1L]), format(as.vector(round(nfit$uniquenesses, 4))), domain = "R-stats"), "\n", sep = "")
137c136
<                       "unable to optimize from these starting values"),
---
>                       "unable to optimize from these starting values", domain = "R-stats"),
250c249
<     cat("\nLoadings:\n")
---
>     cat("\n", gettext("Loadings:", domain = "R-stats"), "\n", sep = "")
269,270c268,269
<     cat("\nCall:\n", deparse(x$call), "\n\n", sep = "")
<     cat("Uniquenesses:\n")
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n", deparse(x$call), "\n\n", sep = "")
>     cat(gettext("Uniquenesses:", domain = "R-stats"), "\n", sep = "")
283c282
<         cat("\nFactor Correlations:\n")
---
>         cat("\n", gettext("Factor Correlations:", domain = "R-stats"), "\n", sep = "")
292,296c291,298
<         cat("\nTest of the hypothesis that", factors, if(factors == 1)
<             "factor is" else "factors are", "sufficient.\n")
<         cat("The chi square statistic is", round(x$STATISTIC, 2), "on", x$dof,
<             if(x$dof == 1) "degree" else "degrees",
<             "of freedom.\nThe p-value is", signif(x$PVAL, 3), "\n")
---
>         cat("\n", sprintf(ngettext(factors,
> 				"Test of the hypothesis that %d factor is sufficient.",
> 				"Test of the hypothesis that %d factors are sufficient.", domain = "R-stats"),
> 				 factors), "\n", sep = "")
>         cat(sprintf(ngettext(x$dof,
> 			"The chi square statistic is %s on %d degree of freedom.",
> 			"The chi square statistic is %s on %d degrees of freedom.", domain = "R-stats"),
> 			round(x$STATISTIC, 2), x$dof), "\n", gettextf("The p-value is %s", signif(x$PVAL, 3), domain = "R-stats"), "\n", sep = "")
298,300c300,301
<         cat(paste("\nThe degrees of freedom for the model is",
<                   x$dof, "and the fit was", round(x$criteria["objective"], 4),
<                   "\n"))
---
>         cat("\n", gettextf("The degrees of freedom for the model is %d and the fit was %s", x$dof, round(x$criteria["objective"], 4), domain = "R-stats"),
>                   "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/family.R R/src/library/stats/R/family.R
23,24c23,24
<     cat("\nFamily:", x$family, "\n")
<     cat("Link function:", x$link, "\n\n")
---
>     cat("\n", gettext("Family: ", domain = "R-stats"), x$family, "\n", sep = "")
>     cat(gettext("Link function: ", domain = "R-stats"), x$link, "\n\n", sep = "")
31c31
<         stop("invalid argument 'lambda'")
---
>         stop(gettextf("invalid '%s' argument", "lambda"))
124,125c124
<            stop(gettextf("%s link not recognised", sQuote(link)),
<                 domain = NA)
---
>            stop(gettextf("%s link not recognised", sQuote(link)), domain = "R-stats")
151,153c150,151
<             stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
< 		 domain = NA)
---
> 		tmp_n <- paste(sQuote(okLinks), collapse =", ")
>             stop(gettextf("link %s not available for poisson family; available links are %s", sQuote(linktemp), tmp_n), domain = "R-stats")
168c166
< 	    stop("negative values not allowed for the 'Poisson' family")
---
> 	    stop(gettextf("negative values are not allowed for the '%s' family", "Poisson"))
213,215c211,212
< 	    stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
<                  domain = NA)
---
> 		tmp_n <- paste(sQuote(okLinks), collapse =", ")
> 	    stop(gettextf("link %s not available for quasipoisson family; available links are %s", sQuote(linktemp), tmp_n), domain = "R-stats")
230c227
< 	    stop("negative values not allowed for the 'quasiPoisson' family")
---
> 	    stop(gettextf("negative values are not allowed for the '%s' family", "quasiPoisson"))
265,267c262,263
< 	    stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
< 		 domain = NA)
---
> 		tmp_n <- paste(sQuote(okLinks), collapse =", ")
> 	    stop(gettextf("link %s not available for gaussian family; available links are %s", sQuote(linktemp), tmp_n), domain = "R-stats")
310c306
< 		    domain = NA)
---
> 		    domain = "R-stats")
315c311
< 		    domain = NA)
---
> 		    domain = "R-stats")
325c321
<              domain = NA)
---
>              domain = "R-stats")
345,347c341,342
< 	    stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
<                  domain = NA)
---
> 		tmp_n <- paste(sQuote(okLinks), collapse =", ")
> 	    stop(gettextf("link %s not available for binomial family; available links are %s", sQuote(linktemp), tmp_n), domain = "R-stats")
419,421c414,415
< 	    stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
<                  domain = NA)
---
> 		tmp_n <- paste(sQuote(okLinks), collapse =", ")
> 	    stop(gettextf("link %s not available for quasibinomial family; available links are %s", sQuote(linktemp), tmp_n), domain = "R-stats")
454,456c448,449
< 	    stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
<                  domain = NA)
---
> 		tmp_n <- paste(sQuote(okLinks), collapse = ", ")
> 	    stop(gettextf("link %s not available for gamma family; available links are %s", sQuote(linktemp), tmp_n), domain = "R-stats")
513,515c506
< 	    stop(gettextf('link "%s" not available for %s family; available links are %s',
< 			  linktemp, family, paste(sQuote(okLinks), collapse =", ")),
<                  domain = NA)
---
> 	    stop(gettextf("link %s not available for inverse.gaussian family; available links are %s", sQuote(linktemp), paste(sQuote(okLinks), collapse = ", "), domain = "R-stats"), domain = NA)
558,559c549
<     if (linktemp %in% c("logit", "probit", "cloglog", "identity",
<                         "inverse", "log", "1/mu^2", "sqrt"))
---
>     if (linktemp %in% c("logit", "probit", "cloglog", "identity", "inverse", "log", "1/mu^2", "sqrt"))
623c613
<             stop(gettextf('\'variance\' "%s" is invalid: possible values are "mu(1-mu)", "mu", "mu^2", "mu^3" and "constant"', vtemp), domain = NA)
---
>             stop(gettextf("'variance' \"%s\" is invalid: possible values are \"mu(1-mu)\", \"mu\", \"mu^2\", \"mu^3\" and \"constant\"", vtemp), domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/filter.R R/src/library/stats/R/filter.R
27c27
<     if (is.na(n)) stop(gettextf("invalid value of %s", "NROW(x)"), domain = NA)
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "nrow(x)"), domain = "R-stats")
31,33c31,32
<     if (is.na(nfilt)) stop(gettextf("invalid value of %s", "length(filter)"),
<                            domain = NA)
<     if(anyNA(filter)) stop("missing values in 'filter'")
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "length(filter)"), domain = "R-stats")
>     if(anyNA(filter)) stop(gettextf("missing values in '%s' argument", "filter"))
39c38
<             stop("argument 'sides' must be 1 or 2")
---
>             stop("'sides' argument must be 1 or 2")
41c40
<         if (is.na(circular)) stop("'circular' must be logical and not NA")
---
>         if (is.na(circular)) stop("'circular' argument must be logical and not NA")
54c53
<                 stop("length of 'init' must equal length of 'filter'")
---
>                 stop("length of 'init' argument must equal length of 'filter' argument")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/fivenum.R R/src/library/stats/R/fivenum.R
32c32,34
< 	0.5*(x[floor(d)] + x[ceiling(d)])
---
> 	qq <- 0.5*(x[floor(d)] + x[ceiling(d)])
> 	names(qq) <- c(gettext("Min.", domain = NA), gettext("L. hinge", domain = NA), gettext("Median", domain = NA), gettext("U. hinge", domain = NA), gettext("Max.", domain = NA))
> 	qq
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ftable.R R/src/library/stats/R/ftable.R
43c43
< 		stop("incorrect specification for 'row.vars'")
---
> 		stop(gettextf("incorrect specification for '%s' argument", "row.vars"))
46c46
< 	    stop("incorrect specification for 'row.vars'")
---
> 	    stop(gettextf("incorrect specification for '%s' argument", "row.vars"))
52c52
< 	     stop("incorrect specification for 'col.vars'")
---
> 	     stop(gettextf("incorrect specification for '%s' argument", "col.vars"))
55c55
< 	    stop("incorrect specification for 'col.vars'")
---
> 	    stop(gettextf("incorrect specification for '%s' argument", "col.vars"))
57c57
<     i <- 1 : n
---
>     i <- seq_len(n)
89c89
<         stop("'formula' missing or incorrect")
---
>         stop(gettextf("'%s' argument is missing or incorrect", "formula"))
159c159
<         stop("'x' must be an \"ftable\" object")
---
>         stop(gettextf("'%s' argument must be an object of class %s", "x", dQuote("ftable")))
179c179
< 	stop("'x' must be an \"ftable\" object")
---
>         stop(gettextf("'%s' argument must be an object of class %s", "x", dQuote("ftable")))
281c281
<         stop("'file' must be a character string or connection")
---
>         stop(gettextf("'%s' argument must be a character string or connection", "file"))
324c324
<         z <- z[-(1 : (n.col.vars + 1))]
---
>         z <- z[-(seq_len(n.col.vars + 1))]
342c342
<             i <- 1 : n.row.vars
---
>             i <- seq_len(n.row.vars)
361c361
<                 stop("'col.vars' missing or incorrect")
---
>                 stop(gettextf("'%s' argument is missing or incorrect", "col.vars"))
413c413
< 	stop("'x' must be an \"ftable\" object")
---
> 	stop(gettextf("'%s' argument is not an object of class %s", "x", dQuote("ftable")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/glm.R R/src/library/stats/R/glm.R
41c41
< 	stop("'family' not recognized")
---
> 	stop("'family' argument was not recognized")
47,48c47
<     m <- match(c("formula", "data", "subset", "weights", "na.action",
<                  "etastart", "mustart", "offset"), names(mf), 0L)
---
>     m <- match(c("formula", "data", "subset", "weights", "na.action", "etastart", "mustart", "offset"), names(mf), 0L)
57c56
<         stop("invalid 'method' argument")
---
>         stop(gettextf("invalid '%s' argument", "method"))
76c75
<         stop("'weights' must be a numeric vector")
---
>         stop(gettextf("'%s' argument must be a numeric vector", "weights"))
79c78
< 	stop("negative weights not allowed")
---
> 	stop("negative weights are not allowed")
84c83
<             stop(gettextf("number of offsets is %d should equal %d (number of observations)", length(offset), NROW(Y)), domain = NA)
---
>             stop(gettextf("number of offsets (%d) should be equal to number of observations (%d)", length(offset), NROW(Y)), domain = "R-stats")
110c109
<                       x = X[, "(Intercept)", drop=FALSE], y = Y,
---
>                       x = X[, gettext("(Intercept)", domain = NA), drop=FALSE], y = Y,
115c114
<             warning("fitting to calculate the null deviance did not converge -- increase 'maxit'?")
---
>             warning("fitting to calculate the null deviance did not converge -- increase 'maxit' value?")
205,207c204,206
<                 if (length(start) != nvars)
<                     stop(gettextf("length of 'start' should equal %d and correspond to initial coefs for %s", nvars, paste(deparse(xnames), collapse=", ")),
<                          domain = NA)
---
>                 if (length(start) != nvars) {
> 		    tmp_N <- paste(deparse(xnames), collapse=", ")
>                     stop(gettextf("length of 'start' should equal %d and correspond to initial coefs for %s", nvars, tmp_N), domain = "R-stats") }
236,237c235
<                 warning(gettextf("no observations informative at iteration %d",
<                                  iter), domain = NA)
---
>                 warning(gettextf("no observations informative at iteration %d", iter), domain = "R-stats")
247c245
<                 warning(gettextf("non-finite coefficients at iteration %d", iter), domain = NA)
---
>                 warning(gettextf("non-finite coefficients at iteration %d", iter), domain = "R-stats")
254c252
<                                       "X matrix has rank %d, but only %d observations"),
---
>                                       "X matrix has rank %d, but only %d observations", domain = "R-stats"),
263c261
<                 cat("Deviance = ", dev, " Iterations - ", iter, "\n", sep = "")
---
>                 cat(gettextf("Deviance = %s Iterations - %d\n", dev, iter, domain = "R-stats"), sep = "")
282c280
<                     cat("Step halved: new deviance = ", dev, "\n", sep = "")
---
>                     cat(gettextf("Step halved: new deviance = %s", dev, domain = "R-stats"), sep = "")
301c299
<                     cat("Step halved: new deviance = ", dev, "\n", sep = "")
---
>                     cat(gettextf("Step halved: new deviance = %s", dev, domain = "R-stats"))
388c386
<     cat("\nCall:  ",
---
>     cat("\n", gettext("Call:  ", domain = "R-stats"),
391d388
<         cat("Coefficients")
393,395c390,393
<             cat("  [contrasts: ",
<                 apply(cbind(names(co),co), 1L, paste, collapse = "="), "]")
<         cat(":\n")
---
>             cat(gettextf("Coefficients  [contrasts: %s]:", apply(cbind(names(co),co), 1L, paste, collapse = "="), domain = "R-stats"))
> 	else
>             cat(gettext("Coefficients:", domain = "R-stats"))
>         cat("\n")
398,400c396,397
<     } else cat("No coefficients\n\n")
<     cat("\nDegrees of Freedom:", x$df.null, "Total (i.e. Null); ",
<         x$df.residual, "Residual\n")
---
>     } else cat(gettext("No coefficients", domain = "R-stats"), "\n\n", sep = "")
>     cat("\n", gettextf("Degrees of Freedom: %d Total (i.e. Null); %d Residual", x$df.null, x$df.residual, domain = "R-stats"), "\n", sep = "")
402,405c399,401
<     cat("Null Deviance:	   ",	format(signif(x$null.deviance, digits)),
< 	"\nResidual Deviance:", format(signif(x$deviance, digits)),
< 	"\tAIC:", format(signif(x$aic, digits)))
<     cat("\n")
---
>     cat(gettextf("Null Deviance:	   %s\nResidual Deviance: %s\tAIC: %s",	format(signif(x$null.deviance, digits)),
> 	format(signif(x$deviance, digits)),
> 	format(signif(x$aic, digits)), domain = "R-stats"), "\n", sep = "")
416,418c412,415
<     if(any(named))
< 	warning("the following arguments to 'anova.glm' are invalid and dropped: ",
< 		paste(deparse(dotargs[named]), collapse=", "))
---
>     if(any(named)) {
> 	tmp_N <- paste(deparse(dotargs[named]), collapse=", ")
> 	warning("the following arguments to 'anova.glm' are invalid and dropped: ", tmp_N)
> 	}
517,518c514
<     dimnames(table) <- list(c("NULL", tl),
< 			    c("Df", "Deviance", "Resid. Df", "Resid. Dev"))
---
>     dimnames(table) <- list(c("NULL", tl), c(gettext("Df", domain = NA), gettext("Deviance", domain = NA), gettext("Resid. Df", domain = NA), gettext("Resid. Dev", domain = NA)))
521,524c517,520
<     title <- paste0("Analysis of Deviance Table", "\n\nModel: ",
<                     object$family$family, ", link: ", object$family$link,
<                     "\n\nResponse: ", as.character(varlist[-1L])[1L],
<                     "\n\nTerms added sequentially (first to last)\n\n")
---
>     title <- paste0(gettext("Analysis of Deviance Table", domain = "R-stats"), "\n\n", gettext("Model: ", domain = "R-stats"),
>                     object$family$family, ", ", gettext("link: ", domain = "R-stats"), object$family$link,
>                     "\n\n", gettext("Response: ", domain = "R-stats"), as.character(varlist[-1L])[1L],
>                     "\n\n", gettext("Terms added sequentially (first to last)", domain = "R-stats"), "\n\n", sep = "")
537,539c533
<                 warning(gettextf("using F test with a '%s' family is inappropriate",
<                                  fam),
<                         domain = NA)
---
>                 warning(gettextf("using F test with a '%s' family is inappropriate", fam), domain = "R-stats")
563,565c557
<         warning(gettextf("models with response %s removed because response differs from model 1",
<                          sQuote(deparse(responses[!sameresp]))),
<                 domain = NA)
---
>         warning(gettextf("models with response %s removed because response differs from model 1", sQuote(deparse(responses[!sameresp]))), domain = "R-stats")
609,610c601
<     dimnames(table) <- list(1L:nmodels, c("Resid. Df", "Resid. Dev", "Df",
< 					 "Deviance"))
---
>     dimnames(table) <- list(1L:nmodels, c(gettext("Resid. Df", domain = NA), gettext("Resid. Dev", domain = NA), gettext("Df", domain = NA), gettext("Deviance", domain = NA)))
614,616c605,606
<     title <- "Analysis of Deviance Table\n"
<     topnote <- paste0("Model ", format(1L:nmodels), ": ", variables,
<                       collapse = "\n")
---
>     title <- paste(gettext("Analysis of Deviance Table", domain = "R-stats"), "\n", sep = "")
>     topnote <- paste(gettextf("Model %s: %s", format(1L:nmodels), variables, domain = "R-stats"), collapse = "\n")
627,629c617
<                 warning(gettextf("using F test with a '%s' family is inappropriate",
<                                  fam),
<                         domain = NA, call. = FALSE)
---
>                 warning(gettextf("using F test with a '%s' family is inappropriate", fam), domain = "R-stats", call. = FALSE)
637,638c625
<     structure(table, heading = c(title, topnote),
< 	      class = c("anova", "data.frame"))
---
>     structure(table, heading = c(title, topnote), class = c("anova", "data.frame"))
665c652
<         p1 <- 1L:p
---
>         p1 <- seq_len(p)
679c666
<         dn <- c("Estimate", "Std. Error")
---
>         dn <- c(gettext("Estimate", domain = NA), gettext("Std. Error", domain = NA))
683,684c670
<             dimnames(coef.table) <- list(names(coef.p),
<                                          c(dn, "z value","Pr(>|z|)"))
---
>             dimnames(coef.table) <- list(names(coef.p), c(dn, gettext("z value", domain = NA), gettext("Pr(>|z|)", domain = NA)))
689c675
<                                          c(dn, "t value","Pr(>|t|)"))
---
>                                          c(dn, gettext("t value", domain = NA), gettext("Pr(>|t|)", domain = NA)))
693c679
<                                          c(dn, "t value","Pr(>|t|)"))
---
>                                          c(dn, gettext("t value", domain = NA), gettext("Pr(>|t|)", domain = NA)))
699c685
<             list(NULL, c("Estimate", "Std. Error", "t value", "Pr(>|t|)"))
---
>             list(NULL, c(gettext("Estimate", domain = NA), gettext("Std. Error", domain = NA), gettext("t value", domain = NA), gettext("Pr(>|t|)", domain = NA)))
733c719
<     cat("\nCall:\n",
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n",
735c721
<     cat("Deviance Residuals: \n")
---
>     cat(gettext("Deviance Residuals:", domain = "R-stats"), "\n", sep = "")
737,738c723
< 	x$deviance.resid <- setNames(quantile(x$deviance.resid, na.rm = TRUE),
< 				     c("Min", "1Q", "Median", "3Q", "Max"))
---
> 	x$deviance.resid <- setNames(quantile(x$deviance.resid, na.rm = TRUE), c("Min", "1Q", "Median", "3Q", "Max"))
744c729
<         cat("\nNo Coefficients\n")
---
>         cat("\n", gettext("No coefficients", domain = "R-stats"), "\n", sep = "")
750,752c735,737
<             cat("\nCoefficients: (", nsingular,
<                 " not defined because of singularities)\n", sep = "")
<         else cat("\nCoefficients:\n")
---
>             cat("\n", sprintf(ngettext(nsingular, "Coefficients: (%d not defined because of singularity)",
> 			"Coefficients: (%d not defined because of singularities)", domain = "R-stats"), nsingular), "\n", sep = "")
>         else cat("\n", gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
764,771c749,751
<     cat("\n(Dispersion parameter for ", x$family$family,
< 	" family taken to be ", format(x$dispersion), ")\n\n",
< 	apply(cbind(paste(format(c("Null","Residual"), justify="right"),
<                           "deviance:"),
< 		    format(unlist(x[c("null.deviance","deviance")]),
< 			   digits = max(5L, digits + 1L)), " on",
< 		    format(unlist(x[c("df.null","df.residual")])),
< 		    " degrees of freedom\n"),
---
>     cat("\n", gettextf("(Dispersion parameter for %s family taken to be %s)", x$family$family, format(x$dispersion), domain = "R-stats"), "\n\n",
> 	apply(cbind(format(c(gettext("Null deviance:", domain = "R-stats"),gettext("Residual deviance:", domain = "R-stats")), justify="right"),
> 		    format(unlist(x[c("null.deviance","deviance")]), digits = max(5L, digits + 1L)), " on", format(unlist(x[c("df.null","df.residual")])), " degrees of freedom\n"),
774,775c754,755
<     cat("AIC: ", format(x$aic, digits = max(4L, digits + 1L)),"\n\n",
< 	"Number of Fisher Scoring iterations: ", x$iter,
---
>     cat(gettext("AIC: ", domain = "R-stats"), format(x$aic, digits = max(4L, digits + 1L)),"\n\n",
> 	gettext("Number of Fisher Scoring iterations: ", domain = "R-stats"), x$iter,
788c768
< 	    cat("\nCorrelation of Coefficients:\n")
---
> 	    cat("\n", gettext("Correlation of Coefficients:", domain = "R-stats"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/hclust.R R/src/library/stats/R/hclust.R
54c54
< 	message("The \"ward\" method has been renamed to \"ward.D\"; note new \"ward.D2\"")
---
> 	message("The 'ward()' method has been renamed to 'ward.D()'; note new 'ward.D2()'")
60c60
< 	stop("invalid clustering method", paste("", method))
---
> 	stop(gettextf("invalid clustering method %s", method))
62c62
< 	stop("ambiguous clustering method", paste("", method))
---
> 	stop(gettextf("ambiguous clustering method %s", method))
69c69
<         stop("must have n >= 2 objects to cluster")
---
>         stop("at least 2 objects are needed to cluster")
72,73c72,73
<         (if (length(d) < len) stop else warning
<          )("dissimilarities of improper length")
---
>         (if (length(d) < len) stop("dissimilarities are of improper length")
> 	 else warning("dissimilarities are of improper length"))
78c78
<         stop("invalid length of members")
---
>         stop(gettextf("invalid length of '%s' argument", "members"))
105,106c105,106
<     structure(list(merge = cbind(hcass$iia[1L:(n-1)], hcass$iib[1L:(n-1)]),
< 		   height = hcl$crit[1L:(n-1)],
---
>     structure(list(merge = cbind(hcass$iia[seq_len(n-1)], hcass$iib[seq_len(n-1)]),
> 		   height = hcl$crit[seq_len(n-1)],
123c123
< 	return("invalid dendrogram")
---
> 	return(gettext("invalid dendrogram", domain = "R-stats"))
126c126
< 	return("'merge' component in dendrogram must be integer")
---
> 	return(gettext("'merge' component in dendrogram must be integer", domain = "R-stats"))
129,130c129,130
<     if(length(x$height) != n1) return("'height' is of wrong length")
<     if(order && length(x$order ) != n ) return("'order' is of wrong length")
---
>     if(length(x$height) != n1) return(gettextf("'%s' argument is of the wrong length", "height", domain = "R-stats"))
>     if(order && length(x$order ) != n ) return(gettextf("'%s' argument is of the wrong length", "order", domain = "R-stats"))
134c134
< 	"'merge' matrix has invalid contents"
---
> 	gettext("'merge' matrix has invalid contents", domain = "R-stats")
140,141c140,141
<               main = "Cluster Dendrogram",
<               sub = NULL, xlab = NULL, ylab = "Height", ...)
---
>               main = gettext("Cluster Dendrogram"),
>               sub = NULL, xlab = NULL, ylab = gettext("Height"), ...)
184,185c184
< 	stop(gettextf("argument 'x' cannot be coerced to class %s",
<                       dQuote("hclust")),
---
> 	stop(gettextf("'%s' argument cannot be coerced to class %s", "x", dQuote("hclust")),
187,189c186
<              gettextf("\n Consider providing an as.hclust.%s() method",
<                       oldClass(x)[1L]),
<              domain = NA)
---
>              gettextf("\n Consider providing '%s' method", paste("as.hclust.", oldClass(x)[1L], "()", collapse = "")), domain = "R-stats")
209c206
<         cat("\nCall:\n", deparse(x$call), "\n\n", sep = "")
---
>         cat("\n", gettext("Call:", domain = "R-stats"), "\n", deparse(x$call), "\n\n", sep = "")
211c208
<         cat("Cluster method   :", x$method, "\n")
---
>         cat(gettext("Cluster method: ", domain = "R-stats"), x$method, "\n", sep = "")
213,214c210,211
<         cat("Distance         :", x$dist.method, "\n")
<     cat("Number of objects:", length(x$height)+1, "\n")
---
>         cat(gettext("Distance: ", domain = "R-stats"), x$dist.method, "\n", sep = "")
>     cat(gettext("Number of objects: ", domain = "R-stats"), length(x$height)+1, "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/htest.R R/src/library/stats/R/htest.R
24c24
<     cat("data:  ", x$data.name, "\n", sep = "")
---
>     cat(gettextf("data: %s", x$data.name, domain = "R-stats"), "\n", sep = "")
34c34
< 	out <- c(out, paste("p-value",
---
> 	out <- c(out, paste(gettext("p-value", domain = "R-stats"),
39c39
< 	cat("alternative hypothesis: ")
---
> 	cat(gettext("alternative hypothesis: ", domain = "R-stats"))
42,48c42
< 		alt.char <-
< 		    switch(x$alternative,
< 			   two.sided = "not equal to",
< 			   less = "less than",
< 			   greater = "greater than")
< 		cat("true ", names(x$null.value), " is ", alt.char, " ",
< 		    x$null.value, "\n", sep = "")
---
> 		   cat(x$alt.name, "\n", sep = "")
51c45
< 		cat(x$alternative, "\nnull values:\n", sep = "")
---
> 		cat(x$alternative, "\n", gettext("null values:", domain = "R-stats"), "\n", sep = "")
58,61c52,54
< 	cat(format(100 * attr(x$conf.int, "conf.level")),
< 	    " percent confidence interval:\n", " ",
< 	    paste(format(x$conf.int[1:2], digits=digits), collapse = " "),
<             "\n", sep = "")
---
>         cat(gettextf("%s percent confidence interval:", format(100 * attr(x$conf.int, "conf.level")), domain = "R-stats"), "\n ", sep = "")
>         cat(format(x$conf.int[1:2], digits=digits), collapse = " ")
> 	cat("\n")
64c57
< 	cat("sample estimates:\n")
---
> 	cat(gettext("sample estimates:", domain = "R-stats"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/identify.hclust.R R/src/library/stats/R/identify.hclust.R
23c23
<         stop("'k' and 'h' must be a scalar")
---
>         stop("'k' and 'h' arguments must be a scalar")
36,37c36
<         stop(gettextf("k must be between 2 and %d", length(tree$height)),
<              domain = NA)
---
>         stop(gettextf("'%s' argument must be between %s and %s", "k", "2", length(tree$height)), domain = "R-stats")
59c58
<              domain = NA)
---
>              domain = "R-stats")
83c82
<     for(n in 1L:N){
---
>     for(n in seq_len(N)){
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/integrate.R R/src/library/stats/R/integrate.R
59,64c59,64
< 	       "maximum number of subdivisions reached",
< 	       "roundoff error was detected",
< 	       "extremely bad integrand behaviour",
< 	       "roundoff error is detected in the extrapolation table",
< 	       "the integral is probably divergent",
< 	       "the input is invalid")
---
> 	       gettext("maximum number of subdivisions reached"),
> 	       gettext("roundoff error was detected"),
> 	       gettext("extremely bad integrand behaviour"),
> 	       gettext("roundoff error is detected in the extrapolation table"),
> 	       gettext("the integral is probably divergent"),
> 	       gettext("the input is invalid"))
73,76c73,75
<     if(x$message == "OK") cat(format(x$value, digits = digits),
<        " with absolute error < ", format(x$abs.error, digits = 2L),
<        "\n", sep = "")
<     else cat("failed with message ", sQuote(x$message), "\n", sep = "")
---
>     if(x$message == "OK")
>        cat(gettextf("%s with absolute error < %s", format(x$value, digits = digits), format(x$abs.error, digits = 2L), domain = "R-stats"), "\n", sep = "")
>     else cat(gettextf("failed with message %s", sQuote(x$message), domain = "R-stats"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/isoreg.R R/src/library/stats/R/isoreg.R
51,55c51,57
<   cat("Isotonic regression from ", deparse(x$call), ",\n", sep = "")
<   cat("  with", length(x$iKnots), "knots / breaks at obs.nr.", x$iKnots, ";\n")
<   if(x$isOrd) cat("  initially ordered 'x'\n")
<   else { cat("  (x,y) ordering:"); str(x$ord) }
<   cat("  and further components ")
---
>   cat(sprintf(ngettext(length(x$iKnots),
> 		"Isotonic regression from %s\n  with %d knot / break at obs.nr. %s;\n",
> 		"Isotonic regression from %s\n  with %d knots / breaks at obs.nr. %s;\n", domain = "R-stats"),
> 		 deparse(x$call), length(x$iKnots), paste(x$iKnots, collapse = " ")),  sep = "")
>   if(x$isOrd) cat(gettext("  initially ordered 'x'", domain = "R-stats"), "\n", sep = "")
>   else { cat(gettextf("  (x,y) ordering: %s", str(x$ord), domain = "R-stats")) }
>   cat(gettext("  further components: ", domain = "R-stats"))
72,73c74,75
< 	     main = paste("Isotonic regression", deparse(x$call)),
< 	     main2 = "Cumulative Data and Convex Minorant",
---
> 	     main = gettextf("Isotonic regression %s", paste(deparse(x$call), collapse = ""), domain = "R-stats"),
> 	     main2 = gettext("Cumulative Data and Convex Minorant", domain = "R-stats"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/kernel.R R/src/library/stats/R/kernel.R
53,54c53,54
<         if (r < 1L) stop ("'r' is less than 1")
<         if (m < 1L) stop ("'m' is less than 1")
---
>         if (r < 1L) stop(gettextf("'%s' argument is less than %d", "r", 1))
>         if (m < 1L) stop(gettextf("'%s' argument is less than %d", "m", 1))
66,67c66,67
<         if (r < 0) stop ("'r' is less than 0")
<         if (m < 1) stop ("'m' is less than 1")
---
>         if (r < 0) stop(gettextf("'%s' argument is less than %d", "r", 0))
>         if (m < 1) stop(gettextf("'%s' argument is less than %d", "m", 1))
79c79
< 	    stop("'m' must be numeric with non-negative integers")
---
> 	    stop("'m' argument must be numeric vector with non-negative integers")
90c90
<             stop ("'coef' must be a vector")
---
>             stop(gettextf("'%s' argument must be a vector", "coef"))
92c92
<             stop ("'coef' does not have the correct length")
---
>             stop(gettextf("'%s' argument is of the wrong length", "coef"))
153,154c153,154
<     if (!is.vector(x)) stop ("'x' is not a vector")
<     if (!is.tskernel(k)) stop ("'k' is not a kernel")
---
>     if (!is.vector(x)) stop(gettextf("'%s' argument is not a vector", "x"))
>     if (!is.tskernel(k)) stop(gettextf("'%s' argument is not a kernel", "k"))
195c195
<         stop ("'x' is not a kernel")
---
>         stop(gettextf("'%s' argument is not a kernel", "x"))
197c197
<         stop ("'k' is not a kernel")
---
>         stop(gettextf("'%s' argument is not a kernel", "k"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/kmeans.R R/src/library/stats/R/kmeans.R
72,73c72,73
< 				     "did not converge in %d iteration",
< 				     "did not converge in %d iterations"),
---
>                             "kmeans algorithm did not converge in %d iteration",
>                             "kmeans algorithm did not converge in %d iterations", domain = "R-stats"),
86,87c86,87
<     m <- as.integer(nrow(x)); if(is.na(m)) stop("invalid nrow(x)")
<     p <- as.integer(ncol(x)); if(is.na(p)) stop("invalid ncol(x)")
---
>     m <- as.integer(nrow(x)); if(is.na(m)) stop(gettextf("invalid '%s' value", "nrow(x)"))
>     p <- as.integer(ncol(x)); if(is.na(p)) stop(gettextf("invalid '%s' value", "ncol(x)"))
117c117
<     if(is.na(k)) stop(gettextf("invalid value of %s", "'k'"), domain = NA)
---
>     if(is.na(k)) stop(gettextf("invalid '%s' value", "k"))
120c120
<     if(is.na(iter.max) || iter.max < 1L) stop("'iter.max' must be positive")
---
>     if(is.na(iter.max) || iter.max < 1L) stop(gettextf("'%s' argument must be positive", "iter.max"))
151,153c151,153
<     cat("K-means clustering with ", length(x$size), " clusters of sizes ",
<         paste(x$size, collapse = ", "), "\n", sep = "")
<     cat("\nCluster means:\n")
---
>     cat(sprintf(ngettext(length(x$size), "K-means clustering with %d cluster of size %s",
> 				"K-means clustering with %d clusters of sizes %s", domain = "R-stats"), length(x$size), paste(x$size, collapse=", ")), "\n", sep = "")
>     cat("\n", gettext("Cluster means:", domain = "R-stats"), "\n", sep = "")
155c155
<     cat("\nClustering vector:\n")
---
>     cat("\n", gettext("Clustering vector:", domain = "R-stats"), "\n", sep = "")
157c157
<     cat("\nWithin cluster sum of squares by cluster:\n")
---
>     cat("\n", gettext("Within cluster sum of squares by cluster:", domain = "R-stats"), "\n", sep = "")
159,162c159,160
<     ratio <- sprintf(" (between_SS / total_SS = %5.1f %%)\n",
<                      100 * x$betweenss/x$totss)
<     cat(sub(".", getOption("OutDec"), ratio, fixed = TRUE),
< 	"Available components:\n", sep = "\n")
---
>     ratio <- gettextf(" (between_SS / total_SS = %5.1f %%)", 100 * x$betweenss/x$totss, domain = "R-stats")
>     cat(sub(".", getOption("OutDec"), ratio, fixed = TRUE), "\n\n", gettext("Available components:", domain = "R-stats"), "\n\n", sep = "")
165c163
< 	cat("Warning: did *not* converge in specified number of iterations\n")
---
> 	cat(gettext("Warning: did *not* converge in specified number of iterations\n", domain = "R-stats"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ksmooth.R R/src/library/stats/R/ksmooth.R
25c25
< 	stop("numeric y must be supplied.\nFor density estimation use density()")
---
> 	stop("numeric 'y' argument must be supplied.\nFor density estimation use 'density()'")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/lag.R R/src/library/stats/R/lag.R
25c25
<         warning("'k' is not an integer")
---
>         warning(gettextf("'%s' argument is not an integer", "k"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/lm.R R/src/library/stats/R/lm.R
39,40c39
< 	warning(gettextf("method = '%s' is not supported. Using 'qr'", method),
<                 domain = NA)
---
> 	warning(gettextf("method = '%s' is not supported. Using 'qr'", method), domain = "R-stats")
46c45
<         stop("'weights' must be a numeric vector")
---
>         stop(gettextf("'%s' argument must be a numeric vector", "weights"))
53,54c52
<             stop(gettextf("number of offsets is %d, should equal %d (number of observations)",
<                           NROW(offset), ny), domain = NA)
---
>             stop(gettextf("number of offsets (%d) should be equal to the number of observations (%d)", NROW(offset), ny), domain = "R-stats")
96c94
<     if (is.null(n <- nrow(x))) stop("'x' must be a matrix")
---
>     if (is.null(n <- nrow(x))) stop(gettextf("'%s' argument must be a matrix", "x"))
114,115c112
< 	warning(gettextf("method = '%s' is not supported. Using 'qr'", method),
<                 domain = NA)
---
> 	warning(gettextf("method = '%s' is not supported. Using 'qr'", method), domain = "R-stats")
123c120
<     dn <- colnames(x); if(is.null(dn)) dn <- paste0("x", 1L:p)
---
>     dn <- colnames(x); if(is.null(dn)) dn <- paste0("x", seq_len(p))
154c151
<     if(is.null(n <- nrow(x))) stop("'x' must be a matrix")
---
>     if(is.null(n <- nrow(x))) stop(gettextf("'%s' argument must be a matrix", "x"))
167,168c164
< 	warning(gettextf("method = '%s' is not supported. Using 'qr'", method),
<                 domain = NA)
---
> 	warning(gettextf("method = '%s' is not supported. Using 'qr'", method), domain = "R-stats")
203c199
<     dn <- colnames(x); if(is.null(dn)) dn <- paste0("x", 1L:p)
---
>     dn <- colnames(x); if(is.null(dn)) dn <- paste0("x", seq_len(p))
253c249
<     cat("\nCall:\n",
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n",
256c252
<         cat("Coefficients:\n")
---
>         cat(gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
259c255
<     } else cat("No coefficients\n")
---
>     } else cat(gettext("No coefficients", domain = "R-stats"), "\n", sep = "")
285,286c281,282
<         ans$coefficients <- matrix(NA_real_, 0L, 4L, dimnames =
< 			list(NULL, c("Estimate", "Std. Error", "t value", "Pr(>|t|)")))
---
>         ans$coefficients <- matrix(NA_real_, 0L, 4L)
>         dimnames(ans$coefficients) <- list(NULL, c(gettext("Estimate", domain = NA), gettext("Std. Error", domain = NA), gettext("t value", domain = NA), gettext("Pr(>|t|)", domain = NA)))
322c318
<     p1 <- 1L:p
---
>     p1 <- seq_len(p)
359c355
<     cat("\nCall:\n", # S has ' ' instead of '\n'
---
>     cat("\n", gettext("Call:", domain = "R-stats"), "\n", # S has ' ' instead of '\n'
364,365c360,361
<     cat(if(!is.null(x$weights) && diff(range(x$weights))) "Weighted ",
<         "Residuals:\n", sep = "")
---
>     cat(if(!is.null(x$weights) && diff(range(x$weights))) gettext("Weighted Residuals:", domain = "R-stats") else
>         gettext("Residuals:", domain = "R-stats"), "\n", sep = "")
367c363
< 	nam <- c("Min", "1Q", "Median", "3Q", "Max")
---
> 	nam <- c(gettext("Min", domain = NA), gettext("1Q", domain = NA), gettext("Median", domain = NA), gettext("3Q", domain = NA), gettext("Max", domain = NA))
380c376,378
< 	cat("ALL", df[1L], "residuals are 0: no residual degrees of freedom!")
---
> 	cat(sprintf(ngettext(df[1L], "%d residual is 0: no residual degrees of freedom!",
> 				"ALL %d residuals are 0: no residual degrees of freedom!", domain = "R-stats"),
> 			 df[1L]))
384c382
<         cat("\nNo Coefficients\n")
---
>         cat("\n", gettext("No coefficients", domain = "R-stats"), "\n", sep = "")
387,389c385,388
<             cat("\nCoefficients: (", nsingular,
<                 " not defined because of singularities)\n", sep = "")
<         else cat("\nCoefficients:\n")
---
>             cat("\n", sprintf(ngettext(nsingular, "Coefficients: (%d not defined because of singularity)",
> 				"Coefficients: (%d not defined because of singularities)", domain = "R-stats"), nsingular),
>                 "\n", sep = "")
>         else cat("\n", gettext("Coefficients:", domain = "R-stats"), "\n", sep = "")
401,402c400
<     cat("\nResidual standard error:",
< 	format(signif(x$sigma, digits)), "on", rdf, "degrees of freedom")
---
>     cat("\n", gettextf("Residual standard error: %s on %d degrees of freedom", format(signif(x$sigma, digits)), rdf, domain = "R-stats"), sep = "")
406,410c404,406
< 	cat("Multiple R-squared: ", formatC(x$r.squared, digits = digits))
< 	cat(",\tAdjusted R-squared: ",formatC(x$adj.r.squared, digits = digits),
< 	    "\nF-statistic:", formatC(x$fstatistic[1L], digits = digits),
< 	    "on", x$fstatistic[2L], "and",
< 	    x$fstatistic[3L], "DF,  p-value:",
---
> 	cat(gettext("Multiple R-squared:", domain = "R-stats"), formatC(x$r.squared, digits = digits))
> 	cat(",\t", gettext("Adjusted R-squared: ", domain = "R-stats"), formatC(x$adj.r.squared, digits = digits),
> 	    "\n", gettextf("F-statistic: %s on %d and %d DF", formatC(x$fstatistic[1L], digits = digits), x$fstatistic[2L], x$fstatistic[3L], domain = "R-stats"), ",  ", gettext("p-value: ", domain = "R-stats"),
413c409
<                         digits = digits))
---
>                         digits = digits), sep = "")
420c416
< 	    cat("\nCorrelation of Coefficients:\n")
---
> 	    cat("\n", gettext("Correlation of Coefficients:", domain = "R-stats"), "\n", sep = "")
456,457c452
<         stop("lm object does not have a proper 'qr' component.
<  Rank zero or should not have used lm(.., qr=FALSE).")
---
>         stop("lm object does not have a proper 'qr' component. Rank zero or should not have used lm(.., qr=FALSE).")
479c474
< 	stop("simulate() is not yet implemented for multivariate lm()")
---
> 	stop("'simulate()' function is not yet implemented for multivariate 'lm()'")
501,502c496
<                   else stop(gettextf("family '%s' not implemented", fam),
<                             domain = NA)
---
>                   else stop(gettextf("family '%s' not implemented", fam), domain = "R-stats")
588c582
<         p1 <- 1L:p
---
>         p1 <- seq_len(p)
591c585
<         nmeffects <- c("(Intercept)", attr(object$terms, "term.labels"))
---
>         nmeffects <- c(gettext("(Intercept)", domain = NA), attr(object$terms, "term.labels"))
605,606c599
<     dimnames(table) <- list(c(tlabels, "Residuals"),
<                             c("Df","Sum Sq", "Mean Sq", "F value", "Pr(>F)"))
---
>     dimnames(table) <- list(c(tlabels, "Residuals"), c(gettext("Df", domain = NA), gettext("Sum Sq", domain = NA), gettext("Mean Sq", domain = NA), gettext("F value", domain = NA), gettext("Pr(>F)", domain = NA)))
608,609c601,602
<     structure(table, heading = c("Analysis of Variance Table\n",
< 		     paste("Response:", deparse(formula(object)[[2L]]))),
---
>     structure(table, heading = c(paste(gettext("Analysis of Variance Table", domain = "R-stats"), "\n", sep = ""),
> 		     paste(gettext("Response:", domain = "R-stats"), deparse(formula(object)[[2L]]))),
621,623c614
<         warning(gettextf("models with response %s removed because response differs from model 1",
<                          sQuote(deparse(responses[!sameresp]))),
<                 domain = NA)
---
>         warning(gettextf("models with response %s removed because response differs from model 1", sQuote(deparse(responses[!sameresp]))), domain = "R-stats")
646,647c637
<     dimnames(table) <- list(1L:nmodels,
<                             c("Res.Df", "RSS", "Df", "Sum of Sq"))
---
>     dimnames(table) <- list(seq_len(nmodels), c(gettext("Res.Df", domain = NA), gettext("RSS", domain = NA), gettext("Df", domain = NA), gettext("Sum of Sq", domain = NA)))
649,651c639,640
<     title <- "Analysis of Variance Table\n"
<     topnote <- paste0("Model ", format(1L:nmodels), ": ", variables,
<                       collapse = "\n")
---
>     title <- paste(gettext("Analysis of Variance Table", domain = "R-stats"), "\n", sep = "")
>     topnote <- paste(gettextf("Model %s: %s", format(seq_len(nmodels)), variables, domain = "R-stats"), collapse = "\n")
712c701
<             warning("predictions on current data refer to _future_ responses\n")
---
>             warning("predictions on current data refer to _future_ responses")
717c706
<                 warning("assuming prediction variance inversely proportional to weights used for fitting\n")
---
>                 warning("assuming prediction variance inversely proportional to weights used for fitting")
721c710
<             warning("Assuming constant prediction variance even though model fit is weighted\n")
---
>             warning("Assuming constant prediction variance even though model fit is weighted")
769c758
< 	if (hasintercept) ll <- c("(Intercept)", ll)
---
> 	if (hasintercept) ll <- c(gettext("(Intercept)", domain = NA), ll)
773c762,763
< 	    asgn$"(Intercept)" <- NULL
---
> 	    #asgn$"(Intercept)" <- NULL
> 	    asgn[[which(names(asgn) == gettext("(Intercept)", domain = NA))]] <- NULL
865c855
< 	    r <- 1L:dim(dd)[1L]
---
> 	    r <- seq_len(dim(dd)[1L])
932c922
<     asgn <- object$assign[qr.lm(object)$pivot[1L:object$rank]]
---
>     asgn <- object$assign[qr.lm(object)$pivot[seq_len(object$rank)]]
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/lm.influence.R R/src/library/stats/R/lm.influence.R
257c257
< 		cbind(absmat[, 1L:k] > 1, # |dfbetas| > 1
---
> 		cbind(absmat[, seq_len(k)] > 1, # |dfbetas| > 1
264c264
< 		c(absmat[,, 1L:k] > 1, # |dfbetas| > 1
---
> 		c(absmat[,, seq_len(k)] > 1, # |dfbetas| > 1
284c284
<     vn <- variable.names(model); vn[vn == "(Intercept)"] <- "1_"
---
>     vn <- variable.names(model); vn[vn == gettext("(Intercept)", domain = "R-stats")] <- "1_"
320c320
<     cat("Influence measures of\n\t", deparse(x$call),":\n\n")
---
>     cat(gettextf("Influence measures of\n\t%s:", paste(deparse(x$call), collapse = ""), domain = "R-stats"),"\n\n", sep = "")
337,338c337
<     cat("Potentially influential observations of\n\t",
< 	deparse(object$call),":\n")
---
>     cat(gettextf("Potentially influential observations of\n\t%s", paste(deparse(object$call), collapse = ""), domain = "R-stats"),"\n", sep = "")
357c356
< 	cat("NONE\n")
---
> 	cat(gettext("NONE", domain = "R-stats"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/loess.R R/src/library/stats/R/loess.R
49c49
<     if(!match(degree, 0L:2L, 0L)) stop("'degree' must be 0, 1 or 2")
---
>     if(!match(degree, 0L:2L, 0L)) stop(gettextf("'%s' argument must be 0, 1 or 2", "degree"))
62c62
<         stop("invalid 'control' argument")
---
>         stop(gettextf("invalid '%s' argument", "control"))
104c104
<     if (is.na(D)) stop("invalid NCOL(X)")
---
>     if (is.na(D)) stop(gettextf("invalid '%s' value", "NCOL(X)"))
107,109c107,109
<     if (is.na(N)) stop("invalid NROW(X)")
<     if(!N || !D)	stop("invalid 'x'")
<     if(length(y) != N)	stop("invalid 'y'")
---
>     if (is.na(N)) stop(gettextf("invalid '%s' value", "NROW(X)"))
>     if(!N || !D)	stop(gettextf("invalid '%s' argument", "x"))
>     if(length(y) != N)	stop(gettextf("invalid '%s' argument", "y"))
135,137c135,137
<     if (length(span) != 1L) stop("invalid argument 'span'")
<     if (length(cell) != 1L) stop("invalid argument 'cell'")
<     if (length(degree) != 1L) stop("invalid argument 'degree'")
---
>     if (length(span) != 1L) stop(gettextf("invalid '%s' argument", "span"))
>     if (length(cell) != 1L) stop(gettextf("invalid '%s' argument", "cell"))
>     if (length(degree) != 1L) stop(gettextf("invalid '%s' argument", "degree"))
145,146c145
< 	warning(sprintf(gettext("iterTrace = %d is not obeyed since iterations = %d"),
<                         iterTrace, iterations))
---
> 	warning(gettextf("iterTrace = %d is not obeyed since iterations = %d", iterTrace, iterations))
199c198
< 	    cat(sprintf(
---
> 	    cat(gettextf(
201c200
< 		j, wRSS, del.SS, d.rob.w))
---
> 		j, wRSS, del.SS, d.rob.w, domain = "R-stats"), "\n", sep = "")
203c202
< 		cat("robustness weights:\n")
---
> 		cat(gettext("robustness weights:", domain = "R-stats"), "\n", sep = "")
272c271
< 	stop("first argument must be a \"loess\" object")
---
> 	stop(gettextf("'%s' argument is not an object of class %s", "object", dQuote("loess")))
425c424
< 	cat("Call:\n")
---
> 	cat(gettext("Call:", domain = "R-stats"), "\n", sep = "")
428,432c427,432
<     cat("\nNumber of Observations:", x$n, "\n")
<     cat("Equivalent Number of Parameters:", format(round(x$enp, 2L)), "\n")
<     cat("Residual",
< 	if(x$pars$family == "gaussian")"Standard Error:" else "Scale Estimate:",
< 	format(signif(x$s, digits)), "\n")
---
>     cat("\n", gettext("Number of Observations:", domain = "R-stats"), " ", x$n, "\n", sep = "")
>     cat(gettext("Equivalent Number of Parameters:", domain = "R-stats"), " ", format(round(x$enp, 2L)), sep = "", collapse = "\n")
>     if(x$pars$family == "gaussian")
>      cat(ngettext(1L, "Residual Standard Error:", "Residual Standard Errors:", domain = "R-stats"), " ", format(signif(x$s, digits)), "\n", sep = "")
>     else
>      cat(gettext("Residual Scale Estimate:", domain = "R-stats"), " ", format(signif(x$s, digits)), "\n", sep = "")
446,448c446,447
<     cat("Trace of smoother matrix: ", format(round(x$trace.hat, 2L)),
<         "  (",x$pars$trace.hat, ")\n", sep="")
<     cat("\nControl settings:\n")
---
>     cat(gettext("Trace of smoother matrix:", domain = "R-stats"), " ", format(round(x$trace.hat, 2L)), "  (",x$pars$trace.hat, ")\n", sep="")
>     cat("\n", gettext("Control settings:", domain = "R-stats"), "\n", sep = "")
517,519c516
<         warning(gettextf("models with response %s removed because response differs from model 1",
<                          sQuote(deparse(responses[!sameresp]))),
<                 domain = NA)
---
>         warning(gettextf("models with response %s removed because response differs from model 1", sQuote(deparse(responses[!sameresp]))), domain = "R-stats")
524,525c521
<     descr <- paste0("Model ", format(1L:nmodels), ": ", models,
<                     collapse = "\n")
---
>     descr <- paste(gettextf("Model %s: %s", format(seq_len(nmodels)), models, domain = "R-stats"), collapse = "\n")
539a536
>     colnames(ans) <- c(gettext("ENP", domain = NA), gettext("RSS", domain = NA), gettext("F-value", domain = NA), gettext("Pr(>F)", domain = NA))
541,542c538
< 	paste0(descr, "\n\n", "Analysis of Variance:   denominator df ",
<                format(round(dfden, 2L)), "\n")
---
> 	paste0(descr, "\n\n", gettextf("Analysis of Variance:   denominator df %s", format(round(dfden, 2L)), domain = "R-stats"), "\n")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/logLik.R R/src/library/stats/R/logLik.R
26,27c26
<     cat("'log Lik.' ", paste(format(c(x), digits = digits), collapse = ", "),
<         " (df=", format(attr(x,"df")), ")\n", sep = "")
---
>     cat(gettextf("'log Lik.' %s (df=%s)", paste(format(c(x), digits = digits), collapse = ", "), format(attr(x,"df")), domain = "R-stats"), "\n", sep = "")
37,42c36,42
<     cat("Class", if (length(cl) > 1L) "es",
< 	" '", paste(cl, collapse = "', '"), "' : ",
< 	paste
<         (format(co[seq_len(min(len,vec.len))], digits = digits),
< 	      collapse = ", "), if(cutl) ", ...",
< 	" (df=", format(attr(object,"df")), ")\n", sep = "")
---
>     if(cutl)
>     cat(sprintf(ngettext(length(cl), "Class %s: %s, ... (df=%s)\n", "Classes %s: %s, ... (df=%s)\n", domain = "R-stats"), paste(dQuote(cl), collapse = ", "),
> 	paste(format(co[seq_len(min(len,vec.len))], digits = digits), collapse = ", "), format(attr(object,"df"))))
>     else
>     cat(sprintf(ngettext(length(cl), "Class %s: %s (df=%s)\n", "Classes %s: %s (df=%s)\n", domain = "R-stats"), paste(dQuote(cl), collapse = ", "),
> 	paste(format(co[seq_len(min(len,vec.len))], digits = digits), collapse = ", "), format(attr(object,"df"))))
> 
56c56
<     if(!missing(...)) warning("extra arguments discarded")
---
>     if(!missing(...)) warning("extra arguments were discarded")
73c73
<         stop("'logLik.lm' does not support multiple responses")
---
>         stop("'logLik.lm()' does not support multiple responses")
135c135
<             warning("no 'nobs' method is available")
---
>             warning("no 'nobs()' method is available")
138c138
<     } else stop("no 'nobs' method is available") # or maybe NA_integer_
---
>     } else stop("no 'nobs()' method is available") # or maybe NA_integer_
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/loglin.R R/src/library/stats/R/loglin.R
39c39
<             stop("'margin' must contain names or numbers corresponding to 'table'")
---
>             stop("'margin' argument must contain names or numbers corresponding to 'table' argument")
45c45
<     if (length(start) != ntab ) stop("'start' and 'table' must be same length")
---
>     if (length(start) != ntab ) stop(gettextf("'%s' and '%s' arguments must have the same length", "start", "table"))
50c50
<         cat(z$nlast, "iterations: deviation", z$dev[z$nlast], "\n")
---
>         cat(sprintf(ngettext(z$nlast, "%d iteration: deviation %s", "%d iterations: deviation %s", domain = "R-stats"), z$nlast, z$dev[z$nlast]), "\n", sep = "")
89c89
<         varnames <- as.character(1 : ntab)
---
>         varnames <- as.character(seq_len(ntab))
109c109
<         parnam[1L] <- "(Intercept)"
---
>         parnam[1L] <- gettext("(Intercept)", domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/lsfit.R R/src/library/stats/R/lsfit.R
29c29
< 	else xnames <- paste0("X", 1L:ncol(x))
---
> 	else xnames <- paste0("X", seq_len(ncol(x)))
33c33
< 	xnames <- c("Intercept", xnames)
---
> 	xnames <- c(gettext("Intercept", domain = NA), xnames)
38c38
<     if(is.null(yname) && ncol(y) > 1) yname <- paste0("Y", 1L:ncol(y))
---
>     if(is.null(yname) && ncol(y) > 1) yname <- paste0("Y", seq_len(ncol(y)))
47c47
<                                  "%d missing values deleted"),
---
>                                  "%d missing values deleted", domain = "R-stats"),
64c64
<                        "'X' matrix has %d cases (rows)"),
---
>                        "'X' matrix has %d cases (rows)", domain = "R-stats"),
68c68
<                        "'Y' has %d cases (rows)")),
---
>                        "'Y' has %d cases (rows)", domain = "R-stats")),
74c74
<                               "only %d cases"),
---
>                               "only %d cases", domain = "R-stats"),
78c78
<                               "but %d variables")),
---
>                               "but %d variables", domain = "R-stats")),
83c83
< 	if(any(wt < 0)) stop("negative weights not allowed")
---
> 	if(any(wt < 0)) stop("negative weights are not allowed")
85c85
<             stop(gettextf("number of weights = %d should equal %d (number of responses)", nwts, nry), domain = NA)
---
>             stop(gettextf("number of weights = %d should equal %d (number of responses)", nwts, nry), domain = "R-stats")
161c161
< 	warning("missing observations deleted")
---
> 	warning("missing observations were deleted")
169c169
< 	    warning("observations with 0 weight not used in calculating standard deviation")
---
> 	    warning("observations with 0 weight were not used in calculating standard deviation")
205c205
<     qr <- as.matrix(ls.out$qr$qr[1L:p, 1L:p])
---
>     qr <- as.matrix(ls.out$qr$qr[seq_len(p), seq_len(p)])
237c237
< 	    warning("observations with 0 weights not used")
---
> 	    warning("observations with 0 weight were not used in calculating standard deviation")
274,277c274,275
<     dimnames(summary) <- list(Ynames,
< 			      c("Mean Sum Sq", "R Squared",
< 				"F-value", "Df 1", "Df 2", "Pr(>F)"))
<     mat <- as.matrix(lsqr$qr[1L:p, 1L:p])
---
>     dimnames(summary) <- list(Ynames, c(gettext("Mean Sum Sq", domain = NA), gettext("R Squared", domain = NA), gettext("F-value", domain = NA), gettext("Df 1", domain = NA), gettext("Df 2", domain = NA), gettext("Pr(>F)", domain = NA)))
>     mat <- as.matrix(lsqr$qr[seq_len(p), seq_len(p)])
284c282
<     coef.table <- as.list(1L:m.y)
---
>     coef.table <- as.list(seq_len(m.y))
287c285
<     for(i in 1L:m.y) {
---
>     for(i in seq_len(m.y)) {
293,295c291
< 	dimnames(coef.table[[i]]) <-
< 	    list(colnames(lsqr$qr),
< 		 c("Estimate", "Std.Err", "t-value", "Pr(>|t|)"))
---
> 	dimnames(coef.table[[i]]) <- list(colnames(lsqr$qr), c(gettext("Estimate", domain = NA), gettext("Std.Err", domain = NA), gettext("t-value", domain = NA), gettext("Pr(>|t|)", domain = NA)))
301,307c297,301
< 		cat("Response:", Ynames[i], "\n\n")
< 	    cat(paste0("Residual Standard Error=",
<                        format(round(resse[i], digits)), "\nR-Square=",
<                        format(round(rsquared[i], digits)), "\nF-statistic (df=",
<                        format(degfree), ", ", format(n[i]-p), ")=",
<                        format(round(fstat[i], digits)), "\np-value=",
<                        format(round(pvalue[i], digits)), "\n\n"))
---
> 		cat(gettext("Response: ", domain = "R-stats"), Ynames[i], "\n\n", sep = "")
> 	    cat(gettextf("Residual Standard Error=%s", format(round(resse[i], digits)), domain = "R-stats"), "\n",
> 			gettextf("R-Square=%s", format(round(rsquared[i], digits)), domain = "R-stats"), "\n",
> 			gettextf("F-statistic (df=%s, %s)=%s", format(degfree), format(n[i]-p), format(round(fstat[i], digits)), domain = "R-stats"), "\n",
> 			gettextf("p-value=%s", format(round(pvalue[i], digits)), domain = "R-stats"), "\n\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/mad.R R/src/library/stats/R/mad.R
27c27
<             if(low && high) stop("'low' and 'high' cannot be both TRUE")
---
>             if(low && high) stop("'low' and 'high' arguments cannot be both TRUE")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/manova.R R/src/library/stats/R/manova.R
44,46c44
<         stop(gettextf("object must be of class %s or %s",
<                       dQuote("manova"), dQuote("maov")),
<              domain = NA)
---
>         stop(gettextf("object must be of class %s or %s", dQuote("manova"), dQuote("maov")), domain = "R-stats")
49c47
<     asgn <- object$assign[object$qr$pivot[1L:object$rank]]
---
>     asgn <- object$assign[object$qr$pivot[seq_len(object$rank)]]
56c54
<     nmeffect <- c("(Intercept)", attr(object$terms, "term.labels"))
---
>     nmeffect <- c(gettext("(Intercept)", domain = "R-stats"), attr(object$terms, "term.labels"))
78c76
<     pm <- pmatch("(Intercept)", nmrows, 0L)
---
>     pm <- pmatch(gettext("(Intercept)", domain = NA), nmrows, 0L)
92c90
<         names(ss)[nt] <- nmrows[nt] <- "Residuals"
---
>         names(ss)[nt] <- nmrows[nt] <- gettext("Residuals", domain = NA)
94,99c92,99
<         eigs <- array(NA, c(nterms, nresp), dimnames =
<                           list(nmrows[-nt], NULL))
<         stats <- matrix(NA, nt, 5, dimnames = list(nmrows, c(test,
<                                        "approx F", "num Df", "den Df", "Pr(>F)")))
<         sc <- sqrt(sss <- diag(ss[[nt]]))
<         ## Let us try to distinguish bad scaling and near-perfect fit
---
>         eigs <- array(NA, c(nterms, nresp))
>         dimnames(eigs) <- list(nmrows[-nt], NULL)
>         stats <- matrix(NA, nt, 5)
>         dimnames(stats) <-  list(nmrows,
>                                  c(test, gettext("approx F", domain = NA), gettext("num Df", domain = NA), gettext("den Df", domain = NA), gettext("Pr(>F)", domain = NA)))
>         sc <- sqrt(diag(ss[[nt]]))
>         ## Let us try to distnguish bad scaling and near-perfect fit
>         sss <- sc^2
105,106c105
<             stop(gettextf("residuals have rank %d < %d",
<                           rss.qr$rank, ncol(resid)), domain = NA)
---
>             stop(gettextf("residuals have rank %d < %d", rss.qr$rank, ncol(resid)), domain = "R-stats")
110,111c109,110
<                 eigs[i, ] <- Re(eigen(A1, symmetric = FALSE, only.values = TRUE)$values)
<                 stats[i, 1L:4L] <-
---
>                 eigs[i, ] <- Re(eigen(A1, symmetric = FALSE)$values)
>                 stats[i, seq_len(4)] <-
117c116
<                 ok <- stats[, 2L] >= 0 & stats[, 3L] > 0 & stats[, 4L] > 0
---
>                 ok <- stats[, 2] >= 0 & stats[, 3] > 0 & stats[, 4] > 0
119c118
<                 stats[ok, 5L] <- pf(stats[ok, 2L], stats[ok, 3L], stats[ok, 4L],
---
>                 stats[ok, 5] <- pf(stats[ok, 2], stats[ok, 3], stats[ok, 4],
135c134
<         cat("No error degrees of freedom\n\n")
---
>         cat(gettext("No error degrees of freedom", domain = "R-stats"), "\n\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/medpolish.R R/src/library/stats/R/medpolish.R
49c49
<         if(trace.iter) cat("Final: ", newsum, "\n", sep = "")
---
>         if(trace.iter) cat(gettext("Final: ", domain = "R-stats"), newsum, "\n", sep = "")
53c53
<                              "medpolish() did not converge in %d iterations"),
---
>                              "medpolish() did not converge in %d iterations", domain = "R-stats"),
65,66c65,66
<     cat("\nMedian Polish Results (Dataset: \"", x$name, "\")\n", sep = "")
<     cat("\nOverall: ", x$overall, "\n\nRow Effects:\n", sep = "")
---
>     cat("\n", gettextf("Median Polish Results (Dataset: %s)", sQuote(x$name), domain = "R-stats"), "\n", sep = "")
>     cat("\n", gettext("Overall: ", domain = "R-stats"), x$overall, "\n\n", gettext("Row Effects:", domain = "R-stats"), "\n", sep = "")
68c68
<     cat("\nColumn Effects:\n")
---
>     cat("\n", gettext("Column Effects:", domain = "R-stats"), "\n", sep = "")
70c70
<     cat("\nResiduals:\n")
---
>     cat("\n", gettext("Residuals:", domain = "R-stats"), "\n", sep = "")
76c76
< plot.medpolish <- function(x, main = "Tukey Additivity Plot", ...)
---
> plot.medpolish <- function(x, main = gettext("Tukey Additivity Plot", domain = "R-stats"), ...)
79,80c79,80
< 	 main = main, xlab = "Diagnostic Comparison Values",
< 	 ylab = "Residuals", ...)
---
> 	 main = main, xlab = gettext("Diagnostic Comparison Values", domain = "R-stats"),
> 	 ylab = gettext("Residuals", domain = "R-stats"), ...)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/mlm.R R/src/library/stats/R/mlm.R
71c71
<         stop("'mlm' objects with weights are not supported")
---
>         stop("\"mlm\" objects with weights are not supported")
146c146
<             stop("X does not define a subspace of M")
---
>             stop("'X' does not define a subspace of 'M'")
166c166
<         c("\nContrast matrix", apply(format(T), 1L, paste, collapse=" "))
---
>         c("", gettextf("Contrast matrix %s", apply(format(T), 1L, paste, collapse=" "), domain = "R-stats"))
170,172c170,172
<           c("\nContrasts orthogonal to",
<             if (is.matrix(orig.X))  apply(format(X), 2L, paste, collapse=" ")
<             else deparse(formula(orig.X)),"",
---
>           c(
>             if (is.matrix(orig.X)) gettextf("Contrasts orthogonal to %s", apply(format(X), 2L, paste, collapse=" "), domain = "R-stats")
>             else gettextf("Contrasts orthogonal to %s", paste(deparse(formula(orig.X)), collapse = ""), domain = "R-stats"), "",
174,176c174,176
<             c("\nContrasts spanned by",
<               if (is.matrix(orig.M))  apply(format(M), 2L, paste, collapse=" ")
<               else deparse(formula(orig.M)),""
---
>             c(
>               if (is.matrix(orig.M)) gettextf("Contrasts spanned by %s" , apply(format(M), 2L, paste, collapse=" "), domain = "R-stats")
>               else gettextf("Contrasts spanned by %s", paste(deparse(formula(orig.M)), collapse = "") , domain = "R-stats"), ""
182,184c182,183
<                    method=c("Mauchly's test of sphericity", transformnote),
<                    data.name=paste("SSD matrix from",
<                    deparse(object$call), collapse=" "))
---
>                    method=c(gettext("Mauchly's test of sphericity"), transformnote),
>                    data.name=gettextf("SSD matrix from %s", paste(deparse(object$call), collapse = "")))
240c239
<         title <- "Analysis of Variance Table\n"
---
>         title <- paste(gettext("Analysis of Variance Table", domain = "R-stats"), "\n", sep = "")
242c241
<             c("\nContrast matrix", apply(format(T), 1L, paste, collapse=" "))
---
>         c("\n", gettextf("Contrast matrix %s", apply(format(T), 1L, paste, collapse=" "), domain = "R-stats"))
246,249c245,247
<               c("\nContrasts orthogonal to",
<                 if (is.matrix(orig.X))
<                 apply(format(X), 2L, paste, collapse=" ")
<                 else deparse(formula(orig.X)),"",
---
>           c("",
>             if (is.matrix(orig.X)) gettextf("Contrasts orthogonal to %s", apply(format(X), 2L, paste, collapse=" "), domain = "R-stats")
>             else gettextf("Contrasts orthogonal to %s", paste(deparse(formula(orig.X)), collapse = ""), domain = "R-stats"), "",
251,254c249,251
<                 c("\nContrasts spanned by",
<                   if (is.matrix(orig.M))
<                   apply(format(M), 2L, paste, collapse=" ")
<                   else deparse(formula(orig.M)),""
---
>             c("",
>               if (is.matrix(orig.M)) gettextf("Contrasts spanned by %s" , apply(format(M), 2L, paste, collapse=" "), domain = "R-stats")
>               else gettextf("Contrasts spanned by %s", paste(deparse(formula(orig.M)), collapse = ""), domain = "R-stats"), ""
264c261
<             p1 <- 1L:rk
---
>             p1 <- seq_len(rk)
267c264
<             nmeffects <- c("(Intercept)", attr(object$terms, "term.labels"))
---
>             nmeffects <- c(gettext("(Intercept)", domain = NA), attr(object$terms, "term.labels"))
285,286c282,283
<             epsnote <- c(paste(format(c("Greenhouse-Geisser epsilon:",
<                                         "Huynh-Feldt epsilon:")),
---
>             epsnote <- c(paste(format(c(gettext("Greenhouse-Geisser epsilon:", domain = "R-stats"),
>                                         gettext("Huynh-Feldt epsilon:", domain = "R-stats"))),
321,322c318
<                 stop(gettextf("residuals have rank %s < %s", rss.qr$rank, pp),
<                      domain = NA)
---
>                 stop(gettextf("residuals have rank %s < %s", rss.qr$rank, pp), domain = "R-stats")
326c322
<                                 "approx F", "num Df", "den Df", "Pr(>F)")))
---
>                                 gettext("approx F", domain = NA), gettext("num Df", domain = NA), gettext("den Df", domain = NA), gettext("Pr(>F)", domain = NA))))
331c327
<                 stats[i, 1L:4L] <-
---
>                 stats[i, seq_len(4)] <-
435,437c431
<         warning(gettextf("models with response %s removed because response differs from model 1",
<                          sQuote(deparse(responses[!sameresp]))),
<                 domain = NA)
---
>         warning(gettextf("models with response %s removed because response differs from model 1", sQuote(deparse(responses[!sameresp]))), domain = "R-stats")
468,470c462,463
<     title <- "Analysis of Variance Table\n"
<     topnote <- paste0("Model ", format(seq_len(nmodels)),": ", variables,
< 		      collapse = "\n")
---
>     title <- paste(gettext("Analysis of Variance Table"), "\n", sep = "")
>     topnote <- paste(gettextf("Model %s: %s", format(seq_len(nmodels)), variables, domain = "R-stats"), collapse = "\n")
472c465
<         c("\nContrast matrix", apply(format(T), 1L, paste, collapse = " "))
---
>         c(gettextf("Contrast matrix %s", apply(format(T), 1L, paste, collapse=" "), domain = "R-stats"))
476,478c469,471
<           c("\nContrasts orthogonal to",
<             if (is.matrix(orig.X))  apply(format(X), 2L, paste, collapse = " ")
<             else deparse(formula(orig.X)),"",
---
>           c("",
>             if (is.matrix(orig.X)) gettextf("Contrasts orthogonal to %s", apply(format(X), 2L, paste, collapse=" "), domain = "R-stats")
>             else gettextf("Contrasts orthogonal to %s", paste(deparse(formula(orig.X)), collapse = ""), domain = "R-stats"), "",
480,483c473,476
<             c("\nContrasts spanned by",
<               if (is.matrix(orig.M))  apply(format(M), 2L, paste, collapse = " ")
<               else deparse(formula(orig.M)),
<               "")
---
>             c("",
>               if (is.matrix(orig.M)) gettextf("Contrasts spanned by %s" , apply(format(M), 2L, paste, collapse=" "), domain = "R-stats")
>               else gettextf("Contrasts spanned by %s", paste(deparse(formula(orig.M)), collapse = "") , domain = "R-stats"), ""
>               )
495,496c488,489
<         epsnote <- c(paste(format(c("Greenhouse-Geisser epsilon:",
<                            "Huynh-Feldt epsilon:")),
---
>         epsnote <- c(paste(format(c(gettext("Greenhouse-Geisser epsilon:"),
>                           gettext("Huynh-Feldt epsilon:"))),
538,539c531
<             stop(gettextf("residuals have rank %s < %s", rss.qr$rank, pp),
<                  domain = NA)
---
>             stop(gettextf("residuals have rank %s < %s", rss.qr$rank, pp), domain = "R-stats")
544c536
<                  c(test, "approx F", "num Df", "den Df", "Pr(>F)"))
---
>                  c(test, gettext("approx F", domain = NA), gettext("num Df", domain = NA), gettext("den Df", domain = NA), gettext("Pr(>F)", domain = NA)))
552c544
<             stats[i, 1L:4] <-
---
>             stats[i, seq_len(4)] <-
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/models.R R/src/library/stats/R/models.R
72c72
<         stop(gettextf("invalid formula: %s", deparse2(x)), domain=NA)
---
>         stop(gettextf("invalid formula: %s", deparse2(x)), domain="R-stats")
83,84c83
<  "Using formula(x) is deprecated when x is a character vector of length > 1.
<   Consider formula(paste(x, collapse = \" \")) instead.")
---
>  gettext("Using formula(x) is deprecated when x is a character vector of length > 1. Consider 'formula(paste(x, collapse = \" \"))' instead.", domain = "R-stats"))
90c89
<         stop(gettextf("invalid formula %s: not a call", deparse2(x)), domain=NA)
---
>         stop(gettextf("invalid formula \"%s\": not a call", deparse2(x)), domain="R-stats")
98,99c97
< 				"invalid formula %s: assignment is deprecated",
< 				deparse2(x)))
---
> 				"invalid formula %s: assignment is deprecated", deparse2(x), domain = "R-stats"))
104c102
< 			deparse2(x), as.character(c.)))
---
> 			deparse2(x), as.character(c.), domain = "R-stats"))
108c106
<             stop(gettextf("invalid formula %s", deparse2(x)), domain=NA)
---
>             stop(gettextf("invalid formula %s", deparse2(x)), domain = "R-stats")
210c208
<                                   warning(warningCondition(message = paste(sprintf(
---
>                                   warning(warningCondition(message = paste(gettextf(
212c210
< 									response),
---
> 									response, domain = "R-stats"),
215c213
<                                       call = reformCall)) # , domain=NA
---
>                                       call = reformCall), domain = NA)
229,231c227
<             stop(gettextf("'termobj' must be a object of class %s",
<                           dQuote("terms")),
<                  domain = NA)
---
>             stop(gettextf("'%s' argument must be an object of class %s", "termobj", dQuote("terms")), domain = "R-stats")
418,419c414,415
<                  call. = FALSE, domain = NA)
<         else
---
>                  call. = FALSE, domain = "R-stats")
>         else {
423c419
<                  call. = FALSE, domain = NA)
---
>                  call. = FALSE, domain = "R-stats") }
532c528
<                                             "'newdata' had %d rows"),
---
>                                             "'newdata' had %d rows", domain = "R-stats"),
536c532
<                                            "but variables found have %d rows")),
---
>                                            "but variables found have %d rows", domain = "R-stats")),
560c556
<                             domain = NA)
---
>                             domain = "R-stats")
568c564
<                                               "factor %s has new levels %s"),
---
>                                               "factor %s has new levels %s", domain = "R-stats"),
586,588c582,583
< 		    warning(gettext(sprintf(
< 				"contrasts dropped from factor %s due to missing levels",
< 					    nm), domain = NA), call. = FALSE)
---
> 		    warning(gettextf("contrasts dropped from factor %s due to missing levels", nm, domain = "R-stats"), 
> 		            call. = FALSE)
599c594,600
< model.weights <- function(x) x$"(weights)"
---
> #model.weights <- function(x) x$"(weights)"
> model.weights <- function(x) {
>    idx <- which(names(x) == gettext("(weights)", domain = "R-stats"))
>    if(length(idx) > 0L) {
> 	x[[idx]]
>    } else x$"(weights)"
> }
605c606,610
< 	ans <- x$"(offset)"
---
> #		ans <- x$"(offset)"
> 	idx <- which(names(x) == gettext("(offset)", domain = "R-stats"))
> 	if(length(idx) > 0L) {
> 	 ans <- x[[idx]]
> 	} else ans <- x$"(offset)"
610,611c615,622
<     else ans <- x$"(offset)"
<     if(!is.null(ans) && !is.numeric(ans)) stop("'offset' must be numeric")
---
> #    else ans <- x$"(offset)"
>     else { 
> 	idx <- which(names(x) == gettext("(offset)", domain = "R-stats"))
> 	if(length(idx) > 0L) {
> 	 ans <- x[[idx]]
> 	} else ans <- x$"(offset)"
>     }
>     if(!is.null(ans) && !is.numeric(ans)) stop(gettextf("'%s' argument must be numeric", "offset"))
652c663
<                 stop("'contrasts.arg' argument must be named")
---
>                 stop(gettextf("'%s' argument must be named", "contrasts.arg"))
655,656c666
<                     warning(gettextf("variable '%s' is absent, its contrast will be ignored", nn),
<                             domain = NA)
---
>                     warning(gettextf("variable '%s' is absent, its contrast will be ignored", nn), domain = "R-stats")
681c691
< 		warning('using type = "numeric" with a factor response will be ignored')
---
> 		warning("using type = \"numeric\" with a factor response will be ignored")
694c704
< 	} else stop("invalid 'data' argument")
---
> 	} else stop(gettextf("invalid '%s' argument", "data"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/nafns.R R/src/library/stats/R/nafns.R
31c31
<     if(all(ok)) object else stop("missing values in object")
---
>     if(all(ok)) object else stop(gettextf("missing values in '%s' argument", "object"))
149c149
< 	stop("invalid argument 'omit'")
---
> 	stop(gettextf("invalid '%s' argument", "omit"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/nlm.R R/src/library/stats/R/nlm.R
27c27
< 	stop("'print.level' must be in {0,1,2}")
---
> 	stop(gettextf("'%s' argument must be 0, 1 or 2", "print.level"))
63c63
<         stop("'interval' must be a vector of length 2")
---
>         stop(gettextf("'%s' argument must be of length %d", "interval", 2))
66,67c66,67
<     if(is.na(f.lower)) stop("f.lower = f(lower) is NA")
<     if(is.na(f.upper)) stop("f.upper = f(upper) is NA")
---
>     if(is.na(f.lower)) stop("'f.lower = f(lower)' is NA")
>     if(is.na(f.upper)) stop("'f.upper = f(upper)' is NA")
73c73
< 		  stop("invalid 'extendInt'; please report"))
---
> 		  stop("invalid 'extendInt' argument; please report"))
82,84c82,87
< 	if(trace)
< 	    cat(sprintf("search in [%g,%g]%s", lower, upper,
< 			if(trace >= 2)"\n" else " ... "))
---
> 	if(trace) {
> 	  if(trace >= 2)
> 	    cat(gettextf("search in [%g,%g]\n", lower, upper, domain = "R-stats"))
> 	  else
> 	    cat(gettextf("search in [%g,%g] ... ", lower, upper, domain = "R-stats"))
> 	}
94,95c97
< 		    stop(gettextf("no sign change found in %d iterations", it-1),
< 			 domain=NA)
---
> 		    stop(gettextf("no sign change found in %d iterations", it-1), domain=NA)
119,120c121
< 		    stop(gettextf("no sign change found in %d iterations", it-1),
< 			 domain=NA)
---
> 		    stop(gettextf("no sign change found in %d iterations", it-1), domain=NA)
128,129c129
< 		    stop(gettextf("no sign change found in %d iterations", it-1),
< 			 domain=NA)
---
> 		    stop(gettextf("no sign change found in %d iterations", it-1), domain=NA)
142c142
< 	     else "f() values at end points not of opposite sign")
---
> 	     else "'f()' values at end points are not of opposite sign")
160,161c160,161
< 			     "_NOT_ converged in %d iteration",
< 			     "_NOT_ converged in %d iterations"),
---
> 			     "'uniroot()' method did _NOT_ converge in %d iteration",
> 			     "'uniroot()' method did _NOT_ converge in %d iterations", domain = "R-stats"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/nlminb.R R/src/library/stats/R/nlminb.R
22,31c22,31
< 	   "3" = "X-convergence (3)",
< 	   "4" = "relative convergence (4)",
< 	   "5" = "both X-convergence and relative convergence (5)",
< 	   "6" = "absolute function convergence (6)",
< 
< 	   "7" = "singular convergence (7)",
< 	   "8" = "false convergence (8)",
< 	   "9" = "function evaluation limit reached without convergence (9)",
< 	   "10" = "iteration limit reached without convergence (10)",
< 	   "14" = "storage only has been allocated (14)",
---
> 	   "3" = gettext("X-convergence (3)"),
> 	   "4" = gettext("relative convergence (4)"),
> 	   "5" = gettext("both X-convergence and relative convergence (5)"),
> 	   "6" = gettext("absolute function convergence (6)"),
> 
> 	   "7" = gettext("singular convergence (7)"),
> 	   "8" = gettext("false convergence (8)"),
> 	   "9" = gettext("function evaluation limit reached without convergence (9)"),
> 	   "10" = gettext("iteration limit reached without convergence (10)"),
> 	   "14" = gettext("storage only has been allocated (14)"),
33,34c33,34
< 	   "15" = "LIV too small (15)",
< 	   "16" = "LV too small (16)",
---
> 	   "15" = gettext("LIV too small (15)"),
> 	   "16" = gettext("LV too small (16)"),
36,37c36,37
< 	   "63" = "fn cannot be computed at initial par (63)",
< 	   "65" = "gr cannot be computed at initial par (65)",
---
> 	   "63" = gettext("fn cannot be computed at initial par (63)"),
> 	   "65" = gettext("gr cannot be computed at initial par (65)"),
39c39
< 	   "300" = "initial par violates constraints",
---
> 	   "300" = gettext("initial par violates constraints"),
41c41
< 	   sprintf("See PORT documentation.  Code (%d)", iv1))
---
> 	   gettextf("See PORT documentation.  Code (%d)", iv1))
87c87
<                                      "unrecognized control elements named %s ignored"),
---
>                                      "unrecognized control elements named %s ignored", domain = "R-stats"),
132c132
< 		 sprintf("'control' component '%s' = %g, is out of range",
---
> 		 gettextf("'control' component '%s' = %g, is out of range",
135c135
< 		 sprintf("V[IV[1]] = V[%d] = %g is out of range (see PORT docu.)",
---
> 		 gettextf("V[IV[1]] = V[%d] = %g is out of range (see PORT docu.)",
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/nls-profile.R R/src/library/stats/R/nls-profile.R
57c57
<                              stop("'params' has wrong length")
---
>                              stop(gettextf("'%s' argument is of the wrong length", "params"))
63c63
<                                  stop("'varying' must be in seq_along(pars)")
---
>                                  stop("'varying' argument must be in 'seq_along(pars)'")
67c67
<                                  stop("'varying' has wrong length")
---
>                                  stop(gettextf("'%s' argument is of the wrong length", "varying"))
93c93
<                      } else stop("invalid argument to 'getProfile'")
---
>                      } else stop("invalid argument passed to 'getProfile()'")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/nls.R R/src/library/stats/R/nls.R
402c402
<                                      "unrecognized control elements named %s ignored"),
---
>                                      "unrecognized control elements named %s ignored", domain = "R-stats"),
508,511c508,510
<                 warning("No starting values specified for some parameters.\n",
<                         "Initializing ", paste(sQuote(nnn), collapse=", "),
<                         " to '1.'.\n",
<                         "Consider specifying 'start' or using a selfStart model", domain = NA)
---
>                 warning("No starting values specified for some parameters.", "\n",
>                         gettextf("Initializing %s to '1.'.", paste(sQuote(nnn), collapse=", ")), "\n",
>                         "Consider specifying 'start' or using a selfStart model", domain = "R-stats", sep = "")
516a516
> 		{
518c518,519
<                               paste(nnn, collapse=", ")), domain = NA)
---
>                               paste(nnn, collapse=", ")), domain = "R-stats")
> 		}
526c527
<                                      "fitting parameters %s without any variables"),
---
>                                      "fitting parameters %s without any variables", domain = "R-stats"),
547c548
<                 warning("argument 'subset' will be ignored")
---
>                 warning(gettextf("'%s' argument will be ignored", "subset"))
549c550
<                 warning("argument 'na.action' will be ignored")
---
>                 warning(gettextf("'%s' argument will be ignored", "na.action"))
607c608
< 	    warning('upper and lower bounds ignored unless algorithm = "port"')
---
> 	    warning("upper and lower bounds ignored unless 'algorithm = \"port\"'")
622c623
< 	    msg <- paste("Convergence failure:", msg.nls)
---
> 	    msg <- gettextf("Convergence failure: %s", msg.nls)
706,707c707
<                  cat("\nAlgorithm \"port\", convergence message: ",
<                      stopMessage, "\n", sep = "")
---
>                  cat("\n", gettext("Algorithm \"port\", convergence message: ", domain = "R-stats"), stopMessage, "\n", sep = "")
710,713c710,716
<                      cat("\nNumber of iterations",
<                          if(isConv) "to convergence:" else "till stop:", finIter,
<                          "\nAchieved convergence tolerance:",
<                          format(finTol, digits = digits))
---
> 		     cat("\n")
> 		     if(isConv)
> 			cat(gettext("Number of iterations to convergence:", domain = "R-stats"), finIter)
> 		     else
> 			cat(gettext("Number of iterations till stop:", domain = "R-stats"), finIter)
> 		     cat("\n")
> 		     cat(gettext("Achieved convergence tolerance:", domain = "R-stats"), format(finTol, digits = digits))
717c720
<                      cat("Reason stopped:", stopMessage)
---
>                      cat(gettext("Reason stopped:", domain = "R-stats"), stopMessage)
728,730c731,733
<     cat("Nonlinear regression model\n")
<     cat("  model: ", deparse(formula(x)), "\n", sep = "")
<     cat("   data: ", deparse(x$data), "\n", sep = "")
---
>     cat(gettext("Nonlinear regression model", domain = "R-stats"), "\n", sep = "")
>     cat("  ", gettext("Model:", domain = "R-stats"), " ", deparse(formula(x)), "\n", sep = "")
>     cat("   ", gettext("Data:", domain = "R-stats"), " ", deparse(x$data), "\n", sep = "")
732,734c735,738
<     cat(" ", if(!is.null(x$weights) && diff(range(x$weights))) "weighted ",
< 	"residual sum-of-squares: ", format(x$m$deviance(), digits = digits),
< 	"\n", sep = "")
---
>     if(!is.null(x$weights) && diff(range(x$weights)))
>     cat(" ", gettext("Weighted residual sum-of-squares:", domain = "R-stats"), " ", format(x$m$deviance(), digits = digits), "\n", sep = "")
>     else
>     cat(" ", gettext("Residual sum-of-squares:", domain = "R-stats"), " ", format(x$m$deviance(), digits = digits), "\n", sep = "")
744c748
<     cat("\nFormula: ",
---
>     cat("\n", gettext("Formula:", domain = "R-stats"), " ",
749c753
<     cat("\nParameters:\n")
---
>     cat("\n", gettext("Parameters:", domain = "R-stats"), "\n", sep = "")
752,753c756
<     cat("\nResidual standard error:",
<         format(signif(x$sigma, digits)), "on", rdf, "degrees of freedom")
---
>     cat("\n", gettextf("Residual standard error: %s on %d degrees of freedom", format(signif(x$sigma, digits)), rdf, domain = "R-stats"), sep = "")
759c762
<             cat("\nCorrelation of Parameter Estimates:\n")
---
>             cat("\n", gettext("Correlation of Parameter Estimates:", domain = "R-stats"), "\n", sep = "")
793c796
<     lab <- "Fitted values"
---
>     lab <- gettext("Fitted values")
809c812
<         attr(val, "label") <- "Standardized residuals"
---
>         attr(val, "label") <- gettext("Standardized residuals")
814c817
<         lab <- "Residuals"
---
>         lab <- gettext("Residuals")
857c860
<     stop("anova is only defined for sequences of \"nls\" objects")
---
>     stop(gettextf("'anova()' function is only defined for sequences of objects of class %s", dQuote("nls")))
870c873
<                 domain = NA)
---
>                 domain = "R-stats")
875c878
<         stop("'anova' is only defined for sequences of \"nls\" objects")
---
>         stop(gettextf("'anova()' function is only defined for sequences of objects of class %s", dQuote("nls")))
903,905c906,907
<     title <- "Analysis of Variance Table\n"
<     topnote <- paste0("Model ", format(1L:nmodels), ": ", models,
<                       collapse = "\n")
---
>     title <- paste(gettext("Analysis of Variance Table"), "\n", sep = "")
>     topnote <- paste(gettextf("Model %s:", format(1L:nmodels)), " ", models, sep = "", collapse = "\n")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/nlsFunc.R R/src/library/stats/R/nlsFunc.R
39c39
<                           deparse(as.vector(object))), domain = NA)
---
>                           deparse(as.vector(object))), domain = "R-stats")
50c50
<                         stop(gettextf("'%s' cannot be of mode '%s'",
---
>                         stop(gettextf("'%s' argument cannot be of mode '%s'",
52c52
<                              domain = NA)
---
>                              domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/optim.R R/src/library/stats/R/optim.R
50,51c50,52
<     if(length(noNms <- namc[!namc %in% nmsC]))
< 	warning("unknown names in control: ", paste(noNms,collapse=", "))
---
>     if(length(noNms <- namc[!namc %in% nmsC])) {
> 	warning(gettextf("unknown names in control: %s", paste(noNms,collapse=", "), domain = "R-stats"), domain = NA)
> 	}
62c63
< 	stop('method = "Brent" is only available for one-dimensional optimization')
---
> 	stop("method = \"Brent\" is only available for one-dimensional optimization")
67c68
<            stop("'lower' and 'upper' must be finite values")
---
>            stop("'lower' and 'upper' arguments must be finite values")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/pairwise.R R/src/library/stats/R/pairwise.R
25c25
<     DNAME <- paste(deparse(substitute(x)), "and", deparse(substitute(g)))
---
>     DNAME <- gettextf("%s and %s", paste(deparse(substitute(x)), collapse = ""), paste(deparse(substitute(g)), collapse = ""))
31c31
<         METHOD <- "t tests with pooled SD"
---
>         METHOD <- gettext("t tests with pooled SD", domain = "R-stats")
49,50c49,50
<         METHOD <- if (paired) "paired t tests"
< 		  else "t tests with non-pooled SD"
---
>         METHOD <- if (paired) gettext("Paired t-tests", domain = "R-stats")
> 		  else gettext("t tests with non-pooled SD", domain = "R-stats")
70c70
<     DNAME <- paste(deparse(substitute(x)), "and", deparse(substitute(g)))
---
>     DNAME <- gettextf("%s and %s", deparse(substitute(x)), deparse(substitute(g)), domain = "R-stats")
72,73c72,73
<     METHOD <- if (paired) "Wilcoxon signed rank test"
<         else "Wilcoxon rank sum test"
---
>     METHOD <- if (paired) gettext("Wilcoxon signed rank test", domain = "R-stats")
>         else gettext("Wilcoxon rank sum test", domain = "R-stats")
90c90
<     METHOD <- "Pairwise comparison of proportions"
---
>     METHOD <- gettext("Pairwise comparison of proportions", domain = "R-stats")
99c99
<         DNAME <- paste(DNAME, "out of", deparse(substitute(n)))
---
>         DNAME <- gettextf("%s out of %s", deparse(substitute(x)), deparse(substitute(n)), domain = "R-stats")
101c101
<             stop("'x' and 'n' must have the same length")
---
>             stop(gettextf("'%s' and '%s' arguments must have the same length", "x", "n"))
138,139c138,139
<     cat("\n\tPairwise comparisons using", x$method, "\n\n")
<     cat("data: ", x$data.name, "\n\n")
---
>     cat("\n\t", gettextf("Pairwise comparisons using %s", x$method, domain = "R-stats"), "\n\n", sep = "")
>     cat(gettext("Data: ", domain = "R-stats"), x$data.name, "\n\n", sep = "")
143c143
<     cat("\nP value adjustment method:", x$p.adjust.method, "\n")
---
>     cat("\n", gettext("P-value adjustment method: ", domain = "R-stats"), x$p.adjust.method, "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/power.R R/src/library/stats/R/power.R
26c26
< 	stop("exactly one of 'n', 'delta', 'sd', 'power', and 'sig.level' must be NULL")
---
> 	stop(gettextf("exactly one of '%s', '%s', '%s', '%s', and '%s' arguments must be NULL", "n", "delta", "sd", "power", "sig.level"))
29c29
< 	stop("'sig.level' must be numeric in [0, 1]")
---
> 	stop("'sig.level' argument must be numeric in [0, 1]")
67c67
< 	stop("internal error", domain = NA)
---
> 	stop("internal error", domain = "R-stats")
69,70c69,70
< 		   paired = "n is number of *pairs*, sd is std.dev. of *differences* within pairs",
< 		   two.sample = "n is number in *each* group", NULL)
---
> 		   paired = gettext("'n' is number of *pairs*, 'sd' is std.dev. of *differences* within pairs"),
> 		   two.sample = gettext("n is number in *each* group"), NULL)
72,76c72,75
<     METHOD <- paste(switch(type,
< 			   one.sample = "One-sample",
< 			   two.sample = "Two-sample",
< 			   paired = "Paired"),
< 		    "t test power calculation")
---
>     METHOD <- switch(type,
> 			   one.sample = gettext("One-sample t test power calculation"),
> 			   two.sample = gettext("Two-sample t test power calculation"),
> 			   paired = gettext("Paired t test power calculation"))
90c89
< 	stop("exactly one of 'n', 'p1', 'p2', 'power', and 'sig.level' must be NULL")
---
> 	stop(gettextf("exactly one of '%s', '%s', '%s', '%s', and '%s' arguments must be NULL", "n", "p1", "p2", "power", "sig.level"))
93c92
< 	stop("'sig.level' must be numeric in [0, 1]")
---
> 	stop("'sig.level' argument must be numeric in [0, 1]")
142c141
< 	stop("internal error", domain = NA)
---
> 	stop("internal error", domain = "R-stats")
147,148c146,147
<                    note = "n is number in *each* group",
<                    method = "Two-sample comparison of proportions power calculation"),
---
>                    note = gettext("n is number in *each* group"),
>                    method = gettext("Two-sample comparison of proportions power calculation")),
157,159c156,157
<     cat(paste(format(names(x), width = 15L, justify = "right"),
< 	      format(x, digits=digits), sep = " = "), sep = "\n")
<     if(!is.null(note)) cat("\n", "NOTE: ", note, "\n\n", sep = "") else cat("\n")
---
>     cat(paste(format(names(x), width = 15L, justify = "right"), format(x, digits=digits), sep = " = "), sep = "\n")
>     if(!is.null(note)) cat("\n", gettext("NOTE: ", domain = "R-stats"), note, "\n\n", sep = "") else cat("\n")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ppr.R R/src/library/stats/R/ppr.R
127c127
< 	cat("Call:\n")
---
> 	cat(gettext("Call:", domain = "R-stats"), "\n", sep = "")
131c131
<     cat("\nGoodness of fit:\n")
---
>     cat("\n", gettext("Goodness of fit:", domain = "R-stats"), "\n", sep = "")
147c147
<     cat("\nProjection direction vectors ('alpha'):\n")
---
>     cat("\n", gettext("Projection direction vectors ('alpha'):", domain = "R-stats"), "\n", sep = "")
149c149
<     cat("\nCoefficients of ridge terms ('beta'):\n")
---
>     cat("\n", gettext("Coefficients of ridge terms ('beta'):", domain = "R-stats"), "\n", sep = "")
152c152
< 	cat("\nEquivalent df for ridge terms:\n")
---
> 	cat("\n", gettext("Equivalent df for ridge terms:", domain = "R-stats"), "\n", sep = "")
173,174c173,174
< 	f <- matrix(sm[jf+1L:(mu*n)],n, mu)
< 	t <- matrix(sm[jt+1L:(mu*n)],n, mu)
---
> 	f <- matrix(sm[jf+seq_len(mu*n)],n, mu)
> 	t <- matrix(sm[jt+seq_len(mu*n)],n, mu)
182c182
<     for(i in 1L:x$mu) {
---
>     for(i in seq_len(x$mu)) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/prcomp.R R/src/library/stats/R/prcomp.R
95c95
<     cat(sprintf("Standard deviations (1, .., p=%d):\n", length(x$sdev)))
---
>     cat(gettext("Standard deviations (1, .., p=%d):", length(x$sdev), domain = "R-stats"), "\n", sep = "")
98c98
<     cat(sprintf("\nRotation (n x k) = (%d x %d):\n", d[1], d[2]))
---
>     cat("\n", gettext("Rotation (n x k) = (%d x %d):", d[1], d[2], domain = "R-stats"), "\n", sep = "")
101c101
<         cat("\nRotated variables:\n")
---
>         cat("\n", gettext("Rotated variables:", domain = "R-stats"), "\n", sep = "")
128c128
< 	cat(sprintf("Importance of first k=%d (out of %d) components:\n", k, p))
---
> 	cat(gettextf("Importance of first k=%d (out of %d) components:\n", k, p, domain = "R-stats"))
131c131
< 	cat("Importance of components:\n")
---
> 	cat(gettext("Importance of components:", domain = "R-stats"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/princomp-add.R R/src/library/stats/R/princomp-add.R
52c52
<     cat("Importance of components:\n")
---
>     cat(gettext("Importance of components:", domain = "R-stats"), "\n", sep = "")
57c57
<         cat("\nLoadings:\n")
---
>         cat("\n", gettext("Loadings:", domain = "R-stats"), "\n", sep = "")
83c83
<                 ylab = "Variances", ...)
---
>                 ylab = gettext("Variances"), ...)
86c86
<              xlab = "", ylab = "Variances", ...)
---
>              xlab = "", ylab = gettext("Variances"), ...)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/princomp.R R/src/library/stats/R/princomp.R
97c97
<     cn <- paste0("Comp.", 1L:ncol(cv))
---
>     cn <- paste0("Comp.", seq_len(ncol(cv)))
127,128c127,128
<     cat("Call:\n"); dput(x$call, control=NULL)
<     cat("\nStandard deviations:\n")
---
>     cat(gettext("Call:", domain = "R-stats"), "\n", sep = ""); dput(x$call, control=NULL)
>     cat("\n", gettext("Standard deviations:", domain = "R-stats"), "\n", sep = "")
130,131c130
<     cat("\n", length(x$scale), " variables and ", x$n.obs,
<         "observations.\n")
---
>     cat("\n", sprintf(ngettext(length(x$scale), "%d variable and", "%d variables and", domain = "R-stats"), length(x$scale)), " ", sprintf(ngettext(x$n.obs, "%d observation.", "%d observations.", domain = "R-stats"), x$n.obs), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/proj.R R/src/library/stats/R/proj.R
39c39
< 	stop("'proj' is not implemented for multiple responses")
---
> 	stop("'proj()' is not implemented for multiple responses")
49c49
< 	    nmeffect <- c("(Intercept)",
---
> 	    nmeffect <- c(gettext("(Intercept)", domain = "R-stats"),
93c93
< 	stop("'proj' is not implemented for multiple responses")
---
> 	stop("'proj()' is not implemented for multiple responses")
96c96
< 	if(!is.na(int <- match("(Intercept)", pnames)))
---
> 	if(!is.na(int <- match(gettext("(Intercept)", domain = "R-stats"), pnames)))
108c108,112
< 	if(!is.na(int)) result <- c("(Intercept)" = "(Intercept)", result)
---
> 	if(!is.na(int)) {
> 	  aaa <- gettext("(Intercept)", domain = "R-stats");
> 	  names(aaa) <- gettext("(Intercept)", domain = "R-stats");
> 	  result <- c(aaa, result)
> 	}
141c145
< 	if(!is.na(int <- match("(Intercept)", pnames))) pnames <- pnames[-int]
---
> 	if(!is.na(int <- match(gettext("(Intercept)", domain = "R-stats"), pnames))) pnames <- pnames[-int]
156,157c160,164
< 	if(!is.na(int))
< 	    result <- c("(Intercept)" = "(Intercept)", result)
---
> 	if(!is.na(int)) {
> 	    aaa <- gettext("(Intercept)", domain = "R-stats")
> 	    names(aaa) <- gettext("(Intercept)", domain = "R-stats")
> 	    result <- c(aaa, result)
> 	}
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/qqnorm.R R/src/library/stats/R/qqnorm.R
22,23c22,23
<     function(y, ylim, main = "Normal Q-Q Plot",
< 	     xlab = "Theoretical Quantiles", ylab = "Sample Quantiles",
---
>     function(y, ylim, main = gettext("Normal Q-Q Plot"),
> 	     xlab = gettext("Theoretical Quantiles"), ylab = gettext("Sample Quantiles"),
31c31
<         stop("y is empty or has only NAs")
---
>         stop("'y' argument is empty or has only NA values")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/quantile.R R/src/library/stats/R/quantile.R
31c31
< 	       stop("'type' must be 1 or 3 for ordered factors")
---
> 	       stop("'type' argument must be 1 or 3 for ordered factors")
42c42
< 	stop("'probs' outside [0,1]")
---
> 	stop(gettextf("'%s' argument is outside [0,1]", "probs"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/r2dtable.R R/src/library/stats/R/r2dtable.R
22c22
< 	stop("invalid argument 'n'")
---
> 	stop(gettextf("invalid '%s' argument", "n"))
24c24
< 	stop("invalid argument 'r'")
---
> 	stop(gettextf("invalid '%s' argument", "r"))
26c26
< 	stop("invalid argument 'c'")
---
> 	stop(gettextf("invalid '%s' argument", "c"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/relevel.R R/src/library/stats/R/relevel.R
22c22
<     stop("'relevel' only for (unordered) factors")
---
>     stop("'relevel' only for unordered factors")
31c31
<         stop("'ref' must be of length one")
---
>         stop(gettextf("'%s' argument must be of length %d", "ref", 1))
38c38
<         stop(gettextf("ref = %d must be in 1L:%d", ref, nlev), domain = NA)
---
>         stop(gettextf("ref = %d must be in 1L:%d", ref, nlev), domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/reshape.R R/src/library/stats/R/reshape.R
157c157
<                                  paste(names(rval)[!really.constant],collapse = ",")), domain = NA)
---
>                                  paste(names(rval)[!really.constant],collapse = ","), domain = "R-stats"), domain = NA)
167,168c167,168
<                 warning(sprintf("multiple rows match for %s=%s: first taken",
<                                 timevar, times[i]), domain = NA)
---
>                 warning(gettextf("multiple rows match for %s=%s: first taken",
>                                 timevar, times[i], domain = "R-stats"), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/runmed.R R/src/library/stats/R/runmed.R
30c30
<     if(is.na(n)) stop(gettextf("invalid value of %s", "length(x)"), domain = NA)
---
>     if(is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
32,33c32,33
<     if(is.na(k)) stop(gettextf("invalid value of %s", "'k'"), domain = NA)
<     if(k < 0L) stop("'k' must be positive")
---
>     if(is.na(k)) stop(gettextf("invalid '%s' value", "k"))
>     if(k < 0L) stop(gettextf("'%s' argument must be positive", "k"))
35,36c35
<         warning(gettextf("'k' must be odd!  Changing 'k' to %d",
<                          k <- as.integer(1+ 2*(k %/% 2))), domain = NA)
---
>         warning(gettextf("'k' must be odd!  Changing 'k' to %d", k <- as.integer(1+ 2*(k %/% 2))), domain = NA)
42,43c41
<         warning(gettextf("'k' is bigger than 'n'!  Changing 'k' to %d",
<                          k <- as.integer(1+ 2*((n - 1)%/% 2))), domain = NA)
---
>         warning(gettextf("'k' is bigger than 'n'!  Changing 'k' to %d", k <- as.integer(1+ 2*((n - 1)%/% 2))), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/selfStart.R R/src/library/stats/R/selfStart.R
45c45
<                        "parameters %s do not occur in the model formula"),
---
>                        "parameters %s do not occur in the model formula", domain = "R-stats"),
103,104c103
<         stop("old-style self-starting model functions\n",
<              "are no longer supported.\n",
---
>         stop("old-style self-starting model functions are no longer supported.\n",
106,113c105,106
<              "Use\n",
<              "  SSfpl instead of fpl,\n",
<              "  SSfol instead of first.order.log,\n",
<              "  SSbiexp instead of biexp,\n",
<              "  SSlogis instead of logistic.\n",
<              "If writing your own selfStart model, see\n",
<              "  \"help(selfStart)\"\n",
<              "for the new form of the \"initial\" attribute.", domain = NA)
---
>              "Use\n  SSfpl instead of fpl,\n  SSfol instead of first.order.log,\n  SSbiexp instead of biexp,\n  SSlogis instead of logistic.\n",
>              "If writing your own selfStart model, see \"help(selfStart)\" for the new form of the \"initial\" attribute.", domain = "R-stats")
115,116c108
<     stop(gettextf("no 'getInitial' method found for \"%s\" objects",
<                   data.class(object)), domain = NA)
---
>     stop(gettextf("no 'getInitial' method found for %s objects", dQuote(data.class(object))), domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/smooth.R R/src/library/stats/R/smooth.R
30c30
<     if(is.na(iend <- pmatch(endrule, rules))) stop("invalid 'endrule' argument")
---
>     if(is.na(iend <- pmatch(endrule, rules))) stop(gettextf("invalid '%s' argument", "endrule"))
58,62c58,70
<     cat(attr(x,"kind"), "Tukey smoother resulting from ",
< 	deparse(attr(x, "call")),"\n")
<     if(attr(x,"twiced"))		cat(" __twiced__ ")
<     if(!is.null(it <- attr(x,"iter")))		cat(" used", it, "iterations\n")
<     if(!is.null(ch <- attr(x,"changed")))	cat(if(!ch)"NOT", "changed\n")
---
>     cat(gettextf("%s Tukey smoother resulting from %s", attr(x,"kind"), sQuote(paste(deparse(attr(x, "call")), collapse = "")), domain = "R-stats"),"\n", sep = "")
>     if(attr(x,"twiced")) {
>       if(!is.null(it <- attr(x,"iter")))		cat(sprintf(ngettext(it, "__twiced__ used %d iteration", "__twiced__ used %d iterations", domain = "R-stats"), it), "\n", sep = "")
>       if(is.null(it <- attr(x,"iter")) && !is.null(ch <- attr(x,"changed"))) {
> 	 if(!ch) cat(gettext("__twiced__ NOT changed:", domain = "R-stats"), "\n", sep = "")
> 	 else cat(gettext("__twiced__ changed:", domain = "R-stats"), "\n", sep = "")
> 	 }
>     else if(!is.null(ch <- attr(x,"changed"))) if(!ch) cat(gettext("NOT changed:", domain = "R-stats"), "\n", sep = "") else cat(gettext("changed:", domain = "R-stats"), "\n", sep = "")
>     } else {
>      if(!is.null(it <- attr(x,"iter")))		cat(sprintf(ngettext(it, " used %d iteration", " used %d iterations", domain = "R-stats"), it), "\n", sep = "")
>      if(!is.null(ch <- attr(x,"changed")))	if(!ch) cat(gettext("NOT changed:", domain = "R-stats"), "\n", sep = "") else cat(gettext("changed:", domain = "R-stats"), "\n", sep = "")
>     }
> 
74,78c82,94
<     cat(attr(object,"kind"), "Tukey smoother resulting from\n",
< 	deparse(attr(object, "call")),";  n =", length(object),"\n")
<     if(attr(object,"twiced"))		cat(" __twiced__ ")
<     if(!is.null(it <- attr(object,"iter")))	cat(" used", it, "iterations\n")
<     if(!is.null(ch <- attr(object,"changed")))	cat(if(!ch)" NOT", "changed\n")
---
>     cat(gettextf("%s Tukey smoother resulting from %s", attr(object,"kind"), sQuote(paste(deparse(attr(object, "call")), collapse = "")), domain = "R-stats"), ";  n = ", length(object), "\n", sep = "")
>     if(attr(object,"twiced")) {
>       if(!is.null(it <- attr(object,"iter")))		cat(sprintf(ngettext(it, "__twiced__ used %d iteration", "__twiced__ used %d iterations", domain = "R-stats"), it), "\n", sep = "")
>       if(is.null(it <- attr(object,"iter")) && !is.null(ch <- attr(object,"changed"))) {
> 	 if(!ch) cat(gettext("__twiced__ NOT changed:", domain = "R-stats"), "\n", sep = "")
> 	 else cat(gettext("__twiced__ changed:", domain = "R-stats"), "\n", sep = "")
> 	 }
>     else if(!is.null(ch <- attr(object,"changed"))) if(!ch) cat(gettext("NOT changed:", domain = "R-stats"), "\n", sep = "") else cat(gettext("changed:", domain = "R-stats"), "\n", sep = "")
>     } else {
>      if(!is.null(it <- attr(object,"iter")))		cat(sprintf(ngettext(it, " used %d iteration", " used %d iterations", domain = "R-stats"), it), "\n", sep = "")
>      if(!is.null(ch <- attr(object,"changed")))	if(!ch) cat(gettext("NOT changed:", domain = "R-stats"), "\n", sep = "") else cat(gettext("changed:", domain = "R-stats"), "\n", sep = "")
>     }
> 
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/smspline.R R/src/library/stats/R/smspline.R
34c34
<     message(".nknots.smspl() is now exported; use it instead of n.knots()")
---
>     message("'.nknots.smspl()' function is now exported; use it instead of 'n.knots()' function")
55c55
<         stop("invalid 'control.spar'")
---
>         stop(gettextf("invalid '%s' value", "control.spar"))
68c68
< 	    if(n != length(w)) stop("lengths of 'x' and 'w' must match")
---
> 	    if(n != length(w)) stop(gettextf("lengths of '%s' and '%s' arguments must match", "x", "w"))
77c77
<     if(!match(keep.stuff, c(FALSE,TRUE))) stop("invalid 'keep.stuff'")
---
>     if(!match(keep.stuff, c(FALSE,TRUE))) stop(gettextf("invalid '%s' argument", "keep.stuff"))
81c81
<     if(nx <= 3L) stop("need at least four unique 'x' values")
---
>     if(nx <= 3L) stop("at least four unique 'x' values are needed")
105c105
< 	stop("'cv' must not be NA when 'df' is specified")
---
> 	stop("'cv' argument must not be NA when 'df' argument is specified")
113c113
< 	    stop("Numeric 'all.knots' must be strictly increasing")
---
> 	    stop("Numeric 'all.knots' argument must be strictly increasing")
115c115
< 	    warning("'all.knots' is vector of knots; 'nknots' specification is disregarded")
---
> 	    warning("'all.knots' argument is vector of knots; 'nknots' specification is disregarded")
118c118
< 	    stop("numeric 'all.knots' must cover [0,1] (= the transformed data-range)")
---
> 	    stop("numeric 'all.knots' argument must cover [0,1] (= the transformed data-range)")
126c126
<                 warning("'all.knots' is TRUE; 'nknots' specification is disregarded")
---
>                 warning("'all.knots' argument is TRUE; 'nknots' specification is disregarded")
134c134
<                 stop("'nknots' must be numeric (in {1,..,n})")
---
>                 stop("'nknots' argument must be numeric (in {1,..,n})")
136c136
<                 stop("'nknots' must be at least 1")
---
>                 stop(gettextf("'%s' argument must be at least %d", "knots", 1))
148c148
<         if(!missing(spar)) stop("must not specify both 'spar' and 'lambda'")
---
>         if(!missing(spar)) stop("must not specify both 'spar' and 'lambda' arguments")
160c160
<     if(length(spar) != 1) stop("'spar' must be of length 1")
---
>     if(length(spar) != 1) stop(gettextf("'%s' argument must be of length %d", "spar", 1))
170c170
< 	} else warning("not using invalid df; must have 1 < df <= n := #{unique x} = ", nx)
---
> 	} else warning(gettextf("not using invalid df; must have 1 < df <= n := #{unique x} = %d", nx))
204c204
< 	    stop("NA lev[]; probably smoothing parameter 'spar' way too large!")
---
> 	    stop("NA lev[]; probably smoothing parameter 'spar' is way too large!")
207,209c207,213
< 	offKind <- if(spar.is.lambda) "extreme" # not easy to know if small | large
< 		   else if(sml <- fit$spar < 0.5) "small" else "large"
< 	wtxt <- paste("smoothing parameter value too", offKind)
---
> 	if(spar.is.lambda) { # not easy to know if small | large
> 	 wtxt <- gettext("smoothing parameter value too extreme")
> 	} else if(sml <- fit$spar < 0.5) {
> 	 wtxt <- gettext("smoothing parameter value too small")
> 	} else {
> 	 wtxt <- gettext("smoothing parameter value too large")
> 	}
216c220
<             warning(wtxt,"\nsetting df = 1  __use with care!__")
---
>             warning(wtxt,"\n", "setting 'df = 1'  __use with care!__", sep = "")
259c263
<         stop("need result of smooth.spline(keep.data = TRUE)")
---
>         stop("result of 'smooth.spline(keep.data = TRUE)' is needed")
270c274
<         stop("need result of smooth.spline(keep.data = TRUE)")
---
>         stop("result of 'smooth.spline(keep.data = TRUE)' is needed")
281c285
<         stop('type = "partial" is not yet implemented')
---
>         stop("'type = \"partial\"' is not yet implemented")
288c292
<         stop("need result of smooth.spline(keep.data = TRUE)")
---
>         stop("result of 'smooth.spline(keep.data = TRUE)' is needed")
299c303
< 	cat("Call:\n")
---
> 	cat(gettext("Call:", domain = "R-stats"), "\n", sep = "")
305,307c309,315
<     cat("\nSmoothing Parameter  spar=", format(x$spar, digits=digits),
<         " lambda=", format(x$lambda, digits=digits),
<         if(ip["ispar"] != 1L) paste0("(", ip["iter"], " iterations)"))
---
>       if(ip["ispar"] != 1L) cat("\n", sprintf(ngettext(ip["iter"], "Smoothing Parameter  spar=%s lambda=%s (%d iteration)", "Smoothing Parameter  spar=%s lambda=%s (%d iterations)", domain = "R-stats"), format(x$spar, digits=digits),
> 			 format(x$lambda, digits=digits), ip["iter"]), sep = "")
>       else
>       cat("\n", gettextf("Smoothing Parameter  spar=%s lambda=%s", format(x$spar, digits=digits), format(x$lambda, digits=digits), domain = "R-stats"), sep = "")
>      
>     cat("\n")
>     cat(gettextf("Equivalent Degrees of Freedom (Df): %s", format(x$df,digits=digits), domain = "R-stats"))
309c317,319
<     cat("Equivalent Degrees of Freedom (Df):", format(x$df,digits=digits))
---
>     if(x$no.weights) {
> 	cat(gettextf("Penalized Criterion (weightedRSS): %s", format(x$pen.crit, digits=digits), domain = "R-stats"))
>     } else cat(gettextf("Penalized Criterion (RSS): %s", format(x$pen.crit, digits=digits), domain = "R-stats"))
311,313d320
<     cat(sprintf("Penalized Criterion (%sRSS): %s\n",
< 		if(x$no.weights) "" else "weighted ",
< 		format(x$pen.crit, digits=digits)))
328c335
<     if(is.null(fit)) stop("not a valid \"smooth.spline\" object")
---
>     if(is.null(fit)) stop(gettextf("'%s' argument is not an object of class %s", "object", dQuote("smooth.spline")))
379c386
<     else if(span < 0 || span > 1) stop("'span' must be between 0 and 1.")
---
>     else if(span < 0 || span > 1) stop(gettextf("'%s' argument must be between %s and %s", "span", "0", "1"))
381,382c388,389
<     if(!n || !is.numeric(y)) stop("'y' must be numeric vector")
<     if(length(x) != n) stop("number of observations in 'x' and 'y' must match.")
---
>     if(!n || !is.numeric(y)) stop(gettextf("'%s' argument must be a numeric vector", "y"))
>     if(length(x) != n) stop("number of observations in 'x' and 'y' arguments must match")
384c391
< 	stop("number of weights must match number of observations.")
---
> 	stop("number of weights must match number of observations")
401c408
<                                  "%d observations with NAs, NaNs and/or Infs deleted"),
---
>                                  "%d observations with NAs, NaNs and/or Infs deleted", domain = "R-stats"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/spectrum.R R/src/library/stats/R/spectrum.R
33c33
<         stop("'p' must be between 0 and 0.5")
---
>         stop(gettextf("'%s' argument must be between %s and %s", "p", "0", "0.5"))
231c231
<         ylab <- if(log == "dB") "spectrum (dB)" else "spectrum"
---
>         ylab <- if(log == "dB") gettext("spectrum (dB)") else gettext("spectrum")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/spline.R R/src/library/stats/R/spline.R
35c35
<     if(is.na(nx)) stop(gettextf("invalid value of %s", "length(x)"), domain = NA)
---
>     if(is.na(nx)) stop(gettextf("invalid '%s' value", "length(x)"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/splinefun.R R/src/library/stats/R/splinefun.R
31c31
<     if(is.na(nx)) stop(gettextf("invalid value of %s", "length(x)"), domain = NA)
---
>     if(is.na(nx)) stop(gettextf("invalid '%s' value", "length(x)"))
67c67
< 	    stop("'deriv' must be between 0 and 3")
---
> 	    stop(gettextf("'%s' argument must be between %s and %s", "deriv", "0", "3"))
106c106
< 	    stop("'deriv' must be between 0 and 3")
---
> 	    stop(gettextf("'%s' argument must be between %s and %s", "deriv", "0", "3"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/stepfun.R R/src/library/stats/R/stepfun.R
33c33
<     if(n < 1) stop("'x' must have length >= 1")
---
>     if(n < 1) stop(gettextf("'%s' argument must have length >= %d", "x", 1))
62c62
<     cat("Step function\nCall: ")
---
>     cat(gettext("Step function", domain = "R-stats"), "\n", gettext("Call: ", domain = "R-stats"), sep = "")
66,67c66
<     cat(" x[1:", n, "] = ", numform(xx[i1(n)]),
< 	if(n > 3L) ", ", if(n > 5L) " ..., ", numform(xx[i2(n)]), "\n", sep = "")
---
>     cat(" x[1:", n, "] = ", numform(xx[i1(n)]), if(n > 3L) ", ", if(n > 5L) " ..., ", numform(xx[i2(n)]), "\n", sep = "")
69,71c68
<     cat(n+1L, " plateau levels = ", numform(y[i1(n+1L)]),
< 	if(n+1L > 3L) ", ", if(n+1L > 5L) " ..., ", numform(y[i2(n+1L)]), "\n",
< 	sep = "")
---
>     cat(n+1L, " plateau levels = ", numform(y[i1(n+1L)]), if(n+1L > 3L) ", ", if(n+1L > 5L) " ..., ", numform(y[i2(n+1L)]), "\n", sep = "")
79,81c76,80
<     cat("Step function with continuity 'f'=",
< 	format(eval(expression(f), envir = environment(object))),
< 	", ", n, if(n <= 6L) "knots at\n" else "knots with summary\n")
---
>     if(n <= 6L) {
>       cat(sprintf(ngettext(n, "Step function with continuity 'f'=%s, %d knot at:", "Step function with continuity 'f'=%s, %d knots at:", domain = "R-stats"), format(eval(expression(f), envir = environment(object))), n), "\n", sep = "")
>     } else {
>       cat(sprintf(ngettext(n, "Step function with continuity 'f'=%s, %d knot with summary:", "Step function with continuity 'f'=%s, %d knots with summary:", domain = "R-stats"), format(eval(expression(f), envir = environment(object))), n), "\n", sep = "")
>     }
84,86c83
<     cat(if(n > 6L) "\n" else "  ", "and	", n+1L,
<         " plateau levels (y) ", if(n <= 6L) "at\n" else "with summary\n",
<         sep  = "")
---
>     cat(if(n > 6L) "\n" else "  ", "and	", n+1L, " plateau levels (y) ", if(n <= 6L) "at\n" else "with summary\n", sep  = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/stl.R R/src/library/stats/R/stl.R
39c39
< 	if(deg < 0 || deg > 1) stop(gettextf("%s must be 0 or 1", degname), domain = NA)
---
> 	if(deg < 0 || deg > 1) stop(gettextf("%s must be 0 or 1", degname))
45c45
<     if (is.na(n)) stop("invalid length(x)")
---
>     if (is.na(n)) stop(gettextf("invalid '%s' value", "length(x)"))
52c52
< 	    stop("unknown string value for s.window")
---
> 	    stop("unknown string value for 's.window' argument")
99c99
<     cat(" Call:\n ")
---
>     cat(gettext(" Call:", domain = "R-stats"), "\n", sep = "")
101c101
<     cat("\nComponents\n")
---
>     cat("\n", gettext("Components", domain = "R-stats"), "\n", sep = "")
108c108
<     cat(" Call:\n ")
---
>     cat(gettext(" Call:", domain = "R-stats"), "\n", sep = "")
110c110
<     cat("\n Time.series components:\n")
---
>     cat("\n ", gettext("Time.series components:", domain = "R-stats"), "\n", sep = "")
112,120c112,116
<     cat(" IQR:\n")
<     iqr <- apply(cbind(STL = object$time.series,
<                        data = object$time.series %*% rep(1,3)),
< 		 2L, IQR)
<     print(rbind(format(iqr, digits = max(2L, digits - 3L)),
< 		"   %"= format(round(100 * iqr / iqr["data"], 1))),
< 	  quote = FALSE)
<     cat("\n Weights:")
<     if(all(object$weights == 1)) cat(" all == 1\n")
---
>     cat(gettext(" IQR:", domain = "R-stats"), "\n", sep = "")
>     iqr <- apply(cbind(STL = object$time.series, data = object$time.series %*% rep(1,3)), 2L, IQR)
>     print(rbind(format(iqr, digits = max(2L, digits - 3L)), "   %"= format(round(100 * iqr / iqr["data"], 1))), quote = FALSE)
>     cat("\n ", gettext("Weights:", domain = "R-stats"), sep = "")
>     if(all(object$weights == 1)) cat(gettext(" all == 1", domain = "R-stats"), "\n", sep = "")
122c118
<     cat("\n Other components: ")
---
>     cat("\n ", gettext("Other components: ", domain = "R-stats"), sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/symnum.R R/src/library/stats/R/symnum.R
42,44c42,46
< 	    stop(if(corr) gettext("'cutpoints' must be unique in 0 < cuts < 1, but are = ")
<                  else gettext("'cutpoints' must be unique, but are = "),
<                  paste(format(cutpoints), collapse="|"), domain = NA)
---
> 	    {
> 		tmp_n <- paste(format(cutpoints), collapse="|")
> 	     if(corr) stop(gettextf("'cutpoints' must be unique in 0 < cuts < 1, but are = %s", tmp_n), domain = "R-stats")
>              else stop(gettextf("'%s' must be unique, but are = %s", "cutpoints", tmp_n), domain = "R-stats")
> 	    }
48,50c50,51
< 	range.msg <- if(corr) gettext("'x' must be between -1 and 1")
<         else gettextf("'x' must be between %s and %s",
<                       format(minc), format(maxc))
---
> 	range.msg <- if(corr) gettextf("'%s' argument must be between %s and %s", "x", "-1", "1")
>         else gettextf("'%s' argument must be between %s and %s", "x", format(minc), format(maxc))
53,54c54,55
< 	    if(any(x < minc - eps, na.rm=TRUE)) stop(range.msg, domain = NA)
< 	if (   any(x > maxc + eps, na.rm=TRUE)) stop(range.msg, domain = NA)
---
> 	    if(any(x < minc - eps, na.rm=TRUE)) stop(range.msg, domain = "R-stats")
> 	if (   any(x > maxc + eps, na.rm=TRUE)) stop(range.msg, domain = "R-stats")
58,60c59,62
< 	if(anyDuplicated(symbols))
< 	    stop("'symbols' must be unique, but are = ",
<                  paste(symbols, collapse="|"), domain = NA)
---
> 	if(anyDuplicated(symbols)) {
> 		tmp_n <- paste(format(cutpoints), collapse="|")
> 	    stop(gettextf("'%s' must be unique, but are = %s", "symbols", tmp_n), domain = "R-stats")
> 	}
110c112
< 	else if(!is.logical(abbr.colnames)) stop("invalid 'abbr.colnames'")
---
> 	else if(!is.logical(abbr.colnames)) stop(gettextf("invalid '%s' value", "abbr.colnames'"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/termplot.R R/src/library/stats/R/termplot.R
51c51
<                 domain = NA, immediate. = TRUE)
---
>                 domain = "R-stats", immediate. = TRUE)
57c57
< 	ylabs <- paste("Partial for",nmt)
---
> 	ylabs <- gettextf("Partial for %s",nmt)
118c118
< 	ylabs <- paste("Partial for",nmt)
---
> 	ylabs <- gettextf("Partial for %s",nmt)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ts-tests.R R/src/library/stats/R/ts-tests.R
31c31
<         METHOD <- "Box-Pierce test"
---
>         METHOD <- gettext("Box-Pierce test")
37c37
<         METHOD <- "Box-Ljung test"
---
>         METHOD <- gettext("Box-Ljung test")
41c41
<     names(STATISTIC) <- "X-squared"
---
>     names(STATISTIC) <- gettext("X-squared")
53c53
<         stop ("x is not a vector or univariate time series")
---
>         stop(gettextf("'%s' argument is not a vector or univariate time series", "x"))
59c59
<     u <- (1L:n)-n/2
---
>     u <- seq_len(n)-n/2
71,72c71,72
<     trm2 <- n*sum(yt1*(1L:n))^2
<     trm3 <- n*(n+1)*sum(yt1*(1L:n))*sum(yt1)
---
>     trm2 <- n*sum(yt1*seq_len(n))^2
>     trm3 <- n*(n+1)*sum(yt1*seq_len(n))*sum(yt1)
89c89
<     for (i in (1L:tablen))
---
>     for (i in seq_len(tablen))
93,95c93,95
<     METHOD <- "Phillips-Perron Unit Root Test"
<     names(STAT) <- "Dickey-Fuller"
<     names(PARAMETER) <- "Truncation lag parameter"
---
>     METHOD <- gettext("Phillips-Perron Unit Root Test")
>     names(STAT) <- gettext("Dickey-Fuller")
>     names(PARAMETER) <- gettext("Truncation lag parameter")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/ts.R R/src/library/stats/R/ts.R
250c250
<         stop("bad value for 'lag' or 'differences'")
---
>         stop("bad value for 'lag' or 'differences' arguments")
292c292
<     if(anyNA(object)) stop("time series contains internal NAs")
---
>     if(anyNA(object)) stop("time series contains internal NA values")
375,377c375
<             cat("Time Series:\nStart =", deparse(start(x)),
<                 "\nEnd =", deparse(end(x)),
<                 "\nFrequency =", deparse(fr.x), "\n")
---
> 	  cat(gettextf("Time Series:\nStart = %s\nEnd = %s\nFrequency = %s", deparse(start(x)), deparse(end(x)), deparse(fr.x), domain = "R-stats"), "\n", sep = "")
379,381c377
<             cat("Time Series:\nStart =", format(tsp(x)[1L]),
<                 "\nEnd =", format(tsp(x)[2L]),
<                 "\nFrequency =", deparse(fr.x), "\n")
---
> 	  cat(gettextf("Time Series:\nStart = %s\nEnd = %s\nFrequency = %s", format(tsp(x)[1L]), format(tsp(x)[2L]), deparse(fr.x), domain = "R-stats"), "\n", sep = "")
398,399c394
<         warning(gettextf("series is corrupt: length %d with 'tsp' implying %d",
<                          NROW(x), nn), domain=NA, call.=FALSE)
---
>         warning(gettextf("series is corrupt: length %d with 'tsp' implying %d", NROW(x), nn), domain = "R-stats", call.=FALSE)
461c456
< 		  xlab = "Time", ylab, log = "", col = par("col"), bg = NA,
---
> 		  xlab = gettext("Time", domain = "R-stats"), ylab, log = "", col = par("col"), bg = NA,
545c540
< 			stop("'xy.labels' must be logical or character")
---
> 			stop(gettextf("'%s' argument must be logical or character", "xy.labels", domain = "R-stats"))
639c634
<         stop("'frequency' and 'deltat' are both supplied and are inconsistent")
---
>         stop("'frequency' and 'deltat' arguments are both supplied and are inconsistent")
649c644
<         warning("'frequency' not changed")
---
>         warning("'frequency' argument was not changed")
659c654
< 	warning("'start' value not changed")
---
> 	warning("'start' argument was not changed")
667c662
< 		stop("bad value for 'end'"))
---
> 		stop("bad value for 'end' argument"))
670c665
< 	warning("'end' value not changed")
---
> 	warning("'end' argument was not changed")
776,777c771
<     pars <- c("xlab", "ylab", "xlim", "ylim", "col", "lty", "lwd",
<               "type", "main", "sub", "log")
---
>     pars <- c("xlab", "ylab", "xlim", "ylim", "col", "lty", "lwd", "type", "main", "sub", "log")
793,794c787,788
<     if(!is.list(model)) stop("'model' must be list")
<     if(n <= 0L) stop("'n' must be strictly positive")
---
>     if(!is.list(model)) stop(gettextf("'%s' argument must be a list", "model"))
>     if(n <= 0L) stop("'n' argument must be strictly positive")
815,816c809,810
<                               "'start.innov' is too short: need %d point",
<                               "'start.innov' is too short: need %d points"),
---
>                               "'start.innov' argument is too short: need %d point",
>                               "'start.innov' argument is too short: need %d points", domain = "R-stats"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/R/xtabs.R R/src/library/stats/R/xtabs.R
30c30
< 	    stop("'formula' missing or incorrect")
---
> 	    stop(gettextf("'%s' argument is missing or incorrect", "formula"))
86c86
<                  domain = NA)
---
>                  domain = "R-stats")
91c91
<                  domain = NA)
---
>                  domain = "R-stats")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/contrast.Rd R/src/library/stats/man/contrast.Rd
18c18
< contr.poly(n, scores = 1:n, contrasts = TRUE, sparse = FALSE)
---
> contr.poly(n, scores = seq_len(n), contrasts = TRUE, sparse = FALSE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/cpgram.Rd R/src/library/stats/man/cpgram.Rd
19c19
<        main = paste("Series: ", deparse(substitute(ts))),
---
>        main = paste(gettext("Series: ", domain = "R-stats"), deparse(substitute(ts))),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/hclust.Rd R/src/library/stats/man/hclust.Rd
20,21c20,21
<      main = "Cluster Dendrogram",
<      sub = NULL, xlab = NULL, ylab = "Height", \dots)
---
>      main = gettext("Cluster Dendrogram"),
>      sub = NULL, xlab = NULL, ylab = gettext("Height"), \dots)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/plot.HoltWinters.Rd R/src/library/stats/man/plot.HoltWinters.Rd
19,20c19,20
<         ylab = "Observed / Fitted",
<         main = "Holt-Winters filtering",
---
>         ylab = gettext("Observed / Fitted"),
>         main = gettext("Holt-Winters filtering"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/plot.isoreg.Rd R/src/library/stats/man/plot.isoreg.Rd
16,17c16,17
<       main = paste("Isotonic regression", deparse(x$call)),
<       main2 = "Cumulative Data and Convex Minorant",
---
>       main = gettextf("Isotonic regression \%s", paste(deparse(x$call), collapse = ""), domain = "R-stats"),
>       main2 = gettext("Cumulative Data and Convex Minorant", domain = "R-stats"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/printCoefmat.Rd R/src/library/stats/man/printCoefmat.Rd
21c21
<              cs.ind = 1L:k, tst.ind = k + 1L,
---
>              cs.ind = seq_len(k), tst.ind = k + 1L,
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/man/qqnorm.Rd R/src/library/stats/man/qqnorm.Rd
10,11c10,11
< \method{qqnorm}{default}(y, ylim, main = "Normal Q-Q Plot",
<        xlab = "Theoretical Quantiles", ylab = "Sample Quantiles",
---
> \method{qqnorm}{default}(y, ylim, main = gettext("Normal Q-Q Plot"),
>        xlab = gettext("Theoretical Quantiles"), ylab = gettext("Sample Quantiles"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/Srunmed.c R/src/library/stats/src/Srunmed.c
23c23
< 
---
> #include "localization.h"
216c216
<     if (TYPEOF(sx) != REALSXP) error("numeric 'x' required");
---
>     if (TYPEOF(sx) != REALSXP) error(_("numeric 'x' required"));
276c276
< 	    error("long vectors are not supported for algorithm = \"Turlach\"");
---
> 	    error(_("long vectors are not supported for algorithm = \"Turlach\""));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/Trunmed.c R/src/library/stats/src/Trunmed.c
46c46
< 
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/ansari.c R/src/library/stats/src/ansari.c
29a30
> #include "localization.h"
118c119
< 	    error(_("probabilities outside [0,1] in qansari()"));
---
> 	    error(_("probabilities outside [0,1] in 'qansari()' function"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/approx.c R/src/library/stats/src/approx.c
33,38c33
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/arima.c R/src/library/stats/src/arima.c
27a28
> #include <R_ext/Minmax.h>
29a31
> #include "localization.h"
31,36d32
< #ifndef max
< #define max(a,b) ((a < b)?(b):(a))
< #endif
< #ifndef min
< #define min(a,b) ((a < b)?(a):(b))
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/bandwidths.c R/src/library/stats/src/bandwidths.c
25,32c25
< 
< // or include "stats.h"
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/complete_cases.c R/src/library/stats/src/complete_cases.c
25a26
> #include "localization.h"
27,34d27
< 
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/cov.c R/src/library/stats/src/cov.c
33c33,34
< 
---
> #include <R_ext/Minmax.h>
> #include "localization.h"
35,41d35
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
65c59,60
< #define CLAMP(X)  (X >= 1. ? 1. : (X <= -1. ? -1. : X))
---
> //#define CLAMP(X)  (X >= 1. ? 1. : (X <= -1. ? -1. : X))
> #define CLAMP(X)  max(-1., min(X,1.))
643c638
< # define VAR_FACTOR_MSG "Calling var(x) on a factor x is defunct.\n  Use something like 'all(duplicated(x)[-1L])' to test for a constant vector."
---
> # define VAR_FACTOR_MSG _("Calling var(x) on a factor x is defunct.\n  Use something like 'all(duplicated(x)[-1L])' to test for a constant vector.")
645c640
< # define VAR_FACTOR_MSG "Calling var(x) on a factor x is deprecated and will become an error.\n  Use something like 'all(duplicated(x)[-1L])' to test for a constant vector."
---
> # define VAR_FACTOR_MSG _("Calling var(x) on a factor x is deprecated and will become an error.\n  Use something like 'all(duplicated(x)[-1L])' to test for a constant vector.")
650c645
< 	error(_("'x' is NULL"));
---
> 	error(_("'%s' argument is NULL"), "x");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/d2x2xk.c R/src/library/stats/src/d2x2xk.c
23a24
> #include <R_ext/Minmax.h>
36,37c37,38
< 	y = imax2(0,  (int)(*t - *n));
< 	z = imin2((int)*m, (int)*t);
---
> 	y = max(0,  (int)(*t - *n));
> 	z = min((int)*m, (int)*t);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/deriv.c R/src/library/stats/src/deriv.c
30,36c30
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
442,443c436
< 		error("only single-argument calls to log() are supported;\n"
< 		      "  maybe use log(x,a) = log(x)/log(a)");
---
> 		error(_("only single-argument calls to log() are supported;\n  maybe use log(x,a) = log(x)/log(a)"));
682,683c675
< 	    error(_("Function '%s' is not in the derivatives table"),
< 		  translateChar(STRING_ELT(u, 0)));
---
> 	    error(_("Function '%s' is not in the derivatives table"), translateChar(STRING_ELT(u, 0)));
789c781
<         error(_("expression must not be type '%s'"), type2char(TYPEOF(expr)));
---
>         error(_("'%s' argument must not be of type '%s'"), "expr", type2char(TYPEOF(expr)));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/distance.c R/src/library/stats/src/distance.c
30a31
> #include "localization.h"
225c226
< 	    error(_("distance(): invalid p"));
---
> 	    error(_("'distance()': invalid 'p' argument"));
229c230
< 	error(_("distance(): invalid distance"));
---
> 	error(_("'distance()': invalid distance"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/distn.c R/src/library/stats/src/distn.c
30a31,32
> #include <R_ext/Minmax.h>
> #include <R_ext/Itermacros.h>
32,39c34
< 
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
44,45c39,40
< #define R_MSG_NA	_("NaNs produced")
< #define R_MSG_NONNUM_MATH _("Non-numeric argument to mathematical function")
---
> #define R_MSG_NA	_("NaN values produced")
> #define R_MSG_NONNUM_MATH _("Non-numeric argument passed to mathematical function")
50,54d44
< #define mod_iterate(n1,n2,i1,i2) for (i=i1=i2=0; i<n; \
< 	i1 = (++i1 == n1) ? 0 : i1,\
< 	i2 = (++i2 == n2) ? 0 : i2,\
< 	++i)
< 
64c54
<     n = (na < nb) ? nb : na;				\
---
>     n = max(na, nb);				\
98c88
<     mod_iterate(na, nb, ia, ib) {
---
>     mod_iterate2(na, nb, ia, ib) {
127c117
<     mod_iterate(na, nb, ia, ib) {
---
>     mod_iterate2(na, nb, ia, ib) {
177,182d166
< #define mod_iterate3(n1,n2,n3,i1,i2,i3) for (i=i1=i2=i3=0; i<n; \
< 	i1 = (++i1==n1) ? 0 : i1,				\
< 	i2 = (++i2==n2) ? 0 : i2,				\
< 	i3 = (++i3==n3) ? 0 : i3,				\
< 	++i)
< 
332,338d315
< 
< #define mod_iterate4(n1,n2,n3,n4,i1,i2,i3,i4) for (i=i1=i2=i3=i4=0; i<n; \
< 	i1 = (++i1==n1) ? 0 : i1,					\
< 	i2 = (++i2==n2) ? 0 : i2,					\
< 	i3 = (++i3==n3) ? 0 : i3,					\
< 	i4 = (++i4==n4) ? 0 : i4,					\
< 	++i)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/family.c R/src/library/stats/src/family.c
29a30
> #include "localization.h"
66c67
< 	error(_("Argument %s must be a nonempty numeric vector"), "mu");
---
> 	error(_("'%s' argument must be a nonempty numeric vector"), "mu");
80c81
< 	error(_("Argument %s must be a nonempty numeric vector"), "eta");
---
> 	error(_("'%s' argument must be a nonempty numeric vector"), "eta");
98c99
< 	error(_("Argument %s must be a nonempty numeric vector"), "eta");
---
> 	error(_("'%s' argument must be a nonempty numeric vector"), "eta");
131c132
< 	error(_("argument %s must be a numeric vector of length 1 or length %d"),
---
> 	error(_("'%s' argument must be a numeric vector of length 1 or length %d"),
134c135
< 	error(_("argument %s must be a numeric vector of length 1 or length %d"),
---
> 	error(_("'%s' argument must be a numeric vector of length 1 or length %d"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/fexact.c R/src/library/stats/src/fexact.c
36a37,38
> #include <R_ext/Minmax.h>
> #include "localization.h"
204c206
< 	prterr(1, "NROW must be less than or equal to LDTABL.");
---
> 	prterr(1, _("NROW must be less than or equal to LDTABL."));
210c212
< 		prterr(2, "All elements of TABLE must be nonnegative.");
---
> 		prterr(2, _("All elements of TABLE must be nonnegative."));
215,216c217
< 	prterr(3, "All elements of TABLE are zero.\n"
< 	       "PRT and PRE are set to missing values.");
---
> 	prterr(3, _("All elements of TABLE are zero.\nPRT and PRE are set to missing values."));
239c240
<     int ikh = imax2(k * 5 + (kk << 1), nco * 7 + 4*n2_stack);
---
>     int ikh = max(k * 5 + (kk << 1), nco * 7 + 4*n2_stack);
241c242
<     ikh = imax2(nco + 1 + 2*n2_stack, k);
---
>     ikh = max(nco + 1 + 2*n2_stack, k);
349c350
<     const char* ch_err_5 =
---
> /*    const char* ch_err_5 =
354c355
< 
---
> */
392c393
< 	prterr(1, "NROW must be less than or equal to LDTABL.");
---
> 	prterr(1, _("NROW must be less than or equal to LDTABL."));
394c395
< 	prterr(4, "NCOL must be at least 2");
---
> 	prterr(4, _("NCOL must be at least 2"));
417c418
< 		prterr(2, "All elements of TABLE must be nonnegative.");
---
> 		prterr(2, _("All elements of TABLE must be nonnegative."));
425,426c426
< 	prterr(3, "All elements of TABLE are zero.\n"
< 	       "PRT and PRE are set to missing values.");
---
> 	prterr(3, _("All elements of TABLE are zero.\nPRT and PRE are set to missing values."));
464c464
< 	    prterr(5, ch_err_5);
---
> 	    prterr(5, _("The hash table key cannot be computed because the largest key\nis larger than the largest representable int.\nThe algorithm cannot proceed.\nReduce the workspace, consider using 'simulate.p.value=TRUE' or another algorithm."));
473c473
< 	prterr(501, ch_err_5);
---
> 	prterr(501, _("The hash table key cannot be computed because the largest key\nis larger than the largest representable int.\nThe algorithm cannot proceed.\nReduce the workspace, consider using 'simulate.p.value=TRUE' or another algorithm."));
569c569
< 	ntot = imin2(n, iro[kd]);
---
> 	ntot = min(n, iro[kd]);
653,655c653
< 	error(_("FEXACT error 6.  LDKEY=%d is too small for this problem,\n"
< 		"  (ii := key2[itp=%d] = %d, ldstp=%d)\n"
< 	       "Try increasing the size of the workspace and possibly 'mult'"),
---
> 	error(_("FEXACT error 6.  LDKEY=%d is too small for this problem,\n  (ii := key2[itp=%d] = %d, ldstp=%d)\nTry increasing the size of the workspace and possibly 'mult'"),
1019c1017
< 	    it[i] = imax2(ico[i] - lb[i], 0);
---
> 	    it[i] = max(ico[i] - lb[i], 0);
1064,1066c1062
< 	error(_("FEXACT error 30.  Stack length exceeded in f3xact,\n"
< 		"  (ldst=%d, key=%d, ipn=%d, itp=%d, ist[ii=%d]=%d).\n"
< 		"Increase workspace or consider using 'simulate.p.value=TRUE'"),
---
> 	error(_("FEXACT error 30.  Stack length exceeded in f3xact,\n  (ldst=%d, key=%d, ipn=%d, itp=%d, ist[ii=%d]=%d).\nIncrease workspace or consider using 'simulate.p.value=TRUE'"),
1244c1240
< 	y += fact[imin2(irt, ict)];
---
> 	y += fact[min(irt, ict)];
1399,1400c1395
< 	error(_("FEXACT error 6 (f5xact).  LDKEY=%d is too small for this problem: kval=%d.\n"
< 		"Try increasing the size of the workspace."), ldkey, *kval);
---
> 	error(_("FEXACT error 6 (f5xact).  LDKEY=%d is too small for this problem: kval=%d.\nTry increasing the size of the workspace."), ldkey, *kval);
1412,1414c1407
< 	    error(_("FEXACT error 7(%s). LDSTP=%d is too small for this problem,\n"
< 		    "  (kval=%d, itop-ldstp=%d).\n"
< 		    "Increase workspace or consider using 'simulate.p.value=TRUE'."),
---
> 	    error(_("FEXACT error 7(%s). LDSTP=%d is too small for this problem,\n  (kval=%d, itop-ldstp=%d).\nIncrease workspace or consider using 'simulate.p.value=TRUE'."),
1449,1451c1442
< 	error(_("FEXACT error 7(%s). LDSTP=%d is too small for this problem,\n"
< 		"  (pastp=%g, ipn_0:=ipoin[itp=%d]=%d, stp[ipn_0]=%g).\n"
< 		"Increase workspace or consider using 'simulate.p.value=TRUE'"),
---
> 	error(_("FEXACT error 7(%s). LDSTP=%d is too small for this problem,\n  (pastp=%g, ipn_0:=ipoin[itp=%d]=%d, stp[ipn_0]=%g).\nIncrease workspace or consider using 'simulate.p.value=TRUE'"),
1607c1598
< 	    m = imin2(mm, iro[*k]);
---
> 	    m = min(mm, iro[*k]);
1801c1792
<     PROBLEM "FEXACT error %d.\n%s", icode, mes RECOVER(NULL_ENTRY);
---
>     PROBLEM _("FEXACT error %d.\n%s"), icode, mes RECOVER(NULL_ENTRY);
1836c1827
< 	prterr(40, "Out of workspace.");
---
> 	prterr(40, _("Out of workspace."));
1915c1906
< 	prterr(20, "This should never occur, please report!");
---
> 	prterr(20, _("This should never occur, please report!"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/fft.c R/src/library/stats/src/fft.c
29c29,30
< #include <Rmath.h> /* for imax2(.),..*/
---
> #include <Rmath.h>
> #include <R_ext/Minmax.h>
184c185
<     if(kt > 0) maxf = imax2(nfac[kt-1], maxf);
---
>     if(kt > 0) maxf = max(nfac[kt-1], maxf);
219c220
<     mm = imin2(k1/2,klim);
---
>     mm = min(k1/2,klim);
263c264
<     mm = imin2(k1/2,mm+klim);
---
>     mm = min(k1/2,mm+klim);
300c301
<     mm = imin2(kspan,klim);
---
>     mm = min(kspan,klim);
381c382
<     mm = imin2(kspan,mm+klim);
---
>     mm = min(kspan,mm+klim);
516c517
<     mm = imin2(kspan,klim);
---
>     mm = min(kspan,klim);
555c556
< 	mm = imin2(kspan,mm+klim);
---
> 	mm = min(kspan,mm+klim);
688c689
<     kspan = imin2(jj,maxf);
---
>     kspan = min(jj,maxf);
811c812
< 	maxp = imax2(kt+kt+2, k-1);
---
> 	maxp = max(kt+kt+2, k-1);
839,841c840,842
< 	if (kt > 0) maxf = imax2(nfac[kt-1], maxf);
< 	if (kt > 1) maxf = imax2(nfac[kt-2], maxf);
< 	if (kt > 2) maxf = imax2(nfac[kt-3], maxf);
---
> 	if (kt > 0) maxf = max(nfac[kt-1], maxf);
> 	if (kt > 1) maxf = max(nfac[kt-2], maxf);
> 	if (kt > 2) maxf = max(nfac[kt-3], maxf);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/filter.c R/src/library/stats/src/filter.c
26a27,28
> #include "localization.h"
> #include <R_ext/Minmax.h>
28,31d29
< #ifndef min
< #define min(a, b) ((a < b)?(a):(b))
< #define max(a, b) ((a < b)?(b):(a))
< #endif
39c37
<        error("invalid input");
---
>        error(_("invalid input"));
42c40
<     if(sides == NA_INTEGER || circular == NA_LOGICAL)  error("invalid input");
---
>     if(sides == NA_INTEGER || circular == NA_LOGICAL)  error(_("invalid input"));
90c88
<        || TYPEOF(out) != REALSXP) error("invalid input");
---
>        || TYPEOF(out) != REALSXP) error(_("invalid input"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/fourier.c R/src/library/stats/src/fourier.c
32,40c32
< 
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
< 
---
> #include "localization.h"
91c83
< 		error("fft too large");
---
> 		error(_("fft is too large"));
115c107
< 		error("fft too large");
---
> 		error(_("fft is too large"));
182c174
< 	    error("fft too large");
---
> 	    error(_("fft is too large"));
221,222c213
< 	warning(_("nextn() found no solution < %d = INT_MAX (the maximal integer);"
< 		  " pass '0+ n' instead of 'n'"), // i.e. pass "double" type
---
> 	warning(_("nextn() found no solution < %d = INT_MAX (the maximal integer); pass '0+ n' instead of 'n'"), // i.e. pass "double" type
294c285
< 		if(n_n > max_dbl_int)
---
> 		if(n_n > max_dbl_int) //LUKI
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/integrate.c R/src/library/stats/src/integrate.c
27,33c27
< 
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
60c54
< 	error("evaluation of function gave a result of wrong length");
---
> 	error(_("evaluation of function gave a result of wrong length"));
64c58
< 	error("evaluation of function gave a result of wrong type");
---
> 	error(_("evaluation of function gave a result of wrong type"));
68c62
< 	    error("non-finite function value");
---
> 	    error(_("non-finite function value"));
84c78
<     if(length(CAR(args)) > 1) error(_("'%s' must be of length one"), "lower");
---
>     if(length(CAR(args)) > 1) error(_("'%s' argument must be of length one"), "lower");
86c80
<     if(length(CAR(args)) > 1) error(_("'%s' must be of length one"), "upper");
---
>     if(length(CAR(args)) > 1) error(_("'%s' argument must be of length one"), "upper");
128c122
<     if(length(CAR(args)) > 1) error(_("'%s' must be of length one"), "bound");
---
>     if(length(CAR(args)) > 1) error(_("'%s' argument must be of length one"), "bound");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/ksmooth.c R/src/library/stats/src/ksmooth.c
24,29c24
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/line.c R/src/library/stats/src/line.c
24a25
> #include "localization.h"
147c148
<     if (n < 2) error("insufficient observations");
---
>     if (n < 2) error(_("insufficient observations"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/lm.c R/src/library/stats/src/lm.c
25,31c25
< 
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
57c51
<     if(check && length(ans) != 2) error(_("'x' is not a matrix"));
---
>     if(check && length(ans) != 2) error(_("'%s' argument is not a matrix"));
Only in R/src/library/stats/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/loessc.c R/src/library/stats/src/loessc.c
37,43c37,38
< 
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include <R_ext/Minmax.h>
> #include "localization.h"
82,83d76
< #undef min
< #undef max
85,86d77
< #define	min(x,y)  ((x) < (y) ? (x) : (y))
< #define	max(x,y)  ((x) > (y) ? (x) : (y))
244c235
<     if(nf <= 0) error(_("span is too small"));
---
>     if(nf <= 0) error(_("'%s' argument is too small"), "span");
250c241
<     else error("workspace required is too large");
---
>     else error(_("workspace required is too large"));
353d343
< #define MSG(_m_)	msg = _(_m_) ; break ;
357c347
<     char *msg, msg2[50];
---
>     char *msg = NULL, msg2[50];
360,395c350,385
<  case 100:MSG("wrong version number in lowesd.   Probably typo in caller.")
<  case 101:MSG("d>dMAX in ehg131.  Need to recompile with increased dimensions.")
<  case 102:MSG("liv too small.    (Discovered by lowesd)")
<  case 103:MSG("lv too small.     (Discovered by lowesd)")
<  case 104:MSG("span too small.   fewer data values than degrees of freedom.")
<  case 105:MSG("k>d2MAX in ehg136.  Need to recompile with increased dimensions.")
<  case 106:MSG("lwork too small")
<  case 107:MSG("invalid value for kernel")
<  case 108:MSG("invalid value for ideg")
<  case 109:MSG("lowstt only applies when kernel=1.")
<  case 110:MSG("not enough extra workspace for robustness calculation")
<  case 120:MSG("zero-width neighborhood. make span bigger")
<  case 121:MSG("all data on boundary of neighborhood. make span bigger")
<  case 122:MSG("extrapolation not allowed with blending")
<  case 123:MSG("ihat=1 (diag L) in l2fit only makes sense if z=x (eval=data).")
<  case 171:MSG("lowesd must be called first.")
<  case 172:MSG("lowesf must not come between lowesb and lowese, lowesr, or lowesl.")
<  case 173:MSG("lowesb must come before lowese, lowesr, or lowesl.")
<  case 174:MSG("lowesb need not be called twice.")
<  case 175:MSG("need setLf=.true. for lowesl.")
<  case 180:MSG("nv>nvmax in cpvert.")
<  case 181:MSG("nt>20 in eval.")
<  case 182:MSG("svddc failed in l2fit.")
<  case 183:MSG("didnt find edge in vleaf.")
<  case 184:MSG("zero-width cell found in vleaf.")
<  case 185:MSG("trouble descending to leaf in vleaf.")
<  case 186:MSG("insufficient workspace for lowesf.")
<  case 187:MSG("insufficient stack space")
<  case 188:MSG("lv too small for computing explicit L")
<  case 191:MSG("computed trace L was negative; something is wrong!")
<  case 192:MSG("computed delta was negative; something is wrong!")
<  case 193:MSG("workspace in loread appears to be corrupted")
<  case 194:MSG("trouble in l2fit/l2tr")
<  case 195:MSG("only constant, linear, or quadratic local models allowed")
<  case 196:MSG("degree must be at least 1 for vertex influence matrix")
<  case 999:MSG("not yet implemented")
---
>  case 100:sprintf(msg, _("wrong version number in lowesd. Probably typo in caller.")); break ;
>  case 101:sprintf(msg, _("d>dMAX in ehg131.  Need to recompile with increased dimensions.")); break ;
>  case 102:sprintf(msg, _("'%s' argument is too small. (Discovered by 'lowesd()' function)"), "liv"); break ;
>  case 103:sprintf(msg, _("'%s' argument is too small. (Discovered by 'lowesd()' function)"), "lv"); break ;
>  case 104:sprintf(msg, _("'span' argument is too small. Fewer data values than degrees of freedom.")); break ;
>  case 105:sprintf(msg, _("k>d2MAX in ehg136.  Need to recompile with increased dimensions.")); break ;
>  case 106:sprintf(msg, _("'%s' argument is too small"), "lwork"); break ;
>  case 107:sprintf(msg, _("invalid '%s' value"), "kernel"); break ;
>  case 108:sprintf(msg, _("invalid '%s' value"), "ideg"); break ;
>  case 109:sprintf(msg, _("lowstt only applies when 'kernel=1'.")); break ;
>  case 110:sprintf(msg, _("not enough extra workspace for robustness calculation")); break ;
>  case 120:sprintf(msg, _("zero-width neighborhood. make span bigger")); break ;
>  case 121:sprintf(msg, _("all data on boundary of neighborhood. make span bigger")); break ;
>  case 122:sprintf(msg, _("extrapolation not allowed with blending")); break ;
>  case 123:sprintf(msg, _("ihat=1 (diag L) in 'l2fit()' function only makes sense if z=x (eval=data).")); break ;
>  case 171:sprintf(msg, _("'lowesd()' function must be called first.")); break ;
>  case 172:sprintf(msg, _("'lowesf()' function must not come between lowesb and lowese, lowesr, or lowesl.")); break ;
>  case 173:sprintf(msg, _("'lowesb()' function must come before lowese, lowesr, or lowesl.")); break ;
>  case 174:sprintf(msg, _("'lowesb()' function need not be called twice.")); break ;
>  case 175:sprintf(msg, _("need setLf=.true. for lowesl.")); break ;
>  case 180:sprintf(msg, _("nv>nvmax in 'cpvert()' function")); break ;
>  case 181:sprintf(msg, _("nt>20 in 'eval()' function")); break ;
>  case 182:sprintf(msg, _("svddc failed in 'l2fit()' function")); break ;
>  case 183:sprintf(msg, _("didnt find edge in 'vleaf()' function")); break ;
>  case 184:sprintf(msg, _("zero-width cell found in 'vleaf()' function")); break ;
>  case 185:sprintf(msg, _("trouble descending to leaf in 'vleaf()' function")); break ;
>  case 186:sprintf(msg, _("insufficient workspace for 'lowesf()' function")); break ;
>  case 187:sprintf(msg, _("insufficient stack space")); break ;
>  case 188:sprintf(msg, _("lv too small for computing explicit L")); break ;
>  case 191:sprintf(msg, _("computed trace L was negative; something is wrong!")); break ;
>  case 192:sprintf(msg, _("computed delta was negative; something is wrong!")); break ;
>  case 193:sprintf(msg, _("workspace in loread appears to be corrupted")); break ;
>  case 194:sprintf(msg, _("trouble in l2fit/l2tr")); break ;
>  case 195:sprintf(msg, _("only constant, linear, or quadratic local models allowed")); break ;
>  case 196:sprintf(msg, _("degree must be at least 1 for vertex influence matrix")); break ;
>  case 999:sprintf(msg, _("not yet implemented")); break ;
397c387
<      snprintf(msg2, 50, "Assert failed; error code %d\n",*i);
---
>      snprintf(msg2, 50, _("Assert failed; error code %d\n"),*i);
403d392
< #undef MSG
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/loglin.c R/src/library/stats/src/loglin.c
16a17
> #include "localization.h"
39c40
<     if (!nvar) error("no variables");  // not translated
---
>     if (!nvar) error(_("no variables"));
339,344d339
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/lowess.c R/src/library/stats/src/lowess.c
25,30c25
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
33c28
< #include <Rmath.h>		/* fmax2, imin2, imax2 */
---
> #include <Rmath.h>		/* fmax2 */
36a32
> #include <R_ext/Minmax.h>
155c151
<     ns = imax2(2, imin2(n, (int)(f*n + 1e-7)));
---
>     ns = max(2, min(n, (int)(f*n + 1e-7)));
228c224
< 	    i = imax2(last+1, i-1);
---
> 	    i = max(last+1, i-1);
288c284
<     if(TYPEOF(x) != REALSXP || TYPEOF(y) != REALSXP) error("invalid input");
---
>     if(TYPEOF(x) != REALSXP || TYPEOF(y) != REALSXP) error(_("invalid input"));
290c286
<     if (nx == NA_INTEGER || nx == 0) error("invalid input");
---
>     if (nx == NA_INTEGER || nx == 0) error(_("invalid input"));
292c288
<     if (!R_FINITE(f) || f <= 0) error(_("'f' must be finite and > 0"));
---
>     if (!R_FINITE(f) || f <= 0) error(_("'%s' argument must be finite and > 0"), "f");
295c291
< 	error(_("'iter' must be finite and >= 0"));
---
> 	error(_("'%s' argument must be finite and >= 0"), "iter");
298c294
< 	error(_("'delta' must be finite and > 0"));
---
> 	error(_("'%s' argument must be finite and > 0"), "delta");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/mAR.c R/src/library/stats/src/mAR.c
26c26
< 
---
> #include "localization.h"
83c83
< 	error(("assert failed in src/library/ts/src/carray.c"));
---
> 	error(_("assert failed in src/library/ts/src/carray.c"));
324c324
< 	    printf("Unknown op in array_op");
---
> 	    printf(_("Unknown operator in array_op"));
354c354
< 	    printf("Unknown op in array_op");
---
> 	    printf(_("Unknown operator in array_op"));
470c470
< 	error(_("Singular matrix in qr_solve"));
---
> 	error(_("Singular matrix in '%s' function"), "qr_solve()");
513c513
< 	error(_("Singular matrix in ldet"));
---
> 	error(_("Singular matrix in '%s' function"), "ldet()");
700c700
< 	else error(_("Invalid vmethod"));
---
> 	else error(_("invalid '%s' argument"), "vmethod");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/massdist.c R/src/library/stats/src/massdist.c
32a33
> #include "localization.h"
40c41
<     if (n == NA_INTEGER || n <= 0) error("invalid '%s' argument", "n");
---
>     if (n == NA_INTEGER || n <= 0) error(_("invalid '%s' argument"), "n");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/model.c R/src/library/stats/src/model.c
28,34c28
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
575,576c569
< 	    warning(_("problem with term %d in model.matrix: no columns are assigned"),
< 		      j+1);
---
> 	    warning(_("problem with term %d in model.matrix(): no columns are assigned"), j+1);
662,663c655
< 			error(_("variables of type '%s' are not allowed in model matrices"),
< 			      type2char(TYPEOF(var_i)));
---
> 			error(_("variables of type '%s' are not allowed in model matrices"), type2char(TYPEOF(var_i)));
1125c1117
< 		error(_("invalid model formula"));
---
> 		error(_("invalid model formula in '%s' function"), "ExtractVars()");
1187c1179
<     error(_("invalid model formula in ExtractVars"));
---
>     error(_("invalid model formula in '%s' function"), "ExtractVars()");
1595c1587
<     error(_("invalid model formula in EncodeVars"));
---
>     error(_("invalid model formula in '%s' function"), "EncodeVars()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/modreg.h R/src/library/stats/src/modreg.h
26,31d25
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/monoSpl.c R/src/library/stats/src/monoSpl.c
21a22
> #include "localization.h"
36c37
< 	error(_("n must be at least two"));
---
> 	error(_("'%s' argument must be at least two"), "n");
69c70
< 	    error(_("Argument m must be numeric"));
---
> 	    error(_("'%s' argument must be numeric"), "m");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/nls.c R/src/library/stats/src/nls.c
32a33
> #include <R_ext/Minmax.h>
34,37c35
< 
< #ifndef MIN
< #define MIN(a,b) (((a)<(b))?(a):(b))
< #endif
---
> #include "localization.h"
67,68c65
<     const char *nms[] = {"isConv", "finIter", "finTol",
< 			 "stopCode", "stopMessage",  ""};
---
>     const char *nms[] = {"isConv", "finIter", "finTol", "stopCode", "stopMessage",  ""};
99c96
< 	error(_("'control' must be a list"));
---
> 	error(_("'%s' argument must be a list"), "control");
101c98
< 	error(_("'m' must be a list"));
---
> 	error(_("'%s' argument must be a list"), "m");
107c104
< 	error(_("'%s' absent"), "control$maxiter");
---
> 	error(_("'%s' is absent"), "control$maxiter");
112c109
< 	error(_("'%s' absent"), "control$tol");
---
> 	error(_("'%s' is absent"), "control$tol");
117c114
< 	error(_("'%s' absent"), "control$minFactor");
---
> 	error(_("'%s' is absent"), "control$minFactor");
122c119
< 	error(_("'%s' absent"), "control$warnOnly");
---
> 	error(_("'%s' is absent"), "control$warnOnly");
127c124
< 	error(_("'%s' absent"), "control$printEval");
---
> 	error(_("'%s' is absent"), "control$printEval");
168c165
< 	error(_("'%s' absent"), "m$conv()");
---
> 	error(_("'%s' is absent"), "m$conv()");
173c170
< 	error(_("'%s' absent"), "m$incr()");
---
> 	error(_("'%s' is absent"), "m$incr()");
178c175
< 	error(_("'%s' absent"), "m$deviance()");
---
> 	error(_("'%s' is absent"), "m$deviance()");
183c180
< 	error(_("'%s' absent"), "m$trace()");
---
> 	error(_("'%s' is absent"), "m$trace()");
188c185
< 	error(_("'%s' absent"), "m$setPars()");
---
> 	error(_("'%s' is absent"), "m$setPars()");
193c190
< 	error(_("'%s' absent"), "m$getPars()");
---
> 	error(_("'%s' is absent"), "m$getPars()");
222,223c219
< 		Rprintf("  It. %3d, fac= %11.6g, eval (no.,total): (%2d,%3d):",
< 			i+1, fac, evalCnt, evaltotCnt);
---
> 		Rprintf("  It. %3d, fac= %11.6g, eval (no.,total): (%2d,%3d):", i + 1, fac, evalCnt, evaltotCnt);
243c239
< 		fac = MIN(2*fac, 1);
---
> 		fac = min(2*fac, 1);
290c286
< 	error(_("'theta' should be of type character"));
---
> 	error(_("'%s' argument should be of type character"), "theta");
296c292
< 	    error(_("'rho' should be an environment"));
---
> 	    error(_("'%s' argument should be an environment"), "rho");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/nls.h R/src/library/stats/src/nls.h
20,25d19
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/optim.c R/src/library/stats/src/optim.c
28,34c28
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
82c76
< 	if (!R_FINITE(p[i])) error(_("non-finite value supplied by optim"));
---
> 	if (!R_FINITE(p[i])) error(_("non-finite value supplied by 'optim' argument"));
109c103
< 		error(_("non-finite value supplied by optim"));
---
> 		error(_("non-finite value supplied by 'optim' argument"));
152c146
< 		    error(("non-finite finite-difference value [%d]"), i+1);
---
> 		    error(_("non-finite finite-difference value [%d]"), i+1);
191c185
< 		    error(("non-finite finite-difference value [%d]"), i+1);
---
> 		    error(_("non-finite finite-difference value [%d]"), i+1);
223c217
<     if (!isFunction(fn)) error(_("'fn' is not a function"));
---
>     if (!isFunction(fn)) error(_("'%s' argument is not a function"), "fn");
241c235
< 	error(_("'parscale' is of the wrong length"));
---
> 	error(_("'%s' argument is of the wrong length"), "parscale");
270c264
<     if (maxit == NA_INTEGER) error(_("'maxit' is not an integer"));
---
>     if (maxit == NA_INTEGER) error(_("'%s' argument is not an integer"), "maxit");
290c284
< 	    error(_("'tmax' is not a positive integer"));
---
> 		error(_("'%s' argument is not a positive integer"), "tmax");
292c286
< 	    if (!isFunction(gr)) error(_("'gr' is not a function"));
---
> 	    if (!isFunction(gr)) error(_("'%s' argument is not a function"), "gr");
309c303
< 	    if (!isFunction(gr)) error(_("'gr' is not a function"));
---
> 	    if (!isFunction(gr)) error(_("'%s' argument is not a function"), "gr");
315c309
< 		error(_("'ndeps' is of the wrong length"));
---
> 		error(_("'%s' argument is of the wrong length"), "ndeps");
334c328
< 	    if (!isFunction(gr)) error(_("'gr' is not a function"));
---
> 	    if (!isFunction(gr)) error(_("'%s' argument is not a function"), "gr");
340c334
< 		error(_("'ndeps' is of the wrong length"));
---
> 		error(_("'%s' argument is of the wrong length"), "ndeps");
364c358
< 	    if (!isFunction(gr)) error(_("'gr' is not a function"));
---
> 	    if (!isFunction(gr)) error(_("'%s' argument is not a function"), "gr");
370c364
< 		error(_("'ndeps' is of the wrong length"));
---
> 		error(_("'%s' argument is of the wrong length"), "ndeps");
400c394
< 	error(_("unknown 'method'"));
---
> 	error(_("invalid '%s' value"), "method");
429c423
<     if (!isFunction(fn)) error(_("'fn' is not a function"));
---
>     if (!isFunction(fn)) error(_("'%s' argument is not a function"), "fn");
435c429
< 	error(_("'parscale' is of the wrong length"));
---
> 	error(_("'%s' argument is of the wrong length"), "parscale");
443c437
< 	if (!isFunction(gr)) error(_("'gr' is not a function"));
---
> 	if (!isFunction(gr)) error(_("'%s' argument is not a function"), "gr");
449c443
<     if (LENGTH(ndeps) != npar) error(_("'ndeps' is of the wrong length"));
---
>     if (LENGTH(ndeps) != npar) error(_("'%s' argument is of the wrong length"), "ndeps");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/optimize.c R/src/library/stats/src/optimize.c
26d25
< #define NO_NLS
35,41c34
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
237c230
<     error(_("invalid function value in 'optimize'"));
---
>     error(_("invalid function value in '%s' function"), "optimize()");
328c321
<     error(_("invalid function value in 'zeroin'"));
---
>     error(_("invalid function value in '%s' function"), "zeroin()");
363c356
<     if (ISNA(f_ax)) error(_("NA value for '%s' is not allowed"), "f.lower");
---
>     if (ISNA(f_ax)) error(_("NA value for '%s' argument is not allowed"), "f.lower");
368c361
<     if (ISNA(f_bx)) error(_("NA value for '%s' is not allowed"), "f.upper");
---
>     if (ISNA(f_bx)) error(_("NA value for '%s' argument is not allowed"), "f.upper");
378c371
<     if (iter <= 0) error(_("'maxiter' must be positive"));
---
>     if (iter <= 0) error(_("'%s' argument must be positive"), "maxiter");
639c632
< 	error(_("nlm is inefficient for 1-d problems"));
---
> 	error(_("'nlm()' function is inefficient for 1-d problems"));
641c634
< 	error(_("invalid gradient tolerance in nlm"));
---
> 	error(_("invalid gradient tolerance in 'nlm()' function"));
643c636
< 	error(_("invalid iteration limit in nlm"));
---
> 	error(_("invalid iteration limit in 'nlm()' function"));
647c640
< 	error(_("no analytic gradient to check in nlm!"));
---
> 	error(_("no analytic gradient to check in 'nlm()' function"));
649c642
< 	error(_("no analytic Hessian to check in nlm!"));
---
> 	error(_("no analytic Hessian to check in 'nlm()' function"));
655c648
< 	error(_("*** unknown error message (msg = %d) in nlm()\n*** should not happen!"), nerr);
---
> 	error(_("*** unknown error message (msg = %d) in 'nlm()' function\n*** should not happen!"), nerr);
675,677c668
< 	Rprintf(_("Either x is an approximate local minimum of the function,\n\
< the function is too non-linear for this algorithm,\n\
< or steptol is too large.\n"));
---
> 	Rprintf(_("Either 'x' is an approximate local minimum of the function, the function is too non-linear for this algorithm, or 'steptol' is too large.\n"));
683,687c674
< 	Rprintf(_("Maximum step size exceeded 5 consecutive times.\n\
< Either the function is unbounded below,\n\
< becomes asymptotic to a finite value\n\
< from above in some direction,\n"\
< "or stepmx is too small.\n"));
---
> 	Rprintf(_("Maximum step size exceeded 5 consecutive times. Either the function is unbounded below, becomes asymptotic to a finite value from above in some direction, or 'stepmx' is too small.\n"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/pacf.c R/src/library/stats/src/pacf.c
23a24,25
> #include <R_ext/Minmax.h>
> 
25a28
> #include "localization.h"
27,32d29
< #ifndef max
< #define max(a,b) ((a < b)?(b):(a))
< #endif
< #ifndef min
< #define min(a,b) ((a > b)?(b):(a))
< #endif
466c463
< 	error(_("invalid value of lag.max"));
---
> 	error(_("invalid '%s' value"), "lag.max");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/port.c R/src/library/stats/src/port.c
20a21
> #include "localization.h"
318c319
< 	if(ISNAN(gv[i])) error("NA/NaN gradient evaluation");
---
> 	if(ISNAN(gv[i])) error(_("NA/NaN gradient evaluation"));
332c333
< 		if(ISNAN(hv[pos])) error("NA/NaN Hessian evaluation");
---
> 		if(ISNAN(hv[pos])) error(_("NA/NaN Hessian evaluation"));
384c385
< 	error(_("'rho' must be an environment"));
---
> 	error(_("'%s' argument must be an environment"));
386c387
< 	error(_("'d' must be a nonempty numeric vector"));
---
> 	error(_("'%s' argument must be a nonempty numeric vector"), "d");
420c421
< 		warning("NA/NaN function evaluation");
---
> 		warning(_("NA/NaN function evaluation"));
464c465
< 	error(_("'getElement' applies only to named lists"));
---
> 	error(_("'getElement()' function applies only to named lists"));
484,485c485,492
<     if (!isFunction(ans = getElement(list, enm)))
< 	error(_("%s$%s() not found"), lnm, enm);
---
>     if (!isFunction(ans = getElement(list, enm))) {
> 	char *bf = NULL;
> 	strcat(bf, lnm);
> 	strcat(bf, "$");
> 	strcat(bf, enm);
> 	strcat(bf, "()");
> 	error(_("'%s' was not found"), bf);
> 	}
498,499c505
< 	error(_("'gradient' must be a numeric matrix of dimension (%d,%d)"),
< 	      gdims[0], gdims[1]);
---
> 	error(_("'gradient' argument must be a numeric matrix of dimension (%d,%d)"), gdims[0], gdims[1]);
532c538
< 	error(_("invalid type for eval_check_store"));
---
> 	error(_("invalid type for 'eval_check_store()' function"));
552,553c558,559
< 	error(_("'d' must be a nonempty numeric vector"));
<     if(!isNewList(m)) error(_("m must be a list"));
---
> 	error(_("'%s' argument must be a nonempty numeric vector"), "d");
>     if(!isNewList(m)) error(_("'%s' argument must be a list"), "m");
573c579
< 	} else error(_("'lowerb' and 'upperb' must be numeric vectors"));
---
> 	} else error(_("'%s' and '%s' arguments must be numeric vectors"), "lowerb", "upperb");
596c602
< 	    Rprintf("nlsb_iterate returned %d", INTEGER(iv)[0]);
---
> 	    Rprintf(_("'nlsb_iterate()' function returned %d"), INTEGER(iv)[0]);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/port.h R/src/library/stats/src/port.h
35,40d34
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/rWishart.c R/src/library/stats/src/rWishart.c
31c31
< #include "stats.h" // for _()
---
> #include "localization.h" //for _()
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/random.c R/src/library/stats/src/random.c
31c31
< #undef _
---
> 
32a33
> #include "localization.h"
53c54
<     warning(_("NAs produced"));
---
>     warning(_("NA values produced"));
128c129
< 	if (naflag) warning(_("NAs produced"));
---
> 	if (naflag) warning(_("NA values produced"));
200c201
< 	if (naflag) warning(_("NAs produced"));
---
> 	if (naflag) warning(_("NA values produced"));
284c285
< 	if (naflag) warning(_("NAs produced"));
---
> 	if (naflag) warning(_("NA values produced"));
310c311
< 	    error(_("NA in probability vector"));
---
> 	    error(_("NA value in probability vector"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/rcont.c R/src/library/stats/src/rcont.c
14,20c14
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
< 
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/sbart.c R/src/library/stats/src/sbart.c
10a11
> #include "localization.h"
354c355
< 	    REprintf("spar-finding: non-finite value %g; using BIG value\n", fu);
---
> 	    REprintf(_("spar-finding: non-finite value %g; using BIG value\n"), fu);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/smooth.c R/src/library/stats/src/smooth.c
35,40c35
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/splines.c R/src/library/stats/src/splines.c
47a48
> #include "localization.h"
369c370
<     if(XLENGTH(y) != n) error("inputs of different lengths");
---
>     if(XLENGTH(y) != n) error(_("inputs of different lengths"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/starma.c R/src/library/stats/src/starma.c
26,33c26,27
< 
< 
< #ifndef max
< #define max(a,b) ((a < b)?(b):(a))
< #endif
< #ifndef min
< #define min(a,b) ((a > b)?(b):(a))
< #endif
---
> #include "localization.h"
> #include <R_ext/Minmax.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/stats.h R/src/library/stats/src/stats.h
25,31d24
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("stats", String)
< #else
< #define _(String) (String)
< #endif
< 
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats/src/swilk.c R/src/library/stats/src/swilk.c
28a29,30
> #include "localization.h"
> #include <R_ext/Minmax.h>
30,32d31
< #ifndef min
< # define min(a, b)		((a) > (b) ? (b) : (a))
< #endif
209c208
< 	error("ifault=%d. This should not happen", ifault);
---
> 	error(_("ifault=%d. This should not happen"), ifault);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/stats4/R/mle.R R/src/library/stats4/R/mle.R
80c80
<     cat("\nCall:\n")
---
>     cat("\n", gettext("Call:", domain = "R-stats4"),"\n", sep = "")
82c82
<     cat("\nCoefficients:\n")
---
>     cat("\n", gettext("Coefficients:", domain = "R-stats4"), "\n", sep = "")
87c87
<     cat("Maximum likelihood estimation\n\nCall:\n")
---
>     cat(gettext("Maximum likelihood estimation", domain = "R-stats4"), "\n\n", gettext("Call:", domain = "R-stats4"), "\n", sep = "")
89c89
<     cat("\nCoefficients:\n")
---
>     cat("\n", gettext("Coefficients:", domain = "R-stats4"), "\n", sep = "")
154c154,157
<                 cat("\nParameter:", pi, c("down", "up")[(sgn + 1)/2 + 1], "\n")
---
> 	     if(sgn == -1)
>                 cat("\n", gettextf("Parameter: %s down", pi, domain = "R-stats4"), "\n", sep = "")
> 	     else
>                 cat("\n", gettextf("Parameter: %s up", pi, domain = "R-stats4"), "\n", sep = "")
314c317
<     cat("Profiling...\n")
---
>     cat(gettext("Profiling...", domain = "R-stats4"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/R/Tk.R R/src/library/tcltk/R/Tk.R
268,269c268
<                 stop(gettextf("cannot handle object of mode '%s'",
<                               storage.mode(x)), domain = NA)
---
>                 stop(gettextf("cannot handle object of mode '%s'", storage.mode(x)), domain = "R-tcltk")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/R/tclsearch.R R/src/library/tcltk/R/tclsearch.R
37,38c37
<             warning(gettextf("Tcl package '%s' not found", package),
<                     domain = NA)
---
>             warning(gettextf("Tcl package '%s' not found", package), domain = "R-tcltk")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/R/unix/zzz.R R/src/library/tcltk/R/unix/zzz.R
53,54c53
<                     stop("Tcl/Tk libraries are missing: install the Tcl/Tk component from the R installer",
<                          domain = NA)
---
>                     stop("Tcl/Tk libraries are missing: install the Tcl/Tk component from the R installer")
61,62c60
<                     stop("X11 library is missing: install XQuartz from xquartz.macosforge.org",
<                          domain = NA)
---
>                     stop("X11 library is missing: install XQuartz from xquartz.macosforge.org")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/R/utils.R R/src/library/tcltk/R/utils.R
157,159c157
<         stop(gettextf("'pb' is not from class %s",
<                       dQuote("tkProgressBar")),
<              domain = NA)
---
>         stop(gettextf("'pb' is not from class %s", dQuote("tkProgressBar")), domain = "R-tcltk")
166,168c164
<         stop(gettextf("'pb' is not from class %s",
<                       dQuote("tkProgressBar")),
<              domain = NA)
---
>         stop(gettextf("'pb' is not from class %s", dQuote("tkProgressBar")), domain = "R-tcltk")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/src/init.c R/src/library/tcltk/src/init.c
29c29
< #ifdef Win32
---
> #ifdef _WIN32
Only in R/src/library/tcltk/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/src/tcltk.c R/src/library/tcltk/src/tcltk.c
23d22
< #define NO_NLS
27a27
> #include "localization.h"
29,34d28
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tcltk", String)
< #else
< #define _(String) (String)
< #endif
309c303
<     if (!obj) error(_("invalid tclObj -- perhaps saved from another session?"));
---
>     if (!obj) error(_("invalid object of type tclObj -- perhaps saved from another session?"));
327c321
<     if (!obj) error(_("invalid tclObj -- perhaps saved from another session?"));
---
>     if (!obj) error(_("invalid object of type tclObj -- perhaps saved from another session?"));
400c394
<     if (!obj) error(_("invalid tclObj -- perhaps saved from another session?"));
---
>     if (!obj) error(_("invalid object of type tclObj -- perhaps saved from another session?"));
463c457
<     if (!obj) error(_("invalid tclObj -- perhaps saved from another session?"));
---
>     if (!obj) error(_("invalid object of type tclObj -- perhaps saved from another session?"));
515c509
<     if (!obj) error(_("invalid tclObj -- perhaps saved from another session?"));
---
>     if (!obj) error(_("invalid object of type tclObj -- perhaps saved from another session?"));
691c685
< #if !defined(Win32) && !defined(HAVE_AQUA)
---
> #if !defined(_WIN32) && !defined(HAVE_AQUA)
708c702
< #if !defined(Win32) && !defined(HAVE_AQUA)
---
> #if !defined(_WIN32) && !defined(HAVE_AQUA)
732c726
< #ifndef Win32
---
> #ifndef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/src/tcltk.h R/src/library/tcltk/src/tcltk.h
32c32
< #ifndef Win32
---
> #ifndef _WIN32
48c48
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tcltk/src/tcltk_unix.c R/src/library/tcltk/src/tcltk_unix.c
23d22
< #define NO_NLS
27c26
< #ifndef Win32
---
> #ifndef _WIN32
31a31
> #include "localization.h"
33,38d32
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tcltk", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/CRANtools.R R/src/library/tools/R/CRANtools.R
138c138
<         paste(c("Additional issues:",
---
>         paste(c(gettext("Additional issues:", domain = "R-tools"),
318,319c318,319
<             msg <- sprintf("Reading %s failed with message: %s",
<                            path, conditionMessage(db))
---
>             msg <- gettextf("Reading %s failed with message: %s",
>                            path, conditionMessage(db), domain = "R-tools")
329,330c329,330
<             msg <- sprintf("Reading %s failed with message: %s",
<                            path, conditionMessage(ts))
---
>             msg <- gettextf("Reading %s failed with message: %s",
>                            path, conditionMessage(ts), domain = "R-tools")
382c382
<                               message(sprintf("Checking %s", m))
---
>                               message(gettextf("Checking %s", m, domain = "R-tools"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/QC.R R/src/library/tools/R/QC.R
101c101
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
118c118
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
123,124c123
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
293,303c292,297
<                       "code objects" =
<                       gettext("Undocumented code objects:"),
<                       "data sets" =
<                       gettext("Undocumented data sets:"),
<                       "S4 classes" =
<                       gettext("Undocumented S4 classes:"),
<                       "S4 methods" =
<                       gettext("Undocumented S4 methods:"),
<                       prim_extra =
<                       gettext("Prototyped non-primitives:"),
<                       gettextf("Undocumented %s:", tag))
---
>                       "code objects" = gettext("Undocumented code objects:", domain = "R-tools"),
>                       "data sets" = gettext("Undocumented data sets:", domain = "R-tools"),
>                       "S4 classes" = gettext("Undocumented S4 classes:", domain = "R-tools"),
>                       "S4 methods" = gettext("Undocumented S4 methods:", domain = "R-tools"),
>                       prim_extra = gettext("Prototyped non-primitives:", domain = "R-tools"),
>                       gettextf("Undocumented %s:", tag, domain = "R-tools"))
332c326
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
337,338c331
<             stop(gettextf("directory '%s' does not contain R code", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
340,341c333
<             stop(gettextf("directory '%s' does not contain Rd objects", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain Rd objects", sQuote(dir)), domain = "R-tools")
379c371
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
382c374
<             stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
389,390c381,382
<             stop(gettextf("directory '%s' does not contain R code", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
> 
392,393c384
<             stop(gettextf("directory '%s' does not contain Rd objects", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain Rd objects", sQuote(dir)), domain = "R-tools")
794,795c785
<             writeLines(gettextf("Functions or methods with usage in documentation object '%s' but not in code:",
<                                 fname))
---
>             writeLines(gettextf("Functions or methods with usage in documentation object %s but not in code:", sQuote(fname), domain = "R-tools"))
805,806c795
<             writeLines(gettextf("Data with usage in documentation object '%s' but not in code:",
<                                 fname))
---
>             writeLines(gettextf("Data with usage in documentation object %s but not in code:", sQuote(fname), domain = "R-tools"))
862,864c851,853
<             writeLines(c(gettext("  Argument names in code not in docs:"),
<                          strwrap(paste(nms, collapse = " "),
<                                  indent = 4L, exdent = 4L)))
---
>             writeLines(c(gettext("  Argument names in code but not in docs:", domain = "R-tools"),
>                          strwrap(paste(nms, collapse = " "), indent = 4L, exdent = 4L)))
> 
866,868c855,857
<             writeLines(c(gettext("  Argument names in docs not in code:"),
<                          strwrap(paste(nms, collapse = " "),
<                                  indent = 4L, exdent = 4L)))
---
>             writeLines(c(gettext("  Argument names in docs but not in code:", domain = "R-tools"),
>                          strwrap(paste(nms, collapse = " "), indent = 4L, exdent = 4L)))
> 
878c867
<                     writeLines(gettext("  Mismatches in argument names (first 3):"))
---
>                     writeLines(gettext("  Mismatches in argument names (first 3):", domain = "R-tools"))
881c870
<                     writeLines(gettext("  Mismatches in argument names:"))
---
>                     writeLines(gettext("  Mismatches in argument names:", domain = "R-tools"))
884,885c873
<                     writeLines(sprintf("    Position: %d Code: %s Docs: %s",
<                                        i, nfc[i], nfd[i]))
---
>                     writeLines(gettextf("    Position: %d Code: %s Docs: %s", i, nfc[i], nfd[i], domain = "R-tools"))
900c888
<                 writeLines(gettext("  Mismatches in argument default values (first 3):"))
---
>                 writeLines(gettext("  Mismatches in argument default values (first 3):", domain = "R-tools"))
903c891
<                 writeLines(gettext("  Mismatches in argument default values:"))
---
>                 writeLines(gettext("  Mismatches in argument default values:", domain = "R-tools"))
918,920c906,910
<                 sep <- if(multiline) "\n    " else " "
<                 writeLines(sprintf("    Name: '%s'%sCode: %s%sDocs: %s",
<                                    nms[i], sep, cv, sep, dv))
---
>                 if(multiline) {
> 		   writeLines(gettextf("    Name: %s\n    Code: %s\n    Docs: %s", sQuote(nms[i]), cv, dv, domain = "R-tools"))
>                 } else {
> 		   writeLines(gettextf("    Name: %s Code: %s Docs: %s", sQuote(nms[i]), cv, dv, domain = "R-tools"))
> 	 	}
935,936c925
<         writeLines(gettextf("Codoc mismatches from documentation object '%s':",
<                             fname))
---
>         writeLines(gettextf("Codoc mismatches from documentation object %s:", sQuote(fname), domain = "R-tools"))
942,945c931,932
<                          strwrap(gettextf("Code: %s", format_args(ffc)),
<                                  indent = 2L, exdent = 17L),
<                          strwrap(gettextf("Docs: %s", format_args(ffd)),
<                                  indent = 2L, exdent = 17L)))
---
>                          strwrap(gettextf("Code: %s", format_args(ffc), domain = "R-tools"), indent = 2L, exdent = 17L),
>                          strwrap(gettextf("Docs: %s", format_args(ffd), domain = "R-tools"), indent = 2L, exdent = 17L)))
975c962
<         stop("argument 'package' must be of length 1")
---
>         stop(gettextf("'%s' argument must be of length 1", "package"))
978,979c965,966
<         stop(gettextf("directory '%s' does not contain R code", dir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
> 
981,982c968,969
<         stop(gettextf("directory '%s' does not contain Rd objects", dir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not contain Rd objects", sQuote(dir)), domain = "R-tools")
> 
1103,1105c1090
<                 strwrap(sprintf("%s: %s", gettextf(capWord(nam)),
<                                 paste(O, collapse = " ")),
<                         indent = 2L, exdent = 8L)
---
>                 strwrap(sprintf("%s: %s", gettextf(capWord(nam)), paste(O, collapse = " ")), indent = 2L, exdent = 8L)
1109,1111c1094,1095
<         c(gettextf("S4 class codoc mismatches from documentation object '%s':",
<                    nm),
<           gettextf("Slots for class '%s'", docObj[["name"]]),
---
>         c(gettextf("S4 class codoc mismatches from documentation object %s:", sQuote(nm), domain = "R-tools"),
>           gettextf("Slots for class %s", dQuote(docObj[["name"]]), domain = "R-tools"),
1142c1126
<         stop("argument 'package' must be of length 1")
---
>         stop(gettextf("'%s' argument must be of length 1", "package"))
1239,1240c1223
<         if(!grepl("^[ \n\t]*(A|This) data frame",
<                   .Rd_deparse(x, tag = FALSE)))
---
>         if(!grepl("^[ \n\t]*(A|This) data frame", .Rd_deparse(x, tag = FALSE)))
1318,1323c1301,1304
<         c(gettextf("Data codoc mismatches from documentation object '%s':", nm),
<           gettextf("Variables in data frame '%s'", docObj[["name"]]),
<           strwrap(gettextf("Code: %s", format_args(docObj[["code"]])),
<                   indent = 2L, exdent = 8L),
<           strwrap(gettextf("Docs: %s", format_args(docObj[["docs"]])),
<                   indent = 2L, exdent = 8L),
---
>         c(gettextf("Data codoc mismatches from documentation object %s:", sQuote(nm), domain = "R-tools"),
>           gettextf("Variables in data frame %s", sQuote(docObj[["name"]]), domain = "R-tools"),
>           strwrap(gettextf("Code: %s", format_args(docObj[["code"]]), domain = "R-tools"), indent = 2L, exdent = 8L),
>           strwrap(gettextf("Docs: %s", format_args(docObj[["docs"]]), domain = "R-tools"), indent = 2L, exdent = 8L),
1338c1319
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
1344c1325
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
1347,1348c1328
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
1532,1533c1512
<               c(gettextf("Undocumented arguments in documentation object '%s'",
<                          nm),
---
>               c(gettextf("Undocumented arguments in documentation object %s", sQuote(nm), domain = "R-tools"),
1538,1539c1517
<               c(gettextf("Duplicated \\argument entries in documentation object '%s':",
<                          nm),
---
>               c(gettextf("Duplicated \\argument entries in documentation object %s:", sQuote(nm), domain = "R-tools"),
1544,1545c1522
<               c(gettextf("Documented arguments not in \\usage in documentation object '%s':",
<                          nm),
---
>               c(gettextf("Documented arguments not in \\usage in documentation object %s:", sQuote(nm), domain = "R-tools"),
1550,1551c1527
<               c(gettextf("Objects in \\usage without \\alias in documentation object '%s':",
<                          nm),
---
>               c(gettextf("Objects in \\usage without \\alias in documentation object %s:", sQuote(nm), domain = "R-tools"),
1556,1557c1532
<               c(gettextf("Assignments in \\usage in documentation object '%s':",
<                          nm),
---
>               c(gettextf("Assignments in \\usage in documentation object %s:", sQuote(nm), domain = "R-tools"),
1569,1571c1544
<                                  c(gettextf("Bad \\usage lines found in documentation object '%s':",
<                                             nm),
<                                    paste0("  ", bad_lines[[nm]]))
---
>                                  c(gettextf("Bad \\usage lines found in documentation object %s:", sQuote(nm), domain = "R-tools"), paste(" ", bad_lines[[nm]]))
1588c1561
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
1598,1600c1571
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
1602,1603c1573
<             stop(gettextf("directory '%s' does not contain Rd objects", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain Rd objects", sQuote(dir)), domain = "R-tools")
1635c1605
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
1639,1640c1609
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
1645,1647c1614
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
1649,1650c1616
<             stop(gettextf("directory '%s' does not contain Rd objects", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain Rd objects", sQuote(dir)), domain = "R-tools")
1833,1836c1799,1800
<             c(gettextf("S3 methods shown with full name in documentation object '%s':",
<                        nm),
<               .pretty_format(methods_with_full_name),
<               "")
---
>             c(gettextf("S3 methods shown with full name in documentation object %s:", sQuote(nm), domain = "R-tools"),
>               .pretty_format(methods_with_full_name), "")
1864c1828
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
1872,1874c1836
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
1900,1901c1862
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
1918,1920c1879
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
1923c1882
<         if(!file.create(file)) stop("unable to create ", file, domain = NA)
---
>         if(!file.create(file)) stop(gettext("unable to create %s", file), domain = "R-tools")
1927c1886
<             stop("unable to write code files", domain = NA)
---
>             stop("unable to write code files", domain = "R-tools")
1932c1891
<         stop("you must specify 'package', 'dir' or 'file'")
---
>         stop(gettextf("you must specify '%s', '%s' or '%s' argument", "package", "dir", "file"))
1935,1936c1894
<         stop(gettextf("file '%s' does not exist", file),
<              domain = NA)
---
>         stop(gettextf("file %s does not exist", sQuote(file)), domain = "R-tools")
1999,2002c1957
<                         other_desc <<-
<                             c(other_desc,
<                               sprintf("symbol %s in the local frame",
<                                       sQuote(name)))
---
>       other_desc <<- c(other_desc, gettextf("symbol %s in the local frame", sQuote(name), domain = "R-tools"))
2005,2008c1960
<                         other_desc <<-
<                             c(other_desc,
<                               sprintf("symbol %s not in namespace",
<                                       sQuote(name)))
---
>                         other_desc <<- c(other_desc, gettextf("symbol %s not in namespace", sQuote(name), domain = "R-tools"))
2020,2022c1972
<                 other_desc <<-
<                     c(other_desc, sprintf("Evaluating %s during check gives error\n%s",
<                                           sQuote(name), sQuote(sym$message)))
---
>                 other_desc <<- c(other_desc, gettextf("Evaluating %s during check gives error\n%s", sQuote(name), sQuote(sym$message), domain = "R-tools"))
2044,2045c1994
<     	    other_desc <<- c(other_desc, sprintf("%s is of class \"%s\"",
<                                                  sQuote(name), class(sym)))
---
>     	    other_desc <<- c(other_desc, gettextf("%s is of class %s", sQuote(name), dQuote(class(sym)), domain = "R-tools"))
2062,2064c2011,2013
<                       sprintf("call includes ..., expected %d %s",
<                               numparms,
<                               if(numparms > 1L) "parameters" else "parameter"))
---
>                       sprintf(ngettext(numparms, "call includes '...', expected %d parameter",
> 						"call includes '...', expected %d parameters", domain = "R-tools"),
>                               numparms))
2074,2077c2023,2025
<                           sprintf("call to %s with %d %s, expected %d",
<                                   sQuote(name), callparms,
<                                   if(callparms > 1L) "parameters" else "parameter",
<                                   numparms))
---
>                           paste(sprintf(ngettext(callparms, "call to %s with %d parameter, expected %d",
> 						"call to %s with %d parameters, expected %d", domain = "R-tools"),
>                                   sQuote(name), callparms, numparms), collapse = ""))
2085c2033
<     	    other_desc <<- c(other_desc, sprintf("%s registered as %s, but called with %s", sQuote(name), ".Call", FF_fun))
---
>     	    other_desc <<- c(other_desc, gettextf("%s registered as %s, but called with %s", sQuote(name), sQuote(".Call"), sQuote(FF_fun), domain = "R-tools"))
2090c2038
< 	    other_desc <<- c(other_desc, sprintf("%s registered as %s, but called with %s", sQuote(name), ".External", FF_fun))
---
> 	    other_desc <<- c(other_desc, gettextf("%s registered as %s, but called with %s", sQuote(name), sQuote(".External"), sQuote(FF_fun), domain = "R-tools"))
2194,2197c2142,2144
<                      stop(gettextf("parse error in file '%s':\n%s",
<                                    file,
<                                    .massage_file_parse_error_message(conditionMessage(e))),
<                           domain = NA, call. = FALSE))
---
>                      stop(gettextf("parse error in file %s:", sQuote(file)), "\n",
>                                    .massage_file_parse_error_message(conditionMessage(e)),
>                           domain = "R-tools", call. = FALSE))
2244c2191
<                         domain = NA)
---
>                         domain = "R-tools")
2253c2200
<                         domain = NA)
---
>                         domain = "R-tools")
2274c2221
<                             domain = NA)
---
>                             domain = "R-tools")
2284c2231
<                             domain = NA)
---
>                             domain = "R-tools")
2293c2240
<                         domain = NA)
---
>                         domain = "R-tools")
2300c2247
<     		        domain = NA)
---
>     		        domain = "R-tools")
2311,2313c2258,2260
<     		        "Call with DUP:",
<     		        "Calls with DUP:",
<     		        domain = NA)
---
>     		        "Call with 'DUP':",
>     		        "Calls with 'DUP':",
>     		        domain = "R-tools")
2336c2283
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
2341,2343c2288
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
2372c2317
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
2375,2376c2320
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
2381,2383c2325,2326
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
> 
2458c2401
<                 warning(gettextf("declared S3 method '%s' not found", m),
---
>                 warning(gettextf("declared S3 method %s not found", sQuote(m)),
2597c2540
<           c("Found the following apparent S3 methods exported but not registered:",
---
>           c(gettext("Found the following apparent S3 methods exported but not registered:", domain = "R-tools"),
2614c2557
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
2619,2621c2562
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
2642c2583
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
2645,2646c2586
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
2651,2653c2591
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
2769c2707
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
2780,2781c2718
<             code_files <- c(code_files,
<                             list_files_with_exts(example_dir, "R"))
---
>             code_files <- c(code_files, list_files_with_exts(example_dir, "R"))
2787,2788c2724
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
2800,2801c2736
<             stop(gettextf("file '%s' does not exist", file),
<                  domain = NA)
---
>             stop(gettextf("file %s does not exist", sQuote(file)), domain = "R-tools")
2806c2741
<         stop("you must specify 'package', 'dir' or 'file'")
---
>         stop(gettextf("you must specify '%s', '%s' or '%s' argument", "package", "dir", "file"))
2829,2830c2764,2765
<                      stop(gettextf("parse error in file '%s':\n",
<                                    file,
---
>                      stop(gettextf("parse error in file %s:\n",
>                                    sQuote(file),
2832c2767
<                           domain = NA, call. = FALSE))
---
>                           domain = "R-tools", call. = FALSE))
2836,2838c2771
<                      stop(gettextf("parse error in examples from file '%s':\n",
<                                    file, conditionMessage(e)),
<                           domain = NA, call. = FALSE))
---
>                      stop(gettextf("parse error in examples from file %s:\n", sQuote(file), conditionMessage(e)), domain = "R-tools", call. = FALSE))
2872c2805
<         c(gettextf("File '%s':", fname),
---
>         c(gettextf("File %s:", sQuote(fname), domain = "R-tools"),
2875,2878c2808
<                             strwrap(gettextf("found T/F in %s",
<                                              paste(deparse(xfname[[i]]),
<                                                    collapse = "")),
<                                     exdent = 4L)
---
>                             strwrap(gettextf("found T/F in %s", paste(deparse(xfname[[i]]), collapse = ""), domain = "R-tools"), exdent = 4L)
2922c2852
<         stop("The package 'dir' argument must be of length 1")
---
>         stop(gettextf("'%s' argument must be of length 1", "dir"))
2931,2933c2861
< 	message(sprintf(
<             "package name '%s' seems invalid; using directory name '%s' instead",
<             package_name, dir_name))
---
> 	message(gettextf("package name %s seems invalid; using directory name %s instead", sQuote(package_name), sQuote(dir_name)))
2952c2880
<             "  No repository set, so cyclic dependency check skipped"
---
>             gettext("  No repository set, so cyclic dependency check skipped", domain = "R-tools")
3011,3012c2939
<                     desc <- readRDS(file.path(installed_in[where[1L]], pkg,
<                                               "Meta", "package.rds"))
---
>                     desc <- readRDS(file.path(installed_in[where[1L]], pkg, "Meta", "package.rds"))
3116,3118c3043,3044
<           c("There is circular dependency in the installation order:",
<             .pretty_format2("  One or more packages in", x$all_depends),
<             "  depend on this package (for the versions on the repositories).",
---
>           c(gettext("There is circular dependency in the installation order:", domain = "R-tools"),
>             "  ", .pretty_format2(gettextf("One or more packages in %s depend on this package.", x$all_depends, domain = "R-tools")),
3121,3137c3047,3048
<       if(length(bad <- x$required_but_not_installed) > 1L) {
<           c(.pretty_format2("Packages required but not available:", bad), "")
<       } else if(length(bad)) {
<           c(sprintf("Package required but not available: %s", sQuote(bad)), "")
<       },
<       if(length(bad <- x$suggested_but_not_installed) > 1L) {
<           c(.pretty_format2("Packages suggested but not available:", bad), "")
<       } else if(length(bad)) {
<           c(sprintf("Package suggested but not available: %s", sQuote(bad)), "")
<       },
<       if(length(bad <- x$required_but_obsolete) > 1L) {
<           c(.pretty_format2("Packages required and available but unsuitable versions:",
<                             bad),
<             "")
<       } else if(length(bad)) {
<           c(sprintf("Package required and available but unsuitable version: %s", sQuote(bad)),
<             "")
---
>       if(length(bad <- x$required_but_not_installed) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Package required but not available:", "Packages required but not available:", domain = "R-tools"), bad), "")
3139,3154c3050,3051
<       if(length(bad <- x$required_but_stub) > 1L) {
<           c("Former standard packages required but now defunct:",
<             .pretty_format(bad),
<             "")
<       } else if(length(bad)) {
<           c(sprintf("Former standard package required but now defunct: %s",
<                     sQuote(bad)), "")
<       },
<       if(length(bad <- x$suggests_but_not_installed) > 1L) {
<           c(.pretty_format2("Packages suggested but not available for checking:",
<                             bad),
<             "")
<       } else if(length(bad)) {
<           c(sprintf("Package suggested but not available for checking: %s",
<                      sQuote(bad)),
<             "")
---
>       if(length(bad <- x$suggested_but_not_installed) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Package suggested but not available:", "Packages suggested but not available:", domain = "R-tools"), bad), "")
3156,3162c3053,3054
<       if(length(bad <- x$enhances_but_not_installed) > 1L) {
<           c(.pretty_format2("Packages which this enhances but not available for checking:",
<                             bad),
<             "")
<       } else if(length(bad)) {
<           c(sprintf("Package which this enhances but not available for checking: %s", sQuote(bad)),
<             "")
---
>       if(length(bad <- x$required_but_obsolete) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Package required and available but unsuitable version:", "Packages required and available but unsuitable versions:", domain = "R-tools"), bad), "")
3164,3178c3056,3060
<       if(length(bad <- x$required_for_checking_but_not_declared) > 1L) {
<           c(.pretty_format2("VignetteBuilder packages not declared:", bad), "")
<       } else if(length(bad)) {
<           c(sprintf("VignetteBuilder package not declared: %s", sQuote(bad)), "")
<       },
<       if(length(bad <- x$required_for_checking_but_not_installed) > 1L) {
<           c(.pretty_format2("VignetteBuilder packages required for checking but not installed:", bad), "")
<       } else if(length(bad)) {
<           c(sprintf("VignetteBuilder package required for checking but not installed: %s", sQuote(bad)), "")
<       },
<       if(length(bad <- x$missing_vignette_depends)) {
<           c(if(length(bad) > 1L) {
<                 c("Vignette dependencies not required:", .pretty_format(bad))
<             } else {
<                 sprintf("Vignette dependency not required: %s", sQuote(bad))
---
>       if(length(bad <- x$required_but_stub) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Former standard package required but now defunct:", "Former standard packages required but now defunct:", domain = "R-tools"), bad), "")
>       },
>       if(length(bad <- x$suggests_but_not_installed) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Package suggested but not available for checking:", "Packages suggested but not available for checking:", domain = "R-tools"), bad), "")
3179a3062,3072
>       if(length(bad <- x$enhances_but_not_installed) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Package which this enhances but not available for checking:", "Packages which this enhances but not available for checking:", domain = "R-tools"), bad), "")
>       },
>       if(length(bad <- x$required_for_checking_but_not_declared) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "VignetteBuilder package not declared:", "VignetteBuilder packages not declared:", domain = "R-tools"), bad), "")
>       },
>       if(length(bad <- x$required_for_checking_but_not_installed) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "VignetteBuilder package required for checking but not installed:", "VignetteBuilder packages required for checking but not installed:", domain = "R-tools"), bad), "")
>       },
>       if(length(bad <- x$missing_vignette_depends) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Vignette dependency not required:", "Vignette dependencies not required:", domain = "R-tools"), bad),
3181,3182c3074
<                              "\\VignetteDepends{}")),
<             "")
---
>                              sQuote("\\VignetteDepends{}"), domain = "R-tools")), "")
3185,3188c3077
<           c(if(length(bad) > 1L)
<                 .pretty_format2("RdMacros packages not required:", bad)
<             else
<                 sprintf("RdMacros package not required: %s", sQuote(bad)),
---
>           c(.pretty_format2(ngettext(length(bad), "RdMacros package not required:", "RdMacros packages not required:", domain = "R-tools"), sQuote(bad)),
3192,3195c3081,3082
<       if(length(bad <- x$missing_namespace_depends) > 1L) {
<           c(.pretty_format2("Namespace dependencies not required:", bad), "")
<       } else if(length(bad)) {
<           c(sprintf("Namespace dependency not required: %s", sQuote(bad)), "")
---
>       if(length(bad <- x$missing_namespace_depends) >= 1L) {
>           c(.pretty_format2(ngettext(length(bad), "Namespace dependency not required:", "Namespace dependencies not required:", domain = "R-tools"), bad), "")
3198,3203c3085,3086
<           c(.pretty_format2("Depends: includes the non-default packages:", y),
<             strwrap(paste("Adding so many packages to the search path",
<                           "is excessive",
<                           "and importing selectively is preferable."
<                           , collapse = ", ")),
<             "")
---
>           c(.pretty_format2(gettext("Depends: includes the non-default packages:", domain = "R-tools"), y),
>             strwrap(gettext("Adding so many packages to the search path is excessive and importing selectively is preferable.", domain = "R-tools")), "")
3209,3213c3092,3094
<           c(if(length(bad) > 1L)
<             c("Packages in Depends/Imports which should probably only be in LinkingTo:", .pretty_format(bad))
<           else
<             sprintf("Package in Depends/Imports which should probably only be in LinkingTo: %s", sQuote(bad)),
<             "")
---
>           c(
>             c(sprintf(ngettext(length(bad), "Package in 'Depends/Imports' which should probably only be in 'LinkingTo': %s", "Packages in 'Depends/Imports' which should probably only be in 'LinkingTo': %s", domain = "R-tools"), .pretty_format(bad)), "")
>            )
3245,3246c3126
<     ASCII_fields <- c(.get_standard_repository_db_fields(),
<                       "Encoding", "License")
---
>     ASCII_fields <- c(.get_standard_repository_db_fields(), "Encoding", "License")
3289c3169
<             tmp <- c(tmp, gettext("Malformed package name"))
---
>             tmp <- c(tmp, gettext("Malformed package name", domain = "R-tools"))
3293,3294c3173,3174
<                          c("Invalid package name.",
<                            "This is the name of a base package."))
---
>                          c(gettext("Invalid package name.", domain = "R-tools"),
>                            gettext("This is the name of a base package.", domain = "R-tools")))
3297,3298c3177,3178
<                          c("Invalid package name.",
<                            "This name was used for a base package and is remapped by library()."))
---
>                          c(gettext("Invalid package name.", domain = "R-tools"),
>                            gettext("This name was used for a base package and is remapped by library().", domain = "R-tools")))
3382c3262
<         writeLines(c(gettext("Unknown encoding"), ""))
---
>         writeLines(c(gettext("Unknown encoding", domain = "R-tools"), ""))
3385c3265
<         writeLines(gettext("Fields with non-ASCII tags:"))
---
>         writeLines(gettext("Fields with non-ASCII tags:", domain = "R-tools"))
3387c3267
<         writeLines(c(gettext("All field tags must be ASCII."), ""))
---
>         writeLines(c(gettext("All field tags must be ASCII.", domain = "R-tools"), ""))
3391c3271
<         writeLines(gettext("Fields with non-ASCII values:"))
---
>         writeLines(gettext("Fields with non-ASCII values:", domain = "R-tools"))
3393c3273
<         writeLines(c(gettext("These fields must have ASCII values."), ""))
---
>         writeLines(c(gettext("These fields must have ASCII values.", domain = "R-tools"), ""))
3410c3290
<         writeLines(c(gettext("Malformed package version."), ""))
---
>         writeLines(c(gettext("Malformed package version.", domain = "R-tools"), ""))
3413c3293
<         writeLines(c(gettext("Malformed maintainer field."), ""))
---
>         writeLines(c(gettext("Malformed maintainer field.", domain = "R-tools"), ""))
3417c3297
<         writeLines(gettext("Malformed Depends or Suggests or Imports or Enhances field."))
---
>         writeLines(gettext("Malformed Depends or Suggests or Imports or Enhances field.", domain = "R-tools"))
3419,3421c3299,3301
<             tmp <- c(gettext("Offending entries:"),
<                      paste0("  ", bad$bad_dep_entry),
<                      strwrap(gettextf("Entries must be names of packages optionally followed by '<=' or '>=', white space, and a valid version number in parentheses.")))
---
>             tmp <- c(gettext("Offending entries:", domain = "R-tools"),
>                      paste(" ", bad$bad_dep_entry),
>                      strwrap(gettext("Entries must be names of packages optionally followed by '<=' or '>=', white space, and a valid version number in parentheses.", domain = "R-tools")))
3425,3427c3305,3307
<             tmp <- c(gettext("Entries with infeasible comparison operator:"),
<                      paste0("  ", bad$bad_dep_entry),
<                      strwrap(gettextf("Only operators '<=' and '>=' are possible.")))
---
>             tmp <- c(gettext("Entries with infeasible comparison operator:", domain = "R-tools"),
>                      paste(" ", bad$bad_dep_entry),
>                      strwrap(gettext("Only operators '<=' and '>=' are possible.", domain = "R-tools")))
3432,3434c3312,3314
<             tmp <- c(gettext("Entries with infeasible version number:"),
<                      paste0("  ", bad$bad_dep_version),
<                      strwrap(gettextf("Version numbers must be sequences of at least two non-negative integers, separated by single '.' or '-'.")))
---
>             tmp <- c(gettext("Entries with infeasible version number:", domain = "R-tools"),
>                      paste(" ", bad$bad_dep_version),
>                      strwrap(gettext("Version numbers must be sequences of at least two non-negative integers, separated by single '.' or '-'.", domain = "R-tools")))
3440,3442c3320,3321
<         writeLines(c(gettext("Invalid VignetteBuilder field."),
<                      strwrap(gettextf("This field must contain one or more packages (and no version requirement).")),
<                      ""))
---
>         writeLines(c(gettext("Invalid VignetteBuilder field.", domain = "R-tools"),
>                      strwrap(gettextf("This field must contain one or more packages (and no version requirement).", domain = "R-tools")), ""))
3446,3448c3325,3326
<         writeLines(c(gettext("Invalid Priority field."),
<                      strwrap(gettextf("Packages with priorities 'base' or 'recommended' or 'defunct-base' must already be known to R.")),
<                      ""))
---
>         writeLines(c(gettext("Invalid Priority field.", domain = "R-tools"),
>                      strwrap(gettext("Packages with priorities 'base' or 'recommended' or 'defunct-base' must already be known to R.", domain = "R-tools")), ""))
3451c3329
<         writeLines(gettext("Malformed Title field: should not end in a period."))
---
>         writeLines(gettext("Malformed Title field: should not end in a period.", domain = "R-tools"))
3454c3332
<         writeLines(gettext("Malformed Description field: should contain one or more complete sentences."))
---
>         writeLines(gettext("Malformed Description field: should contain one or more complete sentences.", domain = "R-tools"))
3459,3460c3337
<         writeLines(c(strwrap(gettextf("See section 'The DESCRIPTION file' in the 'Writing R Extensions' manual.")),
<                      ""))
---
>         writeLines(c(strwrap(gettext("See section 'The DESCRIPTION file' in the 'Writing R Extensions' manual.", domain = "R-tools")), ""))
3521,3526c3398
<         c(if(length(xx) > 1L)
<           "Packages listed in more than one of Depends, Imports, Suggests, Enhances:"
<         else
<           "Package listed in more than one of Depends, Imports, Suggests, Enhances:",
<           paste(c(" ", sQuote(xx)), collapse = " "),
<           "A package should be listed in only one of these fields.")
---
> 	sprintf(ngettext(length(xx), "Package listed in more than one of Depends, Imports, Suggests, Enhances: %s\nA package should be listed in only one of these fields.", "Packages listed in more than one of Depends, Imports, Suggests, Enhances: %s\nA package should be listed in only one of these fields.", domain = "R-tools"), paste(c(" ", sQuote(xx)), collapse = " "))
3528c3400
<       if(!x$have_src) "'LinkingTo' field is unused: package has no 'src' directory",
---
>       if(!x$have_src) gettextf("'LinkingTo' field is unused: package has no 'src' directory", domain = "R-tools"),
3530,3536c3402
<           if(length(xx) > 1L)
<               c("Versioned 'LinkingTo' values for",
<                 paste(c(" ", sQuote(xx)), collapse = " "),
<                 "are only usable in R >= 3.0.2")
<           else
<               sprintf("Versioned 'LinkingTo' value for %s is only usable in R >= 3.0.2",
<                       sQuote(xx))
---
> 	  sprintf(ngettext(length(xx), "Versioned 'LinkingTo' value for %s is only usable in R >= 3.0.2", "Versioned 'LinkingTo' values for %s are only usable in R >= 3.0.2", domain = "R-tools"), paste(c(" ", sQuote(xx)), collapse = " "))
3539,3544c3405
<           if(length(xx) > 1L)
<               c("'LinkingTo' for",
<                 paste(c(" ", sQuote(xx)), collapse = " "),
<                 "are unused as they have no 'include' directory")
<           else
<               sprintf("'LinkingTo' for %s is unused as it has no 'include' directory", sQuote(xx))
---
> 	sprintf(ngettext(length(xx), "'LinkingTo' for %s is unused as it has no 'include' directory", "'LinkingTo' for %s are unused as they have no 'include' directory"), paste(sQuote(xx), collapse = ", "))
3656,3657c3517
<           c(gettext("Malformed Authors@R field:"),
<             paste0("  ", bad))
---
>           c(gettext("Malformed Authors@R field:", domain = "R-tools"), paste(" ", bad))
3660,3661c3520
<           c(gettext("Cannot extract Author field from Authors@R field:"),
<             paste0("  ", bad))
---
>           c(gettext("Cannot extract Author field from Authors@R field:", domain = "R-tools"), paste(" ", bad))
3664c3523
<           gettext("Authors@R field gives no person with name and roles.")
---
>           gettext("Authors@R field gives no person with name and roles.", domain = "R-tools")
3668c3527
<           c(gettext("Authors@R field gives persons with no name:"),
---
>           c(gettext("Authors@R field gives persons with no name:", domain = "R-tools"),
3673c3532
<           c(gettext("Authors@R field gives persons with no role:"),
---
>           c(gettext("Authors@R field gives persons with no role:", domain = "R-tools"),
3677c3536
<           gettext("Authors@R field gives no person with name and author role")
---
>           gettext("Authors@R field gives no person with name and author role", domain = "R-tools")
3681c3540
<       ##     c(gettext("Authors@R field gives persons with non-standard roles:"),
---
>       ##     c(gettext("Authors@R field gives persons with non-standard roles:", domain = "R-tools"),
3685,3686c3544
<           c(gettext("Cannot extract Maintainer field from Authors@R field:"),
<             paste0("  ", bad))
---
>           c(gettext("Cannot extract Maintainer field from Authors@R field:", domain = "R-tools"), paste(" ", bad))
3690,3691c3548,3549
<           c(gettext("Authors@R field gives more than one person with maintainer role:"),
<             paste0("  ", bad))
---
>           c(gettext("Authors@R field gives more than one person with maintainer role:", domain = "R-tools"),
>             paste(" ", bad))
3694c3552
<           strwrap(gettext("Authors@R field gives no person with maintainer role, valid email address and non-empty name."))
---
>           strwrap(gettext("Authors@R field gives no person with maintainer role, valid email address and non-empty name.", domain = "R-tools"))
3735,3737c3593
<           c(gettextf("Encoding '%s' is not portable",
<                      x$non_portable_encoding),
<             "")
---
>           c(gettextf("Encoding %s is not portable", sQuote(x$non_portable_encoding), domain = "R-tools"), "")
3740c3596
<           gettext("Unknown encoding with non-ASCII data")
---
>           gettext("Unknown encoding with non-ASCII data", domain = "R-tools")
3743,3746c3599
<           c(gettext("Fields with non-ASCII tags:"),
<             .pretty_format(x$fields_with_non_ASCII_tags),
<             gettext("All field tags must be ASCII."),
<             "")
---
>           c(gettext("Fields with non-ASCII tags:", domain = "R-tools"), .pretty_format(x$fields_with_non_ASCII_tags), gettext("All field tags must be ASCII.", domain = "R-tools"), "")
3749,3750c3602
<           c(gettext("Fields with non-ASCII values:"),
<             .pretty_format(x$fields_with_non_ASCII_values))
---
>           c(gettext("Fields with non-ASCII values:", domain = "R-tools"), .pretty_format(x$fields_with_non_ASCII_values))
3753,3754c3605
<           c(strwrap(gettextf("See section 'The DESCRIPTION file' in the 'Writing R Extensions' manual.")),
<             "")
---
>           c(strwrap(gettext("See section 'The DESCRIPTION file' in the 'Writing R Extensions' manual.", domain = "R-tools")), "")
3838c3689
<           c(gettext("Non-standard license specification:"),
---
>           c(gettext("Non-standard license specification:", domain = "R-tools"),
3840c3691
<             gettextf("Standardizable: %s", x$is_standardizable),
---
>             paste(if(x$is_standardizable) gettext("Standardizable: TRUE", domain = "R-tools") else gettext("Standardizable: FALSE", domain = "R-tools"), sep = ""),
3842,3843c3693
<                 c(gettext("Standardized license specification:"),
<                   strwrap(x$standardization, indent = 2L, exdent = 2L))
---
>                 c(gettext("Standardized license specification:", domain = "R-tools"), strwrap(x$standardization, indent = 2L, exdent = 2L))
3847,3848c3697
<           c(gettextf("Deprecated license: %s",
<                      paste(y, collapse = " ")))
---
>           c(gettextf("Deprecated license: %s", paste(y, collapse = " "), domain = "R-tools"))
3851,3852c3700
<           c(gettextf("Invalid license file pointers: %s",
<                      paste(y, collapse = " ")))
---
>           c(paste(gettextf("Invalid license file pointers: %s", paste(y, collapse = " "), domain = "R-tools"), sep = ""))
3855,3856c3703
<           c(gettext("License components with restrictions not permitted:"),
<             paste0("  ", y))
---
>           c(gettext("License components with restrictions not permitted:", domain = "R-tools"), paste(" ", y))
3859,3860c3706
<           c(gettext("License components which are templates and need '+ file LICENSE':"),
<             paste0("  ", y))
---
>           c(gettext("License components which are templates and need '+ file LICENSE':", domain = "R-tools"), paste(" ", y))
3885,3886c3731
<                        shQuote(file.path(R.home("share"), "make",
<                                          "check_vars_ini.mk")),
---
>                        shQuote(file.path(R.home("share"), "make", "check_vars_ini.mk")),
3888,3889c3733
<                        shQuote(file.path(R.home("share"), "make",
<                                          "check_vars_out.mk")))
---
>                        shQuote(file.path(R.home("share"), "make", "check_vars_out.mk")))
3898,3899c3742
<     uflags_re <- sprintf("^(%s)FLAGS: *(.*)$",
<                          paste(prefixes, collapse = "|"))
---
>     uflags_re <- sprintf("^(%s)FLAGS: *(.*)$", paste(prefixes, collapse = "|"))
3906,3907c3749
<     pflags_re <- sprintf("^PKG_(%s)FLAGS: ",
<                          paste(prefixes, collapse = "|"))
---
>     pflags_re <- sprintf("^PKG_(%s)FLAGS: ", paste(prefixes, collapse = "|"))
3971,3973c3813
<                  gettextf("Non-portable flags in variable '%s':",
<                           names(x)),
<                  sprintf("  %s", lapply(x, paste, collapse = " ")))
---
>                  gettextf("Non-portable flags in variable %s:", sQuote(names(x)), domain = "R-tools"), sprintf("  %s", lapply(x, paste, collapse = " ")))
3989,3990c3829
<           c(gettextf("Variables overriding user/site settings:"),
<             sprintf("  %s", bad))
---
>           c(gettext("Variables overriding user/site settings:", domain = "R-tools"), sprintf("  %s", bad))
3993,3995c3832,3833
<           c(sprintf("Package has both %s and %s.",
<                   sQuote("src/Makevars.in"), sQuote("src/Makevars")),
<             strwrap(sprintf("Installation with --no-configure' is unlikely to work.  If you intended %s to be used on Windows, rename it to %s otherwise remove it.  If %s created %s, you need a %s script.",
---
>           c(gettextf("Package has both %s and %s.", sQuote("src/Makevars.in"), sQuote("src/Makevars"), domain = "R-tools"),
>             strwrap(gettextf("Installation with --no-configure' is unlikely to work. If you intended %s to be used on Windows, rename it to %s otherwise remove it.  If %s created %s, you need a %s script.",
4000c3838
<                             sQuote("cleanup"))))
---
>                             sQuote("cleanup"), domain = "R-tools")))
4111c3949
<            stop(gettextf("invalid 'OS.type' \"%s\".  Should not happen")))
---
>            stop(gettextf("invalid 'OS.type' \"%s\". Should not happen", .Platform$OS.type)))
4174c4012
< 	    stop("package must be loaded", domain = NA)
---
> 	    stop("package must be loaded", domain = "R-tools")
4240c4078
<               c("Undefined global functions or variables:",
---
>               c(gettext("Undefined global functions or variables:", domain = "R-tools"),
4342,4343c4180
<                 message(gettextf("package %s exists but was not installed under R >= 2.10.0 so xrefs cannot be checked", sQuote(pkg)),
<                         domain = NA)
---
>                 message(gettextf("package %s exists but was not installed under R >= 2.10.0 so xrefs cannot be checked", sQuote(pkg)), domain = "R-tools")
4384c4221
<                                  "Obsolete packages %s in Rd xrefs"),
---
>                                  "Obsolete packages %s in Rd xrefs", domain = "R-tools"),
4405c4242
<                                      "Packages unavailable to check Rd xrefs: %s"),
---
>                                      "Packages unavailable to check Rd xrefs: %s", domain = "R-tools"),
4411c4248
<                                      "Unknown packages %s in Rd xrefs"),
---
>                                      "Unknown packages %s in Rd xrefs", domain = "R-tools"),
4427,4428c4264
<             c(gettextf("Missing link or links in documentation object '%s':",
<                        names(xx)[i]),
---
>             c(gettextf("Missing link or links in documentation object %s:", sQuote(names(xx)[i]), domain = "R-tools"),
4430,4431c4266
<               .pretty_format(unique(xx[[i]])),
<               "")
---
>               .pretty_format(unique(xx[[i]])), "")
4434,4435c4269
<           strwrap(gettextf("See section 'Cross-references' in the 'Writing R Extensions' manual.")),
<           "")
---
>           strwrap(gettext("See section 'Cross-references' in the 'Writing R Extensions' manual.", domain = "R-tools")), "")
4503c4337
<                     "\n")
---
>                     "\n", domain = NA)
4512c4346
<         msg <- sprintf("Error loading dataset %s: ", sQuote(f))
---
>         msg <- gettextf("Error loading dataset %s: ", sQuote(f), domain = "R-tools")
4526c4360
<             msg <- sprintf("Error loading dataset %s:\n ", sQuote(ds))
---
>             msg <- gettextf("Error loading dataset %s:\n ", sQuote(ds), domain = "R-tools")
4551c4385
<                    "Note: found %d marked Latin-1 strings"), n)
---
>                    "Note: found %d marked Latin-1 strings", domain = "R-tools"), n)
4557c4391
<                            "Note: found %d marked UTF-8 strings"), n)
---
>                            "Note: found %d marked UTF-8 strings", domain = "R-tools"), n)
4563c4397
<                            "Note: found %d strings marked as \"bytes\""), n)
---
>                            "Note: found %d strings marked as \"bytes\"", domain = "R-tools"), n)
4569c4403
<                           domain = NA)
---
>                           domain = "R-tools")
4571,4572c4405
<             paste0(iconv0(x$unknown[, 1L], "", "ASCII", sub = "byte"),
<                    " in object '", x$unknown[, 2L], "'"))
---
>             gettextf("%s in object %s", iconv0(x$unknown[, 1L], "", "ASCII", sub = "byte"), sQuote(x$unknown[, 2L]), domain = "R-tools"))
4605c4438
<         if(!OK) msg <- "Warning: package needs dependence on R (>= 2.10)"
---
>         if(!OK) msg <- gettext("Warning: package needs dependence on R (>= 2.10)", domain = "R-tools")
4654c4487
<                         domain = NA)
---
>                         domain = "R-tools")
4663,4665c4496
<         writeLines(c("",
<                      "Note: significantly better compression could be obtained",
<                      "      by using R CMD build --resave-data"))
---
>         writeLines(c("", gettext("Note: significantly better compression could be obtained by using R CMD build --resave-data", domain = "R-tools")))
4693c4524
<         if(!OK) msg <- "Warning: package needs dependence on R (>= 2.10)"
---
>         if(!OK) msg <- gettext("Warning: package needs dependence on R (>= 2.10)", domain = "R-tools")
4745c4576
<         stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
4786,4787c4617
<         demo_files <- list_files_with_type(demo_dir, "demo",
<                                            full.names = FALSE)
---
>         demo_files <- list_files_with_type(demo_dir, "demo", full.names = FALSE)
4825,4827c4655
<         c(sprintf("Subdirectory '%s' contains invalid file names:",
<                   tag),
<           .pretty_format(x[[i]]))
---
>         c(gettextf("Subdirectory %s contains invalid file names:", sQuote(tag), domain = "R-tools"), .pretty_format(x[[i]]))
4840c4668
<         stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
4866c4694
<         stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
4925,4926c4753
<             lines <- iconv(readLines(file, warn = FALSE), from = enc, to = "",
<                            sub = "byte")
---
>             lines <- iconv(readLines(file, warn = FALSE), from = enc, to = "", sub = "byte")
4954,4957c4781
<     out <-
<         lapply(list_files_with_type(dir, "code", full.names = FALSE,
<                                     OS_subdirs = c("unix", "windows")),
<                collect_parse_woes)
---
>     out <- lapply(list_files_with_type(dir, "code", full.names = FALSE, OS_subdirs = c("unix", "windows")), collect_parse_woes)
4970,4973c4794,4795
<             msg <- gsub("\n", "\n  ", sub("[^:]*: *", "", xi$Error),
< 			perl = TRUE, useBytes = TRUE)
<             writeLines(c(sprintf("Error in file '%s':", xi$File),
<                          paste0("  ", msg)))
---
>             msg <- gsub("\n", "\n  ", sub("[^:]*: *", "", xi$Error), perl = TRUE, useBytes = TRUE)
>             writeLines(c(gettextf("Error in file %s:", sQuote(xi$File), domain = "R-tools"), paste(" ", msg)))
4978c4800
<                                           "Warnings in file %s:"),
---
>                                           "Warnings in file %s:", domain = "R-tools"),
4980,4981c4802
<                          paste0("  ", gsub("\n\n", "\n  ", xi$Warnings,
<                                            perl = TRUE, useBytes = TRUE))))
---
>                          paste(" ", gsub("\n\n", "\n  ", xi$Warnings, perl = TRUE, useBytes = TRUE))))
5000,5002c4821
<     x <- Filter(length,
<                 .find_calls_in_package_code(dir, predicate,
<                                             recursive = TRUE))
---
>     x <- Filter(length, .find_calls_in_package_code(dir, predicate, recursive = TRUE))
5007,5008c4826
<         writeLines(c(unlist(Map(.format_calls_in_file, x, names(x))),
<                      ""))
---
>         writeLines(c(unlist(Map(.format_calls_in_file, x, names(x))), ""))
5019,5020c4837
<     bad_call_names <-
<         unlist(.bad_call_names_in_startup_functions)
---
>     bad_call_names <- unlist(.bad_call_names_in_startup_functions)
5083c4900,4904
<     res <- if(!is.null(attr(x, ".First.lib"))) "NB: .First.lib is obsolete and will not be used in R >= 3.0.0" else character()
---
>     if(!is.null(attr(x, ".First.lib"))) {
> 	res <- gettext("NB: .First.lib is obsolete and will not be used in R >= 3.0.0", domain = "R-tools")
>    } else {
> 	res <- character()
>    }
5090,5100c4911,4915
<         has_bad_wrong_args <-
<             "bad_arg_names" %in% unlist(lapply(y, names))
<         calls <-
<             unique(unlist(lapply(y,
<                                  function(e) e[["bad_calls"]][["names"]])))
<         has_bad_calls_for_load <-
<             any(calls %in% .bad_call_names_in_startup_functions$load)
<         has_bad_calls_for_output <-
<             any(calls %in% .bad_call_names_in_startup_functions$output)
<         has_unsafe_calls <-
<             any(calls %in% .bad_call_names_in_startup_functions$unsafe)
---
>         has_bad_wrong_args <- "bad_arg_names" %in% unlist(lapply(y, names))
>         calls <- unique(unlist(lapply(y, function(e) e[["bad_calls"]][["names"]])))
>         has_bad_calls_for_load <- any(calls %in% .bad_call_names_in_startup_functions$load)
>         has_bad_calls_for_output <- any(calls %in% .bad_call_names_in_startup_functions$output)
>         has_unsafe_calls <- any(calls %in% .bad_call_names_in_startup_functions$unsafe)
5103c4918
<             c(gettextf("File %s:", sQuote(f)),
---
>             c(gettextf("File %s:", sQuote(f), domain = "R-tools"),
5110,5111c4925
<                 gettextf("  %s has wrong argument list %s",
<                          f, sQuote(paste(bad, collapse = ", ")))
---
>                 gettextf("  %s has wrong argument list %s", sQuote(f), sQuote(paste(bad, collapse = ", ")), domain = "R-tools")
5114c4928
<                   c(gettextf("  %s calls:", f),
---
>                   c(gettextf("  %s calls:", sQuote(f), domain = "R-tools"),
5126,5128c4940
<               strwrap(gettextf("Package startup functions should have two arguments with names starting with %s and %s, respectively.",
<                                sQuote("lib"), sQuote("pkg")),
<                       exdent = 2L),
---
>               strwrap(gettextf("Package startup functions should have two arguments with names starting with %s and %s, respectively.", sQuote("lib"), sQuote("pkg"), domain = "R-tools"), exdent = 2L),
5130,5131c4942
<               strwrap(gettextf("Package startup functions should not change the search path."),
<                       exdent = 2L),
---
>               strwrap(gettext("Package startup functions should not change the search path.", domain = "R-tools"), exdent = 2L),
5133,5135c4944
<               strwrap(gettextf("Package startup functions should use %s to generate messages.",
<                                sQuote("packageStartupMessage")),
<                       exdent = 2L),
---
>               strwrap(gettextf("Package startup functions should use %s to generate messages.", sQuote("packageStartupMessage"), domain = "R-tools"), exdent = 2L),
5137,5141c4946,4947
<               strwrap(gettextf("Package startup functions should not call %s.",
<                                sQuote("installed.packages")),
<                       exdent = 2L),
<               gettextf("See section %s in '%s'.",
<                        sQuote("Good practice"), "?.onAttach")
---
>               strwrap(gettextf("Package startup functions should not call %s.", sQuote("installed.packages"), domain = "R-tools"), exdent = 2L),
>               gettextf("See section %s in %s.", sQuote("Good practice"), sQuote("?.onAttach"), domain = "R-tools")
5234c5040,5044
<     res <- if(!is.null(attr(x, ".Last.lib"))) "NB: .Last.lib will not be used unless it is exported" else character()
---
>     if(!is.null(attr(x, ".Last.lib"))) {
> 	res <- gettext("NB: .Last.lib will not be used unless it is exported", domain = "R-tools")
>     } else {
> 	res <- character()
>     }
5247c5057
<             c(gettextf("File %s:", sQuote(f)),
---
>             c(gettextf("File %s:", sQuote(f), domain = "R-tools"),
5255c5065
<                          f, sQuote(paste(bad, collapse = ", ")))
---
>                          sQuote(f), sQuote(paste(bad, collapse = ", ")), domain = "R-tools")
5258c5068
<                   c(gettextf("  %s calls:", f),
---
>                   c(gettextf("  %s calls:", sQuote(f), domain = "R-tools"),
5270,5271c5080
<               strwrap(gettextf("Package detach functions should have one argument with name starting with %s.", sQuote("lib")),
<                       exdent = 2L),
---
>               strwrap(gettextf("Package detach functions should have one arguments with names starting with %s.", sQuote("lib"), domain = "R-tools"), exdent = 2L),
5273,5277c5082,5083
<               strwrap(gettextf("Package detach functions should not call %s.",
<                                sQuote("library.dynam.unload")),
<                       exdent = 2L),
<               gettextf("See section %s in '%s'.",
<                        sQuote("Good practice"), "?.Last.lib")
---
>               strwrap(gettextf("Package detach functions should not call %s.", sQuote("library.dynam.unload"), domain = "R-tools"), exdent = 2L),
>               gettextf("See section %s in %s.", sQuote("Good practice"), sQuote("?.Last.lib"), domain = "R-tools")
5389c5195
<     c("Found the following assignments to the global environment:",
---
>     c(gettext("Found the following assignments to the global environment:", domain = "R-tools"),
5414c5220
<     c("Found the following calls to attach():",
---
>     c(gettext("Found the following calls passed to 'attach()':", domain = "R-tools"),
5455c5261
<     c("Found the following calls to data() loading into the global environment:",
---
>     c(gettext("Found the following calls passed to 'data()' loading into the global environment:", domain = "R-tools"),
5468c5274
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
5473,5475c5279
<             stop(gettextf("directory '%s' does not contain R code",
<                           dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not contain R code", sQuote(dir)), domain = "R-tools")
5496,5497c5300
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
5509c5312
<             if(!file.create(file)) stop("unable to create ", file)
---
>             if(!file.create(file)) stop(gettextf("unable to create file %s", sQuote(file)))
5523,5525c5326
<     standard_package_names <-
<         setdiff(.get_standard_package_names()$base,
<                 c("methods", "stats4"))
---
>     standard_package_names <- setdiff(.get_standard_package_names()$base, c("methods", "stats4"))
5532,5533c5333
<     imports <- c(imports, depends, suggests, enhances, pkg_name,
<                  standard_package_names)
---
>     imports <- c(imports, depends, suggests, enhances, pkg_name, standard_package_names)
5613,5614c5413
<         if(length(objects(code_env, all.names = TRUE,
<                           pattern = "^[.]__[CT]_")))
---
>         if(length(objects(code_env, all.names = TRUE, pattern = "^[.]__[CT]_")))
5642,5645c5441,5443
<                      stop(gettextf("parse error in file '%s':\n%s",
<                                    file,
<                                    .massage_file_parse_error_message(conditionMessage(e))),
<                                domain = NA, call. = FALSE))
---
>                      stop(gettextf("parse error in file %s:", sQuote(file)), "\n",
>                                    .massage_file_parse_error_message(conditionMessage(e)),
>                                domain = "R-tools", call. = FALSE))
5664c5462
<             gettext("package 'methods' is used but not declared")
---
>             gettext("package 'methods' is used but not declared", domain = "R-tools")
5760,5761c5558
<                  exps <- c(ls(envir = getNamespaceInfo(p, "exports"),
<                               all.names = TRUE), extras[[p]])
---
>                  exps <- c(ls(envir = getNamespaceInfo(p, "exports"), all.names = TRUE), extras[[p]])
5823,5828c5620,5624
<           if(length(xx) > 1L) {
<               c(gettext("'::' or ':::' imports not declared from:"),
<                 .pretty_format(sort(xx)))
<           } else {
<               gettextf("'::' or ':::' import not declared from: %s", sQuote(xx))
<           }
---
> 	  paste(sprintf(ngettext(length(xx),
>  "'::' or ':::' import not declared from: %s",
>  "'::' or ':::' imports not declared from: %s", domain = "R-tools"),
>  .pretty_format(sort(xx))),
>  collapse = "")
5831,5837c5627,5631
<           if(length(xx) > 1L) {
<               c(gettext("'library' or 'require' calls not declared from:"),
<                 .pretty_format(sort(xx)))
<           } else {
<               gettextf("'library' or 'require' call not declared from: %s",
<                        sQuote(xx))
<           }
---
> 	  paste(sprintf(ngettext(length(xx),
>  "'library' or 'require' call not declared from: %s",
>  "'library' or 'require' calls not declared from: %s", domain = "R-tools"),
>  .pretty_format(sort(xx))),
>  collapse = "")
5840,5846c5634
<           if(length(xx) > 1L) {
<               c(gettext("'loadNamespace' or 'requireNamespace' calls not declared from:"),
<                 .pretty_format(sort(xx)))
<           } else {
<               gettextf("'loadNamespace' or 'requireNamespace' call not declared from: %s",
<                        sQuote(xx))
<           }
---
>           sprintf(ngettext("'loadNamespace' or 'requireNamespace' call not declared from: %s", "'loadNamespace' or 'requireNamespace' calls not declared from: %s", domain = "R-tools"), .pretty_format(sort(xx)))
5849,5856c5637,5640
<           msg <- "  Please remove these calls from your code."
<           if(length(xx) > 1L) {
<               c(gettext("'library' or 'require' calls to packages already attached by Depends:"),
<                 .pretty_format(sort(xx)), msg)
<           } else {
<               c(gettextf("'library' or 'require' call to %s which was already attached by Depends.",
<                          sQuote(xx)), msg)
<           }
---
> 	  sprintf(ngettext(length(xx),
>  "'library' or 'require' call to package %s which was already attached by Depends. Please remove these calls from your code.",
>  "'library' or 'require' call to packages %s which were already attached by Depends. Please remove these calls from your code.", domain = "R-tools"),
>  .pretty_format(sort(xx)))
5859,5867c5643
<           msg <-
<               "  Please use :: or requireNamespace() instead.\n  See section 'Suggested packages' in the 'Writing R Extensions' manual."
<           if(length(xx) > 1L) {
<               c(gettext("'library' or 'require' calls in package code:"),
<                 .pretty_format(sort(xx)), msg)
<           } else {
<               c(gettextf("'library' or 'require' call to %s in package code.",
<                          sQuote(xx)), msg)
<           }
---
>           sprintf(ngettext(length(xx), "'library' or 'require' call in package code: %s\n  Please use :: or requireNamespace() instead.\n  See section 'Suggested packages' in the 'Writing R Extensions' manual.", "'library' or 'require' calls in package code: %s\n  Please use :: or requireNamespace() instead.\n  See section 'Suggested packages' in the 'Writing R Extensions' manual.",domain = "R-tools"), .pretty_format(sort(xx)))
5871,5878c5647,5650
<           msg <- "  All declared Imports should be used."
<           if(length(xx) > 1L) {
<               c(gettext("Namespaces in Imports field not imported from:"),
<                 .pretty_format(sort(xx)), msg)
<           } else {
<               c(gettextf("Namespace in Imports field not imported from: %s",
<                        sQuote(xx)), msg)
<           }
---
> 	  sprintf(ngettext(length(xx),
>  "Namespace in Imports field not imported from: %s\nAll declared Imports should be used.",
>  "Namespaces in Imports field not imported from: %s\nAll declared Imports should be used.", domain = "R-tools"),
>  .pretty_format(sort(xx)))
5881,5889c5653,5656
<           msg <- c("  These packages need to be imported from (in the NAMESPACE file)",
<                    "  for when this namespace is loaded but not attached.")
<           if(length(xx) > 1L) {
<               c(gettext("Packages in Depends field not imported from:"),
<                 .pretty_format(sort(xx)), msg)
<           } else {
<               c(gettextf("Package in Depends field not imported from: %s",
<                          sQuote(xx)), msg)
<           }
---
> 	  sprintf(ngettext(length(xx),
>  "Package in Depends field not imported from: %s\nThese packages needs to imported from for the case when this namespace is loaded but not attached.",
>  "Packages in Depends field not imported from: %s\nThese packages needs to imported from for the case when this namespace is loaded but not attached.", domain = "R-tools"),
>  .pretty_format(sort(xx)))
5892,5893c5659,5661
<           if(length(xx) > 1L) {
<               c(gettext("Missing or unexported objects:"),
---
>       sprintf(ngettext(length(xx),
>  "Missing or unexported object: %s",
>  "Missing or unexported objects: %s", domain = "R-tools"),
5895,5897d5662
<           } else {
<               gettextf("Missing or unexported object: %s", sQuote(xx))
<           }
5900,5908c5665,5668
<           msg <- "See the note in ?`:::` about the use of this operator."
<           msg <- strwrap(paste(msg, collapse = " "), indent = 2L, exdent = 2L)
<           if(length(xx) > 1L) {
<               c(gettext("':::' calls which should be '::':"),
<                 .pretty_format(sort(xx)), msg)
<           } else {
<               c(gettextf("':::' call which should be '::': %s",
<                          sQuote(xx)), msg)
<           }
---
> 	  sprintf(ngettext(length(xx),
>  "':::' call which should be '::': %s\nSee the note in ?`:::` about the use of this operator.",
>  "':::' calls which should be '::': %s\nSee the note in ?`:::` about the use of this operator.", domain = "R-tools"),
>  .pretty_format(sort(xx)))
5911,5912c5671,5673
<            if(length(xx) > 1L) {
<               c(gettext("Missing objects imported by ':::' calls:"),
---
>       sprintf(ngettext(length(xx),
>  "Missing object imported by a ':::' call: %s",
>  "Missing objects imported by a ':::' calls: %s", domain = "R-tools"),
5914,5917d5674
<           } else {
<               gettextf("Missing object imported by a ':::' call: %s",
<                        sQuote(xx))
<           }
5920,5921d5676
<           msg <- "See the note in ?`:::` about the use of this operator."
<           msg <- strwrap(paste(msg, collapse = " "), indent = 2L, exdent = 2L)
5925,5935c5680,5690
<               if (any(z %in% base))
<                   msg <- c(msg,
<                            "  Including base/recommended package(s):",
<                            .pretty_format(intersect(base, z)))
<           }
<           if(length(xxx) > 1L) {
<               c(gettext("Unexported objects imported by ':::' calls:"),
<                 .pretty_format(sort(xxx)), msg)
<           } else  if(length(xxx)) {
<               c(gettextf("Unexported object imported by a ':::' call: %s",
<                          sQuote(xxx)), msg)
---
>           }
> 	  if(incoming && (any(z %in% base)) && (length(xxx) >= 1L)) {
> 	  paste(sprintf(ngettext(length(xxx),
>  "Unexported object imported by a ':::' call: %s\nSee the note in ?`:::` about the use of this operator.\nIncluding base/recommended package(s): %s",
>  "Unexported objects imported by ':::' calls: %s\nSee the note in ?`:::` about the use of this operator.\nIncluding base/recommended package(s): %s", domain = "R-tools"),
>  .pretty_format(sort(xxx)), .pretty_format(intersect(base, z))), sep = "")
> 	  } else if(length(xxx) >= 1L){
> 	  sprintf(ngettext(length(xxx),
>  "Unexported object imported by a ':::' call: %s\nSee the note in ?`:::` about the use of this operator.",
>  "Unexported objects imported by ':::' calls: %s\nSee the note in ?`:::` about the use of this operator.", domain = "R-tools"),
>  .pretty_format(sort(xxx)))
5939,5943c5694
<           msg <-
<               c("There are ::: calls to the package's namespace in its code.",
<                 "A package almost never needs to use ::: for its own objects:")
<           c(strwrap(paste(msg, collapse = " "), indent = 0L, exdent = 2L),
<             .pretty_format(sort(x$imp3selfcalls)))
---
>               gettextf("There are ::: calls to the package's namespace in its code. A package almost never needs to use ::: for its own objects: %s", .pretty_format(sort(x$imp3selfcalls)), domain = "R-tools")
5946,5954c5697,5700
<           msg <- "See the note in ?`:::` about the use of this operator."
<           msg <- strwrap(paste(msg, collapse = " "), indent = 2L, exdent = 2L)
<           if(length(xx) > 1L) {
<               c(gettext("Unavailable namespaces imported from by ':::' calls:"),
<                 .pretty_format(sort(xx)), msg)
<           } else {
<               c(gettextf("Unavailable namespace imported from by a ':::' call: %s",
<                          sQuote(xx)), msg)
<           }
---
> 	  sprintf(ngettext(length(xx),
>  "Unavailable namespace imported from by a ':::' call: %s\nSee the note in ?`:::` about the use of this operator.",
>  "Unavailable namespaces imported from by ':::' calls: %s\nSee the note in ?`:::` about the use of this operator.", domain = "R-tools"),
>  .pretty_format(sort(xx)))
5957,5963c5703,5706
<           if(length(xx) > 1L) {
<               c(gettext("'data(package=)' calls not declared from:"),
<                 .pretty_format(sort(xx)))
<           } else {
<               gettextf("'data(package=)' call not declared from: %s",
<                        sQuote(xx))
<           }
---
> 	  paste(sprintf(ngettext(length(xx),
>  "'data(package=)' call not declared from: %s",
>  "'data(package=)' calls not declared from: %s", domain = "R-tools"),
>  .pretty_format(sort(xx))), collapse = "")
6056c5799
<                                      domain = NA, call. = FALSE)
---
>                                      domain = "R-tools", call. = FALSE)
6066,6069c5809,5812
<                  warning(gettextf("parse error in file '%s':\n%s",
<                                   summary(files)$description,
<                                   .massage_file_parse_error_message(conditionMessage(e))),
<                          domain = NA, call. = FALSE))
---
>                  warning(gettextf("parse error in file %s:",
>                                   sQuote(summary(files)$description)), "\n",
>                                   .massage_file_parse_error_message(conditionMessage(e)),
>                          domain = "R-tools", call. = FALSE))
6086c5829
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
6090,6091c5833
<     }
<     else if(!missing(dir)) {
---
>     } else if(!missing(dir)) {
6095c5837
<             stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
6130c5872
<         stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
6184c5926
<         stop("argument 'package' must be of length 1")
---
>         stop(gettextf("'%s' argument must be of length 1", "package"))
6272c6014
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
6287c6029
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
6340,6343c6082,6083
<                           "Found possibly global 'T' or 'F' in the following functions:"
<                           )
<           c(strwrap(msg),
<             .pretty_format(x$bad_closures))
---
>                           "Found possibly global 'T' or 'F' in the following functions:", domain = "R-tools")
>           c(strwrap(msg), .pretty_format(x$bad_closures))
6348,6351c6088,6089
<                           "Found possibly global 'T' or 'F' in the examples of the following Rd files:"
<                           )
<           c(strwrap(msg),
<             paste0("  ", x$bad_examples))
---
>                           "Found possibly global 'T' or 'F' in the examples of the following Rd files:", domain = "R-tools")
>           c(strwrap(msg), paste(" ", x$bad_examples))
6401c6139
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
6419c6157
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
6458,6460c6196,6197
<                         "Found a .Internal call in the following function:",
<                         "Found .Internal calls in the following functions:"
<                         )
---
>                         "Found an .Internal call in the following function:",
>                         "Found .Internal calls in the following functions:", domain = "R-tools")
6462,6464c6199,6206
<         if (length(unique(x$internals)))
<             out <- c(out, "with calls to .Internal functions",
<                      .pretty_format(sort(unique(x$internals))))
---
>         if (length(unique(x$internals))) {
>         msg <- sprintf(ngettext(length(x$bad_closures),
>                         "Found an .Internal call in the following function:\n%s\nwith calls to .Internal functions:\n%s",
>                         "Found .Internal calls in the following functions:\n%s\nwith calls to .Internal functions:\n%s", domain = "R-tools"),
> 		.pretty_format(x$bad_closures), .pretty_format(sort(unique(x$internals))))
> 
>         out <- c(strwrap(msg))
> 	}
6469,6471c6211,6212
<                         "Found a.Internal call in methods for the following S4 generic:",
<                         "Found .Internal calls in methods for the following S4 generics:"
<                         )
---
>                         "Found an .Internal call in methods for the following S4 generic:",
>                         "Found .Internal calls in methods for the following S4 generics:", domain = "R-tools")
6476,6478c6217,6218
<                         "Found a .Internal call in methods for the following reference class:",
<                         "Found .Internal calls in methods for the following reference classes:"
<                         )
---
>                         "Found an .Internal call in methods for the following reference class:",
>                         "Found .Internal calls in methods for the following reference classes:", domain = "R-tools")
6492c6232
<                            writeLines("Invalid NAMESPACE file, parsing gives:")
---
>                            writeLines(gettext("Invalid 'NAMESPACE' file, parsing gives:", domain = "R-tools"))
6511c6251
<                 msg <- c("Error: ", msg)
---
>                 msg <- c(gettext("Error: ", domain = "R-tools"), msg)
6513c6253
<                 msg <- c("Error in ", deparse(call), ": ", msg)
---
>                 msg <- c(gettextf("Error in %s: ", sQuote(deparse(call)), domain = "R-tools"), msg)
6543,6545c6283,6284
<                    paste(substr(entries, 1L, 20L), "[TRUNCATED]"))
<         writeLines(sprintf("entry %d: invalid type %s",
<                            pos, sQuote(entries)))
---
>                    paste(substr(entries, 1L, 20L), gettext("[TRUNCATED]", domain = "R-tools")))
>         writeLines(gettextf("entry %d: invalid type %s", pos, sQuote(entries), domain = "R-tools"))
6549c6288
<         writeLines(strwrap(sprintf("entry %d (%s): missing required field(s) %s",
---
>         writeLines(strwrap(gettextf("entry %d (%s): missing required field(s) %s",
6556c6295
<                                           "")),
---
>                                           ""), domain = "R-tools"),
6597,6600c6336,6337
<     if(length(bad) > 1L)
<         cat("problems found in ", paste(bad, collapse=", "), "\n", sep = "")
<     else if(length(bad))
<         cat("problem found in ", bad, "\n", sep = "")
---
>     if(length(bad) > 0L)
>       cat(sprintf(ngettext(length(bad), "problem found in %s", "problems found in %s", domain = "R-tools"), paste(sQuote(bad), collapse = ", ")), "\n", sep = "")
6688c6425
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
6706c6443
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
6738,6739c6475
<                         "Found an obsolete/platform-specific call in the following functions:"
<                         )
---
>                         "Found an obsolete/platform-specific call in the following functions:", domain = "R-tools")
6745,6746c6481
<                         "Found an obsolete/platform-specific call in methods for the following S4 generics:"
<                         )
---
>                         "Found an obsolete/platform-specific call in methods for the following S4 generics:", domain = "R-tools")
6752,6753c6487
<                         "Found an obsolete/platform-specific call in methods for the following reference classes:"
<                         )
---
>                         "Found an obsolete/platform-specific call in methods for the following reference classes:", domain = "R-tools")
6759,6760c6493
<                         "Found the deprecated functions:"
<                         )
---
>                         "Found the deprecated functions:", domain = "R-tools")
6766,6767c6499
<                         "Found the defunct/removed functions:"
<                         )
---
>                         "Found the defunct/removed functions:", domain = "R-tools")
6773,6774c6505
<                         "Found the platform-specific devices:"
<                         )
---
>                         "Found the platform-specific devices:", domain = "R-tools")
6776,6778c6507
<                  strwrap(paste("dev.new() is the preferred way to open a new device,",
<                                "in the unlikely event one is needed.",
<                                collapse = " ")))
---
>                  gettext("dev.new() is the preferred way to open a new device, in the unlikely event one is needed.", domain = "R-tools"))
7258c6987
<             "The build time stamp is missing."
---
>             gettext("The build time stamp is missing.", domain = "R-tools")
7263c6992
<                 "The build time stamp has invalid/outdated format."
---
>                 gettext("The build time stamp has invalid/outdated format.", domain = "R-tools")
7267c6996
<                 "This build time stamp is over a month old."
---
>                 gettext("This build time stamp is over a month old.", domain = "R-tools")
7838c7567
<           sprintf("Maintainer: %s", sQuote(lines2str(x$Maintainer, " ")))
---
>           gettextf("Maintainer: %s", sQuote(lines2str(x$Maintainer, " ")), domain = "R-tools")
7840c7569
<           "No maintainer field in DESCRIPTION file",
---
>           gettext("No maintainer field in DESCRIPTION file", domain = "R-tools"),
7842c7571
<                 "The maintainer field is invalid or specifies more than one person",
---
>                 gettext("The maintainer field is invalid or specifies more than one person", domain = "R-tools"),
7844c7573
<                 'The maintainer field lacks a name',
---
>                 gettext("The maintainer field lacks a name", domain = "R-tools"),
7846c7575
<                 'The display-name part of the maintainer field should be enclosed in ""')
---
>                 gettext("The display-name part of the maintainer field should be enclosed in \"\"", domain = "R-tools"))
7849c7578
<           "New submission",
---
>           gettext("New submission", domain = "R-tools"),
7851,7852c7580
<           sprintf("Conflicting package names (submitted: %s, existing: %s)",
<                   y[[1L]], y[[2L]]),
---
>           gettextf("Conflicting package names (submitted: %s, existing: %s)", y[[1L]], y[[2L]], domain = "R-tools"),
7854c7582
<           sprintf("Package duplicated from %s", y),
---
>           gettextf("Package duplicated from %s", y, domain = "R-tools"),
7856c7584
<           "Package was archived on CRAN",
---
>           gettext("Package was archived on CRAN", domain = "R-tools"),
7858,7859c7586
<                 sprintf("Insufficient package version (submitted: %s, existing: %s)",
<                         y[[1L]], y[[2L]]),
---
>                 gettextf("Insufficient package version (submitted: %s, existing: %s)", y[[1L]], y[[2L]], domain = "R-tools"),
7861c7588
<                 sprintf("Version contains leading zeroes (%s)", y),
---
>                 gettextf("Version contains leading zeroes (%s)", y, domain = "R-tools"),
7863c7590
<                 sprintf("Version contains large components (%s)", y),
---
>                 gettextf("Version contains large components (%s)", y),
7865,7866c7592
<                 sprintf("Version jumps in minor (submitted: %s, existing: %s)",
<                         y[[1L]], y[[2L]]))),
---
>                 gettextf("Version jumps in minor (submitted: %s, existing: %s)", y[[1L]], y[[2L]], domain = "R-tools"))),
7868c7594
<                 sprintf("Days since last update: %d", y),
---
>                 gettextf("Days since last update: %d", y, domain = "R-tools"),
7870c7596
<                 sprintf("Number of updates in past 6 months: %d", y))),
---
>                 gettextf("Number of updates in past 6 months: %d", y, domain = "R-tools"))),
7872c7598
<           paste(c("New maintainer:",
---
>           paste(c(gettext("New maintainer:", domain = "R-tools"),
7874c7600
<                   "Old maintainer(s):",
---
>                   gettext("Old maintainer(s):", domain = "R-tools"),
7878c7604
<                 sprintf("Non-FOSS package license (%s)", y),
---
>                 gettextf("\nNon-FOSS package license (%s)", y, domain = "R-tools"),
7880,7881c7606,7607
<                 paste(c("Change to non-FOSS package license.",
<                         "New license:",
---
>                 paste(c(gettext("\nChange to non-FOSS package license.", domain = "R-tools"),
>                         gettext("New license:", domain = "R-tools"),
7883c7609
<                         "Old license:",
---
>                         gettext("Old license:", domain = "R-tools"),
7887,7888c7613
<                 paste(c("License components with restrictions and base license permitting such:",
<                         paste0("  ", y),
---
>                 paste(c(gettext("\nLicense components with restrictions and base license permitting such:", domain = "R-tools"), paste(" ", y),
7891,7892c7616,7617
<                                           c(sprintf("File '%s':", e[1L]),
<                                             paste0("  ", e[-1L]))
---
>                                           c(gettextf("File %s:", sQuote(e[1L]), domain = "R-tools"),
>                                             paste(" ", e[-1L]))
7898,7901c7623,7624
<           paste(c("Possibly mis-spelled words in DESCRIPTION:",
<                   sprintf("  %s (%s)",
<                           names(s),
<                           lapply(s, paste, collapse = ", "))),
---
>           paste(c(gettext("\nPossibly mis-spelled words in DESCRIPTION:", domain = "R-tools"),
>                   sprintf("  %s (%s)", names(s), lapply(s, paste, collapse = ", "))),
7905c7628
<           "FOSS licence with BuildVignettes: false"
---
>           gettext("FOSS licence with BuildVignettes: false", domain = "R-tools")
7908c7631
<           paste(c("Unknown, possibly mis-spelled, fields in DESCRIPTION:",
---
>           paste(c(gettext("Unknown, possibly mis-spelled fields in DESCRIPTION:", domain = "R-tools"),
7913c7636
<                 paste(c("CRAN repository db overrides:", y),
---
>                 paste(c(gettextf("CRAN repository db overrides: %s", sQuote(y), domain = "R-tools")),
7917,7918c7640
<                 paste(sprintf("CRAN repository db conflicts: %s",
<                               sQuote(y)),
---
>                 paste(gettextf("CRAN repository db conflicts: %s", sQuote(y), domain = "R-tools"),
7922,7923c7644
<                 sprintf("Package license conflicts with %s override",
<                         sQuote(paste("License_is_FOSS:", y)))
---
>                 gettextf("Package license conflicts with %s override", sQuote(paste("License_is_FOSS:", y)), domain = "R-tools")
7926,7927c7647
<                 sprintf("Package license conflicts with %s override",
<                         sQuote(paste("License_restricts_use:", y)))
---
>                 gettextf("Package license conflicts with %s override", sQuote(paste("License_restricts_use:", y)), domain = "R-tools")
7930,7936c7650,7653
<                 paste(c("Package has a FOSS license but eventually depends on the following",
<                         if(length(y) > 1L)
<                             "packages which restrict use:"
<                         else
<                             "package which restricts use:",
<                         strwrap(paste(y, collapse = ", "),
<                                 indent = 2L, exdent = 4L)),
---
>                 paste(c(ngettext(length(y),
>                 "Package has a FOSS license but eventually depends on the following package which restricts use:",
>                 "Package has a FOSS license but eventually depends on the following packages which restrict use:", domain = "R-tools"),
>             strwrap(paste(y, collapse = ", "), indent = 2L, exdent = 4L)),
7940,7946c7657,7660
<                 paste(c("Package has a FOSS license but eventually depends on the following",
<                         if(length(y) > 1L)
<                             "packages which may restrict use:"
<                         else
<                             "package which may restrict use:",
<                         strwrap(paste(y, collapse = ", "),
<                                 indent = 2L, exdent = 4L)),
---
>                 paste(c(ngettext(length(y),
>                 "Package has a FOSS license but eventually depends on the following package which may restrict use:",
>                 "Package has a FOSS license but eventually depends on the following packages which may restrict use:", domain = "R-tools"),
>             strwrap(paste(y, collapse = ", "), indent = 2L, exdent = 4L)),
7950c7664
<                   paste(c("Strong dependencies not in mainstream repositories:",
---
>                   paste(c(gettext("Strong dependencies not in mainstream repositories:", domain = "R-tools"),
7956c7670
<                   paste(c("Suggests or Enhances not in mainstream repositories:",
---
>                   paste(c(gettext("'Suggests' or 'Enhances' packages are not in mainstream repositories:", domain = "R-tools"),
7962,7963c7676,7677
<                   paste(c("Using Additional_repositories specification failed with:",
<                           paste0("  ", y)),
---
>                   paste(c(gettext("Using 'Additional_repositories specification' failed with packages:", domain = "R-tools"),
>                           paste(" ", y)),
7967c7681
<                   paste(c("Availability using Additional_repositories specification:",
---
>                   paste(c(gettext("Availability using 'Additional_repositories' specification:", domain = "R-tools"),
7975,7976c7689,7690
<                   paste(c("Additional repositories with no packages:",
<                           paste0("  ", y)),
---
>                   paste(c(gettext("Additional repositories with no packages:", domain = "R-tools"),
>                           paste(" ", y)),
7980,7981c7694
<           paste(if(length(y) > 1L)
< 		"Uses the superseded packages:" else
---
>           paste(ngettext(length(y),
7982a7696
>                        "Uses the superseded packages:", domain = "R-tools"),
7986,7987c7700
<           paste(if(length(y) > 1L)
< 		"Uses the non-portable packages:" else
---
>           paste(ngettext(length(y),
7988a7702
> 		"Uses the non-portable packages:", domain = "R-tools"),
7992c7706
<           "Authors@R field should be a call to person(), or combine such calls."
---
>           gettext("Authors@R field should be a call to person(), or combine such calls.", domain = "R-tools")
7995c7709
<           paste(c("Authors@R field gives persons with deprecated elements:",
---
>           paste(c(gettext("Authors@R field gives persons with deprecated elements:", domain = "R-tools"),
8000c7714
<           "Author field starts with 'Author:'."
---
>           gettext("Author field starts with 'Author:'.", domain = "R-tools")
8003c7717
<           paste(c("Author field should be Authors@R.  Current value is:",
---
>           paste(c(gettext("Author field should be Authors@R.  Current value is:", domain = "R-tools"),
8009c7723
<               paste(c("Vignette sources in 'inst/doc' with no 'vignettes' directory:",
---
>               paste(c(gettext("Vignette sources in 'inst/doc' with no 'vignettes' directory:", domain = "R-tools"),
8012c7726
<                       "A 'vignettes' directory is required as from R 3.1.0"),
---
>                       gettext("A 'vignettes' directory is required as from R 3.1.0", domain = "R-tools")),
8015c7729
<               paste(c("Vignette sources in 'inst/doc' missing from the 'vignettes' directory:",
---
>               paste(c(gettext("Vignette sources in 'inst/doc' missing from the 'vignettes' directory:", domain = "R-tools"),
8021c7735
<           "Package has a VignetteBuilder field but no prebuilt vignette index."
---
>           gettext("Package has a VignetteBuilder field but no prebuilt vignette index.", domain = "R-tools")
8024c7738
<                 "Package has help file(s) containing build-stage \\Sexpr{} expressions but no 'build/partial.rdb' file."
---
>                 gettext("Package has help file(s) containing build-stage \\Sexpr{} expresssons but no build/partial.rdb.", domain = "R-tools")
8027c7741
<                 "Package has help file(s) containing install/render-stage \\Sexpr{} expressions but no prebuilt PDF manual."
---
>                 gettext("Package has help file(s) containing install/render-stage \\Sexpr{} expresssons but no prebuilt PDF manual.", domain = "R-tools")
8030c7744
<                 "Package installs .java files."
---
>                 gettext("Package installs .java files.", domain = "R-tools")
8033c7747
<                 "Package has FOSS license, installs .class/.jar but has no 'java' directory."
---
>                 gettext("Package has FOSS license, installs .class/.jar but has no 'java' directory.", domain = "R-tools")
8036,8038c7750,7751
<                 paste(c("Package CITATION file contains call(s) to:",
<                         strwrap(paste(y, collapse = ", "),
<                                 indent = 2L, exdent = 4L)),
---
>                 paste(c(gettext("Package CITATION file contains call(s) to:", domain = "R-tools"),
>                         strwrap(paste(y, collapse = ", "), indent = 2L, exdent = 4L)),
8042c7755
<                 paste(c("Reading CITATION file fails with",
---
>                 paste(c(gettext("Reading CITATION file fails with:", domain = "R-tools"),
8047,8049c7760,7761
<                 paste(c("Reading CITATION file fails with",
<                         paste0("  ", y),
<                         "when package is not installed."),
---
>                 paste(c(gettextf("Reading CITATION file fails with\n%s\nwhen package is not installed.",
>                         paste(" ", y), domain = "R-tools")),
8053c7765
<                 paste(c("Problems when formatting CITATION entries:",
---
>                 paste(c(gettext("Problems when formatting CITATION entries:", domain = "R-tools"),
8059c7771
<                     paste(c("Checking URLs failed with message:",
---
>                     paste(c(gettext("Checking URLs failed with message:", domain = "R-tools"),
8063,8067c7775,7776
<                     paste(c(if(length(y) > 1L)
<                                 "Found the following (possibly) invalid URLs:"
<                             else
<                                 "Found the following (possibly) invalid URL:",
<                             paste0("  ", gsub("\n", "\n    ", format(y), fixed=TRUE))),
---
>                     paste(c(ngettext(length(y), "Found the following (possibly) invalid URL:", "Found the following (possibly) invalid URLs:", domain = "R-tools"),
>                             paste(" ", gsub("\n", "\n    ", format(y), fixed=TRUE))),
8079,8080c7788
<                             c("  The canonical URL of the CRAN page for a package is ",
<                               "    https://CRAN.R-project.org/package=pkgname")
---
>                             c(gettext("  The canonical URL of the CRAN page for a package is: https://CRAN.R-project.org/package=pkgname", domain = "R-tools"))
8083,8084c7791
<                             c("  The canonical URL of the CRAN page for a task view is ",
<                               "    https://CRAN.R-project.org/view=viewname")
---
>                             c(gettext("  The canonical URL of the CRAN page for a task view is: https://CRAN.R-project.org/view=viewname", domain = "R-tools"))
8087c7794
<                             "  Canonical CRAN.R-project.org URLs use https."
---
>                             gettext("  Canonical CRAN.R-project.org URLs use https.", domain = "R-tools")
8092c7799
<                 "  Spaces in an http[s] URL should probably be replaced by %20"
---
>                 c("  ", gettext("Spaces in an http[s] URL should probably be replaced by %20", domain = "R-tools"))
8102c7809
<                 "Checking URLs requires 'libcurl' support in the R build"
---
>                 c(gettext("Checking URLs requires 'libcurl' support in the R build", domain = "R-tools"))
8105,8108c7812
<           paste(c(if(NROW(y) > 1L)
<                       "Found the following (possibly) invalid file URIs:"
<                   else
<                       "Found the following (possibly) invalid file URI:",
---
>           paste(c(ngettext(NROW(y), "Found the following (possibly) invalid file URI:", "Found the following (possibly) invalid file URIs:", domain = "R-tools"),
8114c7818
<                   paste(c("Checking DOIs failed with message:",
---
>                   paste(c(gettext("Checking DOIs failed with message:", domain = "R-tools"),
8118,8122c7822,7823
<                   paste(c(if(length(y) > 1L)
<                               "Found the following (possibly) invalid DOIs:"
<                           else
<                               "Found the following (possibly) invalid DOI:",
<                           paste0("  ", gsub("\n", "\n    ", format(y), fixed=TRUE))),
---
>                   paste(c(ngettext(length(y), "Found the following (possibly) invalid DOI:", "Found the following (possibly) invalid DOIs:", domain = "R-tools"),
>                           paste(" ", gsub("\n", "\n    ", format(y), fixed=TRUE))),
8126c7827
<           paste(c("No package encoding and non-ASCII characters in the following R files:",
---
>           paste(c(gettext("No package encoding and non-ASCII characters in the following R files:", domain = "R-tools"),
8133,8135c7834
<           paste(c(sprintf("File '%s' sets .Random.seed.",
<                           file.path("R", y)),
<                   "This is usually neither needed nor wanted."),
---
>           paste(c(gettextf("File '%s' sets .Random.seed.", file.path("R", y), domain = "R-tools"), gettext("This is usually neither needed nor wanted.", domain = "R-tools")),
8139c7838
<                 "The Title field is just the package name: provide a real title."
---
>                 gettext("The Title field is just the package name: provide a real title.", domain = "R-tools")
8142c7841
<                 "The Title field starts with the package name."
---
>                 gettext("The Title field starts with the package name.", domain = "R-tools")
8145,8146c7844,7845
<                 paste(c("The Title field should be in title case. Current version is:",
<                         sQuote(y[1L]), "In title case that is:", sQuote(y[2L])),
---
>                 paste(gettextf("The Title field should be in title case. Current version is: %s In title case that is: %s",
>                         sQuote(y[1L]), sQuote(y[2L]), domain = "R-tools"),
8150c7849
<                 "The Description field should start with a capital letter."
---
>                 gettext("The Description field should start with a capital letter.", domain = "R-tools")
8153c7852
<                 "The Description field should not start with the package name,\n  'This package' or similar."
---
>                 gettext("The Description field should not start with the package name,\n  'This package' or similar.", domain = "R-tools")
8156,8158c7855,7856
<                 paste(c("The Description field contains",
<                         paste0("  ", y),
<                         "Please enclose URLs in angle brackets (<...>)."),
---
>                 paste(gettextf("The Description field contains\n%s", paste0("  ", y), domain = "R-tools"),
>                         gettext("Please enclose URLs in angle brackets (<...>).", domain = "R-tools"),
8162,8164c7860,7861
<                 paste(c("The Description field contains",
<                         paste0("  ", y),
<                         "Please write DOIs as <doi:10.prefix/suffix>."),
---
>                 paste(gettextf("The Description field contains\n%s", paste0("  ", y), domain = "R-tools"),
>                         gettext("Please write DOIs as <doi:10.prefix/suffix>.", domain = "R-tools"),
8168,8170c7865,7866
<                 paste(c("The Description field contains",
<                         paste0("  ", y),
<                         "Please write arXiv ids as <arXiv:YYMM.NNNNN>."),
---
>                 paste(gettext("The Description field contains\n%s", paste0("  ", y), domain = "R-tools"),
>                         gettext("Please write arXiv ids as <arXiv:YYMM.NNNNN>.", domain = "R-tools"),
8175c7871
<                 "GNU make is a SystemRequirements."
---
>                 gettext("GNU make is a SystemRequirements.", domain = "R-tools")
8178c7874
<                 "The Date field is not in ISO 8601 yyyy-mm-dd format."
---
>                 gettext("The Date field is not in ISO 8601 yyyy-mm-dd format.", domain = "R-tools")
8181c7877
<                 "The Date field is over a month old."
---
>                 gettext("The Date field is over a month old.", domain = "R-tools")
8185c7881
<           paste(c("DESCRIPTION fields with placeholder content:",
---
>           paste(c(gettext("DESCRIPTION fields with placeholder content:", domain = "R-tools"),
8194c7890
<           paste("Size of tarball:", y, "bytes"),
---
>           sprintf(ngettext(y, "Size of tarball: %d byte", "Size of tarball: %d bytes", domain = "R-tools"), y),
8196c7892
<                 paste(c("Found the following \\keyword or \\concept entries with Rd markup:",
---
>                 paste(c(gettext("Found the following \\keyword or \\concept entries with Rd markup:", domain = "R-tools"),
8200,8201c7896
<                 paste(c("Found the following \\keyword or \\concept entries",
<                         "which likely give several index terms:",
---
>                 paste(c(gettext("Found the following \\keyword or \\concept entries which likely give several index terms:", domain = "R-tools"),
8230c7925
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
8284,8285c7979
<                      c(gettextf("Rd files with duplicated name '%s':",
<                                 nm),
---
>                      c(gettextf("Rd files with duplicated name %s:", sQuote(nm), domain = "R-tools"),
8292,8294c7986
<                      c(gettextf("Rd files with duplicated alias '%s':",
<                                 nm),
<                        .pretty_format(bad[[nm]]))
---
>                      c(gettextf("Rd files with duplicated alias %s:", sQuote(nm), domain = "R-tools"), .pretty_format(bad[[nm]]))
8310c8002
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
8316c8008
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
8319,8320c8011
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
8372,8373c8063
<               c(gettextf("Argument items with no description in Rd object '%s':",
<                          nm),
---
>               c(gettextf("Argument items with no description in Rd object %s:", sQuote(nm), domain = "R-tools"),
8378,8379c8068
<               c(gettextf("Auto-generated content requiring editing in Rd object '%s':",
<                          nm),
---
>               c(gettextf("Auto-generated content requiring editing in Rd object %s:", sQuote(nm), domain = "R-tools"),
8411c8100
<                      "... [TRUNCATED]"),
---
>                      gettext("... [TRUNCATED]", domain = "R-tools")),
8428c8117
<         c(sprintf("Rd file '%s':", nm),
---
>         c(gettextf("Rd file %s:", sQuote(nm), domain = "R-tools"),
8433,8435c8122
<                                 c(sprintf("  \\%s lines wider than %d characters:",
<                                           s, limit[s]),
<                                   .truncate(lines))
---
>                                 c(sprintf(ngettext(limit[s], "  \\%s lines wider than %d character:", "  \\%s lines wider than %d characters:", domain = "R-tools"), s, limit[s]), .truncate(lines))
8552,8553c8239
<         out <- sprintf("%s%s\"%s\"", out,
<                        substring(txt, 1L, ipos - 1L), str)
---
>         out <- sprintf("%s%s\"%s\"", out, substring(txt, 1L, ipos - 1L), str)
8564c8250
<     c(gettextf("File %s:", sQuote(f)),
---
>     c(gettextf("File %s:", sQuote(f), domain = "R-tools"),
8578,8579c8264
<       c("(", "{", "function", "if", "for", "while", "repeat",
<         "Math", "Ops", "Summary", "Complex"),
---
>       c("(", "{", "function", "if", "for", "while", "repeat", "Math", "Ops", "Summary", "Complex"),
8606c8291
< 	    warning(gettextf("Generics 'g' in 'env' %s where '%s' errors: %s\nMay need something like\n\n%s\nin NAMESPACE.",
---
> 	    warning(gettextf("Generics 'g' in 'env' %s where %s errors: %s\nMay need something like\n\n%s\nin NAMESPACE.",
8608c8293
<                              "hasMethods(g, env)",
---
>                              sQuote("hasMethods(g, env)"),
8610,8614c8295
<                              paste0("  importFrom(",
<                                     paste(dq(pkgs), dq(rErr), sep =", "),
<                                     ")\n")
<                              ),
<                     domain = NA)
---
>                              paste0("  importFrom(", paste(dq(pkgs), dq(rErr), sep = ", "), ")\n")), domain = "R-tools")
8622,8623c8303,8304
<                                      "Generics without any methods in %s: %s"),
<                             format(env),
---
>                                      "Generics without any methods in %s: %s", domain = "R-tools"),
>                             sQuote(format(env)),
8743,8744c8424
<     package <-
<         sub(".*:([^_]*).*", "\\1", attr(env, "name", exact = TRUE))
---
>     package <- sub(".*:([^_]*).*", "\\1", attr(env, "name", exact = TRUE))
8837,8838c8517
<     txt <- .Rd_deparse(.Rd_drop_nodes_with_tags(x, "\\special"),
<                        tag = FALSE)
---
>     txt <- .Rd_deparse(.Rd_drop_nodes_with_tags(x, "\\special"), tag = FALSE)
8855,8856c8534
<     txt <- gsub("(^|[^\\])\\\\($|[^abfnrtuUvx0-9'\"\\])",
<                 "\\1<unescaped bksl>\\2", txt)
---
>     txt <- gsub("(^|[^\\])\\\\($|[^abfnrtuUvx0-9'\"\\])", "\\1<unescaped bksl>\\2", txt)
8858,8859c8536
<     txt <- gsub("(^|[^\\])\\\\($|[^abfnrtuUvx0-9'\"\\])",
<                 "\\1<unescaped bksl>\\2", txt)
---
>     txt <- gsub("(^|[^\\])\\\\($|[^abfnrtuUvx0-9'\"\\])", "\\1<unescaped bksl>\\2", txt)
8876c8553
<     if (length(xx) > 1L || nchar(msg) + nchar(xx) + 1L > 75L)
---
>     if (length(xx) > 1L || nchar(msg) + nchar(xx) + 1L > options("width")$width)
9018,9019c8695
<     sprintf("^[[:space:]]*(.*<%s>|ORPHANED)[[:space:]]*$",
<             .make_RFC_2822_email_address_regexp())
---
>     sprintf("^[[:space:]]*(.*<%s>|ORPHANED)[[:space:]]*$", .make_RFC_2822_email_address_regexp())
9074,9076c8750
<                          cbind(sprintf("\\arguments, description of item '%s'",
<                                        tab[ind, 1L]),
<                                tab[ind, 2L]))
---
>                          cbind(gettextf("\\arguments, description of item %s", sQuote(tab[ind, 1L]), domain = "R-tools"), tab[ind, 2L]))
9089,9091c8763
<                          cbind(sprintf("section 'Methods', description of item '%s'",
<                                        tab[ind, 1L]),
<                                tab[ind, 2L]))
---
>                          cbind(gettextf("section 'Methods', description of item %s", sQuote(tab[ind, 1L]), domain = "R-tools"), tab[ind, 2L]))
9205,9208c8877
<         if(length(x) == 1L)
<             writeLines("File which contain pragma(s) suppressing diagnostics:")
<         else
<             writeLines("Files which contain pragma(s) suppressing diagnostics:")
---
>         writeLines(ngettext(length(x), "File which contain pragma(s) suppressing diagnostics:", "Files which contain pragma(s) suppressing diagnostics:", domain = "R-tools" ))
9226c8895
<         stop("argument 'package' must be of length 1")
---
>         stop(gettextf("'%s' argument must be of length %d", "package", 1))
9300c8969
<           c("Suggested packages not available for checking:",
---
>           c(gettext("Suggested packages not available for checking:", domain = "R-tools"),
9304c8973
<           c("Apparent S3 methods needing delayed registration:",
---
>           c(gettext("Apparent S3 methods needing delayed registration:", domain = "R-tools"),
9312c8981
<           c("S3 methods using delayed registration:",
---
>           c(gettext("S3 methods using delayed registration:", domain = "R-tools"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rd.R R/src/library/tools/R/Rd.R
32c32
<         stop("Rd object required")
---
>         stop("Rd object is required")
45,51c45,48
<             c(gettextf("missing/empty %s field in '%s'",
<                        "\\name",
<                        description),
<               gettextf("Rd files must have a non-empty %s.",
<                        "\\name"),
<               gettext("See chapter 'Writing R documentation' in manual 'Writing R Extensions'."))
<         stop(paste(msg, collapse = "\n"), domain = NA)
---
>             c(gettextf("missing/empty %s field in '%s'", "\\name", description, domain = "R-tools"),
>               gettextf("Rd files must have a non-empty %s.", "\\name", domain = "R-tools"),
>               gettext("See chapter 'Writing R documentation' in manual 'Writing R Extensions'.", domain = "R-tools"))
>         stop(paste(msg, collapse = "\n"), domain = "R-tools")
57,61c54,57
<             c(gettextf("missing/empty \\title field in '%s'",
<                        description),
<               gettext("Rd files must have a non-empty \\title."),
<               gettext("See chapter 'Writing R documentation' in manual 'Writing R Extensions'."))
<         stop(paste(msg, collapse = "\n"), domain = NA)
---
>             c(gettextf("missing/empty %s field in '%s'", "\\title", description, domain = "R-tools"),
>               gettextf("Rd files must have a non-empty %s.", "\\title", domain = "R-tools"),
>               gettext("See chapter 'Writing R documentation' in manual 'Writing R Extensions'.", domain = "R-tools"))
>         stop(paste(msg, collapse = "\n"), domain = "R-tools")
244c240
<         stop("argument 'outFile' must be a character string or connection")
---
>         stop(gettextf("'%s' argument must be a character string or connection", "outFile"))
268c264
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
325c321
<             stop("you must specify 'package' or 'dir'")
---
>             stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
328,329c324
<             stop(gettextf("directory '%s' does not exist", dir),
<                  domain = NA)
---
>             stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
373c368
<         stop("you must specify 'dir' or 'files'")
---
>         stop(gettextf("you must specify '%s' or '%s' argument", "dir", "files"))
788c783
<                                   "missing/empty \\name field in Rd files\n%s"),
---
>                                   "missing/empty \\name field in Rd files\n%s", domain = "R-tools"),
838,840c833
<                 stop(gettextf("No help on %s found in RdDB %s",
<                               sQuote(key), sQuote(filebase)),
<                      domain = NA)
---
>                 stop(gettextf("No help on %s found in RdDB %s", sQuote(key), sQuote(filebase)), domain = "R-tools")
883c876
< 	warning(gettextf("Macro file %s should only contain Rd macro definitions and comments",
---
> 	warning(gettextf("Macro file '%s' should only contain Rd macro definitions and comments",
896,897c889,890
<                 warning(gettextf("Rd macro package '%s' is not installed.",
<                                  p),
---
>                 warning(gettextf("Rd macro package %s is not installed.",
>                                  sQuote(p)),
902,903c895
<     	    	warning(gettextf("No Rd macros in package '%s'.", p),
<                         call. = FALSE)
---
>     	    	warning(gettextf("No Rd macros in package %s", sQuote(p)), call. = FALSE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rd2HTML.R R/src/library/tools/R/Rd2HTML.R
31c31
<     	stopRd(arg, Rdfile, "Bad \\link text")
---
>     	stopRd(arg, Rdfile, gettext("Bad \\link text"))
40c40
<     	    stopRd(option, Rdfile, "Bad \\link option -- must be text")
---
>     	    stopRd(option, Rdfile, gettext("Bad \\link option -- must be text"))
348c348
<                     warnRd(block, Rdfile, "missing link ", sQuote(topic))
---
>                     warnRd(block, Rdfile, gettextf("missing link %s", sQuote(topic)))
377,380c377
<                         warnRd(block, Rdfile,
<                                "file link ", sQuote(parts$targetfile),
<                                " in package ", sQuote(parts$pkg),
<                                " does not exist and so has been treated as a topic")
---
>                         warnRd(block, Rdfile, gettextf("file link %s in package %s does not exist and so has been treated as a topic", sQuote(parts$targetfile), sQuote(parts$pkg)))
383,384c380
<                         warnRd(block, Rdfile, "missing file link ",
<                                sQuote(parts$targetfile))
---
>                         warnRd(block, Rdfile, gettextf("missing file link %s", sQuote(parts$targetfile)))
407,412c403
<         if (length(block) > 1L) {
<             of1('## Not run: ')
<             writeContent(block, tag)
<             of1('\n## End(Not run)')
<         } else {
<             of1('## Not run: ')
---
>             of1("## Dont't run: ")
413a405,406
>         if (length(block) > 1L) {
>             of1("\n## End (Don't run)")
552c545
<                stopRd(block, Rdfile, "Tag ", tag, " not recognized")
---
>                stopRd(block, Rdfile, gettextf("Tag %s not implemented", tag))
560c553
<     	    stopRd(table, Rdfile, "\\tabular format must be simple text")
---
>     	    stopRd(table, Rdfile, gettext("\\tabular format must be simple text"))
564c557
<                    "Unrecognized \\tabular format: ", table[[1L]][[1L]])
---
>                    gettextf("Unrecognized \\tabular format: %s", table[[1L]][[1L]]))
582,584c575
<                     stopRd(table, Rdfile,
<                            "Only ", length(format),
<                            " columns allowed in this table")
---
>                     stopRd(table, Rdfile, sprintf(ngettext(length(format), "Only %d column allowed in this table", "Only %d columns allowed in this table", domain = "R-tools"), length(format)))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rd2ex.R R/src/library/tools/R/Rd2ex.R
87c87
< 	    renderDont("Not run", commentDontrun, label=commentDontrun)
---
> 	    renderDont("Don't run", commentDontrun, label=commentDontrun)
89c89
< 	    renderDont("No test", commentDonttest, xtra1=FALSE)
---
> 	    renderDont("Don't test", commentDonttest, xtra1=FALSE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rd2latex.R R/src/library/tools/R/Rd2latex.R
228,233c228
<         if (length(block) > 1L) {
<             of1('## Not run: ')
<             writeContent(block, tag)
<             of1('\n## End(Not run)')
<         } else {
<             of1('## Not run: ')
---
>             of1("## Don't run: ")
234a230,231
>         if (length(block) > 1L) {
>             of1("\n## End (Don't run)")
468c465
<                stopRd(block, Rdfile, "Tag ", tag, " not recognized")
---
>                stopRd(block, Rdfile, gettextf("Tag %s not recognized", tag))
477c474
<     	    stopRd(table, Rdfile, "\\tabular format must be simple text")
---
>     	    stopRd(table, Rdfile, gettext("\\tabular format must be simple text"))
668,671c665,666
< 	warnRd(Rd, Rdfile, "Some input could not be re-encoded to ",
< 	       outputEncoding)
<     invisible(structure(out, latexEncoding = latexEncoding,
<                         hasFigures = hasFigures))
---
> 	warnRd(Rd, Rdfile, gettextf("Some input could not be re-encoded to %s", outputEncoding))
>     invisible(structure(out, latexEncoding = latexEncoding, hasFigures = hasFigures))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rd2pdf.R R/src/library/tools/R/Rd2pdf.R
177c177
<                                  appendLF = FALSE, domain = NA)
---
>                                  appendLF = FALSE, domain = "R-tools")
214c214
<             if (!silent) message(domain = NA)
---
>             if (!silent) message(domain = "R-tools")
227,228c227
<                     stop("this package has a ", sQuote("man"), " directory but no .Rd files",
<                          domain = NA)
---
>                     stop(gettextf("this package has a %s directory but no .Rd files", sQuote("man")), domain = "R-tools")
233,235c232
<                     stop("this package does not have either a ", sQuote("latex"),
<                          " or a (source) ", sQuote("man"), " directory",
<                          domain = NA)
---
>                     stop(gettextf("this package does not have either a %s or a (source) %s directory", sQuote("latex"), sQuote("man")), domain = "R-tools")
251,252c248
<             if (!silent) message("Converting Rd files to LaTeX ",
<                                  appendLF = FALSE, domain = NA)
---
>             if (!silent) message("Converting Rd files to LaTeX ", appendLF = FALSE, domain = "R-tools")
283c279
<             if (!silent) message(domain = NA)
---
>             if (!silent) message(domain = "R-tools")
298,299c294
<         stop("no validly-named files in the ", sQuote("latex"), " directory",
<              domain = NA)
---
>         stop(gettextf("no validly-named files in the %s directory", sQuote("latex")), domain = "R-tools")
316,317c311
<             warning("file ", sQuote(f), " lacks a header: skipping",
<                     domain = NA)
---
>             warning(gettextf("file %s lacks a header: skipping", sQuote(f), domain = "R-tools"))
429c423
<             message("Warning: unknown option ", sQuote(a))
---
>             message(gettextf("Warning: unknown option %s", sQuote(a)))
824c818
<             cat("Hmm ... looks like a package\n")
---
>             cat(gettext("Hmm ... looks like a package", domain = "R-tools"), "\n", sep = "")
829c823
<             cat("Hmm ... looks like a package from the R distribution\n")
---
>             cat(gettext("Hmm ... looks like a package from the R distribution", domain = "R-tools"), "\n", sep = "")
834c828
<                 cat("_not_ indexing 'base' package\n")
---
>                 cat(gettext("_not_ indexing 'base' package", domain = "R-tools"), "\n", sep = "")
848c842
<         cat("cannot write to build dir\n")
---
>         cat(gettext("cannot write to build dir", domain = "R-tools"), "\n", sep = "")
854c848
<         cat("file", sQuote(output), "exists; please remove it first\n")
---
>         cat(gettextf("file %s exists; please remove it first", sQuote(output), domain = "R-tools"), "\n", sep = "")
866c860
<     if (!batch)  cat("Creating", out_ext, "output from LaTeX ...\n")
---
>     if (!batch)  cat(gettextf("Creating %s output from LaTeX ...", out_ext, domain = "R-tools"), "\n", sep = "")
880,883c874,876
<     cat("Saving output to", sQuote(output), "...\n")
<     file.copy(file.path(build_dir, paste0("Rd2.", out_ext)), output,
<               overwrite = force)
<     cat("Done\n")
---
>     cat(gettextf("Saving output to %s ...", sQuote(output), domain = "R-tools"), "\n", sep = "")
>     file.copy(file.path(build_dir, paste0("Rd2.", out_ext)), output, overwrite = force)
>     cat(gettext("Done", domain = "R-tools"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rd2txt.R R/src/library/tools/R/Rd2txt.R
88c88
<     	    stopRd(block, Rdfile, sprintf("no parenthesis following %s", blocktag))
---
>     	    stopRd(block, Rdfile, gettextf("no parenthesis following %s", blocktag))
114c114
< 	    stopRd(block, Rdfile, sprintf("no comma in argument list following %s", blocktag))
---
> 	    stopRd(block, Rdfile, gettextf("no comma in argument list following %s", blocktag))
525,531c525
<         if (length(block) > 1L) {
<             putf('## Not run:\n')
<             writeCodeBlock(block, tag)
<             blankLine(0L)
<             putf('## End(Not run)\n')
<         } else {
<             putf('## Not run: ')
---
>             putf("## Don't run:\n")
533a528,529
>         if (length(block) > 1L) {
>             putf("## End (Don't run)\n")
696c692
<                stopRd(block, Rdfile, "Tag ", tag, " not recognized")
---
>                stopRd(block, Rdfile, gettextf("Tag %s not recognized", tag, domain = "R-tools"))
704c700
<     	    stopRd(table, Rdfile, "\\tabular format must be simple text")
---
>     	    stopRd(table, Rdfile, gettext("\\tabular format must be simple text", domain = "R-tools"))
725,726c721
<                                    sprintf("too many columns for format '%s'",
<                                            table[[1L]]))
---
>                                    gettextf("too many columns for format '%s'", table[[1L]], domain = "R-tools"))
820,821c815
<                    stopRd(block, Rdfile, "Tag ", tag,
<                           " not expected in code block")
---
>                    stopRd(block, Rdfile, gettextf("Tag %s not expected in code block", tag, domain = "R-tools"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/RdConv2.R R/src/library/tools/R/RdConv2.R
54c54
<     stop(msg, call. = FALSE, domain = NA)
---
>     stop(msg, call. = FALSE, domain = "R-tools")
78c78
<     warning(msg, call. = FALSE, domain = NA, immediate. = TRUE)
---
>     warning(msg, call. = FALSE, domain = "R-tools", immediate. = TRUE)
111,112c111
<                 stop(gettextf("invalid value for '%s' : %s", opt, oldval),
<                      domain = NA)
---
>                 stop(gettextf("invalid value for '%s' : %s", opt, oldval), domain = "R-tools")
314,316c313
< 	    		stop(gettextf("Only one Rd section per %s is supported.",
<                                       "\\Sexpr"),
<                              domain = NA)
---
> 	    		stop(gettextf("Only one Rd section per %s is supported.", "\\Sexpr"), domain = "R-tools")
462c459
<                "Only one \\Rdversion declaration is allowed")
---
>                gettext("Only one \\Rdversion declaration is allowed"))
470c467
<                    "All text must be in a section")
---
>                    gettext("All text must be in a section"))
484c481
<                    sprintf("Only one %s section is allowed: the first will be used", tag))
---
>                    gettextf("Only one %s section is allowed: the first will be used", tag))
493c490
<     	    stopRd(encoding, Rdfile, "'encoding' must be plain text")
---
>     	    stopRd(encoding, Rdfile, gettextf("'%s' must be plain text", "encoding"))
501c498
<                    "Multiple \\docType sections are not supported")
---
>                    gettext("Multiple \\docType sections are not supported"))
505c502
<         	stopRd(docType, Rdfile, "'docType' must be plain text")
---
>         	stopRd(docType, Rdfile, gettextf("'%s' must be plain text", "docType"))
510,511c507
<                 warnRd(dt[i], Rdfile, "docType ", sQuote(docTypes[i]),
<                        " is unrecognized")
---
>                 warnRd(dt[i], Rdfile, gettextf("docType %s is unrecognized", sQuote(docTypes[i])))
522,523c518
<             warnRd(Rd[[s]], Rdfile, "Section ",
<                    sections[s], " is unrecognized and will be dropped")
---
>             warnRd(Rd[[s]], Rdfile, gettextf("Section %s is unrecognized and will be dropped", sections[s]))
532,533c527
<     	stopRd(Rd, Rdfile,
<                "Sections \\title, and \\name must exist and be unique in Rd files")
---
>     	stopRd(Rd, Rdfile, gettext("Sections \\title, and \\name must exist and be unique in Rd files"))
535c529
<         stopRd(RdTags(Rd[[2L]]), Rdfile,"\\name must only contain simple text")
---
>         stopRd(RdTags(Rd[[2L]]), Rdfile, gettext("\\name must only contain simple text"))
541c535
<         warnRd(RdTags(Rd[[2L]]), Rdfile,"\\name should not contain !, | or @")
---
>         warnRd(RdTags(Rd[[2L]]), Rdfile, gettext("\\name should not contain !, | or @"))
580c574
<             warnRd(s0, Rdfile, "Dropping empty section ", tagtitle)
---
>             warnRd(s0, Rdfile, "M0151: ", gettextf("Dropping empty section %s", tagtitle))
648c642
<                stopRd(block, Rdfile, "Unrecognized macro ", block[[1L]]),
---
>                stopRd(block, Rdfile, gettextf("Unrecognized macro %s", block[[1L]])),
655d648
<                        msg2 <- if(inEnc2) "in second part of \\enc" else "without declared encoding"
657,663c650,661
<                        msg3 <- paste0(msg2, ":\n  ", sQuote(txt))
<                        if(Encoding(block) == "UTF-8")
<                            warnRd(block, Rdfile, level = -1,
<                                   "Non-ASCII contents ", msg3)
<                        if(grepl("<[0123456789abcdef][0123456789abcdef]>", block))
<                            warnRd(block, Rdfile, level = -3,
<                                   "Apparent non-ASCII contents ", msg3)
---
>                        if(Encoding(block) == "UTF-8") {
> 			if(inEnc2)
>                            warnRd(block, Rdfile, level = -1, gettextf("Non-ASCII contents in second part of \\enc:\n  %s", sQuote(txt)))
> 			else
>                            warnRd(block, Rdfile, level = -1, gettextf("Non-ASCII contents without declared encoding:\n  %s", sQuote(txt)))
> 			}
>                        if(grepl("<[0123456789abcdef][0123456789abcdef]>", block)) {
> 			if(inEnc2)
>                            warnRd(block, Rdfile, level = -3, gettextf("Apparent non-ASCII contents in second part of \\enc:\n  %s", sQuote(txt)))
> 			else
>                            warnRd(block, Rdfile, level = -3, gettextf("Apparent non-ASCII contents without declared encoding:\n  %s", sQuote(txt)))
> 			}
675,677c673,674
<                        stopRd(block, Rdfile, "Unnecessary braces at ", deparse)
<                    else warnRd(block, Rdfile, level = -3,
<                                "Unnecessary braces at ", deparse)
---
>                        stopRd(block, Rdfile, gettextf("Unnecessary braces at %s", deparse))
>                    else warnRd(block, Rdfile, level = -3, gettextf("Unnecessary braces at %s", deparse))
715,716c712
<                    warnRd(block, Rdfile, level = 7, "Tag ", tag,
<                           " not valid outside a code block"),
---
>                    warnRd(block, Rdfile, level = 7, gettextf("Tag %s not valid outside a code block", tag)),
740c736
<     		       stopRd(block, Rdfile, "Condition must be \\Sexpr or plain text")
---
>     		       stopRd(block, Rdfile, gettext("Condition must be \\Sexpr or plain text"))
746c742
<     		       warnRd(block, Rdfile, "Unrecognized format: ", unknown)
---
>     		       warnRd(block, Rdfile, gettextf("Unrecognized format: %s", unknown))
753c749
<                    	stopRd(block, Rdfile, "First argument to \\href must be verbatim URL")
---
>                    	stopRd(block, Rdfile, gettext("First argument to \\href must be verbatim URL"))
759c755
<                	       stopRd(block, Rdfile, "Must contain verbatim text")
---
>                	       stopRd(block, Rdfile, gettext("Must contain verbatim text"))
761c757
<                warnRd(block, Rdfile, level = 7, "Tag ", tag, " not recognized"))
---
>                warnRd(block, Rdfile, level = 7, gettextf("Tag %s not recognized", tag)))
771c767
<                    stopRd(block, Rdfile, "Unrecognized macro ", block[[1L]]),
---
>                    stopRd(block, Rdfile, gettextf("Unrecognized macro %s", block[[1L]])),
778,784c774,785
<                            msg2 <- if(inEnc2) "in second part of \\enc" else "without declared encoding"
<                            if(Encoding(block) == "UTF-8")
<                                warnRd(block, Rdfile, level = -1,
<                                       "Non-ASCII contents ", msg2)
<                            if(grepl("<[0123456789abcdef][0123456789abcdef]>", block))
<                                warnRd(block, Rdfile, level = -3,
<                                       "Apparent non-ASCII contents ", msg2)
---
>                            if(Encoding(block) == "UTF-8") {
> 			    if(inEnc2)
>                                warnRd(block, Rdfile, level = -1, gettext("Non-ASCII contents in second part of \\enc"))
> 			    else
>                                warnRd(block, Rdfile, level = -1, gettext("Non-ASCII contents without declared encoding"))
> 				}
>                            if(grepl("<[0123456789abcdef][0123456789abcdef]>", block)) {
> 			    if(inEnc2)
>                                warnRd(block, Rdfile, level = -3, gettext("Apparent non-ASCII contents in second part of \\enc"))
> 			    else
>                                warnRd(block, Rdfile, level = -3, gettext("Apparent non-ASCII contents without declared encoding"))
> 			   }
798,799c799
<                        warnRd(block, Rdfile, level = -3,
<                               "Tag ", tag, " is invalid in a code block")
---
>                        warnRd(block, Rdfile, level = -3, gettextf("Tag %s is invalid in a code block", tag))
810,811c810
<                    } else warnRd(block, Rdfile, level = 7,
<                                  "Tag ", tag, " is only valid in \\usage"),
---
>                    } else warnRd(block, Rdfile, level = 7, gettextf("Tag %s is only valid in \\usage", tag)),
817,818c816
<                    else warnRd(block, Rdfile, level = 7,
<                                "Tag ", tag, " is only valid in \\examples"),
---
>                    else warnRd(block, Rdfile, level = 7, gettextf("Tag %s is only valid in \\examples", tag)),
820,822c818
<                        warnRd(block, Rdfile, level = 7,
<                               "Tag ", tag, " is invalid in a ",
<                               blocktag, " block")
---
>                        warnRd(block, Rdfile, level = 7, gettextf("Tag %s is invalid in a %s block", tag, blocktag))
833,834c829
<     	    warnRd(table, Rdfile, level = 7,
<                    "\\tabular format must be simple text")
---
>     	    warnRd(table, Rdfile, level = 7, gettext("\\tabular format must be simple text"))
837,838c832
<     	    warnRd(table, Rdfile, level = 7,
<                    "Unrecognized \\tabular format: ", table[[1L]][[1L]])
---
>     	    warnRd(table, Rdfile, level = 7, gettextf("Unrecognized \\tabular format: %s", table[[1L]][[1L]]))
851,853c845
<                     warnRd(table, Rdfile, level = 7,
<                            "Only ", length(format),
<                            " columns allowed in this table")
---
>                     warnRd(table, Rdfile, level = 7, sprintf(ngettext(length(format), "Only %d column allowed in this table", "Only %d columns allowed in this table", domain = "R-tools"), length(format)))
912c904
<             stopRd(section, Rdfile, "\\synopsis was removed in R 3.1.0")
---
>             stopRd(section, Rdfile, gettext("\\synopsis was removed in R 3.1.0"))
916,917c908
<         if(!has_text) warnRd(section, Rdfile, level = 3,
<                              "Empty section ", tagtitle)
---
>         if(!has_text) warnRd(section, Rdfile, level = 3, gettextf("Empty section %s", tagtitle))
923c914
<     	    warnRd(Rd, Rdfile, level = 5, "Must have a ", tag)
---
>     	    warnRd(Rd, Rdfile, level = 5, gettextf("Must have a tag %s", tag))
926,927c917
<     	    	warnRd(Rd[[which[2L]]], Rdfile, level = 5,
<                    "Only one ", tag, " is allowed")
---
>     	    	warnRd(Rd[[which[2L]]], Rdfile, level = 5, gettextf("Only one tag %s is allowed", tag))
936,937c926
<                 warnRd(Rd[[which[1L]]], Rdfile, level = 5,
<                        "Tag ", tag, " must not be empty")
---
>                 warnRd(Rd[[which[1L]]], Rdfile, level = 5, gettextf("Tag %s must not be empty", tag))
947,948c936
<         	warnRd(docType, Rdfile, level = 7,
<                        "'docType' must be plain text")
---
>         	warnRd(docType, Rdfile, level = 7, gettextf("'%s' must be plain text", "docType"))
985,986c973
<         warnRd(Rd, Rdfile, level = 5,
<                sprintf("multiple sections named '%s' are not allowed", tag))
---
>         warnRd(Rd, Rdfile, level = 5, gettextf("multiple sections named '%s' are not allowed", tag))
1008c995
<     if (!all(tags == "TEXT")) stopRd(conditional, Rdfile, "condition must be plain text")
---
>     if (!all(tags == "TEXT")) stopRd(conditional, Rdfile, gettext("condition must be plain text"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Rprof.R R/src/library/tools/R/Rprof.R
24c24
< 		".Rprof() exit status ", status)
---
> 		gettextf(".Rprof() exit status %s", status))
101,104c101,104
<     cat("\nEach sample represents", format(res$sample.interval), "seconds.\n")
<     cat("Total run time:", format(res$sampling.time), "seconds.\n")
<     cat("\nTotal seconds: time spent in function and callees.\n")
<     cat("Self seconds: time spent in function alone.\n\n")
---
>     cat("\n", gettextf("Each sample represents %s seconds.", format(res$sample.interval), domain = "R-tools"), "\n", sep = "")
>     cat(gettextf("Total run time: %s seconds.", format(res$sampling.time), domain = "R-tools"), "\n", sep = "")
>     cat("\n", gettext("Total seconds: time spent in function and callees.", domain = "R-tools"), "\n", sep = "")
>     cat(gettext("Self seconds: time spent in function alone.", domain = "R-tools"), "\n\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/Vignettes.R R/src/library/tools/R/Vignettes.R
29,31c29
<         stop(gettextf("Vignette product %s does not have a known filename extension (%s)",
<                       sQuote(file), paste(sQuote(names(type)), collapse=", ")),
<              domain = NA)
---
>         stop(gettextf("Vignette product %s does not have a known filename extension (%s)", sQuote(file), paste(sQuote(names(type)), collapse=", ")))
74,79c72
<             stop(gettextf("Failed to locate the %s output file (by engine %s) for vignette with name %s. The following files exist in directory %s: %s",
<                           sQuote(by),
<                           sQuote(sprintf("%s::%s", engine$package, engine$name)),
<                           sQuote(name), sQuote(dir),
<                           paste(sQuote(output0), collapse=", ")),
<                  domain = NA)
---
>             stop(gettextf("Failed to locate the %s output file (by engine %s) for vignette with name %s. The following files exists in directory %s: %s", sQuote(by), sQuote(sprintf("%s::%s", engine$package, engine$name)), sQuote(name), sQuote(dir), paste(sQuote(output0), collapse = ", ")))
81,84c74
<             stop(gettextf("Located more than one %s output file (by engine %s) for vignette with name %s: %s", sQuote(by),
<                           sQuote(sprintf("%s::%s", engine$package, engine$name)),
<                           sQuote(name), paste(sQuote(output), collapse=", ")),
<                  domain  = NA)
---
> 	    stop(gettextf("Located more than one %s output file (by engine %s) for vignette with name: %s", sQuote(by), sQuote(sprintf("%s::%s", engine$package, engine$name)), sQuote(name), paste(sQuote(output), collapse = ", ")))
98,103c88
<             stop(gettextf("Failed to locate the %s output file (by engine %s) for vignette with name %s. The following files exist in directory %s: %s",
<                           sQuote(by),
<                           sQuote(sprintf("%s::%s", engine$package, engine$name)),
<                           sQuote(name), sQuote(dir),
<                           paste(sQuote(output0), collapse=", ")),
<                  domain = NA)
---
>             stop(gettextf("Failed to locate the %s output file (by engine %s) for vignette with name %s. The following files exists in directory %s: %s", sQuote(by), sQuote(sprintf("%s::%s", engine$package, engine$name)), sQuote(name), sQuote(dir), paste(sQuote(output0), collapse = ", ")))
105,109c90
<             stop(gettextf("Located more than one %s output file (by engine %s) for vignette with name %s: %s",
<                           sQuote(by),
<                           sQuote(sprintf("%s::%s", engine$package, engine$name)),
<                           sQuote(name), paste(sQuote(output), collapse=", ")),
<                  domain = NA)
---
>             stop(gettextf("Located more than one %s output file (by engine %s) for vignette with name %s: %s", sQuote(by), sQuote(sprintf("%s::%s", engine$package, engine$name)), sQuote(name), paste(sQuote(output), collapse = ", ")))
143,144c124
<             stop(gettextf("unable to create temp directory %s ", sQuote(tmpd)),
<                  domain = NA)
---
>             stop(gettextf("unable to create temp directory %s", sQuote(tmpd)), domain = "R-tools")
173c153
<                  domain = NA)
---
>                  domain = "R-tools")
175c155
<             message("  Running ", sQuote(file))
---
>             message(gettextf("  Running %s", sQuote(file), domain = "R-tools"))
223,228c203
<                      stop(gettextf("Vignette %s overwrites the following %s output by vignette %s: %s",
<                                    sQuote(basename(names(resultsT)[j])),
<                                    sQuote(name),
<                                    sQuote(basename(names(resultsT)[i])),
<                                    paste(basename(bad), collapse=", ")),
<                           domain = NA)
---
>                      stop(gettextf("Vignette %s overwrites the following %s output by vignette %s:", sQuote(basename(names(resultsT)[j])), sQuote(name), sQuote(basename(names(resultsT)[i])), domain = "R-tools"), paste(basename(bad), collapse = ", "), domain = NA)
316c291
<                                paste0("File ", names(y), ":"),
---
>                                gettextf("File %s:", names(y), domain = "R-tools"),
323,326c298,301
<       myfmt(x$tangle, "*** Tangle Errors ***"),
<       myfmt(x$source, "*** Source Errors ***"),
<       myfmt(x$weave,  "*** Weave Errors ***"),
<       myfmt(x$latex,  "*** PDFLaTeX Errors ***"))
---
>       myfmt(x$tangle, gettext("*** Tangle Errors ***", domain = "R-tools")),
>       myfmt(x$source, gettext("*** Source Errors ***", domain = "R-tools")),
>       myfmt(x$weave,  gettext("*** Weave Errors ***", domain = "R-tools")),
>       myfmt(x$latex,  gettext("*** PDFLaTeX Errors ***", domain = "R-tools")))
361c336
<             stop("argument 'package' must be of length 1")
---
>             stop(gettextf("'%s' argument must be of length 1", "package"))
365c340
< 	stop("you must specify 'package' or 'dir'")
---
>     stop(gettextf("you must specify '%s' or '%s' argument", "package", "dir"))
368c343
< 	stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>     stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
419,421c394
<             msg <- c("Files named as vignettes but with no recognized vignette engine:",
<                      paste("  ", sQuote(files)),
<                      "(Is a VignetteBuilder field missing?)")
---
>             msg <- gettextf("Files named as vignettes but with no recognized vignette engine: %s\n(Is a VignetteBuilder field missing?)", paste(sQuote(files), collapse = ", "), domain = "R-toosl")
511,514c484
<         stop(gettextf("Detected vignette source files (%s) with shared names (%s) and therefore risking overwriting each other's output files",
<                       paste(sQuote(docs), collapse = ", "),
<                       paste(sQuote(names), collapse = ", ")),
<              domain = NA)
---
>         stop(gettextf("Detected vignette source files (%s) with shared names (%s) and therefore risking overwriting each other's output files", paste(sQuote(docs), collapse = ", "), paste(sQuote(names), collapse = ", ")))
529c499
<                              "duplicated vignette titles:"))
---
>                              "duplicated vignette titles:", domain = "R-tools"), domain = NA)
633,634c603,604
<                 message(gettextf("Error: tangling vignette '%s' failed with diagnostics:\n%s",
<                      file, conditionMessage(e)))
---
>                 message(gettextf("Error: tangling vignette %s failed with diagnostics:",
>                      sQuote(file)), "\n", conditionMessage(e), domain = "R-tools", call. = FALSE)
686c656
<                          "SUMMARY: processing the following files failed:"))
---
>                          "SUMMARY: processing the following files failed:", domain = "R-tools"), domain = NA)
725c695
< 	stop(gettextf("file '%s' not found", file), domain = NA)
---
> 	stop(gettextf("%s file was not found", sQuote(file)), domain = "R-tools")
727c697
< 	stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
> 	stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
747,749c717
< 	stop(gettextf("vignette filename '%s' does not match any of the '%s' filename patterns",
< 		file, paste(engine$package, engine$name, sep="::")),
< 		domain = NA)
---
> 	stop(gettextf("vignette filename %s does not match any of the %s filename patterns", sQuote(file), sQuote(paste(engine$package, engine$name, sep="::"))), domain = NA)
855c823
<     message("+-+", output)
---
>     message("+-+", output, domain = NA)
979c947
<         stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
998,1000c966,967
<     	stop(gettextf("In '%s' vignettes '%s' and '%s' have the same vignette name",
<     		      basename(dirname(dir)), orig, dup),
<              domain = NA)
---
>     	stop(gettextf("In directory %s vignettes %s and %s have the same vignette name",
>     		      sQuote(basename(dirname(dir))), sQuote(orig), sQuote(dup)), domain = "R-tools")
1042c1009
<         stop(gettextf("directory '%s' does not exist", dir), domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
1058c1025
<         writeLines(c("Vignettes with missing or empty \\VignetteIndexEntry:",
---
>         writeLines(c(gettext("Vignettes with missing or empty '\\VignetteIndexEntry':"),
1072,1073c1039,1040
<     html <- c(HTMLheader("Vignettes and other documentation"),
<               paste0("<h2>Vignettes from package '", pkg,"'</h2>"),
---
>     html <- c(HTMLheader(gettext("Vignettes and other documentation")),
>               paste0("<h2>", gettextf("Vignettes from package %s", sQuote(pkg)),"</h2>"),
1075c1042
<                   "The package contains no vignette meta-information."
---
>                   gettext("The package contains no vignette meta-information.")
1144,1145c1111,1112
<        cat("\n  When running vignette ", sQuote(vig_name), ":\n", sep="")
<        stop("No vignettes available", call. = FALSE, domain = NA)
---
>        cat("\n  ", gettextf("When running vignette %s:", sQuote(vig_name), domain = "R-tools"), "\n", sep = "")
>        stop("No vignettes available", call. = FALSE, domain = "R-tools")
1150,1151c1117,1118
<        cat("\n  When running vignette ", sQuote(vig_name), ":\n", sep="")
<        stop("No such vignette ", sQuote(vig_name), call. = FALSE, domain = NA)
---
>        cat("\n  ", gettextf("When running vignette %s:", sQuote(vig_name), domain = "R-tools"), "\n", sep = "")
>        stop(gettextf("No such vignette %s", sQuote(vig_name)), call. = FALSE, domain = "R-tools")
1164,1165c1131,1132
<         cat("\n  When tangling ", sQuote(file), ":\n", sep="")
<         stop(conditionMessage(e), call. = FALSE, domain = NA)
---
>         cat("\n  ", gettextf("When tangling %s:", sQuote(file), domain = "R-tools"), "\n", sep = "")
>         stop(conditionMessage(e), call. = FALSE, domain = "R-tools")
1172,1173c1139,1140
<             cat("\n  When sourcing ", sQuote(output), ":\n", sep="")
<             stop(conditionMessage(e), call. = FALSE, domain = NA)
---
>             cat("\n  ", gettextf("When sourcing %s:", sQuote(output), domain = "R-tools"), "\n", sep = "")
>             stop(conditionMessage(e), call. = FALSE, domain = "R-tools")
1177c1144
<     cat("\n *** Run successfully completed ***\n")
---
>     cat("\n *** ", gettext("Run successfully completed", domain = "R-tools"), " ***\n", sep = "", collapse = "")
1187c1154
< 		stop("Vignette engine package not specified", call.=FALSE)
---
> 		stop("Vignette engine package was not specified.", call.=FALSE)
1191c1158
<             stop("Unsupported engine name ", sQuote(name))
---
>             stop(gettextf("Unsupported engine name %s", sQuote(name)))
1204,1206c1171
<                    stop(gettextf("None of packages %s have registered vignette engines",
<                                  paste(sQuote(package), collapse = ", ")),
<                         domain = NA)
---
>                    stop(gettextf("None of packages %s have registered vignette engines", paste(sQuote(package), collapse = ", ")))
1226,1227c1191
<                     stop(gettextf("Vignette engine %s is not registered",
<                                   sQuote(name)), domain = NA)
---
>                     stop(gettextf("Vignette engine %s is not registered", sQuote(name)))
1239,1242c1203
<                     stop(gettextf("Vignette engine %s is not registered by any of the packages %s",
<                                   sQuote(name),
<                                   paste(sQuote(package), collapse = ", ")),
<                          domain = NA)
---
>                     stop(gettextf("Vignette engine %s is not registered by any of the packages %s", sQuote(name), paste(sQuote(package), collapse = ", ")))
1246,1249c1207
<                 stop(gettextf("Vignette engine %s is not registered by any of the packages %s",
<                               sQuote(name),
<                               paste(sQuote(package), collapse = ", ")),
<                      domain = NA)
---
>                 stop(gettextf("Vignette engine %s is not registered by any of the packages %s", sQuote(name), paste(sQuote(package), collapse = ", ")))
1258,1259c1216
<             stop(gettextf("Engine name %s and package %s do not match",
<                           sQuote(name), sQuote(package)), domain = NA)
---
>             stop(gettextf("Engine name %s and package %s do not match", sQuote(name), sQuote(package)))
1273,1275c1230
<                     stop(gettextf("Argument %s must be a function and not %s",
<                                   sQuote("weave"), sQuote(class(weave)[1L])),
<                          domain = NA)
---
>                     stop(gettextf("Argument %s must be a function and not an object of class %s", sQuote("weave"), dQuote(class(weave)[1L])))
1277,1279c1232
<                     stop(gettextf("Argument %s must be a function and not %s",
<                                   sQuote("tangle"), sQuote(class(tangle)[1L])),
<                          domain = NA)
---
>                     stop(gettextf("Argument %s must be a function and not an object of class %s", sQuote("tangle"), dQuote(class(tangle)[1L])))
1284,1286c1237
<                 stop(gettextf("Argument %s must be a character vector or NULL and not %s",
<                               sQuote("pattern"), sQuote(class(pattern)[1L])),
<                      domain = NA)
---
>                 stop(gettextf("Argument %s must be a character vector or NULL and not an object of class %s", sQuote("pattern"), sQuote(class(pattern)[1L])))
1308,1309c1259
<                 stop(gettextf("Cannot change the %s engine or use an engine of that name",
<                               sQuote("Sweave")), domain = NA)
---
>                 stop(gettextf("Cannot change the %s engine or use an engine of that name", sQuote("Sweave")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/admin.R R/src/library/tools/R/admin.R
38,42c38,39
<                    paste(.eval_with_capture(print(ok))$output,
<                          collapse = "\n"),
<                    sep = "\n\n"),
<              domain = NA,
<              call. = FALSE)
---
>                    paste(.eval_with_capture(print(ok))$output, collapse = "\n"), sep = "\n\n"),
>              domain = "R-tools", call. = FALSE)
54,57c51
<         warning(gettextf("*** someone has corrupted the Built field in package '%s' ***",
<                          db["Package"]),
<                 domain = NA,
<                 call. = FALSE)
---
>         warning(gettextf("*** someone has corrupted the Built field in package %s ***", sQuote(db["Package"])), domain = "R-tools", call. = FALSE)
103,105c97
<          stop(gettextf("cannot open directory '%s'",
<                        outMetaDir),
<               domain = NA)
---
>          stop(gettextf("cannot open directory %s", sQuote(outMetaDir)), domain = "R-tools")
124,127c116
<             warning(gettextf("*** someone has corrupted the Built field in package '%s' ***",
<                              db["Package"]),
<                     domain = NA,
<                     call. = FALSE)
---
>             warning(gettextf("*** someone has corrupted the Built field in package %s ***", sQuote(db["Package"])), domain = "R-tools", call. = FALSE)
178c167
<             stop(gettextf("cannot open directory '%s'", meta_dir))
---
>             stop(gettextf("cannot open directory %s", sQuote(meta_dir)))
218,219c207
<         stop(gettextf("directory '%s' does not exist", dir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
255,256c243
<             out <- gettextf("\nduplicated files in '%s' field:",
<                             collationField)
---
>             out <- gettextf("\nduplicated files in %s field:", sQuote(collationField))
260c247
<             stop(out, domain = NA)
---
>             stop(out, domain = "R-tools")
266,268c253,255
<             out <- gettextf("\nfiles in '%s' field missing from '%s':",
<                             collationField,
<                             codeDir)
---
>             out <- gettextf("\nfiles in %s field missing from %s:",
>                             sQuote(collationField),
>                             sQuote(codeDir))
272c259
<             stop(out, domain = NA)
---
>             stop(out, domain = "R-tools")
279,281c266,268
<             out <- gettextf("\nfiles in '%s' missing from '%s' field:",
<                             codeDir,
<                             collationField)
---
>             out <- gettextf("\nfiles in %s missing from %s field:",
>                             sQuote(codeDir),
>                             sQuote(collationField))
285c272
<             stop(out, domain = NA)
---
>             stop(out, domain = "R-tools")
294,295c281
<         stop(gettextf("cannot open directory '%s'", outDir),
<              domain = NA)
---
>         stop(gettextf("cannot open directory %s", sQuote(outDir)), domain = "R-tools")
298,299c284
<         stop(gettextf("cannot open directory '%s'", outCodeDir),
<              domain = NA)
---
>         stop(gettextf("cannot open directory %s", sQuote(outCodeDir)), domain = "R-tools")
302c287
<         stop(gettextf("unable to create '%s'", outFile), domain = NA)
---
>         stop(gettextf("unable to create file %s", sQuote(outFile)), domain = "R-tools")
325c310
<                                          "unable to re-encode %s lines %s"),
---
>                                          "unable to re-encode %s lines %s", domain = "R-tools"),
362,363c347
<         stop(gettextf("directory '%s' does not exist", dir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dir)), domain = "R-tools")
365,366c349
<         stop(gettextf("directory '%s' does not exist", outDir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(outDir)), domain = "R-tools")
374,376c357
<             stop(gettextf("unable to copy INDEX to '%s'",
<                           file.path(outDir, "INDEX")),
<                  domain = NA)
---
>             stop(gettextf("unable to copy INDEX to %s", sQuote(file.path(outDir, "INDEX"))), domain = "R-tools")
380,381c361
<          stop(gettextf("cannot open directory '%s'", outMetaDir),
<               domain = NA)
---
>          stop(gettextf("cannot open directory %s", sQuote(outMetaDir)), domain = "R-tools")
552,553c532,533
<             cat("  ", sQuote(basename(file)),
<                 if(nzchar(enc)) paste("using", sQuote(enc)), "\n")
---
>             if(nzchar(enc)) cat("  ", gettextf("%s is using %s encoding", sQuote(basename(file)), sQuote(enc), domain = "R-tools"), "\n", sep = "")
>             else cat("  ", sQuote(basename(file)), "\n", sep = "")
679,680c659
<         stop(gettextf("cannot open directory '%s'", outVignetteDir),
<              domain = NA)
---
>         stop(gettextf("cannot open directory %s", sQuote(outVignetteDir)), domain = "R-tools")
699c678
<         stop(gettextf("cannot create directory '%s'", buildDir), domain = NA)
---
>         stop(gettextf("cannot create directory %s", sQuote(buildDir)), domain = "R-tools")
710,711c689
<         message(gettextf("processing %s", sQuote(basename(file))),
<                 domain = NA)
---
>         message(gettextf("processing file %s", sQuote(basename(file))), domain = "R-tools")
723,725c701
<             stop(gettextf("running %s on vignette '%s' failed with message:\n%s",
<                  engine[["name"]], file, conditionMessage(e)),
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("running %s on vignette %s failed with message:\n%s", engine[["name"]], sQuote(file), conditionMessage(e)), domain = "R-tools", call. = FALSE)
739,741c715
<                 stop(gettextf("compiling TeX file %s failed with message:\n%s",
<                  sQuote(output), conditionMessage(e)),
<                  domain = NA, call. = FALSE)
---
>                 stop(gettextf("compiling TeX file %s failed with message:\n%s", sQuote(output), conditionMessage(e)), domain = "R-tools", call. = FALSE)
747,750c721
<             stop(gettextf("cannot copy '%s' to '%s'",
<                           output,
<                           outVignetteDir),
<                  domain = NA)
---
>             stop(gettextf("cannot copy file %s to directory %s", sQuote(output), sQuote(outVignetteDir)), domain = "R-tools")
775,776c746
<         stop(gettextf("cannot open directory '%s'", outMetaDir),
<              domain = NA)
---
>         stop(gettextf("cannot open directory %s", sQuote(outMetaDir)), domain = "R-tools")
909,911c879
<                     gettextf("ERROR: this R is version %s, package '%s' requires R %s %s",
<                                     current, package,
<                                     depends$op, depends$version)
---
>                     gettextf("ERROR: this R is version %s, package %s requires R %s", current, sQuote(package), paste(depends$op, depends$version, collapse = " "))
913,915c881,882
<                     gettextf("ERROR: this R is version %s, required is R %s %s",
<                                     current, depends$op, depends$version)
<                 message(strwrap(msg, exdent = 2L))
---
>                     gettextf("ERROR: this R is version %s, required is R %s", current, paste(depends$op, depends$version, collapse = " "))
>                 message(strwrap(msg, exdent = 2L), domain = "R-tools")
937c904
<         stop("loading failed", call. = FALSE)
---
>         stop("loading package failed", call. = FALSE)
1118,1119c1085
<     paste('  compacted', sQuote(basename(row.names(y))),
<           'from', z[, 1L], 'to', z[, 2L])
---
>     gettextf("  compacted %s from %s to %s", sQuote(basename(row.names(y))), z[, 1L], z[, 2L], domain = "R-tools")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/assertCondition.R R/src/library/tools/R/assertCondition.R
54,55c54,55
<                     message(sprintf("assertCondition: caught %s",
<                                     paste(dQuote(found), collapse =", ")), domain = NA)
---
>                     message(gettextf("assertCondition: caught %s",
>                                     paste(dQuote(found), collapse =", ")))
83c83
<         message(sprintf("Asserted error: %s", error[[1]]$message))
---
>         message(gettextf("Asserted error: %s", error[[1]]$message))
99c99
<         message(sprintf("Asserted warning: %s", warning[[1]]$message))
---
>         message(gettextf("Asserted warning: %s", warning[[1]]$message))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/bibstyle.R R/src/library/tools/R/bibstyle.R
415c415
<     	    paste("bibtype", attr(paper, "bibtype"),"not implemented") ))
---
>     	    gettextf("bibtype %s is not implemented", sQuote(attr(paper, "bibtype")))))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/build.R R/src/library/tools/R/build.R
122c122
< 	if(no.q)
---
> 	if(no.q) {
124,125c124,125
< 		".build_packages() exit status ", status)
< 	else
---
> 		gettextf("'.build_packages()' exit status %s", status, domain = "R-tools"))
> 	} else
213c213
<                 message(paste(strwrap(sprintf("installing dependencies %s",
---
>                 message(paste(strwrap(gettextf("installing dependencies %s",
215c215
<                                                     collapse = ", ")),
---
>                                                     collapse = ", "), domain = "R-tools"),
242c242
< 	    printLog(Log, "ERROR: package installation failed\n")
---
> 	    printLog(Log, gettext("ERROR: package installation failed\n", domain = "R-tools"))
253c253
<         checkingLog(Log, "DESCRIPTION meta-information")
---
>         checkingLog(Log, gettext("checking DESCRIPTION meta-information ...", domain = "R-tools"))
256,257c256,257
<             resultLog(Log, "ERROR")
<             messageLog(Log, "running '.check_package_description' failed")
---
>             resultLog(Log, gettext("ERROR", domain = "R-tools"))
>             messageLog(Log, gettext("running '.check_package_description()' failed", domain = "R-tools"))
260c260
<                 resultLog(Log, "ERROR")
---
>                 resultLog(Log, gettext("ERROR", domain = "R-tools"))
263c263
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
272c272
< 			   "installing the package to build vignettes")
---
> 			   gettext("installing the package to build vignettes", domain = "R-tools"))
281c281
<             messageLog(Log, "renaming 'inst/doc/makefile' to 'inst/doc/Makefile'")
---
>             messageLog(Log, gettext("renaming 'inst/doc/makefile' to 'inst/doc/Makefile'", domain = "R-tools"))
328c328
<                     resultLog(Log, "ERROR")
---
>                     resultLog(Log, gettext("ERROR", domain = "R-tools"))
336c336
<                     resultLog(Log, "OK")
---
>                     resultLog(Log, gettext("OK", domain = "R-tools"))
347,354c347
<                     	warning(sprintf(ngettext(sum(!copied),
<                                                  "%s file\n", "%s files\n"),
<                                         sQuote("inst/doc")),
<                     	        strwrap(paste(sQuote(basename(tocopy[!copied])), collapse=", "),
<                     	                indent = 4, exdent = 2),
< 			        "\n  ignored as vignettes have been rebuilt.",
< 			        "\n  Run R CMD build with --no-build-vignettes to prevent rebuilding.",
< 			     call. = FALSE)
---
> 			warning(sprintf(ngettext(sum(!copied),"%s file\n%s\n  ignored as vignettes have been rebuilt.\n  Run R CMD build with --no-build-vignettes to prevent rebuilding.","%s files\n%s\n  ignored as vignettes have been rebuilt.\n  Run R CMD build with --no-build-vignettes to prevent rebuilding.", domain = "R-tools"), sQuote("inst/doc"), strwrap(paste(sQuote(basename(tocopy[!copied])), collapse=", "), indent = 4, exdent = 2)), call. = FALSE, domain = NA)
401c394
<                 checkingLog(Log, "vignette meta-information")
---
>                 checkingLog(Log, gettext("checking vignette meta-information ...", domain = "R-tools"))
406c399
<                     msg <- c("Output(s) listed in 'build/vignette.rds' but not in package:",
---
>                     msg <- c(gettext("Output(s) listed in 'build/vignette.rds' but not in package:", domain = "R-tools"),
408c401
<                              "Run R CMD build without --no-build-vignettes to re-create")
---
>                              gettext("Run R CMD build without --no-build-vignettes to re-create", domain = "R-tools"))
411c404
<                 } else resultLog(Log, "OK")
---
>                 } else resultLog(Log, gettext("OK"))
417c410
<             messageLog(Log, "compacting vignettes and other PDF files")
---
>             messageLog(Log, gettext("compacting vignettes and other PDF files", domain = "R-tools"))
448c441
<             messageLog(Log, "cleaning src")
---
>             messageLog(Log, gettext("cleaning 'src' directory", domain = "R-tools"))
454,455c447
<                     else warning("unable to run 'make clean' in 'src'",
<                                  domain = NA)
---
>                     else warning("unable to run 'make clean' in 'src'", domain = "R-tools")
464,465c456
<                         } else warning("unable to run 'make clean' in 'src'",
<                                        domain = NA)
---
>                         } else warning("unable to run 'make clean' in 'src'", domain = "R-tools")
512c503
<                     messageLog(Log, "running 'cleanup.win'")
---
>                     messageLog(Log, gettext("running 'cleanup.win'", domain = "R-tools"))
520c511
<             messageLog(Log, "running 'cleanup'")
---
>             messageLog(Log, gettext("running 'cleanup'", domain = "R-tools"))
528,532c519,521
< 	res <- tryCatch(
< 	    Rdindex(Rd_files, newindex),
< 	    error = function(e) {
< 		errorLog(Log, "computing Rd index failed:",
< 			 conditionMessage(e))
---
>         res <- try(Rdindex(Rd_files, newindex))
>         if (inherits(res, "try-error")) {
>             errorLog(Log, gettext("computing Rd index failed", domain = "R-tools"))
534,535c523,524
< 	    })
<         checkingLog(Log, "whether ", sQuote(oldindex), " is up-to-date")
---
>         }
>         checkingLog(Log, gettextf("checking whether %s is up-to-date ...", sQuote(oldindex), domain = "R-tools"))
540c529
<                 resultLog(Log, "NO")
---
>                 resultLog(Log, gettext("NO", domain = "R-tools"))
542,543c531
<                     messageLog(Log, "removing ", sQuote(oldindex),
< 			      " as '--force' was given")
---
>                     messageLog(Log, gettextf("removing %s as '--force' was given", sQuote(oldindex), domain = "R-tools"))
546,547c534
<                     messageLog(Log, "use '--force' to remove ",
< 			      "the existing ", sQuote(oldindex))
---
>                     messageLog(Log, gettextf("use '--force' to remove the existing %s", sQuote(oldindex), domain = "R-tools"))
551c538
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
555,556c542,543
<             resultLog(Log, "NO")
<             messageLog(Log, "creating new ", sQuote(oldindex))
---
>             resultLog(Log, gettext("NO", domain = "R-tools"))
>             messageLog(Log, gettextf("creating new %s", sQuote(oldindex), domain = "R-tools"))
586c573
< 	messageLog(Log, "installing the package to process help pages")
---
> 	messageLog(Log, gettext("installing the package to process help pages", domain = "R-tools"))
602c589
< 	    messageLog(Log, "saving partial Rd database")
---
> 	    messageLog(Log, gettext("saving partial Rd database", domain = "R-tools"))
615c602
< 	    messageLog(Log, "building the PDF package manual")
---
> 	    messageLog(Log, gettext("building the PDF package manual", domain = "R-tools"))
683c670
<                 printLog(Log, "WARNING: directory ", sQuote(d), " is empty\n")
---
>                 printLog(Log, gettextf("WARNING: directory %s is empty\n", sQuote(d), domain = "R-tools"))
686c673
<                 printLog(Log, "Removed empty directory ", sQuote(d), "\n")
---
>                 printLog(Log, gettextf("Removed empty directory %s\n", sQuote(d), domain = "R-tools"))
723,724c710
<         printLog(Log,
<                  "  NB: this package now depends on R (>= ", ver, ")\n")
---
>         printLog(Log, gettextf("  NB: this package now depends on R (>= %s)\n", ver, domain = "R-tools"))
735c721
<             messageLog(Log, "re-saving image files")
---
>             messageLog(Log, gettext("re-saving image files", domain = "R-tools"))
747c733
<                     messageLog(Log, "re-saving image files")
---
>                     messageLog(Log, gettext("re-saving image files", domain = "R-tools"))
755c741
<                     messageLog(Log, "re-saving sysdata.rda")
---
>                     messageLog(Log, gettext("re-saving sysdata.rda", domain = "R-tools"))
776c762
<             messageLog(Log, "re-saving .R files as .rda")
---
>             messageLog(Log, gettext("re-saving .R files as .rda", domain = "R-tools"))
790,791c776
<             printLog(Log,
<                      "  NB: *.R converted to .rda: other files may need to be removed\n")
---
>             printLog(Log, gettextf("  NB: *.R converted to .rda: other files may need to be removed\n", domain = "R-tools"))
795c780
<             messageLog(Log, "re-saving tabular files")
---
>             messageLog(Log, gettext("re-saving tabular files", domain = "R-tools"))
886,887c871
<             stop("'--no-vignettes' is defunct:\n  use '--no-build-vignettes' instead",
<                  call. = FALSE, domain = NA)
---
>             stop("'--no-vignettes' is defunct:\n  use '--no-build-vignettes' instead", call. = FALSE, domain = "R-tools")
908c892
<             message("Warning: unknown option ", sQuote(a))
---
>             message(gettextf("Warning: unknown option %s", sQuote(a)))
914,916c898
<         warning(gettextf("invalid value for '--compact-vignettes', assuming %s",
<                          "\"qpdf\""),
<                 domain = NA)
---
>         warning(gettextf("invalid value for '--compact-vignettes', assuming %s", "\"qpdf\""), domain = "R-tools")
924c906
<         stop("current working directory cannot be ascertained")
---
>         stop("current working directory cannot be ascertained", domain = "R-tools")
955c937
<             errorLog(Log, "cannot change to directory ", sQuote(pkg))
---
>             errorLog(Log, gettextf("cannot change to directory %s", sQuote(pkg), domain = "R-tools"))
960c942
<         checkingLog(Log, "for file ", sQuote(file.path(pkg, "DESCRIPTION")))
---
>         checkingLog(Log, gettextf("checking for file %s ...", sQuote(file.path(pkg, "DESCRIPTION")), domain = "R-tools"))
965c947
<                 resultLog(Log, "EXISTS but not correct format")
---
>                 resultLog(Log, gettext("file EXISTS but is not of correct format", domain = "R-tools"))
968c950
<             resultLog(Log, "OK")
---
>             resultLog(Log, gettext("OK", domain = "R-tools"))
970c952
<             resultLog(Log, "NO")
---
>             resultLog(Log, gettext("NO", domain = "R-tools"))
975c957
< 	    errorLog(Log, "invalid 'Package' field"); do_exit(1L)
---
> 	    errorLog(Log, gettext("invalid 'Package' field", domain = "R-tools")); do_exit(1L)
986c968
<                 errorLog(Log, "copying to build directory failed")
---
>                 errorLog(Log, gettext("copying to build directory failed", domain = "R-tools"))
1001c983
<                 errorLog(Log, "copying to build directory failed")
---
>                 errorLog(Log, gettext("copying to build directory failed", domain = "R-tools"))
1010,1011c992
<                 message(gettextf("Error: cannot rename directory to %s",
<                                  sQuote(intname)), domain = NA)
---
>                 message(gettextf("Error: cannot rename directory to %s", sQuote(intname)), domain = "R-tools")
1018c999
<         messageLog(Log, "preparing ", sQuote(pkgname), ":")
---
>         messageLog(Log, gettextf("preparing %s:", sQuote(pkgname)))
1055c1036
<             messageLog(Log, "excluding invalid files")
---
>             messageLog(Log, gettext("excluding invalid files", domain = "R-tools"))
1068,1069c1049
<         messageLog(Log,
<                    "checking for LF line-endings in source and make files and shell scripts")
---
>         messageLog(Log, gettext("checking for LF line-endings in source and make files and shell scripts", domain = "R-tools"))
1073c1053
<         messageLog(Log, "checking for empty or unneeded directories");
---
>         messageLog(Log, gettext("checking for empty or unneeded directories", domain = "R-tools"));
1078,1083c1058,1059
<                 msg <- paste("WARNING: Removing directory",
<                              sQuote(d),
<                              "which should only occur",
<                              "in an installed package")
<                 printLog(Log, paste(strwrap(msg, indent = 0L, exdent = 2L),
<                                     collapse = "\n"), "\n")
---
>                 msg <- gettextf("WARNING: Removing directory %s which should only occur in an installed package", sQuote(d), domain = "R-tools")
>                 printLog(Log, paste(strwrap(msg, indent = 0L, exdent = 2L), collapse = "\n"), "\n")
1096c1072
<             messageLog(Log, "looking to see if a 'data/datalist' file should be added")
---
>             messageLog(Log, gettext("looking to see if a 'data/datalist' file should be added", domain = "R-tools"))
1101c1077
<                      printLog(Log, "  unable to create a 'datalist' file: may need the package to be installed\n"))
---
>                      printLog(Log, gettext("  unable to create a 'datalist' file: may need the package to be installed\n", domain = "R-tools")))
1127,1132c1103,1104
<                 msg <- paste("WARNING: Added dependency on R >= 3.5.0 because",
<                              "serialized objects in serialize/load version 3",
<                              "cannot be read in older versions of R. File(s)",
<                              "containing such objects:",
<                              .pretty_format(sort(toonew)),
<                              "\n")
---
>                 msg <- gettextf("WARNING: Added dependency on R >= 3.5.0 because\nserialized objects in serialize/load version 3\ncannot be read in older versions of R. File(s)\ncontaining such objects:\n%s\n",
>                              .pretty_format(sort(toonew)), domain = "R-tools")
1139c1111
< 	    messageLog(Log, "creating default NAMESPACE file")
---
> 	    messageLog(Log, gettext("creating default NAMESPACE file", domain = "R-tools"))
1144c1116
< 	    messageLog(Log, "adding MD5 file")
---
> 	    messageLog(Log, gettext("adding MD5 file", domain = "R-tools"))
1157c1129
<         messageLog(Log, "building ", sQuote(filename))
---
>         messageLog(Log, gettextf("building %s", sQuote(filename)))
1163c1135
<             errorLog(Log, "packaging into tarball failed")
---
>             errorLog(Log, gettext("packaging into tarball failed", domain = "R-tools"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/check.R R/src/library/tools/R/check.R
48c48
<                 domain = NA, call. = FALSE)
---
>                 domain = "R-tools", call. = FALSE)
52c52
<                 domain = NA, call. = FALSE)
---
>                 domain = "R-tools", call. = FALSE)
56c56
<                 domain = NA, call. = FALSE)
---
>                 domain = "R-tools", call. = FALSE)
125,126c125
<                                  c(Ropts, paste("-f", Rin)), stdout, stderr,
<                                  env = env, timeout = timeout))
---
>                                  c(Ropts, paste("-f", Rin)), stdout, stderr, env = c("LANGUAGE=en", env), timeout = timeout))
130,131c129
<                                  stdout, stderr, stdin, input = cmd, env = env,
<                                  timeout = timeout))
---
>                                  stdout, stderr, stdin, input = cmd, env = c("LANGUAGE=en", env), timeout = timeout))
150c148
<         if (!res) stop(gettextf("cannot link from %s", from), domain = NA)
---
>         if (!res) stop(gettextf("cannot link from %s", sQuote(from)), domain = "R-tools")
274c272
<         messageLog(Log, "creation of directory ", sQuote(dir1), " failed")
---
>         messageLog(Log, gettextf("creation of directory %s failed", sQuote(dir1), domain = "R-tools"))
434c432
<         checkingLog(Log, "package directory")
---
>         checkingLog(Log, gettext("checking package directory ...", domain = "R-tools"))
440c438
<             resultLog(Log, "OK")
---
>             resultLog(Log, gettext("OK", domain = "R-tools"))
442c440
<             errorLog(Log, "Package directory ", sQuote(pkg), "does not exist.")
---
>             errorLog(Log, gettextf("Package directory %s does not exist", sQuote(pkg), domain = "R-tools"))
451c449
<             checkingLog(Log, "for future file timestamps")
---
>             checkingLog(Log, gettext("checking for future file timestamps ...", domain = "R-tools"))
474c472
<                     noteLog(Log, "unable to verify current time")
---
>                     noteLog(Log, gettext("unable to verify current time", domain = "R-tools"))
480c478
<                         errorLog(Log, "This system is set to the wrong time: please correct")
---
>                         errorLog(Log, gettext("This system is set to the wrong time: please correct", domain = "R-tools"))
532c530
<                     printLog(Log, "* loading checks for arch ", sQuote(arch), "\n")
---
>                     printLog(Log, gettextf("* loading checks for arch %s\n", sQuote(arch), domain = "R-tools"))
560c558
<             checkingLog(Log, "for left-overs from vignette generation")
---
>             checkingLog(Log, gettext("checking for left-overs from vignette generation ...", domain = "R-tools"))
562,564c560
<             printLog(Log,
<                      paste("  file", paste(sQuote(miss[f]), collapse = ", "),
<                            "will not be installed: please remove it\n"))
---
>             printLog(Log, gettextf("  file %s will not be installed: please remove it\n", paste(sQuote(miss[f]), collapse = ", "), domain = "R-tools"))
569c565
<                 warningLog(Log, "'qpdf' is needed for checks on size reduction of PDFs")
---
>                 warningLog(Log, gettext("'qpdf' is needed for checks on size reduction of PDFs", domain = "R-tools"))
594,599c590,593
<                     checkingLog(Log, "for old-style vignette sources")
<                     msg <- c("Vignette sources only in 'inst/doc':",
<                              strwrap(paste(sQuote(sources), collapse = ", "),
<                                      indent = 2L, exdent = 2L),
<                              "A 'vignettes' directory is required as from R 3.1.0",
<                              "and these will not be indexed nor checked")
---
>                     checkingLog(Log, gettext("checking for old-style vignette sources ...", domain = "R-tools"))
>                     msg <- c(gettext("Vignette sources only in 'inst/doc':", domain = "R-tools"),
>                             strwrap(paste(sQuote(sources), collapse = ", "), indent = 2L, exdent = 2L),
>                              gettext("A 'vignettes' directory is required as from R 3.1.0 and these will not be indexed nor checked", domain = "R-tools"))
612,613c606,607
<             checkingLog(Log, "examples")
<             resultLog(Log, "SKIPPED")
---
>             checkingLog(Log, gettext("checking examples ...", domain = "R-tools"))
>             resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
620c614
<             printLog(Log, "directory ", sQuote(test_dir), " not found\n")
---
>             printLog(Log, gettextf("directory %s was not found\n", sQuote(test_dir), domain = "R-tools"))
635c629
<         checkingLog(Log, "for portable file names")
---
>         checkingLog(Log, gettext("checking for portable file names ...", domain = "R-tools"))
702c696
<             msg <- ngettext(nb,
---
>             wrapLog(ngettext(nb,
705,706c699
<                             domain = NA)
<             wrapLog(msg)
---
>                             domain = "R-tools"))
708,712c701
<             wrapLog("These are not valid file names",
<                     "on all R platforms.\n",
<                     "Please rename the files and try again.\n",
<                     "See section 'Package structure'",
<                     "in the 'Writing R Extensions' manual.\n")
---
>             wrapLog(gettext("These are not valid file names on all R platforms.\nPlease rename the files and try again.\nSee section 'Package structure' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
722c711
<             wrapLog("Found the following files with duplicate lower-cased file names:\n")
---
>             wrapLog(gettext("Found the following files with duplicate lower-cased file names:\n", domain = "R-tools"))
724,728c713
<             wrapLog("File names must not differ just by case",
<                     "to be usable on all R platforms.\n",
<                     "Please rename the files and try again.\n",
<                     "See section 'Package structure'",
<                     "in the 'Writing R Extensions' manual.\n")
---
>             wrapLog(gettext("File names must not differ just by case to be usable on all R platforms.\nPlease rename the files and try again.\nSee section 'Package structure' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
740c725
<             msg <- ngettext(nb,
---
>             wrapLog(ngettext(nb,
743,744c728
<                             domain = NA)
<             wrapLog(msg)
---
>                             domain = "R-tools"))
746,748c730
<             wrapLog("These are not fully portable file names.\n",
<                     "See section 'Package structure'",
<                     "in the 'Writing R Extensions' manual.\n")
---
>             wrapLog(gettext("These are not fully portable file names.\nSee section 'Package structure' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
773c755
<             msg <- ngettext(length(bad_files),
---
>             wrapLog(ngettext(length(bad_files),
776,777c758
<                             domain = NA)
<             wrapLog(msg)
---
>                             domain = "R-tools"))
779,784c760
<             wrapLog("Tarballs are only required to store paths of up to 100",
<                     "bytes and cannot store those of more than 256 bytes,",
<                     "with restrictions including to 100 bytes for the",
<                     "final component.\n",
<                     "See section 'Package structure'",
<                     "in the 'Writing R Extensions' manual.\n")
---
>             wrapLog(gettext("Tarballs are only required to store paths of up to 100 bytes and cannot store those of more than 256 bytes, with restrictions including to 100 bytes for the final component.\nSee section 'Package structure' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
788c764
<         if (!any) resultLog(Log, "OK")
---
>         if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
795c771
<         checkingLog(Log, "for sufficient/correct file permissions")
---
>         checkingLog(Log, gettext("checking for sufficient/correct file permissions ...", domain = "R-tools"))
825c801
<             wrapLog("Found the following files with insufficient permissions:\n")
---
>             wrapLog(gettext("Found the following files with insufficient permissions:\n", domain = "R-tools"))
827c803
<             wrapLog("Permissions should be at least 700 for directories and 400 for files.\nPlease fix permissions and try again.\n")
---
>             wrapLog(gettext("Permissions should be at least 700 for directories and 400 for files.\nPlease fix permissions and try again.\n", domain = "R-tools"))
843c819
<             wrapLog("The following files should most likely be executable (for the owner):\n")
---
>             wrapLog(gettext("The following files should most likely be executable (for the owner):\n", domain = "R-tools"))
845,846c821,822
<             printLog(Log, "Please fix their permissions\n")
<         } else resultLog(Log, "OK")
---
>             printLog(Log, gettext("Please fix their permissions\n", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
855c831
<         checkingLog(Log, "serialization versions")
---
>         checkingLog(Log, gettext("checking serialization versions ...", domain = "R-tools"))
859c835
<             msg <- "Found file(s) with version 3 serialization:"
---
>             msg <- gettext("Found file(s) with version 3 serialization:", domain = "R-tools")
862,866c838,839
<             wrapLog("Such files are only readable in R >= 3.5.0.\n",
<                     "Recreate them with R < 3.5.0 or",
<                     "save(version = 2) or saveRDS(version = 2)",
<                     "as appropriate")
<         } else resultLog(Log, "OK")
---
>             wrapLog(gettext("Such files are only readable in R >= 3.5.0.\nRecreate them with R < 3.5.0 or save(version = 2) or saveRDS(version = 2) as appropriate", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
875c848
<         checkingLog(Log, "DESCRIPTION meta-information")
---
>         checkingLog(Log, gettext("checking DESCRIPTION meta-information ...", domain = "R-tools"))
890,891c863
<         Rcmd <- sprintf("tools:::.check_package_description(\"%s\", TRUE)",
<                         dfile)
---
>         Rcmd <- sprintf("tools:::.check_package_description(\"%s\", TRUE)", dfile)
920,921c892
<             Rcmd <- sprintf("tools:::.check_package_license(\"%s\", \"%s\")",
<                             dfile, pkgdir)
---
>             Rcmd <- sprintf("tools:::.check_package_license(\"%s\", \"%s\")", dfile, pkgdir)
981,983c952,954
<                         printLog(Log, "Author field differs from that derived from Authors@R", "\n")
<                         printLog(Log, "  Author:    ", sQuote(yorig[1L]), "\n")
<                         printLog(Log, "  Authors@R: ", sQuote(y[1L]), "\n")
---
>                         printLog(Log, gettext("Author field differs from that derived from Authors@R", domain = "R-tools"), "\n")
>                         printLog(Log, gettext("  Author:    ", domain = "R-tools"), sQuote(yorig[1L]), "\n")
>                         printLog(Log, gettext("  Authors@R: ", domain = "R-tools"), sQuote(y[1L]), "\n")
987,989c958,960
<                         printLog(Log, "Maintainer field differs from that derived from Authors@R", "\n")
<                         printLog(Log, "  Maintainer: ", sQuote(yorig[2L]), "\n")
<                         printLog(Log, "  Authors@R:  ", sQuote(y[2L]), "\n")
---
>                         printLog(Log, gettext("Maintainer field differs from that derived from Authors@R", domain = "R-tools"), "\n")
>                         printLog(Log, gettext("  Maintainer: ", domain = "R-tools"), sQuote(yorig[2L]), "\n")
>                         printLog(Log, gettext("  Authors@R:  ", domain = "R-tools"), sQuote(y[2L]), "\n")
1000c971
<                      "Checking should be performed on sources prepared by 'R CMD build'.",
---
>                      gettext("Checking should be performed on sources prepared by 'R CMD build'.", domain = "R-tools"),
1008c979
<                 printLog(Log, "NeedsCompilation field must take value 'yes' or 'no'", "\n")
---
>                 printLog(Log, gettext("'NeedsCompilation' field must take value 'yes' or 'no'", domain = "R-tools"), "\n")
1013c984
<                 printLog(Log, "NeedsCompilation field should likely be 'yes'", "\n")
---
>                 printLog(Log, gettext("'NeedsCompilation' field should likely be 'yes'", domain = "R-tools"), "\n")
1042c1013
<                             "BugReports field is not a suitable URL but appears to contain an email address\n  not specified by mailto: nor contained in < >"
---
>                             gettext("BugReports field is not a suitable URL but appears to contain an email address\n  not specified by mailto: nor contained in < >", domain = "R-tools")
1044c1015
<                             "BugReports field should be the URL of a single webpage"
---
>                             gettext("BugReports field should be the URL of a single webpage", domain = "R-tools")
1046c1017
<                         "BugReports field is not a suitable URL but contains an email address\n  which will be used as from R 3.4.0"
---
>                         gettext("BugReports field is not a suitable URL but contains an email address\n  which will be used as from R 3.4.0", domain = "R-tools")
1049c1020
<                 msg <- "BugReports field should not be empty"
---
>                 msg <- gettext("BugReports field should not be empty", domain = "R-tools")
1088,1089c1059,1060
<                               sprintf("Dependence on R version %s not with patchlevel 0\n",
<                                       sQuote(format(Rver[[1L]]$version))))
---
>                               gettextf("Dependence on R version %s not with patchlevel 0\n",
>                                       sQuote(format(Rver[[1L]]$version)), domain = "R-tools"))
1093c1064
<         if (!any) resultLog(Log, "OK")
---
>         if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
1104c1075
<         checkingLog(Log, "'build' directory")
---
>         checkingLog(Log, gettext("checking 'build' directory ...", domain = "R-tools"))
1112c1083
<             msg <- c("Vignette(s) without any output listed in 'build/vignette.rds'",
---
>             msg <- c(gettext("Vignette(s) without any output listed in 'build/vignette.rds'", domain = "R-tools"),
1121c1092
<             msg <- c("Output(s) listed in 'build/vignette.rds' but not in package:",
---
>             msg <- c(gettext("Output(s) listed in 'build/vignette.rds' but not in package:", domain = "R-tools"),
1125c1096
<         if (!any) resultLog(Log, "OK")
---
>         if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
1130c1101
<         checkingLog(Log, "top-level files")
---
>         checkingLog(Log, gettext("checking top-level files ...", domain = "R-tools"))
1137,1138c1108
<             wrapLog("These files are defunct.",
<                     "See manual 'Writing R Extensions'.\n")
---
>             wrapLog(gettext("These files are defunct. See manual 'Writing R Extensions'.\n", domain = "R-tools"))
1158,1163c1128
<                     wrapLog("Found a", sQuote("configure"),
<                             "file without source file",
<                             sQuote("configure.ac"), "or",
<                             sQuote("configure.in"), ".",
<                             "An Open Source package must include its",
<                             "autoconf sources.\n")
---
>                     wrapLog(gettextf("Found a %s file without source file %s or %s. An Open Source package must include its autoconf sources.\n", sQuote("configure"), sQuote("configure.ac"), sQuote("configure.in")))
1166,1170c1131
<                     wrapLog("Found a", sQuote("configure"),
<                             "file without source file",
<                             sQuote("configure.ac"), "or",
<                             sQuote("configure.in"), ".",
<                             "It is good practice to include autoconf sources.\n")
---
>                     wrapLog(gettextf("Found a %s file without source file %s or %s. It is good practice to include autoconf sources.\n", sQuote("configure"), sQuote("configure.ac"), sQuote("configure.in")))
1177,1179c1138
<                     wrapLog("Found a", sQuote("configure.in"),
<                             "file:", sQuote("configure.ac"),
<                             "has long been preferred.\n")
---
>                     wrapLog(gettextf("Found a %s file: %s has long been preferred.\n", sQuote("configure.in"), sQuote("configure.ac")))
1195c1154
<                         }
---
>                         } #LUKI
1225,1226c1184
<                                      sprintf("Conversion of '%s' failed:\n",
<                                              ifile),
---
>                                      gettextf("Conversion of '%s' failed:\n", ifile, domain = "R-tools"),
1236c1194
<                              "Files 'README.md' or 'NEWS.md' cannot be checked without 'pandoc' being installed.\n")
---
>                              gettext("Files 'README.md' or 'NEWS.md' cannot be checked without 'pandoc' being installed.\n", domain = "R-tools"))
1251,1261c1209,1212
<                     one <- (length(topfiles) == 1L)
<                     msg <- c(if(one) "File" else "Files",
<                              "\n",
<                              .format_lines_with_indent(topfiles),
<                              "\n",
<                              if(one) {
<                                  "is not mentioned in the DESCRIPTION file.\n"
<                              } else {
<                                  "are not mentioned in the DESCRIPTION file.\n"
<                              })
<                     printLog(Log, msg)
---
>                     printLog(Log,
>                              sprintf(ngettext(length(topfiles),
>                              "File %s is not mentioned in the DESCRIPTION file.\n",
>                              "Files %s are not mentioned in the DESCRIPTION file.\n", domain = "R-tools"),.format_lines_with_indent(topfiles)))
1276,1286c1227
<                     one <- (length(topfiles) == 1L)
<                     msg <- c(if(one) "File" else "Files",
<                              "\n",
<                              .format_lines_with_indent(topfiles),
<                              "\n",
<                              if(one) {
<                                  "will install at top-level and is not mentioned in the DESCRIPTION file.\n"
<                              } else {
<                                  "will install at top-level and are not mentioned in the DESCRIPTION file.\n"
<                              })
<                     printLog(Log, msg)
---
>                     printLog(Log, sprintf(ngettext(length(topfiles), "File\n%s\nwill install at top-level and is not mentioned in the 'DESCRIPTION' file.\n", "Files\n%s\nwill install at top-level and are not mentioned in the 'DESCRIPTION' file.\n", domain = "R-tools"), .format_lines_with_indent(topfiles)))
1325,1326c1266
<                          if(lt > 1L) "Non-standard files/directories found at top level:\n"
<                          else "Non-standard file/directory found at top level:\n" )
---
>                              ngettext(lt, "Non-standard file/directory found at top level:\n", "Non-standard files/directories found at top level:\n", domain = "R-tools"))
1330,1331c1270
<                 cp <- grep("^copyright", topfiles,
<                            ignore.case = TRUE, value = TRUE)
---
>                 cp <- grep("^copyright", topfiles, ignore.case = TRUE, value = TRUE)
1333c1272
<                     printLog(Log, "Copyright information should be in file inst/COPYRIGHTS\n")
---
>                     printLog(Log, gettext("Copyright information should be in file inst/COPYRIGHTS\n", domain = "R-tools"))
1335c1274
<                     printLog(Log, "Authors information should be in file inst/AUTHORS\n")
---
>                     printLog(Log, gettext("Authors information should be in file inst/AUTHORS\n", domain = "R-tools"))
1343c1282
<         checkingLog(Log, "for left-over files")
---
>         checkingLog(Log, gettext("checking for left-over files ...", domain = "R-tools"))
1351,1355c1290,1292
<                       "The following files look like leftovers:\n",
<                       paste(strwrap(paste(sQuote(bad), collapse = ", "),
<                                     indent = 2, exdent = 2), collapse = "\n"),
<                       "\nPlease remove them from your package.\n")
<         } else resultLog(Log, "OK")
---
>                      gettextf("The following files look like leftovers:\n%s\nPlease remove them from your package.\n",
>                      paste(strwrap(paste(sQuote(bad), collapse = ", "), indent = 2, exdent = 2), collapse = "\n"), domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
1362c1299
<         checkingLog(Log, "index information")
---
>         checkingLog(Log, gettext("checking index information ...", domain = "R-tools"))
1367c1304
<             warningLog(Log, "Empty file 'INDEX'.")
---
>             warningLog(Log, gettext("Empty file 'INDEX'.", domain = "R-tools"))
1375,1377c1312
<                 printLog0(Log,
<                           sprintf("Empty or missing file %s.\n",
<                                   sQuote(index)))
---
>                 printLog0(Log, gettextf("Empty or missing file %s.\n", sQuote(index), domain = "R-tools"))
1381c1316
<                 out <- R_runR0(Rcmd, R_opts2, "R_DEFAULT_PACKAGES=NULL")
---
>                 out <- R_runR(Rcmd, R_opts2, "R_DEFAULT_PACKAGES=NULL")
1400,1401c1335,1336
<             wrapLog("See sections 'The INDEX file' and 'Package subdirectories' in the 'Writing R Extensions' manual.\n")
<         else resultLog(Log, "OK")
---
>             wrapLog(gettext("See sections 'The INDEX file' and 'Package subdirectories' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
>         else  resultLog(Log, gettext("OK", domain = "R-tools"))
1406c1341
<         checkingLog(Log, "package subdirectories")
---
>         checkingLog(Log, gettext("checking package subdirectories ...", domain = "R-tools"))
1411c1346
<             warningLog(Log, "Found directory 'R' with no source files.")
---
>             warningLog(Log, gettext("Found directory 'R' with no source files.", domain = "R-tools"))
1429,1430c1364
<                 printLog(Log, "Found subdirectory 'r'.\n",
<                          "Most likely, this should be 'R'.\n")
---
>                 printLog(Log, gettext("Found subdirectory 'r'.\nMost likely, this should be 'R'.\n", domain = "R-tools"))
1435,1436c1369
<                 printLog(Log, "Found subdirectory 'MAN'.\n",
<                          "Most likely, this should be 'man'.\n")
---
>                 printLog(Log, gettext("Found subdirectory 'MAN'.\nMost likely, this should be 'man'.\n", domain = "R-tools"))
1441,1442c1374
<                 printLog(Log, "Found subdirectory 'DATA'.\n",
<                          "Most likely, this should be 'data'.\n")
---
>                 printLog(Log, gettext("Found subdirectory 'DATA'.\nMost likely, this should be 'data'.\n", domain = "R-tools"))
1459,1465c1391,1394
<             msg <- ngettext(sum(ind),
<                             "Found the following directory with the name of a check directory:\n",
<                             "Found the following directories with names of check directories:\n", domain = NA)
<             printLog0(Log, msg,
<                       .format_lines_with_indent(all_dirs[ind]),
<                       "\n",
<                       "Most likely, these were included erroneously.\n")
---
>             msg <- sprintf(ngettext(sum(ind),
>                             "Found the following directory with the name of a check directory:\n%s\nMost likely, these were included erroneously.\n",
>                             "Found the following directories with names of check directories:\n%s\nMost likely, these were included erroneously.\n", domain = "R-tools"), .format_lines_with_indent(all_dirs[ind]))
>             printLog0(Log, msg)
1474,1480c1403,1406
<             msg <- ngettext(sum(ind),
<                             "Found the following directory with the name of a Rd2pdf directory:\n",
<                             "Found the following directories with names of Rd2pdf directories:\n", domain = NA)
<            printLog0(Log, msg,
<                      .format_lines_with_indent(all_dirs[ind]),
<                      "\n",
<                      "Most likely, these were included erroneously.\n")
---
>             msg <- sprintf(ngettext(sum(ind),
>                             "Found the following directory with the name of a Rd2pdf directory:\n%s\nMost likely, these were included erroneously.\n",
>                             "Found the following directories with names of Rd2pdf directories:\n%s\nMost likely, these were included erroneously.\n", domain = "R-tools"), .format_lines_with_indent(all_dirs[ind]))
>            printLog0(Log, msg)
1491,1497c1417,1420
<             msg <- ngettext(sum(ind),
<                             "Found the following directory with the name of a version control directory:\n",
<                             "Found the following directories with names of version control directories:\n", domain = NA)
<                 printLog0(Log, msg,
<                           .format_lines_with_indent(all_dirs[ind]),
<                           "\n",
<                           "These should not be in a package tarball.\n")
---
>             msg <- sprintf(ngettext(sum(ind),
>                             "Found the following directory with the name of a version control directory:\n%s\nThese should not be in a package tarball.\n",
>                             "Found the following directories with names of version control directories:\n%s\nThese should not be in a package tarball.\n", domain = "R-tools"), .format_lines_with_indent(all_dirs[ind]))
>                 printLog0(Log, msg)
1511,1513c1434
<                 wrapLog("Please remove or rename the files.\n",
<                         "See section 'Package subdirectories'",
<                         "in the 'Writing R Extensions' manual.\n")
---
>                 wrapLog(gettext("Please remove or rename the files.\nSee section 'Package subdirectories' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
1522c1443
<             printLog(Log, "Subdirectory 'data' contains no data sets.\n")
---
>             printLog(Log, gettext("Subdirectory 'data' contains no data sets.\n", domain = "R-tools"))
1531c1452
<                 printLog(Log, "Subdirectory 'demo' contains no demos.\n")
---
>                 printLog(Log, gettext("Subdirectory 'demo' contains no demos.\n", domain = "R-tools"))
1544c1465
<                     printLog(Log, "Demos with non-ASCII characters:")
---
>                     printLog(Log, gettext("Demos with non-ASCII characters:", domain = "R-tools"))
1549,1551c1470
<                     wrapLog("Portable packages must use only ASCII",
<                             "characters in their demos.\n",
<                             "Use \\uxxxx escapes for other characters.\n")
---
>                     wrapLog(gettext("Portable packages must use only ASCII characters in their demos.\nUse \\uxxxx escapes for other characters.\n", domain = "R-tools"))
1562c1481
<                     printLog(Log, "Demos which do not contain valid R code:")
---
>                     printLog(Log, gettext("Demos which do not contain valid R code:", domain = "R-tools"))
1575c1494
<             printLog(Log, "Subdirectory 'exec' contains no files.\n")
---
>             printLog(Log, gettextf("Subdirectory '%s' contains no files.\n", "exec", domain = "R-tools"))
1582c1501
<             printLog(Log, "Subdirectory 'inst' contains no files.\n")
---
>             printLog(Log, gettextf("Subdirectory '%s' contains no files.\n", "inst", domain = "R-tools"))
1596c1515
<                     printLog(Log, "Subdirectory 'src' contains no source files.\n")
---
>                     printLog(Log, gettext("Subdirectory 'src' contains no source files.\n", domain = "R-tools"))
1622,1624c1541
<                     wrapLog("Found the following non-empty",
<                             "subdirectories of 'inst' also",
<                             "used by R:\n")
---
>                     wrapLog(gettext("Found the following non-empty subdirectories of 'inst' also used by R:\n", domain = "R-tools"))
1626,1627c1543
<                     wrapLog("It is recommended not to interfere",
<                             "with package subdirectories used by R.\n")
---
>                     wrapLog(gettext("It is recommended not to interfere with package subdirectories used by R.\n", domain = "R-tools"))
1656c1572
<                 printLog(Log, "Problems with news in 'inst/NEWS.Rd':\n")
---
>                 printLog(Log, gettext("Problems with news in 'inst/NEWS.Rd':\n", domain = "R-tools"))
1677,1678c1593
<                 printLog(Log,
<                          "Invalid citation information in 'inst/CITATION':\n")
---
>                 printLog(Log, gettext("Invalid citation information in 'inst/CITATION':\n", domain = "R-tools"))
1696,1701c1611,1614
<             msg <- ngettext(length(files),
<                             "Found the following CITATION file in a non-standard place:\n",
<                             "Found the following CITATION files in a non-standard place:\n", domain = NA)
<             wrapLog(msg)
<             printLog0(Log, .format_lines_with_indent(files), "\n")
<             wrapLog("Most likely 'inst/CITATION' should be used instead.\n")
---
>             msg <- sprintf(ngettext(length(files),
>                             "Found the following CITATION file in a non-standard place:\n%s\nMost likely 'inst/CITATION' should be used instead.\n",
>                             "Found the following CITATION files in a non-standard place:\n%s\nMost likely 'inst/CITATION' should be used instead.\n", domain = "R-tools"), .format_lines_with_indent(files))
>             printLog0(Log, msg)
1709,1711c1622,1623
<         checkingLog(Log, "R files for non-ASCII characters")
<         out <- R_runR0("tools:::.check_package_ASCII_code('.')",
<                        R_opts2, "R_DEFAULT_PACKAGES=NULL")
---
>         checkingLog(Log, gettext("checking R files for non-ASCII characters ...", domain = "R-tools"))
>         out <- R_runR0("tools:::.check_package_ASCII_code('.')", R_opts2, "R_DEFAULT_PACKAGES=NULL")
1717c1629
<                             domain = NA)
---
>                             domain = "R-tools")
1720,1724c1632,1633
<             wrapLog("Portable packages must use only ASCII",
<                     "characters in their R code,\n",
<                     "except perhaps in comments.\n",
<                     "Use \\uxxxx escapes for other characters.\n")
<         } else resultLog(Log, "OK")
---
>             wrapLog(gettext("Portable packages must use only ASCII characters in their R code,\nexcept perhaps in comments.\nUse \\uxxxx escapes for other characters.\n", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
1726c1635
<         checkingLog(Log, "R files for syntax errors")
---
>         checkingLog(Log, gettext("checking R files for syntax errors ...", domain = "R-tools"))
1736c1645
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
1741c1650
<         checkingLog(Log, "dependencies in R code")
---
>         checkingLog(Log, gettext("checking dependencies in R code ...", domain = "R-tools"))
1752c1661
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
1765c1674
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
1770c1679
<         checkingLog(Log, "S3 generic/method consistency")
---
>         checkingLog(Log, gettext("checking S3 generic/method consistency ...", domain = "R-tools"))
1792,1793c1701
<                 wrapLog("See section 'Generic functions and methods'",
<                         "in the 'Writing R Extensions' manual.\n")
---
>             wrapLog(gettext("See section 'Generic functions and methods' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
1800,1801c1708
<                 wrapLog("See section 'Registering S3 methods'",
<                         "in the 'Writing R Extensions' manual.\n")
---
>                 wrapLog(gettext("See section 'Registering S3 methods' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
1803c1710
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
1807c1714
<         checkingLog(Log, "replacement functions")
---
>         checkingLog(Log, gettext("checking replacement functions ...", domain = "R-tools"))
1822,1825c1729,1730
<             wrapLog("The argument of a replacement function",
<                     "which corresponds to the right hand side",
<                     "must be named 'value'.\n")
<         } else resultLog(Log, "OK")
---
>             wrapLog(gettext("The argument of a replacement function which corresponds to the right hand side must be named 'value'.\n", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
1834c1739
<             checkingLog(Log, "foreign function calls")
---
>             checkingLog(Log, gettext("checking foreign function calls ...", domain = "R-tools"))
1858,1865c1763,1765
<                     wrapLog("Packages should not make",
<                             ".C/.Call/.External/.Fortran",
<                             "calls to a base package.",
<                             "They are not part of the API,",
<                             "for use only by R itself",
<                             "and subject to change without notice.")
<                 else if(any(grepl("with DUP:", out)))
<                     wrapLog("DUP is no longer supported and will be ignored.")
---
>                     wrapLog(gettext("Packages should not make .C/.Call/.External/.Fortran calls to a base package. They are not part of the API, for use only by R itself and subject to change without notice.", domain = "R-tools"))
>                 else if(any(grepl("with 'DUP':", out)))
>                     wrapLog(gettext("'DUP' option is no longer supported and will be ignored.", domain = "R-tools"))
1867,1868c1767,1768
<                     wrapLog("See chapter 'System and foreign language interfaces' in the 'Writing R Extensions' manual.\n")
<             } else resultLog(Log, "OK")
---
>                     wrapLog(gettext("See chapter 'System and foreign language interfaces' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
1874c1774
<         checkingLog(Log, "R code for possible problems")
---
>         checkingLog(Log, gettext("checking R code for possible problems ...", domain = "R-tools"))
1883,1884c1783
<                 wrapLog("Incorrect (un)loading of package",
<                         "shared object.\n")
---
>                 wrapLog(gettext("Incorrect (un)loading of package shared object.\n", domain = "R-tools"))
1886,1888c1785
<                 wrapLog("The system-specific extension for",
<                         "shared objects must not be added.\n",
<                         "See ?library.dynam.\n")
---
>                 wrapLog(gettext("The system-specific extension for shared objects must not be added.\nSee ?library.dynam.\n", domain = "R-tools"))
1930c1827
<                                                   "importFrom(\"methods\""))) {
---
>                                                   "importFrom(\"methods\""))) { #LUKI
1934,1936c1831,1832
<                                   c("Consider adding",
<                                     paste0("  ", miss),
<                                     msg3))
---
>                                   c(if(length(grep("^importFrom\\(\"methods\"", miss))) gettextf("Consider adding %s to your NAMESPACE file (and ensure that your DESCRIPTION Imports field contains 'methods').", paste0("  ", miss), domain = "R-tools")
> 				    else gettextf("Consider adding %s to your NAMESPACE file.", paste0("  ", miss), domain = "R-tools")))
2001,2004c1897
<                 wrapLog(c("Packages should not call .Internal():",
<                           "it is not part of the API,",
<                           "for use only by R itself",
<                           "and subject to change without notice."))
---
>                 wrapLog(gettext("Packages should not call .Internal(): it is not part of the API, for use only by R itself and subject to change without notice.", domain = "R-tools"))
2014,2016c1907
<                 ini <- c("",
<                          "In addition to the above warning(s), found the following notes:",
<                          "")
---
>                 ini <- gettext("\nIn addition to the above warning(s), found the following notes:\n", domain = "R-tools")
2025c1916
<                                   "Found the following possibly unsafe calls:",
---
>                                   gettext("Found the following possibly unsafe calls:", domain = "R-tools"),
2041,2042c1932
<                 wrapLog(gettextf("See section %s in '%s'.",
<                                  sQuote("Good practice"), "?attach"))
---
>                 wrapLog(gettextf("See section %s in '%s'.", sQuote("Good practice"), "?attach", domain = "R-tools"))
2047,2048c1937
<                 wrapLog(gettextf("See section %s in '%s'.",
<                                  sQuote("Good practice"), "?data"))
---
>                 wrapLog(gettextf("See section %s in '%s'.", sQuote("Good practice"), "?data", domain = "R-tools"))
2050c1939
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
2056c1945
<             c("See chapter 'Writing R documentation files' in the 'Writing R Extensions' manual.\n")
---
>             gettext("See chapter 'Writing R documentation files' in the 'Writing R Extensions' manual.\n", domain = "R-tools")
2059c1948
<             checkingLog(Log, "Rd files")
---
>             checkingLog(Log, gettext("checking Rd files ...", domain = "R-tools"))
2066,2067c1955
<                 if(length(grep("^prepare.*Dropping empty section", out,
<                                invert = TRUE)))
---
>                 if(length(grep("^prepare.*Dropping empty section", out, invert = TRUE)))
2071c1959
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2073c1961
<             checkingLog(Log, "Rd metadata")
---
>             checkingLog(Log, gettext("checking Rd metadata ...", domain = "R-tools"))
2083c1971
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2088c1976
<             checkingLog(Log, "Rd line widths")
---
>             checkingLog(Log, gettext("checking Rd line widths ...", domain = "R-tools"))
2101c1989
<                 wrapLog("These lines will be truncated in the PDF manual.\n")
---
>                 wrapLog(gettext("These lines will be truncated in the PDF manual.\n", domain = "R-tools"))
2122c2010
<             checkingLog(Log, "Rd cross-references")
---
>             checkingLog(Log, gettext("checking Rd cross-references ...", domain = "R-tools"))
2134c2022
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2139c2027
<             checkingLog(Log, "for missing documentation entries")
---
>             checkingLog(Log, gettext("checking for missing documentation entries ...", domain = "R-tools"))
2169,2173c2057,2060
<                 wrapLog("All user-level objects",
<                         "in a package",
<                         if (any(startsWith(out, "Undocumented S4")))
<                         "(including S4 classes and methods)",
<                         "should have documentation entries.\n")
---
>                 if (any(grepl("^Undocumented S4", out)))
>                  wrapLog(gettext("All user-level objects in a package (including S4 classes and methods) should have documentation entries.\n", domain = "R-tools"))
> 		        else
>                  wrapLog(gettext("All user-level objects in a package should have documentation entries.\n", domain = "R-tools"))
2180c2067
<             checkingLog(Log, "for code/documentation mismatches")
---
>             checkingLog(Log, gettext("checking for code/documentation mismatches ...", domain = "R-tools"))
2223c2110
<                 if (!any) resultLog(Log, "OK")
---
>                 if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
2231c2118
<             checkingLog(Log, "Rd \\usage sections")
---
>             checkingLog(Log, gettext("checking Rd \\usage sections ...", domain = "R-tools"))
2234,2238c2121
<                 c("Functions with \\usage entries",
<                   "need to have the appropriate \\alias entries,",
<                   "and all their arguments documented.\n",
<                   "The \\usage entries must correspond to syntactically",
<                   "valid R code.\n")
---
>                 gettext("Functions with \\usage entries need to have the appropriate \\alias entries, and all their arguments documented.\nThe \\usage entries must correspond to syntactically valid R code.\n", domain = "R-tools")
2256,2257c2139
<                     c("The \\usage entries for S3 methods should use",
<                       "the \\method markup and not their full name.\n")
---
>                     gettext("The \\usage entries for S3 methods should use the \\method markup and not their full name.\n", domain = "R-tools")
2274c2156
<             if (!any) resultLog(Log, "OK")
---
>             if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
2279c2161
<             checkingLog(Log, "Rd contents")
---
>             checkingLog(Log, gettext("checking Rd contents ...", domain = "R-tools"))
2289c2171
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2294c2176
<             checkingLog(Log, "for unstated dependencies in examples")
---
>             checkingLog(Log, gettext("checking for unstated dependencies in examples ...", domain = "R-tools"))
2303c2185
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2312c2194
<             checkingLog(Log, "contents of 'data' directory")
---
>             checkingLog(Log, gettext("checking contents of 'data' directory ...", domain = "R-tools"))
2322c2204
<                         c(sprintf("Files not of a type allowed in a %s directory:\n",
---
>                         c(gettextf("Files not of a type allowed in a %s directory:\n",
2325c2207
<                           sprintf("Please use e.g. %s for non-R data files\n",
---
>                           gettextf("Please use e.g. %s for non-R data files\n",
2333c2215
<                     msgs <- c(msgs, sprintf("%s is a directory\n",
---
>                     msgs <- c(msgs, gettextf("%s is a directory\n",
2346c2228
<                                   sprintf("File %s contains malformed line(s):\n",
---
>                                   gettextf("File %s contains malformed line(s):\n",
2359,2360c2241,2242
<                          c(sprintf("Object named %s found in datasets:\n",
<                                   sQuote(".Random.seed")),
---
>                          c(gettextf("Object named %s found in datasets:\n",
>                                   sQuote(".Random.seed"), domain = "R-tools"),
2386c2268
<                                      sprintf('Output for data("%s", package = "%s"):\n', f, pkgname),
---
>                                      gettextf('Output for data("%s", package = "%s"):\n', f, pkgname, domain = "R-tools"),
2405c2287
<                                       c("File 'data/datalist' is out-of-date:\n",
---
>                                       c(gettext("File 'data/datalist' is out-of-date:\n", domain = "R-tools"),
2407c2289
<                                         "Please re-create using tools::add_datalist(force = TRUE).\n"))
---
>                                         gettext("Please re-create using tools::add_datalist(force = TRUE).\n", domain = "R-tools")))
2415c2297
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2420c2302
<             checkingLog(Log, "data for non-ASCII characters")
---
>             checkingLog(Log, gettext("checking data for non-ASCII characters ...", domain = "R-tools"))
2433,2434c2315,2316
<                                "  The dataset(s) may use package(s) not declared in the DESCRIPTION file.\n")
<             } else resultLog(Log, "OK")
---
>                                gettext("  The dataset(s) may use package(s) not declared in the DESCRIPTION file.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2439c2321
<             checkingLog(Log, "data for ASCII and uncompressed saves")
---
>             checkingLog(Log, gettext("checking data for ASCII and uncompressed saves ...", domain = "R-tools"))
2446c2328
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2452c2334
<             checkingLog(Log, "R/sysdata.rda")
---
>             checkingLog(Log, gettext("checking R/sysdata.rda ...", domain = "R-tools"))
2459c2341
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2468c2350
<         checkingLog(Log, "installed files from 'inst/doc'")
---
>         checkingLog(Log, gettext("checking installed files from 'inst/doc' ...", domain = "R-tools"))
2477,2480c2359
<             printLog0(Log,
<                       "The following files are already in R: ",
<                       paste(sQuote(bad), collapse = ", "), "\n",
<                       "Please remove them from your package.\n")
---
>             printLog(Log, gettextf("The following files are already in R: %s\nPlease remove them from your package.\n", paste(sQuote(bad), collapse = ", "), domain = "R-tools"))
2496,2500c2375
<             printLog0(Log,
<                       "The following files contain a license that requires\n",
<                       "distribution of original sources:\n",
<                       "  ", paste(sQuote(bad), collapse = ", "), "\n",
<                       "Please ensure that you have complied with it.\n")
---
>             printLog(Log, gettextf("The following files contain a license that requires\ndistribution of original sources:\n  %s\nPlease ensure that you have complied with it.\n", paste(sQuote(bad), collapse = ", "), domain = "R-tools")) 
2509,2513c2384,2385
<             printLog0(Log,
<                       "The following files look like leftovers/mistakes:\n",
<                       paste(strwrap(paste(sQuote(files[bad]), collapse = ", "),
<                                     indent = 2, exdent = 2), collapse = "\n"),
<                       "\nPlease remove them from your package.\n")
---
>             printLog(Log, gettextf("The following files look like leftovers/mistakes:\n%s\nPlease remove them from your package.\n",
>                      paste(strwrap(paste(sQuote(files[bad]), collapse = ", "), indent = 2, exdent = 2), collapse = "\n"), domain = "R-tools"))
2539,2543c2411,2412
<                 printLog0(Log,
<                           "The following files should probably not be installed:\n",
<                           paste(strwrap(paste(sQuote(badf), collapse = ", "),
<                                         indent = 2, exdent = 2), collapse = "\n"),
<                           "\n")
---
>                 printLog(Log, gettextf("The following files should probably not be installed:\n%s\n", 
>                          paste(strwrap(paste(sQuote(badf), collapse = ", "), indent = 2, exdent = 2), collapse = "\n"), domain = "R-tools"))
2545,2553c2414,2417
<                 printLog0(Log,
<                           "The following directories should probably not be installed:\n",
<                           paste(strwrap(paste(sQuote(badd), collapse = ", "),
<                                         indent = 2, exdent = 2), collapse = "\n"),
<                           "\n")
<             printLog0(Log, "\nConsider the use of a .Rinstignore file: see ",
<                       sQuote("Writing R Extensions"), ",\n",
<                       "or move the vignette sources from ",
<                       sQuote("inst/doc"), " to ", sQuote("vignettes"), ".\n")
---
>                 printLog(Log, gettextf("The following directories should probably not be installed:\n%s\n",
>                          paste(strwrap(paste(sQuote(badd), collapse = ", "), indent = 2, exdent = 2), collapse = "\n"), domain = "R-tools"))
>             printLog(Log, gettextf("\nConsider the use of a .Rinstignore file: see %s,\nor move the vignette sources from %s to %s.\n",
>                      sQuote("Writing R Extensions"), sQuote("inst/doc"), sQuote("vignettes"), domain = "R-tools"))
2560c2424
<         checkingLog(Log, "files in 'vignettes'")
---
>         checkingLog(Log, gettext("checking files in 'vignettes' ...", domain = "R-tools"))
2562c2426
<             resultLog(Log, "SKIPPED")
---
>             resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
2575,2577c2439,2440
<             msg <- c("Vignette sources in 'inst/doc' missing from the 'vignettes' directory:",
<                     strwrap(paste(sQuote(sources), collapse = ", "),
<                             indent = 2L, exdent = 4L),
---
>             msg <- c(gettext("Vignette sources in 'inst/doc' missing from the 'vignettes' directory:", domain = "R-tools"),
>                     strwrap(paste(sQuote(sources), collapse = ", "), indent = 2L, exdent = 4L),
2579c2442
<             printLog0(Log, paste(msg, collapse = "\n"))
---
>             printLog(Log, paste(msg, collapse = "\n"))
2590c2453
<                 msg <- c("Files in the 'vignettes' directory but no files in 'inst/doc':",
---
>                 msg <- c(gettext("Files in the 'vignettes' directory but no files in 'inst/doc':", domain = "R-tools"),
2604c2467
<                     msg <- c("Files in the 'vignettes' directory newer than all files in 'inst/doc':",
---
>                     msg <- c(gettext("Files in the 'vignettes' directory newer than all files in 'inst/doc':", domain = "R-tools"),
2621c2484,2485
<                     msg <- c("Files in the 'vignettes' directory newer than same file in 'inst/doc':",
---
>                     msg <- c(gettext("Files in the 'vignettes' directory newer than some files in 'inst/doc':", domain = "R-tools"),
> 
2639c2503
<                       "Package has no Sweave vignette sources and no VignetteBuilder field.\n")
---
>                       gettext("Package has no Sweave vignette sources and no VignetteBuilder field.\n"), domain = "R-tools")
2654,2657c2518,2519
<             printLog0(Log,
<                       "The following files are already in R: ",
<                       paste(sQuote(bad), collapse = ", "), "\n",
<                       "Please remove them from your package.\n")
---
>             printLog(Log,
>                      gettextf("The following files are already in R: %s\nPlease remove them from your package.", paste(sQuote(bad), collapse = ", "), domain = "R-tools"), "\n")
2672,2676c2534,2535
<             printLog0(Log,
<                       "The following files contain a license that requires\n",
<                       "distribution of original sources:\n",
<                       "  ", paste(sQuote(bad), collapse = ", "), "\n",
<                       "Please ensure that you have complied with it.\n")
---
>             printLog(Log,
>                      gettextf("The following files contain a license that requires distribution of original sources:\n  %s\nPlease ensure that you have complied with it.", paste(sQuote(bad), collapse = ", "), domain = "R-tools"), "\n")
2686,2690c2545,2547
<             printLog0(Log,
<                       "The following files look like leftovers/mistakes:\n",
<                       paste(strwrap(paste(sQuote(files[bad]), collapse = ", "),
<                                     indent = 2, exdent = 2), collapse = "\n"),
<                       "\nPlease remove them from your package.\n")
---
>             printLog(Log,
>                      gettextf("The following files look like leftovers/mistakes:\n%s\nPlease remove them from your package.",
>                      paste(strwrap(paste(sQuote(files[bad]), collapse = ", "), indent = 2, exdent = 2), collapse = "\n"), domain = "R-tools"), "\n")
2700,2701c2557
<                       if(length(dirs)> 1L) "The following directories look like leftovers from 'knitr':\n"
<                       else "The following directory looks like a leftover from 'knitr':\n",
---
>                       sprintf(ngettext(length(dirs), "The following directory looks like a leftover from 'knitr':\n%s\nPlease remove from your package.\n", "The following directories look like leftovers from 'knitr':\n%s\nPlease remove from your package.\n", domain = "R-tools"),
2703,2704c2559,2560
<                                     indent = 2, exdent = 2), collapse = "\n"),
<                       "\nPlease remove from your package.\n")
---
>                                     indent = 2, exdent = 2), collapse = "\n")),
>                       "")
2707c2563
<         if (!any) resultLog(Log, "OK")
---
>         if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
2717c2573
<             checkingLog(Log, "sizes of PDF files under 'inst/doc'")
---
>             checkingLog(Log, gettext("checking sizes of PDF files under 'inst/doc' ...", domain = "R-tools"))
2727,2731c2583,2584
<                 printLog(Log,
<                          "  'qpdf' made some significant size reductions:\n",
<                          paste("  ", res, collapse = "\n"),
<                          "\n",
<                          "  consider running tools::compactPDF() on these files\n")
---
>                 printLog(Log, gettextf("  'qpdf' made some significant size reductions:\n%s\n  consider running tools::compactPDF() on these files\n",
>                          paste("  ", res, collapse = "\n"), domain = "R-tools"))
2741,2745c2594
<                         printLog(Log,
<                                  "  'gs+qpdf' made some significant size reductions:\n",
<                                  paste("  ", res, collapse = "\n"),
<                                  "\n",
<                                  '  consider running tools::compactPDF(gs_quality = "ebook") on these files\n')
---
>                         printLog(Log, gettextf("  'gs+qpdf' made some significant size reductions:\n%s\n  consider running tools::compactPDF(gs_quality = \"ebook\") on these files\n", paste("  ", res, collapse = "\n"), domain = "R-tools"))
2750c2599
<                     printLog(Log, "Unable to find GhostScript executable to run checks on size reduction\n")
---
>                     printLog(Log, gettext("Unable to find GhostScript executable to run checks on size reduction\n", domain = "R-tools"))
2754c2603
<             if (!any) resultLog(Log, "OK")
---
>             if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
2767c2616
<             checkingLog(Log, "line endings in shell scripts")
---
>             checkingLog(Log, gettext("Checking line endings in shell scripts ...", domain = "R-tools"))
2775c2624
<                 warningLog(Log, "Found the following shell script(s) with CR or CRLF line endings:")
---
>                 warningLog(Log, gettext("Found the following shell script(s) with CR or CRLF line endings:", domain = "R-tools"))
2777,2778c2626,2627
<                 printLog(Log, "Non-Windows OSes require LF line endings.\n")
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, gettext("Non-Windows OSes require LF line endings.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2789c2638
<             checkingLog(Log, "line endings in C/C++/Fortran sources/headers")
---
>             checkingLog(Log, gettext("checking line endings in C/C++/Fortran sources/headers ...", domain = "R-tools"))
2810c2659
<                 printLog(Log, "Found the following sources/headers with CR or CRLF line endings:\n")
---
>                 printLog(Log, gettext("Found the following sources/headers with CR or CRLF line endings:\n", domain = "R-tools"))
2812c2661
<                 printLog(Log, "Some Unix compilers require LF line endings.\n")
---
>                 printLog(Log, gettext("Some Unix compilers require LF line endings.\n", domain = "R-tools"))
2814c2663
<                 printLog(Log, "Found the following sources/headers not terminated with a newline:\n")
---
>                 printLog(Log, gettext("Found the following sources/headers not terminated with a newline:\n", domain = "R-tools"))
2816c2665
<                 printLog(Log, "Some compilers warn on such files.\n")
---
>                 printLog(Log, gettext("Some compilers warn on such files.\n", domain = "R-tools"))
2832c2681
<             checkingLog(Log, "line endings in Makefiles")
---
>             checkingLog(Log, gettext("checking line endings in Makefiles ...", domain = "R-tools"))
2843,2845c2692,2694
<                 warningLog(Log, "Found the following Makefile(s) with CR or CRLF line endings:")
<                 printLog0(Log, .format_lines_with_indent(bad_files), "\n")
<                 printLog(Log, "Some Unix 'make' programs require LF line endings.\n")
---
>                 warningLog(Log, gettext("Found the following Makefiles with CR or CRLF line endings:", domain = "R-tools"))
>                 printLog(Log, .format_lines_with_indent(bad_files), "\n")
>                 printLog(Log, gettext("Some Unix 'make' programs require LF line endings.\n", domain = "R-tools"))
2847c2696
<                 noteLog(Log, "Found the following Makefile(s) without a final LF:")
---
>                 noteLog(Log, gettext("Found the following Makefile(s) without a final LF:", domain = "R-tools"))
2849,2850c2698,2699
<                 printLog(Log, "Some 'make' programs ignore lines not ending in LF.\n")
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, gettext("Some 'make' programs ignore lines not ending in LF.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2854c2703
<             checkingLog(Log, "compilation flags in Makevars")
---
>             checkingLog(Log, gettext("checking compilation flags in Makevars ...", domain = "R-tools"))
2862,2863c2711,2712
<                 printLog0(Log, paste(c(out, ""), collapse = "\n"))
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, paste(c(out, ""), collapse = "\n"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2867c2716
<             checkingLog(Log, "for GNU extensions in Makefiles")
---
>             checkingLog(Log, gettext("checking for GNU extensions in Makefiles ...", domain = "R-tools"))
2882,2883c2731,2732
<                         noteLog(Log, "GNU make is a SystemRequirements.")
<                     } else resultLog(Log, "OK")
---
>                         noteLog(Log, gettext("GNU make is a SystemRequirements.", domain = "R-tools"))
>                     } else resultLog(Log, gettext("OK", domain = "R-tools"))
2885c2734
<                     warningLog(Log, "Found the following file(s) containing GNU extensions:")
---
>                     warningLog(Log, ngettext(length(bad_files), "Found the following file containing GNU extensions:", "Found the following files containing GNU extensions:", domain = "R-tools"))
2887,2891c2736
<                     wrapLog("Portable Makefiles do not use GNU extensions",
<                             "such as +=, :=, $(shell), $(wildcard),",
<                             "ifeq ... endif, .NOTPARALLEL",
<                             "See section 'Writing portable packages'",
<                             "in the 'Writing R Extensions' manual.\n")
---
>                     wrapLog(gettext("Portable Makefiles do not use GNU extensions such as +=, :=, $(shell), $(wildcard), ifeq ... endif, .NOTPARALLEL. See section 'Writing portable packages' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
2893c2738
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
2903c2748
<             checkingLog(Log, "for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS)")
---
>             checkingLog(Log, gettext("checking for portable use of $(BLAS_LIBS) and $(LAPACK_LIBS) ...", domain = "R-tools"))
2930,2932c2775
<                     printLog(Log,
<                              "  apparently using $(LAPACK_LIBS) without following $(BLAS_LIBS) in ",
<                              sQuote(f), "\n")
---
>                     printLog(Log, gettextf("  apparently using $(LAPACK_LIBS) without following $(BLAS_LIBS) in %s\n", sQuote(f), domain = "R-tools"))
2937,2939c2780
<                     printLog(Log,
<                              "  apparently using $(BLAS_LIBS) without following $(FLIBS) in ",
<                              sQuote(f), "\n")
---
>                     printLog(Log, gettextf("  apparently using $(BLAS_LIBS) without following $(FLIBS) in %s\n", sQuote(f), domain = "R-tools"))
2942c2783
<             if (!any) resultLog(Log, "OK")
---
>             if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
2951c2792
<             checkingLog(Log, "use of PKG_*FLAGS in Makefiles")
---
>             checkingLog(Log, gettext("checking use of PKG_*FLAGS in Makefiles ...", domain = "R-tools"))
2968,2969c2809
<                                      paste("  ", this2, "set in", sQuote(m),
<                                            "without any corresponding files\n"))
---
>                                      paste("  ", gettextf("%s set in %s without any corresponding files\n",this2, sQuote(m), domain = "R-tools")))
2983c2823
<             checkingLog(Log, "use of SHLIB_OPENMP_*FLAGS in Makefiles")
---
>             checkingLog(Log, gettext("checking use of SHLIB_OPENMP_*FLAGS in Makefiles ...", domain = "R-tools"))
3067c2907
<                                      sprintf("SHLIB_OPENMP_%sFLAGS is included in PKG_FCFLAGS but not SHLIB_OPENMP_%s in PKG_LIBS\n", f_or_fc, c_or_cxx)
---
>                                      gettextf("SHLIB_OPENMP_%sFLAGS is included in PKG_FCFLAGS but not SHLIB_OPENMP_%s in PKG_LIBS\n", f_or_fc, c_or_cxx, domain = "R-tools")
3069,3070c2909,2910
<                                     sprintf("SHLIB_OPENMP_%s is included in PKG_%s but not in PKG_LIBS\n",
<                                             this, this)
---
>                                     gettextf("SHLIB_OPENMP_%s is included in PKG_%s but not in PKG_LIBS\n",
>                                             this, this, domain = "R-tools")
3073,3074c2913,2914
<                                 sprintf("SHLIB_OPENMP_%s is included in PKG_%s but no OPENMP macro in PKG_LIBS\n",
<                                            this, this)
---
>                                 gettextf("SHLIB_OPENMP_%s is included in PKG_%s but no OPENMP macro in PKG_LIBS\n",
>                                            this, this, domain = "R-tools")
3089,3090c2929,2930
<                                      sprintf("incorrect macro SHLIB_OPENMP_%s included in PKG_%s\n",
<                                              found, this))
---
>                                      gettextf("incorrect macro SHLIB_OPENMP_%s included in PKG_%s\n",
>                                              found, this, domain = "R-tools"))
3106c2946
<                                  sprintf("SHLIB_OPENMP_%s is included in PKG_LIBS but linking is by %s\n",
---
>                                  gettextf("SHLIB_OPENMP_%s is included in PKG_LIBS but linking is by %s\n",
3108c2948
<                                          if(have_cxx) "C++" else "C"))
---
>                                          if(have_cxx) "C++" else "C", domain = "R-tools"))
3116c2956
<                                  sprintf("SHLIB_OPENMP_%s is included in PKG_LIBS but linking is by %s\n",
---
>                                  gettextf("SHLIB_OPENMP_%s is included in PKG_LIBS but linking is by %s\n",
3118c2958
<                                          if(have_cxx) "C++" else "C"))
---
>                                          if(have_cxx) "C++" else "C", domain = "R-tools"))
3129,3130c2969,2970
<                                  sprintf("SHLIB_OPENMP_%s is included in PKG_LIBS but not in PKG_%s\n",
<                                          this, this))
---
>                                  gettextf("SHLIB_OPENMP_%s is included in PKG_LIBS but not in PKG_%s\n",
>                                          this, this, domain = "R-tools"))
3138,3140c2978
<                              "it is not portable to include multiple",
<                              " SHLIB_OPENMP_*' macros in PKG_LIBS",
<                              "\n")
---
>                              gettext("it is not portable to include multiple SHLIB_OPENMP_*' macros in PKG_LIBS\n", domain = "R-tools"))
3151,3153c2989
<                              "it is not portable to include",
<                              " SHLIB_OPENMP_*' macros in PKG_CPPFLAGS",
<                              "\n")
---
>                              gettext("it is not portable to include SHLIB_OPENMP_*' macros in PKG_CPPFLAGS\n", domain = "R-tools"))
3158,3163c2994
<                 wrapLog("Use of these macros is discussed in sect 1.2.1.1 of",
<                         paste0(sQuote("Writing R Extensions"), "."),
<                         "The macros for different languages may differ",
<                         "so the matching macro must be used in",
<                         "PKG_CXXFLAGS (etc) and match that used in",
<                         "PKG_LIBS (except for Fortran: see the manual).\n")
---
>                 wrapLog(gettextf("Use of these macros is discussed in sect 1.2.1.1 of %s. The macros for different languages may differ so the matching macro must be used in PKG_CXXFLAGS (etc) and match that used in PKG_LIBS (except for Fortran: see the manual).\n", sQuote("Writing R Extensions"), domain = "R-tools"))
3165,3167c2996
<                     wrapLog("PKG_CPPFLAGS is used for both C and C++ code",
<                             "so it is not portable to use it",
<                             "for these macros.\n")
---
>                     wrapLog(gettext("PKG_CPPFLAGS is used for both C and C++ code so it is not portable to use it for these macros.\n", domain = "R-tools"))
3169,3172c2998
<                     wrapLog("Using a SHLIB_OPENMP_ macro for compilation",
<                             "but none in PKG_LIBS",
<                             "is not portable and may result in",
<                             "installation errors.\n")
---
>                     wrapLog(gettext("Using a SHLIB_OPENMP_ macro for compilation but none in PKG_LIBS is not portable and may result in installation errors.\n", domain = "R-tools"))
3184c3010
<             checkingLog(Log, "include directives in Makefiles")
---
>             checkingLog(Log, gettext("checking for include directives in Makefiles ...", domain = "R-tools"))
3194c3020
<                         "Found the following Makefile(s) with an include directive with a pathname using R_HOME:")
---
>                         gettext("Found the following Makefile(s) with an include directive with a pathname using R_HOME:", domain = "R-tools"))
3198,3207c3024
<                     c("Even though not recommended, variable R_HOME may contain spaces.",
<                       "Makefile directives use space as a separator and there is no portable",
<                       "way to quote/escape the space in Make rules and directives.  However,",
<                       "one can and should quote pathnames when passed from Makefile to the",
<                       "shell, and this can be done specifically when invoking Make recursively.",
<                       "It is therefore recommended to use the Make '-f' option to include files",
<                       "in directories specified using R_HOME.  This option can be specified",
<                       "multiple times to include multiple Makefiles.  Note that 'Makeconf' is",
<                       "included automatically into top-level makefile of a package.",
<                       "More information can be found in 'Writing R Extensions'.")
---
>                     gettext("Even though not recommended, variable R_HOME may contain spaces.\nMakefile directives use space as a separator and there is no portable\nway to quote/escape the space in Make rules and directives.  However,\none can and should quote pathnames when passed from Makefile to the\nshell, and this can be done specifically when invoking Make recursively.\nIt is therefore recommended to use the Make '-f' option to include files\nin directories specified using R_HOME. This option can be specified\nmultiple times to include multiple Makefiles.  Note that 'Makeconf' is\nincluded automatically into top-level makefile of a package.\nMore information can be found in 'Writing R Extensions'.", domain = "R-tools")
3209c3026
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3218c3035
<             checkingLog(Log, "pragmas in C/C++ headers and code")
---
>             checkingLog(Log, gettext("checking for pragmas in C/C++ headers and code ...", domain = "R-tools"))
3229,3232c3046
<                         msg <- c(msg, if(length(warn) == 1L)
<                                           "File which contains pragma(s) suppressing important diagnostics"
<                                       else
<                                           "Files which contain pragma(s) suppressing important diagnostics",
---
>                         msg <- c(msg, ngettext(length(warn), "File which contains pragma(s) suppressing important diagnostics", "Files which contain pragma(s) suppressing important diagnostics", domain = "R-tools"),
3237,3240c3051
<                         msg <- c(msg, if(length(port) == 1L)
<                                           "File which contains non-portable pragma(s)"
<                                       else
<                                           "Files which contain non-portable pragma(s)",
---
>                             msg <- c(msg, ngettext(length(port), "File which contains non-portable pragma(s)", "Files which contain non-portable pragma(s)", domain = "R-tools"),
3244,3247c3055
<                         msg <- c(msg, if(length(rest) == 1L)
<                                           "File which contains pragma(s) suppressing diagnostics:"
<                                       else
<                                           "Files which contain pragma(s) suppressing diagnostics:",
---
>                         msg <- c(msg, ngettext(length(ans), "File which contains pragma(s) suppressing diagnostics:", "Files which contain pragma(s) suppressing diagnostics:", domain = "R-tools"),
3252,3255c3060
<                     msg <- if(length(ans) == 1L)
<                                "File which contains pragma(s) suppressing diagnostics:"
<                            else
<                                "Files which contain pragma(s) suppressing diagnostics:"
---
>                     msg <- ngettext(length(ans), "File which contains pragma(s) suppressing diagnostics:", "Files which contain pragma(s) suppressing diagnostics:", domain = "R-tools")
3259c3064
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3269c3074
<                 checkingLog(Log, "compilation flags used")
---
>                 checkingLog(Log, gettext("checking for compilation flags used ...", domain = "R-tools"))
3320c3125
<                     msg <- c("Compilation used the following non-portable flag(s):",
---
>                     msg <- c(gettext("Compilation used the following non-portable flag(s):", domain = "R-tools"),
3324c3129
<                     resultLog(Log, "OK")
---
>                     resultLog(Log, gettext("OK", domain = "R-tools"))
3330c3135
<         checkingLog(Log, "compiled code")
---
>         checkingLog(Log, gettext("checking compiled code ...", domain = "R-tools"))
3340,3341c3145,3146
<                 printLog0(Log, c(out, "\n"))
<             } else resultLog(Log, "OK")
---
>                 printLog0(Log, c(gettext(out, domain = "R-tools"), "\n"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3370,3372c3175
<                     c("Compiled code should not call entry points which",
<                       "might terminate R nor write to stdout/stderr instead of",
<                       "to the console, nor use Fortran I/O nor system RNGs.\n")
---
>                     gettext("Compiled code should not call entry points which might terminate R nor write to stdout/stderr instead of to the console, nor use Fortran I/O nor system RNGs.\n", domain = "R-tools")
3374,3379c3177
<                     c("Compiled code should not call entry points which",
<                       "might terminate R nor write to stdout/stderr instead of",
<                       "to the console, nor use Fortran I/O nor system RNGs.",
<                       "The detected symbols are linked",
<                       "into the code but might come from libraries",
<                       "and not actually be called.\n")
---
>                     gettext("Compiled code should not call entry points which might terminate R nor write to stdout/stderr instead of to the console, nor use Fortran I/O nor system RNGs. The detected symbols are linked into the code but might come from libraries and not actually be called.\n", domain = "R-tools")
3382,3383c3180
<                 msg <- c(msg,
<                          "Compiled code should not call non-API entry points in R.\n")
---
>                 msg <- c(msg, gettext("Compiled code should not call non-API entry points in R.\n", domain = "R-tools"))
3386c3183
<                          "It is good practice to register native routines and to disable symbol search.\n")
---
>                          gettext("It is good practice to register native routines and to disable symbol search.\n", domain = "R-tools"))
3388,3390c3185,3186
<                     "See 'Writing portable packages'",
<                     "in the 'Writing R Extensions' manual.\n")
<         } else resultLog(Log, "OK")
---
>                     gettext("See 'Writing portable packages' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
3395c3191
<         checkingLog(Log, "whether the package can be loaded")
---
>         checkingLog(Log, gettext("checking whether the package can be loaded ...", domain = "R-tools"))
3403,3404c3199
<             wrapLog("Loading this package had a fatal error",
<                     "status code ", st,  "\n")
---
>             wrapLog(gettextf("Loading this package had a fatal error status code %s", st, domain = "R-tools"),  "\n", sep = "")
3406,3408c3201
<                 printLog0(Log,
<                           paste(c("Loading log:", out, ""),
<                                 collapse = "\n"))
---
>                 printLog(Log, gettextf("Loading log:\n%s\n", paste(out, collapse = "\n"), domain = "R-tools"))
3414,3417c3207,3208
<             printLog0(Log, paste(c(out, ""), collapse = "\n"))
<             wrapLog("\nIt looks like this package",
<                     "has a loading problem: see the messages",
<                     "for details.\n")
---
>             printLog(Log, paste(c(out, ""), collapse = "\n"))
>             wrapLog(gettext("\nIt looks like this package has a loading problem: see the messages for details.\n", domain = "R-tools"))
3419c3210
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
3421c3212
<         checkingLog(Log, "whether the package can be loaded with stated dependencies")
---
>         checkingLog(Log, gettext("checking whether the package can be loaded with stated dependencies ...", domain = "R-tools"))
3424,3429c3215,3216
<             printLog0(Log, paste(c(out, ""), collapse = "\n"))
<             wrapLog("\nIt looks like this package",
<                     "(or one of its dependent packages)",
<                     "has an unstated dependence on a standard",
<                     "package.  All dependencies must be",
<                     "declared in DESCRIPTION.\n")
---
>             printLog(Log, paste(c(out, ""), collapse = "\n"))
>             wrapLog(gettext("\nIt looks like this package (or one of its dependent packages) has an unstated dependence on a standard package.  All dependencies must be declared in DESCRIPTION.\n", domain = "R-tools"))
3431c3218
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
3433c3220
<         checkingLog(Log, "whether the package can be unloaded cleanly")
---
>         checkingLog(Log, gettext("checking whether the package can be unloaded cleanly ...", domain = "R-tools"))
3445,3446c3232,3233
<             printLog0(Log, paste(c(out, ""), collapse = "\n"))
<         } else resultLog(Log, "OK")
---
>             printLog(Log, paste(c(out, ""), collapse = "\n"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
3451c3238
<             checkingLog(Log, "whether the namespace can be loaded with stated dependencies")
---
>             checkingLog(Log, gettext("checking whether the namespace can be loaded with stated dependencies ...", domain = "R-tools"))
3478,3486c3265,3267
<                 printLog0(Log, paste(c(out, ""), collapse = "\n"))
<                 wrapLog("\nA namespace must be able to be loaded",
<                         "with just the base namespace loaded:",
<                         "otherwise if the namespace gets loaded by a",
<                         "saved object, the session will be unable",
<                         "to start.\n\n",
<                         "Probably some imports need to be declared",
<                         "in the NAMESPACE file.\n")
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, paste(c(out, ""), collapse = "\n"))
>                 wrapLog(gettext("\nA namespace must be able to be loaded with just the base namespace loaded: otherwise if the namespace gets loaded by a saved object, the session will be unable to start.\n\nProbably some imports need to be declared in the 'NAMESPACE' file.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3488,3489c3269
<             checkingLog(Log,
<                         "whether the namespace can be unloaded cleanly")
---
>             checkingLog(Log, gettext("checking whether the namespace can be unloaded cleanly ...", domain = "R-tools"))
3503,3504c3283,3284
<                 printLog0(Log, paste(c(out, ""), collapse = "\n"))
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, paste(c(out, ""), collapse = "\n"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3509c3289
<             checkingLog(Log, "loading without being on the library search path")
---
>             checkingLog(Log, gettext("checking loading without being on the library search path ...", domain = "R-tools"))
3518,3522c3298,3300
<                 printLog0(Log, paste(c(out, ""), collapse = "\n"))
<                 wrapLog("\nIt looks like this package",
<                         "has a loading problem when not on .libPaths:",
<                         "see the messages for details.\n")
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, paste(c(out, ""), collapse = "\n"))
>                 wrapLog(gettext("\nIt looks like this package has a loading problem when not on .libPaths: see the messages for details.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3531c3309
<                 checkingLog(Log, "use of S3 registration")
---
>                 checkingLog(Log, gettext("checking use of S3 registration ...", domain = "R-tools"))
3582c3360
<                 } else resultLog(Log, "OK")
---
>                 } else resultLog(Log, gettext("OK", domain = "R-tools"))
3594,3596c3372
<                 warningLog(Log,
<                            paste("checking a package with encoding ",
<                                  sQuote(e), " in an ASCII locale\n"))
---
>                 warningLog(Log, gettextf("checking a package with encoding %s in an ASCII locale", sQuote(e), domain = "R-tools"))
3613,3615c3389
<                 errorLog(Log, "Running examples in ",
<                          sQuote(basename(exfile)),
<                          " failed")
---
>                 errorLog(Log, gettextf("Running examples in %s failed", sQuote(basename(exfile)), domain = "R-tools"))
3630,3631c3404
<                                            printLog(Log,
<                                                     "The error most likely occurred in:\n\n")
---
>                                            printLog(Log, gettext("The error most likely occurred in:\n\n", domain = "R-tools"))
3636c3409
<                                            printLog(Log, "The error occurred in:\n\n")
---
>                                            printLog(Log, gettext("The error occurred in:\n\n", domain = "R-tools"))
3656,3660c3429,3431
<                 warningLog(Log, "Found the following significant warnings:\n")
<                 printLog0(Log, .format_lines_with_indent(bad_lines), "\n")
<                 wrapLog("Deprecated functions may be defunct as",
<                         "soon as of the next release of R.\n",
<                         "See ?Deprecated.\n")
---
>                 warningLog(Log, gettext("Found the following significant warnings:\n", domain = "R-tools"))
>                 printLog(Log, .format_lines_with_indent(bad_lines), "\n")
>                 wrapLog(gettext("Deprecated functions may be defunct as soon as of the next release of R.\nSee ?Deprecated.\n", domain = "R-tools"))
3667c3438
<                                "Found the following significant warnings:")
---
>                                gettext("Found the following significant warnings:", domain = "R-tools"))
3670,3672c3441,3442
<                 printLog0(Log, .format_lines_with_indent(bad_lines), "\n")
<                 wrapLog("dev.new() is the preferred way to open a new device,",
<                         "in the unlikely event one is needed.")
---
>                 printLog(Log, .format_lines_with_indent(bad_lines), "\n")
>                 wrapLog("'dev.new()' is the preferred way to open a new device, in the unlikely event one is needed.")
3679c3449
<                                "Found the following significant warnings:")
---
>                                gettext("Found the following significant warnings:", domain = "R-tools"))
3682,3684c3452,3453
<                 printLog0(Log, .format_lines_with_indent(bad_lines), "\n")
<                 wrapLog("Note that CRAN packages must never use more than two",
<                         "cores simultaneously during their checks.")
---
>                 printLog(Log, .format_lines_with_indent(bad_lines), "\n")
>                 wrapLog(gettext("Note that CRAN packages must never use more than two cores simultaneously during their checks.", domain = "R-tools"))
3691c3460
<                                "Found the following significant warnings:")
---
>                                gettext("Found the following significant warnings:", domain = "R-tools"))
3701c3470
<                                "Found the following significant warnings:")
---
>                                gettext("Found the following significant warnings:", domain = "R-tools"))
3709c3478
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
3730,3731c3499,3500
<                              sprintf("Examples with CPU or elapsed time > %gs\n",
<                                      theta))
---
>                              gettextf("Examples with CPU or elapsed time > %gs\n",
>                                      theta, domain = "R-tools"))
3748,3749c3517,3518
<                                  sprintf("Examples with CPU time > %g times elapsed time\n",
<                                          theta))
---
>                                  gettextf("Examples with CPU time > %g times elapsed time\n",
>                                          theta, domain = "R-tools"))
3768,3770c3537
<                 checkingLog(Log, "differences from ",
<                             sQuote(basename(exout)),
<                             " to ", sQuote(basename(exsave)))
---
>                 checkingLog(Log, gettextf("checking differences from %s to %s ...", sQuote(basename(exout)), sQuote(basename(exsave)), domain = "R-tools"))
3774c3541
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
3782,3783c3549,3550
<         checkingLog(Log, "examples")
<         if (!do_examples) resultLog(Log, "SKIPPED")
---
>         checkingLog(Log, gettext("checking examples ...", domain = "R-tools"))
>         if (!do_examples) resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
3795,3801c3562,3564
<                 errorLog(Log,
<                          paste("Running massageExamples to create",
<                                sQuote(exfile), "failed"))
<                 printLog0(Log,
<                           paste(readLines(Rout, warn = FALSE),
<                                 collapse = "\n"),
<                           "\n")
---
>                 errorLog(Log, gettextf("Running massageExamples to create %s failed", sQuote(exfile), domain = "R-tools"))
>                 printLog(Log, paste(readLines(Rout, warn = FALSE),
>                                     collapse = "\n"), "\n")
3817,3818c3580
<                         printLog(Log, "** running examples for arch ",
<                                  sQuote(arch), " ...")
---
>                         printLog(Log, gettextf("** running examples for arch %s ...", sQuote(arch), domain = "R-tools"))
3820c3582
<                             resultLog(Log, "SKIPPED")
---
>                             resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
3825,3826c3587
<                                 errorLog(Log,
<                                          "unable to create examples directory")
---
>                                 errorLog(Log, gettext("unable to create examples directory", domain = "R-tools"))
3845,3846c3606
<                         printLog(Log, "** found \\donttest examples:",
<                                  " check also with --run-donttest\n")
---
>                         printLog(Log, gettext("** found \\donttest examples: check also with --run-donttest\n", domain = "R-tools"))
3849c3609
<                 resultLog(Log, "NONE")
---
>                 resultLog(Log, gettext("NONE", domain = "R-tools"))
3858c3618
<             checkingLog(Log, "for unstated dependencies in ", sQuote(test_dir))
---
>             checkingLog(Log, gettextf("checking for unstated dependencies in %s directory ...", sQuote(test_dir), domain = "R-tools"))
3865c3625
<                 printLog0(Log, paste(c(out, ""), collapse = "\n"))
---
>                 printLog(Log, paste(c(out, ""), collapse = "\n"))
3867c3627
<             } else resultLog(Log, "OK")
---
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
3871c3631
<             checkingLog(Log, "tests")
---
>             checkingLog(Log, gettext("checking tests ...", domain = "R-tools"))
3873c3633
<             checkingLog(Log, "tests in ", sQuote(test_dir))
---
>             checkingLog(Log, gettextf("checking tests in %s directory ...", sQuote(test_dir), domain = "R-tools"))
3882,3883c3642
<                 errorLog(Log,
<                          sprintf("unable to create %s", sQuote(testdir)))
---
>                 errorLog(Log, gettextf("unable to create %s", sQuote(testdir), domain = "R-tools"))
3951,3955c3710,3712
<                         printLog(Log, sprintf("Running the tests in %s failed.\n",
<                                               sQuote(f)))
<                         printLog(Log, if(keep > 0L && keep < ll)
<                                  sprintf("Last %i lines of output:\n", keep)
<                                  else "Complete output:\n")
---
>                         printLog(Log, gettextf("Running the tests in %s failed.\n", sQuote(file), domain = "R-tools"))
>                         printLog(Log, if(keep > 0L && keep < ll) sprintf(ngettext(keep, "Last %i line of output:\n", "Last %i lines of output:\n", domain = "R-tools"), keep)
>                                  else gettext("Complete output:\n", domain = "R-tools"))
3962c3719
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
3981,3982c3738
<                         printLog(Log, "** running tests for arch ",
<                                  sQuote(arch), " ...")
---
>                         printLog(Log, gettextf("** running tests for arch %s", sQuote(arch), domain = "R-tools"))
3987c3743
<         } else resultLog(Log, "SKIPPED")
---
>         } else resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
4004c3760
<             checkingLog(Log, "for unstated dependencies in vignettes")
---
>             checkingLog(Log, gettext("checking for unstated dependencies in vignettes ...", domain = "R-tools"))
4011,4012c3767,3768
<                 printLog0(Log, paste(c(out, ""), collapse = "\n"))
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, paste(c(out, ""), collapse = "\n"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
4015c3771
<         checkingLog(Log, "package vignettes in ", sQuote("inst/doc"))
---
>         checkingLog(Log, gettextf("checking package vignettes in %s ...", sQuote("inst/doc"), domain = "R-tools"))
4042,4047c3798,3800
<                                 "Package vignettes without corresponding single PDF/HTML:\n", domain = NA)
<                 printLog0(Log, msg)
<                 printLog0(Log,
<                           paste(c(paste("  ",
<                                         sQuote(basename(bad_vignettes))),
<                                   "", ""), collapse = "\n"))
---
>                                 "Package vignettes without corresponding single PDF/HTML:\n", domain = "R-tools")
>                 printLog(Log, msg)
>                 printLog(Log, paste(c(paste("  ", sQuote(basename(bad_vignettes))), "", ""), collapse = "\n"))
4057,4062c3810,3812
<                          "Non-ASCII package vignettes without specified encoding:\n", domain = NA)
<                 printLog0(Log, "  ", msg)
<                 printLog0(Log,
<                           paste(c(paste("  ",
<                                         sQuote(basename(bad_vignettes))),
<                                   "", ""), collapse = "\n"))
---
>                          "Non-ASCII package vignettes without specified encoding:\n", domain = "R-tools")
>                 printLog(Log, "  ", msg)
>                 printLog(Log, paste(c(paste("  ", sQuote(basename(bad_vignettes))), "", ""), collapse = "\n"))
4080c3830
< #                                "Unused files in 'inst/doc' which are pointless or misleading", domain = NA)
---
> #                                "Unused files in 'inst/doc' which are pointless or misleading", domain = "R-tools")
4094,4095c3844
<             printLog(Log,
<                      "  Found 'inst/doc/makefile': should be 'Makefile' and will be ignored\n")
---
>             printLog(Log, gettext("  Found 'inst/doc/makefile': should be 'Makefile' and will be ignored\n", domain = "R-tools"))
4105,4106c3854
<                 printLog(Log,
<                          "  Found 'R CMD' in Makefile: should be '\"$(R_HOME)/bin/R\" CMD'\n")
---
>                 printLog(Log, gettext("  Found 'R CMD' in Makefile: should be '\"$(R_HOME)/bin/R\" CMD'\n", domain = "R-tools"))
4112,4113c3860,3861
<                 printLog(Log, "Found Makefile with CR or CRLF line endings:\n")
<                 printLog(Log, "some Unix 'make' programs require LF line endings.\n")
---
>                 printLog(Log, gettext("Found Makefile with CR or CRLF line endings:\n", domain = "R-tools"))
>                 printLog(Log, gettext("Some Unix 'make' programs require LF line endings.\n", domain = "R-tools"))
4118,4119c3866
<                 printLog(Log,
<                          "  Found 'Rscript' in Makefile: should be '\"$(R_HOME)/bin/Rscript\"'\n")
---
>                 printLog(Log, gettext("  Found 'Rscript' in Makefile: should be '\"$(R_HOME)/bin/Rscript\"'\n", domain = "R-tools"))
4139,4144c3886,3888
<                                 "Package vignettes which are not in their specified encoding:\n", domain = NA)
<                 printLog0(Log, "  ", msg)
<                 printLog0(Log,
<                           paste(c(paste("  ",
<                                         sQuote(basename(bad_vignettes))),
<                                   "", ""), collapse = "\n"))
---
>                                 "Package vignettes which are not in their specified encoding:\n", domain = "R-tools")
>                 printLog(Log, "  ", msg)
>                 printLog(Log, paste(c(paste("  ", sQuote(basename(bad_vignettes))), "", ""), collapse = "\n"))
4160c3904
<                                 domain = NA)
---
>                                 domain = "R-tools")
4168c3912
<         if (!any) resultLog(Log, "OK")
---
>         if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
4202c3946
<                 checkingLog(Log, "running R code from vignettes")
---
>                 checkingLog(Log, gettext("checking running R code from vignettes ...", domain = "R-tools"))
4242c3986
<                         out1 <- c(out1, " failed\n")
---
>                         out1 <- c(out1, " ", gettext("failed", domain = "R-tools"), "\n", sep ="")
4247,4248c3991
<                               paste("when running code in", sQuote(basename(file))),
<                               "  ...",
---
>                               gettextf("when running code in %s ...", sQuote(basename(file)), domain = "R-tool"),
4252c3995
<                               paste("when running code in", sQuote(basename(file))),
---
>                               gettextf("when running code in %s", sQuote(basename(file)), domain = "R-tools"),
4259,4260c4002,4003
<                         out1 <- c(out1, " failed to complete the test\n")
<                         out <- c(out, "", "... incomplete output.  Crash?")
---
>                         out1 <- c(out1, " ", gettext("failed to complete the test", domain = "R-tools"), "\n")
>                         out <- c(out, "", gettext("... incomplete output.  Crash?", domain = "R-tools"))
4263,4264c4006
<                                  paste("when running code in", sQuote(basename(file))),
<                                  "  ...",
---
>                                  gettextf("when running code in %s ...", sQuote(basename(file)), domain = "R-tools"),
4268c4010
<                                  paste("when running code in", sQuote(basename(file))),
---
>                                  gettextf("when running code in %s", sQuote(basename(file)), domain = "R-tools"),
4277,4279c4019,4020
<                             out1 <- c(out1, " NOTE\n")
<                             out1 <- c(out1, paste("differences from",
<                                                   sQuote(basename(savefile))))
---
>                             out1 <- c(out1, " ", gettext("NOTE", domain = "R-tools"), "\n")
>                             out1 <- c(out1, gettextf("differences from %s", sQuote(basename(savefile)), domain = "R-tools"))
4284c4025
<                             out1 <- c(out1, " OK\n")
---
>                             out1 <- c(out1, " ", gettext("OK", domain = "R-tools"), "\n")
4290c4031
<                         out1 <- c(out1, " OK\n")
---
>                         out1 <- c(out1, " ", gettext("OK", domain = "R-tools"), "\n")
4301,4302c4042,4043
<                             cat(sprintf("Running R code from vignette %s had CPU time %g times elapsed time\n",
<                                         sQuote((basename(file))), ratio))
---
>                             cat(gettextf("Running R code from vignette %s had CPU time %g times elapsed time\n",
>                                         sQuote((basename(file))), ratio, domain = "R-tools"))
4309c4050
<                     resultLog(Log, "NONE")
---
>                     resultLog(Log, gettext("NONE", domain = "R-tools"))
4321c4062
<                             warningLog(Log, "Errors in running code in vignettes:")
---
>                             warningLog(Log, gettext("Errors in running code in vignettes:", domain = "R-tool"))
4324c4065
<                             errorLog(Log, "Errors in running code in vignettes:")
---
>                             errorLog(Log, gettext("Errors in running code in vignettes:", domain = "R-tools"))
4329c4070
<                     else resultLog(Log, "OK")
---
>                     else resultLog(Log, gettext("OK", domain = "R-tools"))
4339,4340c4080,4081
<                                      sprintf("Running R code from vignettes had CPU time %g times elapsed time\n",
<                                              ratio))
---
>                                      gettextf("Running R code from vignettes had CPU time %g times elapsed time\n",
>                                              ratio, domain = "R-tools"))
4347c4088
<                 checkingLog(Log, "re-building of vignette outputs")
---
>                 checkingLog(Log, gettext("checking re-building of vignette outputs ...", domain = "R-tools"))
4352c4093
<                     errorLog(Log, "unable to create 'vign_test'")
---
>                     errorLog(Log, gettext("unable to create 'vign_test'", domain = "R-tools"))
4405c4146
<                                   paste(c("Error(s) in re-building vignettes:",
---
>                                   paste(c(gettext("Error(s) in re-building vignettes:", domain = "R-tools"),
4409c4150
<                                   paste(c("Error(s) in re-building vignettes:",
---
>                                   paste(c(gettext("Error(s) in re-building vignettes:", domain = "R-tools"),
4416c4157
<                                     domain = NA)
---
>                                     domain = "R-tools")
4425c4166
<                     resultLog(Log, "OK")
---
>                     resultLog(Log, gettext("OK", domain = "R-tools"))
4433,4434c4174,4175
<                                  sprintf("Re-building vignettes had CPU time %g times elapsed time\n",
<                                         ratio))
---
>                                  gettextf("Re-building vignettes had CPU time %g times elapsed time\n",
>                                         ratio, domain = "R-tools"))
4438,4439c4179,4180
<                 checkingLog(Log, "re-building of vignette outputs")
<                 resultLog(Log, "SKIPPED")
---
>                 checkingLog(Log, gettext("checking re-building of vignette outputs ...", domain = "R-tools"))
>                 resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
4442,4445c4183,4186
<             checkingLog(Log, "running R code from vignettes")
<             resultLog(Log, "SKIPPED")
<             checkingLog(Log, "re-building of vignette outputs")
<             resultLog(Log, "SKIPPED")
---
>             checkingLog(Log, gettext("checking running R code from vignettes ...", domain = "R-tools"))
>             resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
>             checkingLog(Log, gettext("checking re-building of vignette outputs ...", domain = "R-tools"))
>             resultLog(Log, gettext("SKIPPED", domain = "R-tools"))
4460c4201
<             checkingLog(Log, "PDF version of manual")
---
>             checkingLog(Log, gettext("checking PDF version of manual ...", domain = "R-tools"))
4473c4214
<                 errorLog(Log, "Rd conversion errors:")
---
>                 errorLog(Log, gettext("Rd conversion errors:", domain = "R-tools"))
4484,4486c4225
<                 printLog0(Log,
<                           paste0("LaTeX errors when creating PDF version.\n",
<                                  "This typically indicates Rd problems.\n"))
---
>                 printLog(Log, gettext("LaTeX errors when creating PDF version.\nThis typically indicates Rd problems.\n", domain = "R-tools"))
4490c4229
<                     printLog(Log, "LaTeX errors found:\n")
---
>                     printLog(Log, gettext("LaTeX errors found:\n", domain = "R-tools"))
4496c4235
<                 checkingLog(Log, "PDF version of manual without hyperrefs or index")
---
>                 checkingLog(Log, gettext("checking PDF version of manual without hyperrefs or index ...", domain = "R-tools"))
4517c4256
<                         printLog(Log, "Re-running with no redirection of stdout/stderr.\n")
---
>                         printLog(Log, gettext("Re-running with no redirection of stdout/stderr.\n", domain = "R-tools"))
4531c4270
<                     resultLog(Log, "OK")
---
>                     resultLog(Log, gettext("OK", domain = "R-tools"))
4535c4274
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
4543,4544c4282
<         allfiles <- dir(".", all.files = TRUE, full.names = TRUE,
<                         recursive = TRUE)
---
>         allfiles <- dir(".", all.files = TRUE, full.names = TRUE, recursive = TRUE)
4563c4301
<             checkingLog(Log, "for executable files")
---
>             checkingLog(Log, gettext("checking for executable files ...", domain = "R-tools"))
4596c4334
<             checkingLog(Log, "for .dll and .exe files")
---
>             checkingLog(Log, gettext("checking for .dll and .exe files ...", domain = "R-tools"))
4607c4345
<                             domain = NA)
---
>                             domain = "R-tools")
4609,4613c4347,4349
<             printLog0(Log, .format_lines_with_indent(execs), "\n")
<             wrapLog("Source packages should not contain undeclared executable files.\n",
<                     "See section 'Package structure'",
<                     "in the 'Writing R Extensions' manual.\n")
<         } else resultLog(Log, "OK")
---
>             printLog(Log, .format_lines_with_indent(execs), "\n")
>             wrapLog(gettext("Source packages should not contain undeclared executable files.\nSee section 'Package structure' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
4630c4366
<         checkingLog(Log, "for hidden files and directories")
---
>         checkingLog(Log, gettext("checking for hidden files and directories ...", domain = "R-tools"))
4644,4648c4380,4382
<             noteLog(Log, "Found the following hidden files and directories:")
<             printLog0(Log, .format_lines_with_indent(dots), "\n")
<             wrapLog("These were most likely included in error.",
<                     "See section 'Package structure'",
<                     "in the 'Writing R Extensions' manual.\n")
---
>             noteLog(Log, gettext("Found the following hidden files and directories:", domain = "R-tools"))
>             printLog(Log, .format_lines_with_indent(dots), "\n")
>             wrapLog(gettext("These files and directories were most likely included in error. See section 'Package structure' in the 'Writing R Extensions' manual.\n", domain = "R-tools"))
4658c4392
<                     printLog(Log, "\nCRAN-pack knows about all of these\n")
---
>                     printLog(Log, gettext("\nCRAN-pack knows about all of these files and directories\n", domain = "R-tools"))
4660,4661c4394,4395
<                     printLog(Log, "\nCRAN-pack does not know about\n")
<                     printLog0(Log, .format_lines_with_indent(dots[!known]), "\n")
---
>                     printLog(Log, gettext("\nCRAN-pack does not know about following files and directories:\n", domain = "R-tools"))
>                     printLog(Log, .format_lines_with_indent(dots[!known]), "\n")
4664c4398
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
4683c4417
<             messageLog(Log, "skipping installation test")
---
>             messageLog(Log, gettext("skipping installation test", domain = "R-tools"))
4707c4441
<                     errorLog(Log, "Installation failed.")
---
>                     errorLog(Log, gettext("Installation failed.", domain = "R-tools"))
4715,4717c4449
<                 checkingLog(Log,
<                             "whether package ", sQuote(desc["Package"]),
<                             " can be installed")
---
>                 checkingLog(Log, gettextf("checking whether package %s can be installed ...", sQuote(desc["Package"]), domain = "R-tools"))
4721c4453
<                         printLog(Log, "\nWarning: --install=check... specified without --library\n")
---
>                         printLog(Log, gettext("\nWarning: --install=check... specified without --library\n", domain = "R-tools"))
4724,4725c4456
<                         errorLog(Log,
<                                  sprintf("install log %s does not exist", sQuote(thislog)))
---
>                         errorLog(Log, gettextf("install log %s does not exist", sQuote(thislog), domain = "R-tools"))
4741,4742c4472
<                     cat("* install options ", sQuote(INSTALL_opts),
<                         "\n\n", sep = "", file = outfile)
---
>                     cat(gettextf("* install options %s", sQuote(INSTALL_opts), domain = "R-tools"), "\n\n", sep = "", file = outfile)
4753,4755c4483,4484
<                     errorLog(Log, "Installation failed.")
<                     printLog0(Log, "See ", sQuote(outfile),
<                              " for details.\n")
---
>                     errorLog(Log, gettext("Installation failed.", domain = "R-tools"))
>                     printLog(Log, gettextf("See %s for details.\n", sQuote(outfile), domain = "R-tools"))
5056c4785
<                 load_re <- "Warning: No generic function.*corresponding to requested imported methods"
---
>                 load_re <- gettext("Warning: No generic function.*corresponding to requested imported methods", domain = "R-tools")
5062c4791
<                     "warning: control may reach end of non-void function"
---
>                     gettext("warning: control may reach end of non-void function", domain = "R-tools")
5068c4797
<                     notes <- c("Non-staged installation was used", notes)
---
>                     notes <- c(gettext("Non-staged installation was used", domain = "R-tools"), notes)
5070c4799
<                     warningLog(Log, "Found the following significant warnings:")
---
>                     warningLog(Log, gettext("Found the following significant warnings:", domain = "R-tools"))
5074c4803
<                                  "Found the following additional notes/warnings:\n")
---
>                                  gettext("Found the following additional notes/warnings:\n", domain = "R-tools"))
5078,5079c4807,4808
<                     printLog0(Log, sprintf("See %s for details.\n",
<                                            sQuote(outfile)))
---
>                     printLog0(Log, gettextf("See %s for details.\n",
>                                            sQuote(outfile), domain = "R-tools"))
5081,5086c4810
<                         wrapLog("Information on the location(s)",
<                                 "of code generating the",
<                                 paste0(sQuote("Note"), "s"),
<                                 "can be obtained by re-running with",
<                                 "environment variable R_KEEP_PKG_SOURCE",
<                                 "set to 'yes'.\n")
---
>                         wrapLog(gettext("Information on the location(s) of code generating the 'Note's can be obtained by re-running with environment variable R_KEEP_PKG_SOURCE set to 'yes'.\n", domain = "R-tools"))
5089c4813
<                     noteLog(Log, "Found the following notes/warnings:")
---
>                     noteLog(Log, gettext("Found the following notes/warnings:", domain = "R-tools"))
5091,5093c4815,4816
<                     printLog0(Log, sprintf("See %s for details.\n",
<                                            sQuote(outfile)))
<                 } else resultLog(Log, "OK")
---
>                     printLog0(Log, gettextf("See %s for details.\n", sQuote(outfile), domain = "R-tools"))
>                 } else resultLog(Log, gettext("OK", domain = "R-tools"))
5107c4830
<         checkingLog(Log, "installed package size")
---
>         checkingLog(Log, gettext("checking installed package size ...", domain = "R-tools"))
5118c4841
<             printLog(Log, sprintf("  installed size is %4.1fMb\n", total/1024))
---
>             printLog(Log, gettextf("  installed size is %4.1fMb\n", total/1024, domain = "R-tools"))
5126c4849
<                 printLog(Log, "  sub-directories of 1Mb or more:\n")
---
>                 printLog(Log, gettextf("  sub-directories of 1Mb or more:\n", domain = "R-tools"))
5132c4855
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
5138,5139c4861
<         checkingLog(Log, "for file ",
<                     sQuote(file.path(pkgname0, "DESCRIPTION")))
---
>         checkingLog(Log, gettextf("checking for file %s ...", sQuote(file.path(pkgname0, "DESCRIPTION")), domain = "R-tools"))
5148c4870
<                 errorLog(Log, "File DESCRIPTION exists but is not in correct format")
---
>                 errorLog(Log, gettext("File DESCRIPTION exists but is not in correct format", domain = "R-tools"))
5161c4883
<                                 "Required fields missing or empty:")
---
>                                 "Required fields missing or empty:", domain = "R-tools")
5170,5173c4892,4893
<                 printLog(Log,"  Package name is not portable:\n",
<                          "  It must start with a letter, contain letters, digits or dot\n",
<                          "  have at least 2 characters and not end with a dot.\n")
<             } else resultLog(Log, "OK")
---
>                 printLog(Log, gettext("  Package name is not portable:\n  It must start with a letter, contain letters, digits or dot\n  have at least 2 characters and not end with a dot.\n", domain = "R-tools"))
>             } else resultLog(Log, gettext("OK", domain = "R-tools"))
5177c4897
<                      "File DESCRIPTION does not exist but there is a case-insensitive match.")
---
>                      gettext("File DESCRIPTION does not exist but there is a case-insensitive match.", domain = "R-tools"))
5182c4902
<                      "File DESCRIPTION does not exist")
---
>                      gettext("File DESCRIPTION does not exist", domain = "R-tools"))
5187c4907
<             checkingLog(Log, "extension type")
---
>             checkingLog(Log, gettext("checking extension type ...", domain = "R-tools"))
5190,5191c4910,4911
<                          sprintf("Extensions with Type %s cannot be checked.",
<                                  sQuote(desc["Type"])))
---
>                          gettextf("Extensions with Type %s cannot be checked.",
>                                  sQuote(desc["Type"]), domain = "R-tools"))
5197c4917
<             checkingLog(Log, "package bundle")
---
>             checkingLog(Log, gettext("checking package bundle ...", domain = "R-tools"))
5199,5200c4919,4920
<                      sprintf("Looks like %s is a package bundle -- they are defunct",
<                              sQuote(pkgname0)))
---
>                      gettextf("Looks like %s is a package bundle -- they are defunct",
>                              sQuote(pkgname0), domain = "R-tools"))
5205,5208c4925
<         messageLog(Log,
<                    sprintf("this is package %s version %s",
<                            sQuote(desc["Package"]),
<                            sQuote(desc["Version"])))
---
>         messageLog(Log, gettextf("this is package %s version %s", sQuote(desc["Package"]), sQuote(desc["Version"]), domain = "R-tools"))
5211c4928
<             messageLog(Log, "package encoding: ", encoding)
---
>             messageLog(Log, gettextf("package encoding: %s", encoding, domain = "R-tools"))
5218c4935
<         checkingLog(Log, "CRAN incoming feasibility")
---
>         checkingLog(Log, gettext("checking CRAN incoming feasibility ...", domain = "R-tools"))
5245,5246c4962,4963
<             else resultLog(Log, "OK")
<             printLog0(Log, c(paste(out, collapse = "\n\n"), "\n"))
---
>             else resultLog(Log, gettext("OK", domain = "R-tools"))
>             printLog(Log, c(paste(out, collapse = "\n\n"), "\n"))
5248c4965
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
5277c4994
<             checkingLog(Log, "package namespace information")
---
>             checkingLog(Log, gettext("checking package namespace information ...", domain = "R-tools"))
5283,5284c5000
<                                    "Invalid NAMESPACE file, parsing gives:",
<                                    "\n", as.character(e), "\n")
---
>                                    gettextf("Invalid 'NAMESPACE' file, parsing gives:\n%s\n", as.character(e), domain = "R-tools"))
5286,5287c5002
<                              c("See section 'Package namespaces'",
<                                " in the 'Writing R Extensions' manual.\n")
---
>                 gettext("See section 'Package namespaces' in the 'Writing R Extensions' manual.\n", domain = "R-tools")
5302,5306c5017
<                 msg <- if(length(bad) == 1L)
<                     sprintf("  Namespace with empty importFrom: %s", sQuote(bad))
<                 else
<                     paste0("  Namespaces with empty importFrom:\n",
<                            .pretty_format(sort(bad)))
---
>                 msg <- sprintf(ngettext(length(bad), "  Namespace with empty importFrom: %s", "  Namespaces with empty importFrom: %s", domain = "R-tools"), .pretty_format(sort(bad)))
5333,5334c5044
<                     msg <- sprintf("R < 3.0.2 had a limit of 500 registered S3 methods: found %d",
<                                    nS3methods)
---
>                     msg <- gettextf("R < 3.0.2 had a limit of 500 registered S3 methods: found %d", nS3methods, domain = "R-tools")
5338c5048
<             if(OK) resultLog(Log, "OK")
---
>             if(OK) resultLog(Log, gettext("OK", domain = "R-tools"))
5341c5051
<         checkingLog(Log, "package dependencies")
---
>         checkingLog(Log, gettext("checking package dependencies ...", domain = "R-tools"))
5361c5071
<                 printLog0(Log, paste(out, collapse = "\n"), "\n")
---
>                 printLog(Log, paste(out, collapse = "\n"), "\n")
5363,5368c5073
<                    wrapLog("The suggested packages are required for",
<                            "a complete check.\n",
<                            "Checking can be attempted without them",
<                            "by setting the environment variable",
<                            "_R_CHECK_FORCE_SUGGESTS_",
<                            "to a false value.\n\n")
---
>                    wrapLog(gettext("The suggested packages are required for a complete check.\nChecking can be attempted without them by setting the environment variable _R_CHECK_FORCE_SUGGESTS_ to a false value.\n\n", domain = "R-tools"))
5374c5079
<                 printLog0(Log, paste(out, collapse = "\n"))
---
>                 printLog(Log, paste(out, collapse = "\n"))
5376c5081
<         } else resultLog(Log, "OK")
---
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
5381c5086
<         checkingLog(Log, "if this is a source package")
---
>         checkingLog(Log, gettext("checking if this is a source package ...", domain = "R-tools"))
5388c5093
<             printLog(Log, "Only *source* packages can be checked.\n")
---
>             printLog(Log, gettext("Only *source* packages can be checked.\n", domain = "R-tools"))
5404,5406c5109,5111
<                 printLog0(Log,
<                           sprintf("Subdirectory %s contains apparent object files/libraries\n",
<                                   sQuote(file.path(pkgname, "src"))),
---
>                 printLog(Log,
>                          gettextf("Subdirectory %s contains apparent object files/libraries\n",
>                                  sQuote(file.path(pkgname, "src")), domain = "R-tools"),
5410c5115
<                           "\nObject files/libraries should not be included in a source package.\n")
---
>                          gettext("\nObject files/libraries should not be included in a source package.\n", domain = "R-tools"))
5422,5423c5127,5128
<                                 domain = NA)
<                 printLog0(Log,
---
>                                 domain = "R-tools")
>                 printLog(Log,
5428c5133
<                           "Most likely, these were included erroneously.\n")
---
>                          gettext("Most likely, these were included erroneously.\n", domain = "R-tools"))
5446,5448c5151
<                                  paste("Subdirectory",
<                                        sQuote("src"),
<                                        "contains:"),
---
>                                  gettextf("Subdirectory %s contains:", sQuote("src"), domain = "R-tools"),
5451c5154
<                                  strwrap("These are unlikely file names for src files."),
---
>                                  strwrap(gettext("These are unlikely file names for src files.", domain = "R-tools")),
5453c5156
<                         printLog0(Log, paste(msg, collapse = "\n"))
---
>                         printLog(Log, paste(msg, collapse = "\n"))
5461,5463c5164
<                 ini <- c("",
<                          "In addition to the above warning(s), found the following notes:",
<                          "")
---
>                 ini <- c("", gettext("In addition to the above warning(s), found the following notes:", domain = "R-tools"), "")
5475,5479c5176,5179
<                          "Found the following apparent object files/libraries:",
<                          strwrap(paste(bad, collapse = " "),
<                                  indent = 2L, exdent = 2L),
<                          "Object files/libraries should not be included in a source package.\n")
<                 printLog0(Log, paste(msg, collapse = "\n"))
---
>                          gettext("Found the following apparent object files/libraries:", domain = "R-tools"),
>                          strwrap(paste(bad, collapse = " "), indent = 2L, exdent = 2L),
>                          gettext("Object files/libraries should not be included in a source package.\n", domain = "R-tools"))
>                 printLog(Log, paste(msg, collapse = "\n"))
5490,5492c5190,5191
<                          sprintf("Subdirectory %s seems to contain an installed version of the package.\n",
<                                  sQuote(dirname(dirname(files[1L])))))
<                 printLog0(Log, paste(msg, collapse = "\n"))
---
>                          gettextf("Subdirectory %s seems to contain an installed version of the package.\n", sQuote(dirname(dirname(files[1L]))), domain = "R-tools"))
>                 printLog(Log, paste(msg, collapse = "\n"))
5494,5495c5193,5194
<             if (!any) resultLog(Log, "OK")
<         } else resultLog(Log, "OK")
---
>             if (!any) resultLog(Log, gettext("OK", domain = "R-tools"))
>         } else resultLog(Log, gettext("OK", domain = "R-tools"))
5501c5200
<                 ".check_packages() exit status ", status)
---
>                 gettextf("'.check_packages()' exit status %s", status, domain = "R-tools"))
5507c5206
<             printLog(Log, "NOTE:  Quitting check on first error.\n")
---
>             printLog(Log, gettext("NOTE: Quitting check on first error.\n", domain = "R-tools"))
5682,5683c5381
<             stop("'--no-rebuild-vignettes' is defunct: use '--no-build-vignettes' instead",
<                  call. = FALSE, domain = NA)
---
>             stop("'--no-rebuild-vignettes' is defunct: use '--no-build-vignettes' instead", call. = FALSE, domain = "R-tools")
5693,5694c5391
<             stop("'--no-latex' is defunct: use '--no-manual' instead",
<                  call. = FALSE, domain = NA)
---
>             stop("'--no-latex' is defunct: use '--no-manual' instead", call. = FALSE, domain = "R-tools")
5726c5423
<             message("Warning: unknown option ", sQuote(a))
---
>             message(gettextf("Warning: unknown option %s", sQuote(a)))
5995,5996c5692
<     msg_DESCRIPTION <-
<         c("See section 'The DESCRIPTION file' in the 'Writing R Extensions' manual.\n")
---
>     msg_DESCRIPTION <- gettext("See section 'The DESCRIPTION file' in the 'Writing R Extensions' manual.", domain = "R-tools")
6032,6033c5728
<             warning(sQuote(pkg), " is neither a file nor directory, skipping\n",
<                     domain = NA, call. = FALSE, immediate. = TRUE)
---
>             warning(gettextf("%s is neither a file nor directory, skipping\n", sQuote(pkg)), domain = "R-tools", call. = FALSE, immediate. = TRUE)
6043c5738
<             message(sprintf("ERROR: cannot create check dir %s", sQuote(pkgoutdir)))
---
>             message(gettextf("ERROR: cannot create check dir %s", sQuote(pkgoutdir), domain = "R-tools"))
6049,6052c5744,5746
<         messageLog(Log, "using log directory ", sQuote(pkgoutdir))
<         messageLog(Log, "using ", R.version.string)
<         messageLog(Log, "using platform: ", R.version$platform,
<                    " (", 8*.Machine$sizeof.pointer, "-bit)")
---
>         messageLog(Log, gettextf("using log directory %s", sQuote(pkgoutdir), domain = "R-tools"))
>         messageLog(Log, gettextf("using %s", R.version.string, domain = "R-tools"))
>         messageLog(Log, gettextf("using platform: %s (%s-bit)", R.version$platform, 8*.Machine$sizeof.pointer, domain = "R-tools"))
6055c5749
<         messageLog(Log, "using session charset: ", charset)
---
>         messageLog(Log, gettextf("using session charset: %s", charset, domain = "R-tools"))
6065,6066c5759,5760
<                 checkingLog(Log, "whether tarball can be unpacked")
<                 errorLog(Log, sprintf("cannot create %s", sQuote(dir)))
---
>                 checkingLog(Log, gettext("checking whether tarball can be unpacked ...", domain = "R-tools"))
>                 errorLog(Log, gettextf("cannot create %s", sQuote(dir), domain = "R-tools"))
6074,6075c5768,5769
<                 checkingLog(Log, "whether tarball can be unpacked")
<                 errorLog(Log, sprintf("cannot unpack %s", sQuote(pkg)))
---
>                 checkingLog(Log, gettext("checking whether tarball can be unpacked ...", domain = "R-tools"))
>                 errorLog(Log, gettextf("cannot unpack %s", sQuote(pkg), domain = "R-tools"))
6086c5780
<             checkingLog(Log, "package directory")
---
>             checkingLog(Log, gettext("checking package directory ...", domain = "R-tools"))
6128c5822
<             messageLog(Log, "using options ", sQuote(paste(opts, collapse=" ")))
---
>             messageLog(Log, gettextf("using options %s", sQuote(paste(opts, collapse=" ")), domain = "R-tools"))
6130c5824
<             messageLog(Log, "using option ", sQuote(opts))
---
>             messageLog(Log, gettextf("using option %s", sQuote(opts), domain = "R-tools"))
6157c5851
<                 errorLog(Log, "File DESCRIPTION exists but is not in correct format")
---
>                 errorLog(Log, gettext("File DESCRIPTION exists but is not in correct format", domain = "R-tools"))
6163,6165c5857,5858
<                 messageLog(Log, "looks like ", sQuote(pkgname0),
<                            " is a base package")
<                 messageLog(Log, "skipping installation test")
---
>                 messageLog(Log, gettextf("looks like %s is a base package", sQuote(pkgname0), domain = "R-tools"))
>                 messageLog(Log, gettext("skipping installation test", domain = "R-tools"))
6181c5874
<                     messageLog(Log, "will not attempt to install this package on Windows")
---
>                     messageLog(Log, gettext("will not attempt to install this package on Windows", domain = "R-tools"))
6185c5878
<                     messageLog(Log, "this is a Windows-only package, skipping installation")
---
>                     messageLog(Log, gettext("this is a Windows-only package, skipping installation", domain = "R-tools"))
6212c5905
<             checkingLog(Log, "if there is a namespace")
---
>             checkingLog(Log, gettext("checking if there is a namespace ...", domain = "R-tools"))
6215c5908
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
6218c5911
<                        "File NAMESPACE does not exist but there is a case-insenstiive match.")
---
>                        gettext("File NAMESPACE does not exist but there is a case-insensitive match.", domain = "R-tools"))
6223,6225c5916
<                 wrapLog("All packages need a namespace as from R 3.0.0.\n",
<                         "R CMD build will produce a suitable starting point,",
<                         "but it is better to handcraft a NAMESPACE file.")
---
>                 wrapLog(gettext("All packages need a namespace as from R 3.0.0.\nR CMD build will produce a suitable starting point, but it is better to handcraft a 'NAMESPACE' file.", domain = "R-tools"))
6229,6231c5920
<                 wrapLog("Packages without R code can be installed without",
<                         "a NAMESPACE file, but it is cleaner to add",
<                         "an empty one.")
---
>                 wrapLog(gettext("Packages without R code can be installed without a 'NAMESPACE' file, but it is cleaner to add an empty one.", domain = "R-tools"))
6281,6283c5970
<                                 printLog0(Log,
<                                           "NB: this package is only installed for sub-architectures ",
<                                           paste(sQuote(inst_archs), collapse=", "), "\n")
---
>                                 printLog(Log, gettextf("NB: this package is only installed for sub-architectures %s\n", paste(sQuote(inst_archs), collapse=", "), domain = "R-tools"))
6285,6287c5972
<                                 printLog0(Log,
<                                           "NB: this package is only installed for sub-architecture ",
<                                           sQuote(inst_archs), "\n")
---
>                                 printLog(Log, gettextf("NB: this package is only installed for sub-architecture %s\n", sQuote(inst_archs), domain = "R-tools"))
6338,6339c6023,6024
<                     checkingLog(Log, "for code which exercises the package")
<                     warningLog(Log, "No examples, no tests, no vignettes")
---
>                     checkingLog(Log, gettext("checking for code which exercises the package ...", domain = "R-tools"))
>                     warningLog(Log, gettext("No examples, no tests, no vignettes", domain = "R-tools"))
6346c6031
<                         "for non-standard things in the check directory")
---
>                         gettext("checking for non-standard things in the check directory ...", domain = "R-tools"))
6370c6055
<                 msg <- c("Found the following files/directories:",
---
>                 msg <- c(gettext("Found the following files/directories:", domain = "R-tools"),
6375c6060
<                 resultLog(Log, "OK")
---
>                 resultLog(Log, gettext("OK", domain = "R-tools"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/checktools.R R/src/library/tools/R/checktools.R
217c217
<                 message(sprintf("downloading %s ... ", rfiles[i]),
---
>                 message(sprintf("downloading file %s ... ", sQuote(rfiles[i])),
255,257c255,256
<         message(paste(strwrap(sprintf("installing dependencies %s",
<                                       paste(sQuote(sort(depends)),
<                                             collapse = ", ")),
---
>         message(paste(strwrap(sprintf(gettext("installing dependencies %s", domain = "R-tools"),
>                                       paste(sQuote(depends), collapse = ", ")),
317c316
<         message(sprintf("checking %s ...", pfile))
---
>         message(sprintf("checking package %s ...", sQuote(pfile)))
386c385
<         writeLines("No packages checked.")
---
>         writeLines(gettext("No packages checked.", domain = "R-tools"))
391,393c390,392
<     writeLines(c(strwrap(sprintf("Check results for packages in dir '%s':",
<                                  dir)),
<                  sprintf("Package sources: %d, Reverse depends: %d",
---
>     writeLines(c(strwrap(gettextf("Check results for packages in dir '%s':",
>                                  dir, domain = "R-tools")),
>                  gettextf("Package sources: %d, Reverse depends: %d",
395,396c394,395
<                          length(attr(x, "rnames"))),
<                  "Use summary() for more information."))
---
>                          length(attr(x, "rnames")), domain = "R-tools"),
>                  gettext("Use 'summary()' for more information.", domain = "R-tools")))
406c405
<         writeLines("No packages checked.")
---
>         writeLines(gettext("No packages checked.", domain = "R-tools"))
411,412c410,411
<     writeLines(c(strwrap(sprintf("Check results for packages in dir '%s':",
<                                  dir)),
---
>     writeLines(c(strwrap(gettextf("Check results for packages in dir '%s':",
>                                  dir, domain = "R-tools")),
416c415
<         writeLines("\nUse summary(full = TRUE) for details.")
---
>         writeLines(gettext("\nUse 'summary(full = TRUE)' for details.", domain = "R-tools"))
606c605
<             writeLines(sprintf("Example timings for package '%s':", x))
---
>             writeLines(gettextf("Example timings for package %s:", sQuote(x), domain = "R-tools"))
997,998c996,997
<     paste0(sprintf("Package: %s %s\n",
<                    x$Package, x$Version),
---
>     paste0(gettextf("Package: %s %s\n",
>                   x$Package, x$Version, domain = "R-tools"),
1000c999
<                   sprintf("Flavor: %s\n", flavor),
---
>                   gettextf("Flavor: %s\n", flavor, domain = "R-tools"),
1003c1002
<                   sprintf("Flags: %s\n", flags),
---
>                   gettextf("Flags: %s\n", flags, domain = "R-tools"),
1005,1006c1004,1005
<            sprintf("Check: %s, Result: %s\n",
<                    x$Check, x$Status),
---
>            gettextf("Check: %s, Result: %s\n",
>                    x$Check, x$Status, domain = "R-tools"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/citation.R R/src/library/tools/R/citation.R
43c43
<             stop("non-ASCII input in a CITATION file without a declared encoding")
---
>             stop("non-ASCII input in a 'CITATION' file without a declared encoding")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/doitools.R R/src/library/tools/R/doitools.R
109c109
<             message(sprintf("processing %s", p))
---
>             message(gettextf("processing package %s", sQuote(p)))
148c148
<         if(verbose) message(sprintf("processing %s", d))
---
>         if(verbose) message(gettextf("processing DOI %s", d))
209c209
<                              m = rep.int("Invalid DOI", len)))
---
>                              m = rep.int(gettext("Invalid DOI"), len)))
239c239
<     paste0(sprintf("DOI: %s", x$DOI),
---
>     paste0(sprintf("DOI: %s", x$DOI), #LUKI
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/dynamicHelp.R R/src/library/tools/R/dynamicHelp.R
102c102
<                                domain = NA)
---
>                                domain = "R-tools")
445c445
<                                        mono(pkg))))
---
>                                        sQuote(mono(pkg)), domain = "R-tools")))
460c460
<             	return(error_page(gettextf("URL %s was not found", mono(path))))
---
>             	return(error_page(gettextf("URL '%s' was not found", mono(path), domain = "R-tools")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/index.R R/src/library/tools/R/index.R
48,49c48
<         stop(gettextf("directory '%s' does not exist", dataDir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(dataDir)), domain = "R-tools")
95,96c94
<         stop(gettextf("directory '%s' does not exist", demoDir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(demoDir)), domain = "R-tools")
104,106c102
<             warning(gettextf("cannot read index information in file '%s'",
<                              INDEX),
<                     domain = NA)
---
>             warning(gettextf("cannot read index information in file '%s'", INDEX), domain = "R-tools")
122,123c118
<         stop(gettextf("directory '%s' does not exist", demoDir),
<              domain = NA)
---
>         stop(gettextf("directory %s does not exist", sQuote(demoDir)), domain = "R-tools")
130c125
<                       domain = NA))
---
>                       domain = "R-tools"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/install.R R/src/library/tools/R/install.R
84c84
<                 starsmsg(stars, "removing ", sQuote(pkgdir))
---
>                 starsmsg(stars, gettextf("removing package directory %s", sQuote(pkgdir)))
91c91
<                 starsmsg(stars, "restoring previous ", sQuote(pkgdir))
---
>                 starsmsg(stars, gettextf("restoring previous package directory %s", sQuote(pkgdir)))
93,94c93
<                     file.copy(lp, dirname(pkgdir), recursive = TRUE,
<                               copy.date = TRUE)
---
>                     file.copy(lp, dirname(pkgdir), recursive = TRUE, copy.date = TRUE)
154,155c153
<         sub(".*= ", "", grep("^SHLIB_EXT", readLines(mconf), value = TRUE,
<                              perl = TRUE))
---
>         sub(".*= ", "", grep("^SHLIB_EXT", readLines(mconf), value = TRUE, perl = TRUE))
245,246c243
<             paste0("for this one it is ",
< 		   if(static_html) "--html" else "--no-html", "."),
---
>                    if(static_html) "for this one it is --html." else "for this one it is --no-html.",
271,273c268,277
< 	str_parse_logic(desc[field], default = default,
< 			otherwise = quote(
< 			    errmsg("invalid value of ", field, " field in DESCRIPTION")))
---
>     {
>         tmp <- desc[field]
>         if (is.na(tmp)) default
>         else switch(tmp,
>                     "yes"=, "Yes" =, "true" =, "True" =, "TRUE" = TRUE,
>                     "no" =, "No" =, "false" =, "False" =, "FALSE" = FALSE,
>                     ## default
>                     errmsg(gettextf("ERROR: invalid value of %s field in 'DESCRIPTION' file", sQuote(field)))
>                     )
>     }
276c280
<         message(stars, " ", ..., domain = NA)
---
>         message(stars, " ", ..., domain = "R-tools")
280c284
<         message("ERROR: ", ..., domain = NA)
---
>         message(..., domain = "R-tools")
284,285c288,289
<     pkgerrmsg <- function(msg, pkg)
< 	errmsg(msg, " for package ", sQuote(pkg))
---
>     pkgerrmsg <- function(msg)
> 	errmsg(msg)
304,305c308
<         desc <- tryCatch(read.dcf(fd <- file.path(pkg, "DESCRIPTION")),
<                          error = identity)
---
>         desc <- tryCatch(read.dcf(fd <- file.path(pkg, "DESCRIPTION")), error = identity)
307,308c310
<             stop(gettextf("error reading file '%s'", fd),
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("error reading file %s", sQuote(fd)), domain = "R-tools", call. = FALSE)
312c314
<             stop("this seems to be a bundle -- and they are defunct")
---
>             stop("'DESCRIPTION' file seems to be a bundle -- and they are defunct")
315c317
<             if (is.na(pkg_name)) errmsg("no 'Package' field in 'DESCRIPTION'")
---
>             if (is.na(pkg_name)) errmsg(gettext("ERROR: no 'Package' field in 'DESCRIPTION' file"))
326c328
<             message("ERROR: unable to create ", sQuote(instdir), domain = NA)
---
>             message(gettextf("ERROR: unable to create installation directory %s", sQuote(instdir)), domain = "R-tools")
331,332c333
<             message("ERROR: ", sQuote(pkg_name), " is not a legal package name",
<                     domain = NA)
---
>             message(gettextf("ERROR: %s is not a legal package name", sQuote(pkg_name)), domain = "R-tools")
338c339
<         if (owd == getwd()) pkgerrmsg("cannot install to srcdir", pkg_name)
---
>         if (owd == getwd()) pkgerrmsg(gettextf("ERROR: cannot install to source directory for package %s", sQuote(pkg_name)))
385c386
<             starsmsg(stars, "creating tarball")
---
>             starsmsg(stars, gettext("creating tarball"))
388,389c389
<                 paste0(pkg_name, "_", version, "_R_",
<                        Sys.getenv("R_PLATFORM"), ".tar.gz")
---
>                 paste0(pkg_name, "_", version, "_R_", Sys.getenv("R_PLATFORM"), ".tar.gz")
399,402c399,400
<                 errmsg(sprintf("packaging into %s failed", sQuote(filename)))
<             message("packaged installation of ",
<                     sQuote(pkg_name), " as ", sQuote(filename),
<                     domain = NA)
---
>                 errmsg(gettextf("packaging into %s failed", sQuote(filename), domain = "R-tools"))
>             message(gettextf("packaged installation of %s as %s", sQuote(pkg_name), sQuote(paste0(filename, ".gz"))), domain = "R-tools")
407c405
<             starsmsg(stars, "MD5 sums")
---
>             starsmsg(stars, gettext("MD5 sums"))
417,418c415
<             res <- system(paste(shQuote(ZIP), "-r9Xq", filepath,
<                                 paste(curPkg, collapse = " ")))
---
>             res <- system(paste(shQuote(ZIP), "-r9Xq", filepath, paste(curPkg, collapse = " ")))
421c418
<                 message("running 'zip' failed", domain = NA)
---
>                 message("running 'zip' failed", domain = "R-tools")
423,424c420
<                 message("packaged installation of ",
<                         sQuote(pkg_name), " as ", filename, domain = NA)
---
>                 message(gettextf("packaged installation of package %s as file %s", sQuote(pkg_name), filename), domain = "R-tools")
427,428c423,424
<             ## message("", domain = NA)  # ensure next starts on a new line, for R CMD check
<             starsmsg(stars, "DONE (", pkg_name, ")")
---
>             ## message("", domain = "R-tools")  # ensure next starts on a new line, for R CMD check
>             starsmsg(stars, gettextf("DONE (%s)", pkg_name))
438c434
<         starsmsg(stars, "installing *binary* package ", sQuote(pkg), " ...")
---
>         starsmsg(stars, gettextf("installing *binary* package %s ...", sQuote(pkg)))
450c446
<         if (res) errmsg("installing binary package failed")
---
>         if (res) errmsg(gettextf("ERROR: installing binary package failed"))
453,454c449
<             starsmsg(stars, sQuote(pkg),
<                      " was already a binary package and will not be rebuilt")
---
>             starsmsg(stars, gettextf("package %s was already a binary package and will not be rebuilt", sQuote(pkg)))
497c492
<             warning("'cleanup' exists but is not executable -- see the 'R Installation and Administration Manual'", call. = FALSE)
---
>             warning("'cleanup' file exists but is not executable -- see the 'R Installation and Administration Manual'", call. = FALSE)
509,510c504
<                 message("installing via 'install.libs.R' to ", instdir,
<                         domain = NA)
---
>                 message(gettextf("installing via 'install.libs.R' to installation directory %s", sQuote(instdir)), domain = "R-tools")
529c523
<                 message('installing to ', dest, domain = NA)
---
>                 message(gettextf("installing to directory %s", sQuote(dest)), domain = "R-tools")
548c542
< 		    starsmsg(stars, gettextf("generating debug symbols (%s)", "dSYM"))
---
> 		    starsmsg(stars, gettextf("generating debug symbols (%s)", "dSYM"), domain = "R-tools")
553,554c547
<                 if(config_val_to_logical(Sys.getenv("_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_",
<                                                     "TRUE"))
---
>                 if(config_val_to_logical(Sys.getenv("_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_", "TRUE"))
569,571c562
<             if (debug) message("about to run ",
<                                "R CMD SHLIB ", paste(args, collapse = " "),
<                                domain = NA)
---
>             if (debug) message(gettextf("about to run command %s", sQuote(paste("R CMD SHLIB", args, collapse = " "))), domain = "R-tools")
614c605
<             starsmsg(stars, "checking absolute paths in shared objects and dynamic libraries")
---
>             starsmsg(stars, gettext("checking absolute paths in shared objects and dynamic libraries", domain = "R-tools"))
870,874c861
<                         errmsg("absolute paths in ",
<                                sQuote(ll),
<                                " include the temporary installation directory:",
<                                " please report to the package maintainer",
<                                " and use ", sQuote("--no-staged-install"))
---
>                         errmsg(gettextf("absolute paths in %s include the temporary installation directory: please report to the package maintainer and use %s", sQuote(ll), sQuote("--no-staged-install")))
896,897c883,884
<             if (WINDOWS) errmsg("'Frontend' packages are Unix-only")
<             starsmsg(stars, "installing *Frontend* package ", sQuote(pkg_name), " ...")
---
>             if (WINDOWS) errmsg(gettext("ERROR: 'Frontend' packages are Unix-only"))
>             starsmsg(stars, gettextf("installing *Frontend* package %s ...", sQuote(pkg_name)))
901,904c888,889
<                     res <- system(paste(paste(configure_vars, collapse = " "),
<                                         "./configure",
<                                         paste(configure_args, collapse = " ")))
<                     if (res) pkgerrmsg("configuration failed", pkg_name)
---
>                     res <- system(paste(paste(configure_vars, collapse = " "), "./configure", paste(configure_args, collapse = " ")))
>                     if (res) pkgerrmsg(gettextf("ERROR: configuration failed for package %s", sQuote(pkg_name)))
906c891
<                     errmsg("'configure' exists but is not executable -- see the 'R Installation and Administration Manual'")
---
>                     errmsg(gettext("ERROR: 'configure' file exists but is not executable -- see the 'R Installation and Administration Manual'"))
909c894
<                 if (system(MAKE)) pkgerrmsg("make failed", pkg_name)
---
>                 if (system(MAKE)) pkgerrmsg(gettextf("ERROR: make failed for package %s", sQuote(pkg_name)))
915c900
<             errmsg("'Translation' packages are defunct")
---
>             errmsg(gettext("ERROR: 'Translation' packages are defunct"))
920c905
<                 errmsg(" Unix-only package")
---
>                 errmsg(gettext("ERROR: Unix-only package"))
923c908
<                 errmsg(" Windows-only package")
---
>                 errmsg(gettext("ERROR: Windows-only package"))
947,953c932,935
<             if (length(miss) > 1)
<                  pkgerrmsg(sprintf("dependencies %s are not available",
<                                    paste(sQuote(miss), collapse = ", ")),
<                            pkg_name)
<             else if (length(miss))
<                 pkgerrmsg(sprintf("dependency %s is not available",
<                                   sQuote(miss)), pkg_name)
---
>             if (length(miss) >= 1L)
>                  pkgerrmsg(sprintf(ngettext(length(miss), "ERROR: dependency %s is not available for package %s", "ERROR: dependencies %s are not available for package %s", domain = "R-tools"), paste(sQuote(miss), collapse = ", "), sQuote(pkg_name)))
> #            else if (length(miss))
> #                pkgerrmsg(gettextf("ERROR: dependency %s is not available for package %s", sQuote(miss), sQuote(pkg_name)))
956,957c938
<         starsmsg(stars, "installing *source* package ",
<                  sQuote(pkg_name), " ...")
---
>         starsmsg(stars, gettextf("installing *source* package %s ...", sQuote(pkg_name)))
963,965c944
<             starsmsg(stars,
<                      gettextf("package %s successfully unpacked and MD5 sums checked",
<                               sQuote(pkg_name)))
---
>             starsmsg(stars, gettextf("package %s successfully unpacked and MD5 sums checked", sQuote(pkg_name)))
971c950
<                 if (debug) starsmsg(stars, "backing up earlier installation")
---
>                 if (debug) starsmsg(stars, gettext("backing up earlier installation"))
973,974c952
<                     file.copy(instdir, lockdir, recursive = TRUE,
<                               copy.date = TRUE)
---
>                     file.copy(instdir, lockdir, recursive = TRUE, copy.date = TRUE)
980,981c958
<                     file.copy(instdir, lockdir, recursive = TRUE,
<                               copy.date = TRUE)
---
>                     file.copy(instdir, lockdir, recursive = TRUE, copy.date = TRUE)
1002c979
<             starsmsg(stars, "using staged installation")
---
>             starsmsg(stars, gettext("using staged installation", domain = "R-tools"))
1023c1000
<                          "using non-staged installation via StagedInstall field")
---
>                          gettext("using non-staged installation via StagedInstall field", domain = "R-tools"))
1025c1002
<                 starsmsg(stars, "using non-staged installation")
---
>                 starsmsg(stars, gettext("using non-staged installation", domain = "R-tools"))
1034c1011
<                     if (res) pkgerrmsg("configuration failed", pkg_name)
---
>                     if (res) pkgerrmsg(gettextf("ERROR: configuration failed for package %s", sQuote(pkg_name)))
1038,1039c1015
<                             "   WARNING: this package has a configure script\n",
<                             "         It probably needs manual configuration\n",
---
>                             gettext("   WARNING: this package has a configure script\n         It probably needs manual configuration\n", domain = "R-tools"),
1044,1048c1020,1021
<                     cmd <- paste(paste(configure_vars, collapse = " "),
<                                  "./configure",
<                                  paste(configure_args, collapse = " "))
<                     if (debug) message("configure command: ", sQuote(cmd),
<                                        domain = NA)
---
>                     cmd <- paste(paste(configure_vars, collapse = " "), "./configure", paste(configure_args, collapse = " "))
>                     if (debug) message(gettextf("configure command: %s", sQuote(cmd)), domain = "R-tools")
1050,1051c1023
<                     cmd <- paste("_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_=false",
<                                  cmd)
---
>                     cmd <- paste("_R_SHLIB_BUILD_OBJECTS_SYMBOL_TABLES_=false", cmd)
1053c1025
<                     if (res) pkgerrmsg("configuration failed", pkg_name)
---
>                     if (res) pkgerrmsg(gettextf("ERROR: configuration failed for package %s", sQuote(pkg_name)))
1055c1027
<                     errmsg("'configure' exists but is not executable -- see the 'R Installation and Administration Manual'")
---
>                     errmsg(gettext("ERROR: 'configure' file exists but is not executable -- see the 'R Installation and Administration Manual'"))
1069c1041
<                 pkgerrmsg("installing package DESCRIPTION failed", pkg_name)
---
>                 pkgerrmsg(gettextf("ERROR: installing package DESCRIPTION file failed for package %s", sQuote(pkg_name)))
1072,1073c1044,1045
<                     errmsg("a 'NAMESPACE' file is required")
<                 else writeLines("## package without R code", namespace)
---
>                     errmsg(gettext("ERROR: a 'NAMESPACE' file is required"))
>                 else writeLines(gettextf("## package without R code %s", sQuote(namespace)))
1079c1051
<             starsmsg(stars, "libs")
---
>             starsmsg(stars, gettextf("'%s' directory", "libs"))
1082c1054
<                 warning("R include directory is empty -- perhaps need to install R-devel.rpm or similar", call. = FALSE)
---
>                 warning("R 'include' directory is empty -- perhaps need to install R-devel.rpm or similar", call. = FALSE)
1125c1097
<                     message("  running 'src/Makefile.win' ...", domain = NA)
---
>                     message("  running 'src/Makefile.win' ...", domain = "R-tools")
1161c1133
<                                 warning("this package has a non-empty 'configure.win' file,\nso building only the main architecture\n", call. = FALSE, domain = NA)
---
>                                 warning("this package has a non-empty 'configure.win' file,\nso building only the main architecture\n", call. = FALSE, domain = "R-tools")
1171c1143
<                             message("", domain = NA) # a blank line
---
>                             message("", domain = "R-tools") # a blank line
1220,1221c1192
<                                 starsmsg("***", "arch - ",
<                                          substr(rarch, 2, 1000))
---
>                                 starsmsg("***", "arch - ", substr(rarch, 2, 1000))
1251c1222
<                 pkgerrmsg("compilation failed", pkg_name)
---
>                 pkgerrmsg(gettextf("ERROR: compilation failed for package %s", sQuote(pkg_name)))
1288c1259
< 	    starsmsg(stars, "R")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "R"))
1294c1265
< 		pkgerrmsg("unable to collate and parse R files", pkg_name)
---
> 		pkgerrmsg(gettextf("ERROR: unable to collate and parse R files for package %s", sQuote(pkg_name)))
1310c1281
< 		    pkgerrmsg("unable to build sysdata DB", pkg_name)
---
> 		    pkgerrmsg(gettextf("ERROR: unable to build sysdata DB for package %s", sQuote(pkg_name)))
1317,1318c1288
< 		    cat("",
< 			'.onLoad <- .onAttach <- function(lib, pkg) NULL',
---
> 		    cat("", '.onLoad <- .onAttach <- function(lib, pkg) NULL',
1355c1325
< 	    starsmsg(stars, "data")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "data"))
1371c1341
< 			starsmsg(paste0(stars, "*"), "resaving rda files")
---
> 			starsmsg(paste0(stars, "*"), gettext("resaving rda files"))
1378c1348
<                              "moving datasets to lazyload DB")
---
>                              gettext("moving datasets to lazyload DB"))
1395c1365
< 			pkgerrmsg("lazydata failed", pkg_name)
---
> 			pkgerrmsg(gettextf("ERROR: lazydata failed for package %s", sQuote(pkg_name)))
1402c1372
< 	    starsmsg(stars, "demo")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "demo"))
1408c1378
< 		pkgerrmsg("ERROR: installing demos failed")
---
> 		pkgerrmsg(gettext("ERROR: installing demos failed for package %s", sQuote(pkg_name)))
1414c1384
< 	    starsmsg(stars, "exec")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "exec"))
1428c1398
< 	    starsmsg(stars, "inst")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "inst"))
1479c1449
< 	    starsmsg(stars, "tests")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "tests"))
1496,1497c1466
<                 starsmsg(stars,
<                          "byte-compile and prepare package for lazy loading")
---
>                 starsmsg(stars, gettext("byte-compile and prepare package for lazy loading"))
1549c1518
< 		pkgerrmsg("lazy loading failed", pkg_name)
---
> 		pkgerrmsg(gettextf("ERROR: lazy loading failed for package %s", sQuote(pkg_name)))
1553c1522
< 	    starsmsg(stars, "help")
---
> 	    starsmsg(stars, gettextf("'%s' directory", "help"))
1556c1525
< 		cat("No man pages found in package ", sQuote(pkg_name), "\n")
---
> 		cat(gettextf("No man pages found in package %s", sQuote(pkg_name), domain = "R-tools"), "\n", sep = "")
1561c1530
< 		pkgerrmsg("installing Rd objects failed", pkg_name)
---
> 		pkgerrmsg(gettextf("ERROR: installing Rd objects failed for package %s", sQuote(pkg_name)))
1564c1533
< 	    starsmsg(paste0(stars, "*"), "installing help indices")
---
> 	    starsmsg(paste0(stars, "*"), gettext("installing help indices"))
1576c1545
< 		starsmsg(paste0(stars, "*"), "copying figures")
---
> 		starsmsg(paste0(stars, "*"), gettext("copying figures"))
1588c1557
< 	    starsmsg(stars, "building package indices")
---
> 	    starsmsg(stars, gettext("building package indices"))
1603c1572
< 		errmsg("installing package indices failed")
---
> 		errmsg(gettext("ERROR: installing package indices failed"))
1605c1574
<                 starsmsg(stars, "installing vignettes")
---
>                 starsmsg(stars, gettext("installing vignettes"))
1616c1585
< 		errmsg("installing vignettes failed")
---
> 		errmsg(gettext("ERROR: installing vignettes failed"))
1625c1594
< 		errmsg("installing namespace metadata failed")
---
> 		errmsg(gettext("ERROR: installing namespace metadata failed"))
1659,1661c1628
<                     msg <- paste("loading failed for",
<                                  paste(sQuote(msgs), collapse = ", "))
<                     errmsg(msg) # does not return
---
>                     errmsg(gettextf("ERROR: loading failed for %s", paste(sQuote(msgs), collapse = ", "))) # does not return
1671c1638
<                     errmsg("loading failed") # does not return
---
>                     errmsg(gettext("ERROR: loading failed", domain = "R-tools")) # does not return
1678c1645
<                     "testing if installed package can be loaded from temporary location")
---
>                     gettext("testing if installed package can be loaded from temporary location", domain = "R-tools"))
1680c1647
< 	        starsmsg(stars, "testing if installed package can be loaded")
---
> 	        starsmsg(stars, gettext("testing if installed package can be loaded", domain = "R-tools"))
1720c1687
<                     "testing if installed package can be loaded from final location")
---
>                     gettextf("testing if installed package can be loaded from final location", domain = "R-tools"))
1736c1703
<                     "testing if installed package keeps a record of temporary installation path")
---
>                     gettext("testing if installed package keeps a record of temporary installation path", domain = "R-tools"))
1741,1743c1708
<                     errmsg("hard-coded installation path: ",
<                            "please report to the package maintainer and use ",
<                            sQuote("--no-staged-install"))
---
>                     errmsg(gettextf("hard-coded installation path: please report to the package maintainer and use %s", sQuote("--no-staged-install"), domain = "R-tools"))
1751,1754c1716
<             if(length(a_s) > 1L)
<                 starsmsg(stars, "stripping static libraries under lib")
<             else
<                 starsmsg(stars, "stripping static library under lib")
---
>             starsmsg(stars, ngettext(length(a_s), "stripping static library under lib", "stripping static libraries under lib", domain = "R-tools"))
1761,1764c1723
<             if(length(so_s) > 1L)
<                 starsmsg(stars, "stripping dynamic libraries under lib")
<             else
<                 starsmsg(stars, "stripping dynamic library under lib")
---
>             starsmsg(stars, ngettext(length(so_s), "stripping dynamic library under lib", "stripping dynamic libraries under lib", domain = "R-tools"))
1835c1794
<             cat("R add-on package installer: ",
---
>             cat(gettext("R add-on package installer: ", domain = "R-tools"),
1840,1841c1799
<                 "This is free software; see the GNU General Public License version 2",
<                 "or later for copying conditions.  There is NO warranty.",
---
>                 "This is free software; see the GNU General Public License version 2 or later for copying conditions. There is NO warranty.",
1865,1868c1823,1824
<             warning("use of '--use-zip-data' is defunct",
<                     call. = FALSE, domain = NA)
<             warning("use of '--use-zip-data' is deprecated",
<                     call. = FALSE, domain = NA)
---
>             warning("use of '--use-zip-data' is defunct", call. = FALSE, domain = "R-tools")
>             warning("use of '--use-zip-data' is deprecated", call. = FALSE, domain = "R-tools")
1870,1871c1826
<             warning("'--auto-zip' is defunct",
<                            call. = FALSE, domain = NA)
---
>             warning("'--auto-zip' is defunct", call. = FALSE, domain = "R-tools")
1960c1915
<             message("Warning: unknown option ", sQuote(a), domain = NA)
---
>             message(gettextf("Warning: unknown option %s", sQuote(a)), domain = "R-tools")
1967c1922
<         for(i in 1:ntries) {
---
>         for(i in seq_len(ntries)) {
1985,1986c1940
<             stop("ERROR: '--merge-multiarch' applies only to a single tarball",
<                  call. = FALSE)
---
>             stop("ERROR: '--merge-multiarch' applies only to a single tarball", call. = FALSE)
2010,2011c1964,1965
<                     if (debug) message("about to run ", cmd, domain = NA)
<                     message("\n", "install for ", arch, "\n", domain = NA)
---
>                     if (debug) message(gettextf("about to run command %s", sQuote(cmd)), domain = "R-tools")
>                     message("\n", gettextf("install for architecture %s", arch), "\n", sep = "", domain = "R-tools")
2043,2044c1997,1998
<                     if (debug) message("about to run ", cmd, domain = NA)
<                     message("\n", "install for ", arch, "\n", domain = NA)
---
>                     if (debug) message(gettextf("about to run command %s", sQuote(cmd)), domain = "R-tools")
>                     message("\n", gettextf("install for architecture %s", arch), "\n", sep = "", domain = "R-tools")
2058,2059c2012
<         message("only one architecture so ignoring '--merge-multiarch'",
<                 domain = NA)
---
>         message("only one architecture so ignoring '--merge-multiarch'", domain = "R-tools")
2065c2018
<         if (debug) message("processing ", sQuote(pkg), domain = NA)
---
>         if (debug) message(gettextf("processing package %s", sQuote(pkg)), domain = "R-tools")
2068c2021
<                 if (debug) message("a zip file", domain = NA)
---
>                 if (debug) message("a zip file", domain = "R-tools")
2075c2028
<             if (debug) message("a file", domain = NA)
---
>             if (debug) message("a file", domain = "R-tools")
2081c2034
<                 errmsg("error unpacking tarball")
---
>                 errmsg(gettext("ERROR: error unpacking tarball"))
2086c2039
<                 errmsg("cannot extract package from ", sQuote(pkg))
---
>                 errmsg(gettextf("ERROR: cannot extract package from %s", sQuote(pkg)))
2088c2041
<                 errmsg("extracted multiple files from ", sQuote(pkg))
---
>                 errmsg(gettextf("ERROR: extracted multiple files from %s", sQuote(pkg)))
2090c2043
<             else errmsg("cannot extract package from ", sQuote(pkg))
---
>             else errmsg(gettextf("ERROR: cannot extract package from %s", sQuote(pkg)))
2093c2046
<             } else errmsg("cannot extract package from ", sQuote(pkg))
---
>             } else errmsg(gettextf("ERROR: cannot extract package from %s", sQuote(pkg)))
2095c2048
<             if (debug) message("a directory", domain = NA)
---
>             if (debug) message("a directory", domain = "R-tools")
2099c2052
<             warning("invalid package ", sQuote(pkg), call. = FALSE)
---
>             warning(gettextf("invalid package %s", sQuote(pkg)), call. = FALSE)
2115c2068
<         starsmsg(stars, "installing to library ", sQuote(lib))
---
>         starsmsg(stars, gettextf("installing to library %s", sQuote(lib)))
2121,2122c2074
<                         stop(gettextf("ERROR: cannot cd to directory %s", sQuote(lib)),
<                              call. = FALSE, domain = NA))
---
>                         stop(gettextf("ERROR: cannot enter to directory %s", sQuote(lib)), call. = FALSE, domain = "R-tools"))
2139,2140c2091
<         stop("ERROR: no permission to install to directory ",
<              sQuote(lib), call. = FALSE)
---
>         stop(gettextf("ERROR: no permission to install to directory %s", sQuote(lib)), call. = FALSE)
2163,2165c2114
<             message("ERROR: failed to lock directory ", sQuote(lib),
<                     " for modifying\nTry removing ", sQuote(lockdir),
<                     domain = NA)
---
>             message(gettextf("ERROR: failed to lock directory %s for modifying\nTry removing lock directory %s", sQuote(lib), sQuote(lockdir)), domain = "R-tools")
2171,2172c2120
<             message("ERROR: failed to create lock directory ", sQuote(lockdir),
<                     domain = NA)
---
>             message(gettextf("ERROR: failed to create lock directory %s", sQuote(lockdir)), domain = "R-tools")
2176c2124
<         if (debug) starsmsg(stars, "created lock directory ", sQuote(lockdir))
---
>         if (debug) starsmsg(stars, gettextf("created lock directory %s", sQuote(lockdir)))
2220,2221c2168
<         starsmsg(stars, "build_help_types=",
<                  paste(build_help_types, collapse = " "))
---
>         starsmsg(stars, "build_help_types=", paste(build_help_types, collapse = " "))
2224c2171
<         starsmsg(stars, "DBG: 'R CMD INSTALL' now doing do_install()")
---
>         starsmsg(stars, gettext("DBG: 'R CMD INSTALL' now doing do_install()"))
2341c2288
<             cat("R shared object builder: ",
---
>             cat(gettext("R shared object builder: ", domain = "R-tools"),
2346,2347c2293
<                 "This is free software; see the GNU General Public License version 2",
<                 "or later for copying conditions.  There is NO warranty.",
---
>                 "This is free software; see the GNU General Public License version 2 or later for copying conditions. There is NO warranty.",
2592c2538
<         cat("make cmd is\n  ", cmd, "\n\nmake would use\n", sep = "")
---
>         cat(gettextf("make cmd is\n  %s\n\nmake would use:\n", cmd, domain = "R-tools"))
2827c2773
<     cat("  converting help for package ", sQuote(pkg), "\n", sep = "")
---
>     cat(gettextf("  converting help for package %s", sQuote(pkg), domain = "R-tools"), "\n", sep = "")
2832c2778
<         if (!silent) message("    finding HTML links ...", appendLF = FALSE, domain = NA)
---
>         if (!silent) message("    finding HTML links ...", appendLF = FALSE, domain = "R-tools")
2836c2782
<             message("\n    finding level-2 HTML links ...", appendLF = FALSE, domain = NA)
---
>             message("\n    finding level-2 HTML links ...", appendLF = FALSE, domain = "R-tools")
2838c2784
<             message(" done", domain = NA)
---
>             message(" done", domain = "R-tools")
2857c2803,2804
<         message("", domain = NA) # force newline
---
>         #message("", domain = "R-tools") # force newline
> 	cat("\n")
2859c2806
<         stop(conditionMessage(e), domain = NA, call. = FALSE)
---
>         stop(conditionMessage(e), domain = "R-tools", call. = FALSE)
2900,2901c2847
<             ff <- file.path(outDir, dirname[type],
<                             paste0(bf, ext[type]))
---
>             ff <- file.path(outDir, dirname[type], paste0(bf, ext[type]))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/license.R R/src/library/tools/R/license.R
110c110
<     lab[pos] <- sprintf("%s version %s", lab[pos], versions[ind])
---
>     lab[pos] <- gettextf("%s version %s", lab[pos], versions[ind], domain = "R-tools")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/logging.R R/src/library/tools/R/logging.R
62c62
<     printLog(Log, Log$stars, " checking ", ..., " ...")
---
>     printLog(Log, Log$stars, " ", ...)
66c66
<     printLog(Log, Log$stars, " creating ", text, " ...")
---
>     printLog(Log, Log$stars, " ", text)
79c79
<     resultLog(Log, "ERROR")
---
>     resultLog(Log, gettext("ERROR", domain = "R-tools"))
93c93
<     resultLog(Log, "WARNING")
---
>     resultLog(Log, gettext("WARNING", domain = "R-tools"))
101c101
<     resultLog(Log, "NOTE")
---
>     resultLog(Log, gettext("NOTE", domain = "R-tools"))
109c109
<     messageLog(Log, "DONE")
---
>     messageLog(Log, gettext("DONE", domain = "R-tools"))
117c117
<                  "Status: OK\n")
---
>                  gettext("Status: OK\n", domain = "R-tools"))
118a119,127
>       m <- c()
>       for(n in names(counts)){
>         switch(n, 
>                "NOTE" = m <- c(m, (sprintf(ngettext(counts["NOTE"], "%d NOTE", "%d NOTES", domain = "R-tools"), counts["NOTE"]))),
>                "ERROR" = m <- c(m, (sprintf(ngettext(counts["ERROR"], "%d ERROR", "%d ERRORS", domain = "R-tools"), counts["ERROR"]))),
>                "WARNING" = m <- c(m, (sprintf(ngettext(counts["WARNING"], "%d WARNING", "%d WARNINGS", domain = "R-tools"), counts["WARNING"])))
>         )
>       }
>       m <- paste(m, sep = "", collapse = ", ")
120,126c129,130
<                  sprintf("Status: %s\n",
<                          paste(sprintf("%d %s%s",
<                                        counts,
<                                        names(counts),
<                                        ifelse(counts > 1L, "s", "")),
<                                collapse = ", ")))
<         message(sprintf("See\n  %s\nfor details.\n", sQuote(Log$filename)))
---
>                  gettextf("Status: %s\n", m, domain = "R-tools"))
>         message(gettextf("See\n  %s\nfor details.\n", sQuote(Log$filename), domain = "R-tools"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/makeLazyLoad.R R/src/library/tools/R/makeLazyLoad.R
40c40
<         stop("all packages should have a NAMESPACE")
---
>         stop("all packages should have a 'NAMESPACE' file")
146c146
<                                          "objects %s are created by more than one data call"),
---
>                                          "objects %s are created by more than one data call", domain = "R-tools"),
168c168
<     if (is.na(ascii)) stop("'ascii' must be TRUE or FALSE", domain = NA)
---
>     if (is.na(ascii)) stop(gettextf("'%s' argument must be TRUE or FALSE", "ascii", domain = "R-tools"))
321,322c321
< 	stop(gettextf("invalid value for '%s' : %s", "compress",
< 		      "should be FALSE, TRUE, 2 or 3"), domain = NA)
---
> 	stop(gettextf("invalid value for '%s': should be FALSE, TRUE, 2 or 3", "compress"), domain = "R-tools")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/md5.R R/src/library/tools/R/md5.R
59,63c59,60
<         if (sum(not.here) > 1L)
<             cat("files", paste(sQuote(nmxx[not.here]), collapse = ", "),
<                 "are missing\n", sep = " ")
<         else
<             cat("file", sQuote(nmxx[not.here]), "is missing\n", sep = " ")
---
>         cat(sprintf(ngettext(sum(not.here), "file %s is missing",
> 					"files %s are missing", domain = "R-tools"), paste(sQuote(nmxx[not.here]), collapse = ", ")), "\n", sep = "")
70,73c67,68
<         if(length(files) > 1L)
<             cat("files", paste(sQuote(files), collapse = ", "),
<                 "have the wrong MD5 checksums\n", sep = " ")
<         else cat("file", sQuote(files), "has the wrong MD5 checksum\n")
---
> 	cat(sprintf(ngettext(length(files), "file %s has the wrong MD5 checksums",
> 					"files %s have the wrong MD5 checksums", domain = "R-tools"), paste(sQuote(files), collapse = ", ")), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/news.R R/src/library/tools/R/news.R
311,314c311,312
<     ##   dimnames(out) <- list(NULL,
<     ##                         c("Version", "Date", "Category", "Text"))
<     colnames(out)[1L : 4L] <-
<         c("Version", "Date", "Category", "Text")
---
>     ##   dimnames(out) <- list(NULL, c("Version", "Date", "Category", "Text"))
>     colnames(out)[1L : 4L] <- c(gettext("Version"), gettext("Date"), gettext("Category"), gettext("Text"))
405c403
<             stop("DESCRIPTION file not found")
---
>             stop(gettextf("%s file was not found", sQuote("DESCRIPTION")))
410c408
<                 stop("NEWS file not found")
---
>                 stop(gettextf("%s file was not found", sQuote("NEWS")))
420c418
<                 stop("DESCRIPTION file not found")
---
>                 stop(gettextf("%s file was not found", sQuote("DESCRIPTION")))
480,482c478
<                  paste(sprintf("\nChunk %s:\n%s",
<                                format(seq_along(bad)), bad),
<                        collapse = "\n"))
---
>                  paste(gettextf("\nChunk %s:\n%s", format(seq_along(bad)), bad), collapse = "\n"))
647c643
<                     domain = NA)
---
>                     domain = "R-tools")
843,844c839,840
<         warning("Cannot extract version info from the following section titles:\n",
<                 paste(unique(nms[!ind]), collapse = "  "))
---
>         warning(gettext("Cannot extract version info from the following section titles:\n", domain = "R-tools"),
>                 paste(unique(nms[!ind]), collapse = "  "), domain = NA)
880c876
<         format(sprintf("Changes in version %s%s",
---
>         format(gettextf("Changes in version %s%s",
883c879
<                               sprintf(" (%s)", dates))),
---
>                               sprintf(" (%s)", dates)), domain = "R-tools"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/packages.R R/src/library/tools/R/packages.R
193c193
<         if(!dir.create(td)) stop("unable to create ", td)
---
>         if(!dir.create(td)) stop(gettext("unable to create %s directory", sQuote(td)))
214c214
<                     message(gettextf("reading DESCRIPTION for package %s failed with message:\n  %s",
---
>                     message(gettextf("reading 'DESCRIPTION' file for package %s failed with message:\n  %s",
217c217
<                             domain = NA)
---
>                             domain = "R-tools")
255c255
<             warning(gettextf("reading DESCRIPTION for package %s failed with message:\n  %s",
---
>             warning(gettextf("reading 'DESCRIPTION' file for package %s failed with message:\n  %s",
258c258
<                     domain = NA)
---
>                     domain = "R-tools")
438c438
<         if(verbose) cat("Cycle:", (ctr <- ctr + 1L))
---
>         if(verbose) cat(gettext("Cycle: ", domain = "R-tools"), (ctr <- ctr + 1L), sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/parseLatex.R R/src/library/tools/R/parseLatex.R
53c53
<         NULL = stop("Internal error, no tag", domain = NA)
---
>         NULL = stop("Internal error, no tag", domain = "R-tools")
89c89
< 			    warning("argument for ", c(a), " not found", domain = NA)
---
> 			    warning(gettext("argument for %s was not found", sQuote(c(a))), domain = "R-tools")
121c121
< 			NULL = stop("Internal error:  NULL tag", domain = NA))
---
> 			NULL = stop("Internal error: NULL tag", domain = "R-tools"))
207c207
<     	    	    	stop("internal error", domain = NA)
---
>     	    	    	stop("internal error", domain = "R-tools")
221c221
<     	    stop("Inconsistent arg count for ", macro, domain = NA)
---
>     	    stop(gettextf("Inconsistent arg count for %s", sQuote(macro)), domain = "R-tools")
230c230
< 		    warning("entry for ", codepoint, "=", index[1L:i], " already defined to be", entry, domain = NA)
---
> 		    warning(gettextf("entry for %s=%s already defined to be %s", codepoint, paste(index[1L:i], collapse = ", "), entry), domain = "R-tools")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/parseRd.R R/src/library/tools/R/parseRd.R
50,51c50
<             warning(file0, ": multiple \\encoding lines, using the first",
<                     domain = NA, call. = warningCalls)
---
>             warning(gettextf("file %s: multiple \\encoding lines, using the first", sQuote(file0)), domain = "R-tools", call. = warningCalls)
55c54
<         if(verbose) message("found encoding ", enc, domain = NA)
---
>         if(verbose) message(gettextf("found encoding %s", sQuote(enc)), domain = "R-tools")
69,70c68
<             stop(file0, ": non-ASCII input and no declared encoding",
<                  domain = NA, call. = warningCalls)
---
>             stop(gettextf("file %s: non-ASCII input and no declared encoding", sQuote(file0)), domain = "R-tools", call. = warningCalls)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/read.00Index.R R/src/library/tools/R/read.00Index.R
30,32c30
<         stop(gettextf("argument '%s' must be a character string or connection",
<                       file),
<              domain = NA)
---
>         stop(gettextf("'%s' argument must be a character string or connection", file), domain = "R-tools")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/testing.R R/src/library/tools/R/testing.R
91c91
<             stop("file ", file, " cannot be opened", domain = NA)
---
>             stop(gettextf("file %s cannot be opened", sQuote(file)), domain = "R-tools")
114,115c114
<                 if(any(grepl("^[[:space:]]*## No test:", line,
<                              perl = TRUE, useBytes = TRUE))) {
---
>                 if(any(grepl("^[[:space:]]*## Don't test:", line, perl = TRUE, useBytes = TRUE))) {
120,121c119
<                 if(any(grepl("^[[:space:]]*## End\\(No test\\)", line,
<                              perl = TRUE, useBytes = TRUE)))
---
>                 if(any(grepl("^[[:space:]]*## End \\(Don't test\\)", line, perl = TRUE, useBytes = TRUE)))
152,153c150,151
<         if(length(top <- grep("^(R version|R : Copyright|R Under development)",
<                               txt, perl = TRUE, useBytes = TRUE)) &&
---
>         #if(length(top <- grep("^(R version|R : Copyright|R Under development)",
>         if(length(top <- grep("^(Ivory)", txt, perl = TRUE, useBytes = TRUE)) &&
234,235c232,233
<             cat("\nfiles differ in number of lines:\n")
<             out <- "files differ in number of lines"
---
>             cat("\n", gettext("files differ in number of lines:", domain = "R-tools"), "\n", sep = "")
>             out <- gettext("files differ in number of lines", domain = "R-tools")
280,281c278
<                 warning(gettextf("testing '%s' failed", pkgs[i]),
<                         domain = NA, call. = FALSE, immediate. = TRUE)
---
>                 warning(gettextf("testing '%s' failed", pkgs[i]), domain = "R-tools", call. = FALSE, immediate. = TRUE)
295,297c292,294
<                 msg <- gettextf("testing '%s' failed", pkg)
<                 if (errorsAreFatal) stop(msg, domain = NA, call. = FALSE)
<                 else warning(msg, domain = NA, call. = FALSE, immediate. = TRUE)
---
>                 msg <- gettextf("testing package %s failed", sQuote(pkg))
>                 if (errorsAreFatal) stop(msg, domain = "R-tools", call. = FALSE)
>                 else warning(msg, domain = "R-tools", call. = FALSE, immediate. = TRUE)
316,317c313
<         message(gettextf("Testing examples for package %s", sQuote(pkg)),
<                 domain = NA)
---
>         message(gettextf("Testing examples for package %s", sQuote(pkg)), domain = "R-tools")
345c341
<                            appendLF = FALSE, domain = NA)
---
>                            appendLF = FALSE, domain = "R-tools")
352c348
<                            message(" ERROR")
---
>                            message(gettext(" ERROR", domain = "R-tools"))
354c350
<                            message(" NOTE")
---
>                            message(gettext(" NOTE", domain = "R-tools"))
358c354
<                                 "results differ from reference results")
---
>                                 gettext("results differ from reference results", domain = "R-tools"))
360c356
<                        message(" OK")
---
>                        message(gettext(" OK", domain = "R-tools"))
368c364
<                             appendLF = FALSE, domain = NA)
---
>                             appendLF = FALSE, domain = "R-tools")
374c370
<                         message(" NOTE")
---
>                         message(gettext(" NOTE", domain = "R-tools"))
377c373
<                         message(" OK")
---
>                         message(gettext(" OK", domain = "R-tools"))
382,383c378
<             warning(gettextf("no examples found for package %s", sQuote(pkg)),
<                     call. = FALSE, domain = NA)
---
>             warning(gettextf("no examples found for package %s", sQuote(pkg)), call. = FALSE, domain = "R-tools")
394,395c389
<         message(gettextf("Running specific tests for package %s",
<                          sQuote(pkg)), domain = NA)
---
>         message(gettextf("Running specific tests for package %s", sQuote(pkg)), domain = "R-tools")
398c392
<             message(gettextf("  Running %s", sQuote(f)), domain = NA)
---
>             message(gettextf("  Running file %s", sQuote(f)), domain = "R-tools")
412,414c406
<                 message(gettextf("  comparing %s to %s ...",
<                                  sQuote(outfile), sQuote(savefile)),
<                         appendLF = FALSE, domain = NA)
---
>                 message(gettextf("  comparing %s to %s ...", sQuote(outfile), sQuote(savefile)), appendLF = FALSE, domain = "R-tools")
423,424c415
<         message(gettextf("Running vignettes for package %s", sQuote(pkg)),
<                 domain = NA)
---
>         message(gettextf("Running vignettes for package %s", sQuote(pkg)), domain = "R-tools")
472c463
<         message(td2, domain = NA)
---
>         message(td2, domain = "R-tools")
477,478c468
<         message(gettextf("  Running %s", sQuote(f)),
<                 appendLF = FALSE, domain = NA)
---
>         message(gettextf("  Running %s", sQuote(f), domain = "R-tools"), appendLF = FALSE)
480c470
<             cat("  Running ", sQuote(f), sep = "", file = Log)
---
>             cat(gettextf("  Running %s", sQuote(f), domain = "R-tools"), sep = "", file = Log)
500,501c490,491
<                 msg <- sprintf("Running R code in %s had CPU time %g times elapsed time\n",
<                                sQuote(f), ratio)
---
>                 msg <- gettextf("Running R code in %s had CPU time %g times elapsed time\n",
>                                sQuote(f), ratio, domain = "R-tools")
513,515c503
<             message(gettextf("  Comparing %s to %s ...",
<                              sQuote(outfile), sQuote(savefile)),
<                     appendLF = FALSE, domain = NA)
---
>             message(gettextf("  Comparing %s to %s ...", sQuote(outfile), sQuote(savefile), domain = "R-tools"), appendLF = FALSE)
517,518c505
<                 cat("  Comparing ", sQuote(outfile), " to ",
<                     sQuote(savefile), " ...", sep = "", file = Log)
---
>                 cat(gettextf("  Comparing %s to %s ...", sQuote(outfile),  sQuote(savefile), domain = "R-tools"), sep = "", file = Log)
526,527c513,514
<                 message(" OK")
<                 if(!is.null(Log)) cat(" OK\n", file = Log)
---
>                 message(gettext(" OK", domain = "R-tools"))
>                 if(!is.null(Log)) cat(gettext(" OK\n", domain = "R-tools"), file = Log)
539c526
<         message("  Creating ", sQuote(Rfile), domain = NA)
---
>         message(gettextf("  Creating file %s", sQuote(Rfile), domain = "R-tools"))
541,543c528,529
<             cat("  Creating ", sQuote(Rfile), "\n", sep = "", file = Log)
<         cmd <- paste(shQuote(file.path(R.home("bin"), "R")),
<                      "CMD BATCH --no-timing --vanilla --slave", f)
---
>             cat(gettextf("  Creating file %s", sQuote(Rfile), domain = "R-tools"), "\n", sep = "", file = Log)
>         cmd <- paste(shQuote(file.path(R.home("bin"), "R")), "CMD BATCH --no-timing --vanilla --slave", f)
545c531
<             warning("creation of ", sQuote(Rfile), " failed", domain = NA)
---
>             warning(gettextf("creation of %s failed", sQuote(Rfile)), domain = "R-tools")
547,548c533
<                 cat("Warning: creation of ", sQuote(Rfile), " failed\n",
<                     sep = "", file = Log)
---
>                 cat(gettextf("Warning: creation of %s failed", sQuote(Rfile), domain = "R-tools"), "\n", sep = "", file = Log)
574,575c559
<     if (!silent) message("  Extracting from parsed Rd's ",
<                          appendLF = FALSE, domain = NA)
---
>     if (!silent) message("  Extracting from parsed Rd's ", appendLF = FALSE, domain = "R-tools")
623,626c607,609
<                 stop("file ", sQuote(f), " not found", domain = NA)
<             message("creating ", sQuote(f), domain = NA)
<             cmd <- paste(shQuote(file.path(R.home("bin"), "R")),
<                          "--vanilla --slave -f", fin)
---
>                 stop(gettextf("%s file was not found", sQuote(f)), domain = "R-tools")
>             message(gettextf("creating file %s", sQuote(f)), domain = "R-tools")
>             cmd <- paste(shQuote(file.path(R.home("bin"), "R")), "--vanilla --slave -f", fin)
628c611
<                 stop("creation of ", sQuote(f), " failed", domain = NA)
---
>                 stop(gettextf("creation of %s failed", sQuote(f)), domain = "R-tools")
633c616
<         message("  running code in ", sQuote(f), domain = NA)
---
>         message(gettextf("  running code in %s", sQuote(f)), domain = "R-tools")
656,658c639
<             message(gettextf("  comparing %s to %s ...",
<                              sQuote(outfile), sQuote(savefile)),
<                     appendLF = FALSE, domain = NA)
---
>             message(gettextf("  comparing %s to %s ...", sQuote(outfile), sQuote(savefile)), appendLF = FALSE, domain = "R-tools")
669c650
<         message("running strict specific tests", domain = NA)
---
>         message("running strict specific tests", domain = "R-tools")
671c652
<         message("running sloppy specific tests", domain = NA)
---
>         message("running sloppy specific tests", domain = "R-tools")
673c654
<         message("running regression tests", domain = NA)
---
>         message("running regression tests", domain = "R-tools")
677,678c658
<                 message("  comparing 'reg-plot.pdf' to 'reg-plot.pdf.save' ...",
<                         appendLF = FALSE, domain = NA)
---
>                 message(gettextf("  comparing %s to %s ...", sQuote("reg-plot.pdf"), sQuote("reg-plot.pdf.save")), appendLF = FALSE, domain = "R-tools")
685,686c665,666
<         message("running tests of plotting Latin-1", domain = NA)
<         message("  expect failure or some differences if not in a Latin or UTF-8 locale", domain = NA)
---
>         message("running tests of plotting Latin-1", domain = "R-tools")
>         message("  expect failure or some differences if not in a Latin or UTF-8 locale", domain = "R-tools")
689,690c669
<         message("  comparing 'reg-plot-latin1.pdf' to 'reg-plot-latin1.pdf.save' ...",
<                 appendLF = FALSE, domain = NA)
---
>         message(gettextf("  comparing %s to %s ...", sQuote("reg-plot-latin1.pdf"), sQuote("reg-plot-latin1.pdf.save")), appendLF = FALSE, domain = "R-tools")
696c675
<         message("running tests of date-time printing\n expect platform-specific differences", domain = NA)
---
>         message("running tests of date-time printing\n expect platform-specific differences", domain = "R-tools")
698c677
<         message("running tests of consistency of as/is.*", domain = NA)
---
>         message("running tests of consistency of as/is.*", domain = "R-tools")
702c681
<         message("running tests demos from base and stats", domain = NA)
---
>         message("running tests demos from base and stats", domain = "R-tools")
705c684
<         message("running tests of primitives", domain = NA)
---
>         message("running tests of primitives", domain = "R-tools")
707c686
<         message("running regexp regression tests", domain = NA)
---
>         message("running regexp regression tests", domain = "R-tools")
710c689
<         message("running tests of CRAN tools", domain = NA)
---
>         message("running tests of CRAN tools", domain = "R-tools")
712c691
<         message("running tests to possibly trigger segfaults", domain = NA)
---
>         message("running tests to possibly trigger segfaults", domain = "R-tools")
716c695
<         message("running tests of Internet functions", domain = NA)
---
>         message("running tests of Internet functions", domain = "R-tools")
718c697
<         message("running more Internet and socket tests", domain = NA)
---
>         message("running more Internet and socket tests", domain = "R-tools")
794c773
< 		".Rdiff() exit status ", status)
---
> 		gettextf(".Rdiff() exit status %s", status))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/toHTML.R R/src/library/tools/R/toHTML.R
393c393
<                  "Corresponding BibTeX entries:"),
---
>                  "Corresponding BibTeX entries:", domain = "R-tools"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/tools-deprecated.R R/src/library/tools/R/tools-deprecated.R
34c34
<     for(k in 1L:nrow(x)){
---
>     for(k in seq_len(nrow(x))){
62c62
<         for(k in 1L:nrow(x)) {
---
>         for(k in seq_len(nrow(x))) {
409c409
<         stop(gettextf("file '%s' not found", vignette), domain = NA)
---
>         stop(gettextf("%s file wast not found", sQuote(vignette)), domain = "R-tools")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/translations.R R/src/library/tools/R/translations.R
28c28
<         stop("running msginit failed", domain = NA)
---
>         stop("running 'msginit' failed", domain = "R-tools")
31c31
<     if(system(cmd) != 0L) stop("running msgconv failed", domain = NA)
---
>     if(system(cmd) != 0L) stop("running 'msgconv' failed", domain = "R-tools")
41c41
<         while(startsWith(lines[current], '"')) {
---
> 	while(grepl('^"', lines[current])) { #while(startsWith(lines[current], '"')) {
129c129
<             warning("running msgmerge on ", sQuote(f), " failed", domain = NA)
---
>             warning(gettextf("running 'msgmerge' on file %s failed", sQuote(f)), domain = "R-tools")
135c135
<             message("not installing", domain = NA)
---
>             message(gettextf("not installing file %s", sQuote(f)), domain = "R-tools")
144,145c144
<             warning(sprintf("running msgfmt on %s failed", basename(f)),
<                     domain = NA, immediate. = TRUE)
---
>             warning(gettextf("running 'msgfmt' on file %s failed", basename(f)), domain = "R-tools", immediate. = TRUE)
160,161c159
<             warning(sprintf("running msgfmt on %s failed", basename(f)),
<                     domain = NA, immediate. = TRUE)
---
>             warning(gettextf("running 'msgfmt' on file %s failed", basename(f)), domain = "R-tools", immediate. = TRUE)
173,174c171
<             cfiles <- c(cfiles,
<                         dir("windows", pattern = exts, full.names = TRUE))
---
>             cfiles <- c(cfiles, dir("windows", pattern = exts, full.names = TRUE))
180c177
<     cmd <- sprintf("xgettext --keyword=_ --keyword=N_ -o %s", shQuote(ofile))
---
>     cmd <- sprintf("xgettext --keyword=_ --keyword=N_ --keyword=n_:1,2 -o %s", shQuote(ofile))
190c187
<     if(system(cmd) != 0L) stop("running xgettext failed", domain = NA)
---
>     if(system(cmd) != 0L) stop("running 'xgettext' failed", domain = "R-tools")
203c200
<             warning("running msgmerge on ",  f, " failed", domain = NA)
---
>             warning(gettextf("running 'msgmerge' on file %s failed", sQuote(f)), domain = "R-tools")
209c206
<             message("not installing", domain = NA)
---
>             message(gettextf("not installing file %s", sQuote(f)), domain = "R-tools")
218,219c215
<             warning(sprintf("running msgfmt on %s failed", basename(f)),
<                     domain = NA)
---
>             warning(sprintf("running 'msgfmt' on file %s failed", basename(f)), domain = "R-tools")
232,233c228
<             warning(sprintf("running msgfmt on %s failed", basename(f)),
<                     domain = NA)
---
>             warning(sprintf("running 'msgfmt' on file %s failed", basename(f)), domain = "R-tools")
272c267
<     if(system(cmd) != 0L) stop("running xgettext failed", domain = NA)
---
>     if(system(cmd) != 0L) stop("running xgettext failed", domain = "R-tools")
282c277
<             warning("running msgmerge failed", domain = NA)
---
>             warning("running 'msgmerge' failed", domain = "R-tools")
296,297c291
<             warning(sprintf("running msgfmt on %s failed", basename(f)),
<                     domain = NA)
---
>             warning(sprintf("running 'msgfmt' on file %s failed", basename(f)), domain = "R-tools")
315,316c309
<     deps <- sprintf("Depends: R (>= %s.%d.0), R (< %d.%d.0)",
<                     ver[1], ver[2], ver[1], ver[2] + 1)
---
>     deps <- sprintf("Depends: R (>= %s.%d.0), R (< %d.%d.0)", ver[1], ver[2], ver[1], ver[2] + 1)
321c314
<     if(system(cmd) != 0L) stop("R CMD build failed")
---
>     if(system(cmd) != 0L) stop("'R CMD build' failed")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/update_packages.R R/src/library/tools/R/update_packages.R
57,59c57
<         warning("PACKAGES files do not include MD5 sums in the win.binary case",
<                 ", so strict checking is impossible. Calling down to write_PACKAGES ",
<                 "directly.")
---
>         warning("PACKAGES files do not include MD5 sums in the win.binary case, so strict checking is impossible. Calling down to write_PACKAGES directly.")
63c61
<         warning("No existing PACKAGES file found at ", PKGSfile)
---
>         warning(gettextf("No existing PACKAGES file found at %s", PKGSfile))
80c78
<         warning("Specified fields no present in existing PACKAGES file: ",
---
>         warning("Specified fields not present in existing PACKAGES file: ",
101,104c99,103
<         message("Updating existing repository [strict mode: ",
<                 if(strict) "ON" else "OFF",
<                 "]\nDetected PACKAGES file with ", nrow(retdat),
<                 " entries at ", PKGSfile)
---
> 	    if(strict) {
>         message(sprintf(ngettext(nrow(retdat), "Updating existing repository [strict mode: ON]\nDetected PACKAGES file with %d entry at %s", "Updating existing repository [strict mode: ON]\nDetected PACKAGES file with %d entries at %s", domain = "R-tools"), nrow(retdat), PKGSfile), domain = NA)
> 	    } else {
>         message(sprintf(ngettext(nrow(retdat), "Updating existing repository [strict mode: OFF]\nDetected PACKAGES file with %d entry at %s", "Updating existing repository [strict mode: OFF]\nDetected PACKAGES file with %d entries at %s", domain = "R-tools"), nrow(retdat), PKGSfile), domain = NA)
> 	    }
113c112
<         stop("unable to find any package tarballs in ", dir)
---
>         stop(gettextf("unable to find any package tarballs in %s", dir))
137,139c136
<         msg <- paste("Tarballs found for", sum(keeprows), " of ",
<                      nrow(retdat), "existing PACKAGES entries.")
<         message(msg)
---
>         message(sprintf(ngettext(nrow(retdat), "Tarballs found for %d of %d existing PACKAGES entry.", "Tarballs found for %d of %d existing PACKAGES entries.", domain = "R-tools"), sum(keeprows), nrow(retdat)), domain = NA)
150,152c147
<             msg <- paste(length(toonew), " tarball(s) matching existing entries are ",
<                          "newer than PACKAGES file and must be reprocessed.")
<             message(msg)
---
>             message(sprintf(ngettext(length(toonew), "%d tarball matching existing entries are newer than PACKAGES file and must be reprocessed.", "%d tarball(s) matching existing entries are newer than PACKAGES file and must be reprocessed.", domain = "R-tools"), length(toonew)), domain = NA)
173,175c168
<             msg <- paste("[strict mode] Checking if MD5sums match ",
<                          "for existing tarballs")
<             message(msg)
---
>             message("[strict mode] Checking if MD5sums match for existing tarballs")
182,184c175
<             msg <- paste0("Detected ", length(notokinds), " MD5sum mismatches",
<                           " between existing PACKAGES file and tarballs")
<             warning(msg)
---
>             warning(sprintf(ngettext(length(notokinds), "Detected %d MD5sum mismatch between existing PACKAGES file and tarballs", "Detected %d MD5sum mismatches between existing PACKAGES file and tarballs", domain = "R-tools"), length(notokinds)), domain = NA)
244c235
<             message("Found ", numnew, " package versions to process.")
---
>             message(sprintf(ngettext(numnew, "Found %d package version to process.", "Found %d package versions to process.", domain = "R-tools"), numnew), domain = NA)
274,276c265
<             msg <- paste("Processed", nrow(newpkgdf), "entries from ",
<                          "package tarballs.")
<             message(msg)
---
>             message(sprintf(ngettext(nrow(newpkgdf), "Processed %d entry from package tarballs.", "Processed %d entries from package tarballs.", domain = "R-tools"), nrow(newpkgdf)), domain = NA)
289,291c278,280
<             msg <- paste(sum(retdat$IsNew), "entries added or updated, ",
<                          sum(!retdat$IsNew), " entries retained unchanged.")
<             message(msg)
---
>             msg <- paste(sprintf(ngettext(sum(retdat$IsNew), "%d entry added or updated", "%d entries added or updated", domain = "R-tools"), sum(retdat$IsNew)), ", ",
>                          sprintf(ngettext(sum(!retdat$IsNew), "%d entry retained unchanged.", "%d entries retained unchanged.", domain = "R-tools"), sum(!retdat$IsNew)), sep = "")
>             message(msg, domain = NA)
299,301c288
<         msg <- paste("Final updated PACKAGES db contains ",
<                      nrow(retdat), " entries.")
<         message(msg)
---
>         message(sprintf(ngettext(nrow(retdat), "Final updated PACKAGES db contains %d entry" , "Final updated PACKAGES db contains %d entries", domain = "R-tools"), nrow(retdat)), domain = NA)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/urltools.R R/src/library/tools/R/urltools.R
293c293
<             message(sprintf("processing %s", p))
---
>             message(gettextf("processing %s", p))
507c507
<                              m = rep.int("Empty URL", len)))
---
>                              m = rep.int(gettext("Empty URL", domain = "R-tools"), len)))
521c521
<         msg <- rep.int("Invalid URI scheme", len)
---
>         msg <- rep.int(gettext("Invalid URI scheme", domain = "R-tools"), len)
524c524
<             msg[doi] <- paste(msg[doi], "(use \\doi for DOIs in Rd markup)")
---
>             msg[doi] <- gettext("Invalid URI scheme (use \\doi for DOIs in Rd markup)", domain = "R-tools")
630c630
<         message(sprintf("processing %s", u))
---
>         message(gettextf("processing %s", u))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/utils.R R/src/library/tools/R/utils.R
40c40
<         stop("'x' must be a single character string")
---
>         stop(gettextf("'%s' argument must be a single character string", "x"))
42,43c42
<         stop(gettextf("file '%s' does not exist", x),
<              domain = NA)
---
>         stop(gettextf("file %s does not exist", sQuote(x)), domain = "R-tools")
81,82c80
<            stop(gettextf("test '%s' is not available", op),
<                 domain = NA))
---
>            stop(gettextf("test %s is not available", sQuote(op)), domain = "R-tools"))
128,129c126
<         list_files_with_exts(dir, exts, all.files = all.files,
<                              full.names = full.names)
---
>         list_files_with_exts(dir, exts, all.files = all.files, full.names = full.names)
201c198
<         stop("argument 'x' must be a character vector")
---
>         stop(gettextf("'%s' argument must be a character vector", "x"))
204c201
<         stop("argument 'delim' must specify two characters")
---
>         stop("'delim' argument must specify two characters")
206c203
<         stop("only Rd syntax is currently supported")
---
>         stop("currently only Rd syntax is supported")
241,242c238
<             files <- setdiff(list.files(all.files = TRUE),
<                              c(".", "..", out_file, pre_files))
---
>             files <- setdiff(list.files(all.files = TRUE), c(".", "..", out_file, pre_files))
350c346
<                 errors <- paste0("LaTeX errors:\n",
---
>                 errors <- paste0(gettext("LaTeX errors:"),
358c354
<                 errors <- paste0("BibTeX errors:\n",
---
>                 errors <- paste0(gettext("BibTeX errors:"),
369c365
<             msg <- gettextf("Running 'texi2dvi' on '%s' failed.", file)
---
>             msg <- gettextf("Running 'texi2dvi' on file %s failed.", sQuote(file))
376c372
<                 msg <- paste(msg, "Messages:",
---
>                 msg <- paste(msg, gettext("Messages:"),
380c376
<                 msg <- paste(msg, "Output:",
---
>                 msg <- paste(msg, gettext("Output:"),
388c384
<             stop(msg, domain = NA)
---
>             stop(msg, domain = "R-tools")
423c419
<                 msg <- paste(msg, "LaTeX errors:",
---
>                 msg <- paste(msg, gettext("LaTeX errors:"),
432c428
<                 msg <- paste(msg, "BibTeX errors:",
---
>                 msg <- paste(msg, gettext("BibTeX errors:"),
439,441c435,436
<             msg <- paste(gettextf("running 'texi2dvi' on '%s' failed", file),
<                          msg, "", sep = "\n")
<             stop(msg, call. = FALSE, domain = NA)
---
>             msg <- paste(gettextf("running 'texi2dvi' on file %s failed", sQuote(file)), msg, "", sep = "\n")
>             stop(msg, call. = FALSE, domain = "R-tools")
454,455c449,452
<             stop(if(pdf) "pdflatex" else "latex", " is not available",
<                  domain = NA)
---
> 		  if(pdf)
> 		    stop(gettextf("%s command is not available", sQuote("pdflatex")), domain = "R-tools")
> 		  else
> 		    stop(gettextf("%s command is not available", sQuote("latex")), domain = "R-tools")
464,465c461
<             stop(gettextf("unable to run '%s' on '%s'", latex, file),
<                  domain = NA)
---
>             stop(gettextf("unable to run %s command on file %s", sQuote(latex), sQuote(file)), domain = "R-tools")
475,477c471
<                     stop(gettextf("unable to run '%s' on '%s'",
<                                   makeindex, idxfile),
<                          domain = NA)
---
>                     stop(gettextf("unable to run %s command on file %s", sQuote(makeindex), sQuote(idxfile)), domain = "R-tools")
482,483c476,477
<                     paste0("LaTeX errors:\n",
<                            paste(lines, collapse = "\n"))
---
>                     paste(gettext("LaTeX errors:", domain = "R-tools"),
>                           paste(lines, collapse = "\n"), sep = "\n")
485c479
<                 stop(paste(gettextf("unable to run %s on '%s'", latex, file),
---
>                 stop(paste(gettextf("unable to run %s command on file %s", sQuote(latex), sQuote(file), domain = "R-tools"),
585,586c579
<         file_path_sans_ext(system.file("help", "tools.rdb",
<                                        package = "tools"))
---
>         file_path_sans_ext(system.file("help", "tools.rdb", package = "tools"))
605,606c598
<         warning(gettextf("cannot coerce %s to logical", sQuote(val)),
<                 domain = NA)
---
>         warning(gettextf("cannot coerce %s to logical", sQuote(val)))
818,819c810
<          regexpr("There (was|were) ([0123456789]+) error messages?",
<                  lines[length(lines)]) > -1L)
---
>          regexpr("There (was|were) ([0123456789]+) error messages?", lines[length(lines)]) > -1L)
1296,1297c1287
<         texi <- file.path(.R_top_srcdir_from_Rd(),
<                           "doc", "manual", "R-exts.texi")
---
>         texi <- file.path(.R_top_srcdir_from_Rd(), "doc", "manual", "R-exts.texi")
1887c1877
<         stop(gettextf("file '%s' does not exist", dfile), domain = NA)
---
>         stop(gettextf("file %s does not exist", sQuote(dfile)), domain = "R-tools")
1892,1894c1882
<                     stop(gettextf("file '%s' is not in valid DCF format",
<                                   dfile),
<                          domain = NA, call. = FALSE))
---
>                     stop(gettextf("file %s is not in valid DCF format", sQuote(dfile)), domain = "R-tools", call. = FALSE))
1896c1884
<         stop("contains a blank line", call. = FALSE)
---
>         stop(gettextf("file %s contains a blank line", sQuote(dfile)), call. = FALSE)
1944,1945c1932
<             warning(gettext("Unknown encoding with non-ASCII data: converting to ASCII"),
<                     domain = NA)
---
>             warning(gettext("Unknown encoding with non-ASCII data: converting to ASCII"), domain = "R-tools")
2090c2077
<         stop("unable to create ", con)
---
>         stop(gettextf("unable to create file %s", con))
2104,2105c2091
<                  stop("cannot source package code:\n", conditionMessage(e),
<                       call. = FALSE))
---
>                  stop("cannot source package code:", "\n", conditionMessage(e), call. = FALSE))
2187c2173
<                                          "\nCall sequence:\n",
---
>                                          "\n", gettext("Call sequence:", domain = "R-tools"), "\n",
2216c2202
<             message(sprintf("processing %s", basename(p)))
---
>             message(gettextf("processing directory %s", sQuote(basename(dir))))
2246,2254c2232,2233
<     else if(len == 1L)
<         paste("argument", sQuote(args), msg)
<     else
<         paste("arguments",
<               paste0(c(rep.int("", len - 1L), "and "),
<                      sQuote(args),
<                      c(rep.int(", ", len - 1L), ""),
<                      collapse = ""),
<               msg)
---
>     else if(len >= 1L)
> 	paste(sprintf(ngettext(len, "argument %s", "arguments %s"), paste(sQuote(args), collapse = ", ")), msg)
2337c2316
<         stop("'text' must be a character vector")
---
>         stop(gettextf("'%s' argument must be a character vector", "text"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/R/xgettext.R R/src/library/tools/R/xgettext.R
41c41
<         find_strings2 <- function(e, suppress) {
---
>         find_strings2 <- function(e, olde, suppress) {
43c43,45
<                 if(!suppress) strings <<- c(strings, e)
---
> 		e <- sub("^[ \t\n]*", "", e)
>         	e <- sub("[ \t\n]*$", "", e)
>                 if(!suppress) strings <<- c(strings, list(c(msg = e, cmd = olde)))
44a47
> 	 	        olde <- paste(deparse(e), sep = "", collapse = "")
57c60
<                 for(i in seq_along(e)) find_strings2(e[[i]], suppress)
---
>                 for(i in seq_along(e)) find_strings2(e[[i]], olde, suppress)
64a68
> 	 	        olde <- paste(deparse(e), sep = "", collapse = "")
71c75,77
<                  if(!suppress) strings <<- c(strings, as.character(e)[-1L])
---
> 		e <- sub("^[ \t\n]*", "", as.character(e)[-1L])
>         	e <- sub("[ \t\n]*$", "", e)
>                  if(!suppress) strings <<- c(strings, list(c(msg = e, cmd = olde)))
77c83
<                  for(i in seq_along(e)) find_strings2(e[[i]], suppress)
---
>                  for(i in seq_along(e)) find_strings2(e[[i]], olde, suppress)
84,85c90,91
<         if(verbose) message(gettextf("parsing '%s'", f), domain = NA)
<         strings <- character()
---
>         if(verbose) message(gettextf("parsing file %s", sQuote(f)), domain = "R-tools")
>         strings <- list()
88,90c94
<         strings <- sub("^[ \t\n]*", "", strings)
<         strings <- sub("[ \t\n]*$", "", strings)
<         out[[f]] <- structure(unique(strings), class="xgettext")
---
>         out[[f]] <- structure(strings, class="xgettext")
98c102,105
<     cat(encodeString(x), sep = "\n")
---
>     lapply(x, function(x)
>            cat("\nmsgid        = ", encodeString(x[1L]),
>                "\ncommand      = ", encodeString(x[2L]),
>                "\n", sep = ""))
107,108c114,116
<             "\nmsgid_plural = ", e[2L], "\n", sep = "")
<     })
---
>                "\nmsgid_plural = ", e[2L],
> 		       "\ncommand      = ", e[3L],
>                "\n", sep = "")})
129a138
> 	    olde <- paste(deparse(e), sep = "", collapse = "")
136c145,146
< 	    				      msg2 = e[["msg2"]])))
---
> 	    				      msg2 = e[["msg2"]],
> 					      cmd  = olde)))
142c152
<         if(verbose) message(gettextf("parsing '%s'", f), domain = NA)
---
>         if(verbose) message(gettextf("parsing file %s", sQuote(f)), domain = "R-tools")
157,158c167,181
<     tmp <- unique(unlist(xgettext(dir, asCall = FALSE)))
<     tmp <- tmp[nzchar(tmp)]
---
>     tmp <- unlist(xgettext(dir, asCall = FALSE))
>     ind <- 2*seq_len(length(tmp)/2)-1
>     tmp <- data.frame(msg = tmp[ind], Cmd = tmp[ind+1], location = names(tmp[ind]), stringsAsFactors=FALSE, row.names = NULL)
>     tmp <- tmp[order(tmp[, "msg"]), ]
>     regpth <- paste(dir, "/", sep = "", collapse = "")
>     tmp[,"Cmd"] <- paste(sub("\\.msg[0-9]*$", ": ", sub(regpth, "#. ", tmp[,"location"])), tmp[,"Cmd"], "\n", sep = "")
>     tmp[,"location"] <- sub("\\.msg[0-9]*$", ": 0", sub(regpth, "\n#: ", tmp[,"location"]))
>     for(i in seq_len(nrow(tmp)-1)) 
>       if(tmp[i,"msg"] == tmp[i+1,"msg"]) {
>         if(tmp[i,"location"] != tmp[i+1,"location"])
> 		 tmp[i+1,"location"] <- paste(tmp[i,"location"], tmp[i+1,"location"], sep = "", collapse = "")
> 		tmp[i+1,"Cmd"] <- paste(tmp[i,"Cmd"], tmp[i+1,"Cmd"], sep = "", collapse = "")
>         tmp[i, ] <- ""
>       }
>     tmp <- tmp[nzchar(tmp[,"msg"]), ]
160c183
< 	tmp <- shQuote(encodeString(tmp), type="cmd")  # need to quote \n, \t etc
---
>     tmp[,"msg"] <- shQuote(encodeString(tmp[,"msg"]), type="cmd")  # need to quote \n, \t etc
180,192c203,230
<     for(e in tmp)
<         writeLines(con=con, c('', paste('msgid', e), 'msgstr ""'))
<     tmp <- xngettext(dir)
<     un <- unique(unlist(tmp, recursive=TRUE))
<     for(ee in tmp)
<         for(e in ee)
<             if(e[1L] %in% un) {
<                 writeLines(con=con, c('',
<                            paste('msgid       ',
<                                  shQuote(encodeString(e[1L]), type="cmd")),
<                            paste('msgid_plural',
<                                  shQuote(encodeString(e[2L]), type="cmd")),
<                            'msgstr[0]    ""', 'msgstr[1]    ""')
---
>     for(i in seq_len(nrow(tmp)))
>       writeLines(con=con, c("", tmp[i, "location"],
> 				tmp[i, "Cmd"],
> 				paste('msgid', tmp[i, "msg"]),
> 				'msgstr ""'))
>     tmp <- unlist(xngettext(dir), recursive=TRUE)
>     if(!is.null(tmp)) {
>     ind <- 3*seq_len(length(tmp)/3)-2
>     tmp2 <- data.frame(Smsg = tmp[ind], Pmsg = tmp[ind + 1], Cmd = tmp[ind + 2], location = names(tmp[ind]), stringsAsFactors=FALSE, row.names = NULL)
>     regpth <- paste(dir, "/", sep = "", collapse = "")
>     tmp2[,"Cmd"] <- paste(sub("\\.msg[0-9]*$", ": ", sub(regpth, "#. ", tmp2[,"location"])), tmp2[,"Cmd"], "\n", sep = "")
>     tmp2[,"location"] <- sub("\\.msg[0-9]*$", ": 0", sub(regpth, "\n#: ", tmp2[,"location"]))
>     tmp2 <- tmp2[order(tmp2[, "Smsg"]), ]
>     for(i in seq_len(nrow(tmp2)-1)) 
>       if(tmp2[i,"Smsg"] == tmp2[i+1,"Smsg"]) {
>         if(tmp2[i,"location"] != tmp2[i+1,"location"]) 
> 	   tmp2[i+1,"location"] <- paste(tmp2[i,"location"], tmp2[i+1,"location"], sep = "", collapse = "")
> 	   tmp2[i+1,"Cmd"] <- paste(tmp2[i,"Cmd"], tmp2[i+1,"Cmd"], sep = "", collapse = "")
>         tmp2[i, ] <- ""
>       }
>     tmp2 <- tmp2[nzchar(tmp2[,"location"]), ]
>     for(i in seq_len(nrow(tmp2)))
>       writeLines(con=con, c("", tmp2[i, "location"],
> 				tmp2[i, "Cmd"],
>                             paste('msgid       ', shQuote(encodeString(tmp2[i, "Smsg"]), type="cmd")),
>                             paste('msgid_plural', shQuote(encodeString(tmp2[i, "Pmsg"]), type="cmd")),
>                             'msgstr[0]    ""',
>                             'msgstr[1]    ""')
194d231
<                 un <- un[-match(e, un)]
276c313
< 			    diff <- "too many entries"
---
> 			    diff <- gettext("too many entries")
279c316
< 			    diff <- "too few entries"
---
> 			    diff <- gettext("too few entries")
285,288c322,330
< 			    if (nzchar(diff))
< 			    	diff <- paste0(diff, ", ")
< 			    if (length(diffs) > 1)
< 				diff <- paste(paste0(diff, "differences in entries"),
---
> 			    if (nzchar(diff)) {
> 				diff <- paste(diff, ", ", sprintf(ngettext(length(diffs),
> 								"difference in entry %s",
> 								"differences in entries %s", domain = "R-tools"),
> 								diff, paste(diffs, collapse = ", ")), sep = "")
> 				} else {
> 				diff <- sprintf(ngettext(length(diffs),
> 								"difference in entry %s",
> 								"differences in entries %s", domain = "R-tools"),
290,292c332
< 			    else
< 				diff <- paste(paste0(diff, "difference in entry"),
< 				              diffs)
---
> 					}
295c335
< 			    diff <- paste0(diff, ", translation contains arabic percent sign U+066A")
---
> 			    diff <- paste0(diff, ", ", gettext("translation contains arabic percent sign U+066A", domain = "R-tools"))
297c337
< 			    diff <- paste0(diff, ", translation contains small percent sign U+FE6A")
---
> 			    diff <- paste0(diff, ", ", gettext("translation contains small percent sign U+FE6A", domain = "R-tools"))
299c339
< 			    diff <- paste0(diff, ", translation contains wide percent sign U+FF05")
---
> 			    diff <- paste0(diff, ", ", gettext("translation contains wide percent sign U+FF05", domain = "R-tools"))
331c371
< 	cat("No errors\n")
---
> 	cat(gettext("No errors", domain = "R-tools"), "\n", sep = "")
333c373
< 	for (i in 1:nrow(x)) {
---
> 	for (i in seq_len(nrow(x))) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/Rmd5.c R/src/library/tools/src/Rmd5.c
22a23
> #include "localization.h"
36c37
<     if(!isString(files)) error(_("argument 'files' must be character"));
---
>     if(!isString(files)) error(_("'%s' argument must be character"), "files");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/getfmts.c R/src/library/tools/src/getfmts.c
28,36c28
< 
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
< 
---
> #include "localization.h"
61c53
<      if (n >= MAXNARGS) error(_("only %d arguments are allowed"), MAXNARGS); \
---
>      if (n >= MAXNARGS) error(n_("only %d argument is allowed", "only %d arguments are allowed", MAXNARGS), MAXNARGS); \
66c58
<     if (!isString(format)) error(_("'fmt' is not a character vector"));
---
>     if (!isString(format)) error(_("'%s' argument is not a character vector"), "fmt");
69c61
<         error(_("'fmt' must be length 1"));
---
>         error(_("'%s' argument must be length 1"), "fmt");
75c67
< 	error(_("'fmt' length exceeds maximal format length %d"), MAXLINE);
---
> 	error(_("length of '%s' argument exceeds maximal format length %d"), "fmt", MAXLINE);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/gramLatex.c R/src/library/tools/src/gramLatex.c
1c1
< /* A Bison parser, made by GNU Bison 3.0.4.  */
---
> /* A Bison parser, made by GNU Bison 3.3.2.  */
5c5,6
<    Copyright (C) 1984, 1989-1990, 2000-2015 Free Software Foundation, Inc.
---
>    Copyright (C) 1984, 1989-1990, 2000-2015, 2018-2019 Free Software Foundation,
>    Inc.
42a44,46
> /* Undocumented macros, especially those whose name start with YY_,
>    are private implementation details.  Do not rely on them.  */
> 
47c51
< #define YYBISON_VERSION "3.0.4"
---
> #define YYBISON_VERSION "3.3.2"
64c68
< /* Copy the first part of user declarations.  */
---
> /* First part of user prologue.  */
99,105c103
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
223c220,221
< #  if defined __cplusplus && 201103L <= __cplusplus
---
> #  if defined __cplusplus
> #   if 201103L <= __cplusplus
227a226,228
> #  else
> #   define YY_NULLPTR ((void*)0)
> #  endif
300,301d300
< /* Copy the second part of user declarations.  */
< 
323c322
< typedef unsigned short int yytype_uint16;
---
> typedef unsigned short yytype_uint16;
329c328
< typedef short int yytype_int16;
---
> typedef short yytype_int16;
341c340
< #  define YYSIZE_T unsigned int
---
> #  define YYSIZE_T unsigned
377,385d375
< #if !defined _Noreturn \
<      && (!defined __STDC_VERSION__ || __STDC_VERSION__ < 201112)
< # if defined _MSC_VER && 1200 <= _MSC_VER
< #  define _Noreturn __declspec (noreturn)
< # else
< #  define _Noreturn YY_ATTRIBUTE ((__noreturn__))
< # endif
< #endif
< 
393c383
< #if defined __GNUC__ && 407 <= __GNUC__ * 100 + __GNUC_MINOR__
---
> #if defined __GNUC__ && ! defined __ICC && 407 <= __GNUC__ * 100 + __GNUC_MINOR__
557,558d546
< /* YYTRANSLATE[YYX] -- Symbol number corresponding to YYX as returned
<    by yylex, with out-of-bounds checking.  */
561a550,551
> /* YYTRANSLATE(TOKEN-NUM) -- Symbol number corresponding to TOKEN-NUM
>    as returned by yylex, with out-of-bounds checking.  */
563c553
<   ((unsigned int) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
---
>   ((unsigned) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
566c556
<    as returned by yylex, without out-of-bounds checking.  */
---
>    as returned by yylex.  */
602,604c592,594
<        0,   171,   171,   172,   173,   176,   177,   178,   179,   181,
<      182,   184,   185,   186,   187,   188,   189,   191,   191,   195,
<      197,   198
---
>        0,   165,   165,   166,   167,   170,   171,   172,   173,   175,
>      176,   178,   179,   180,   181,   182,   183,   185,   185,   189,
>      191,   192
815c805
< static unsigned
---
> static int
818c808
<   unsigned res = 0;
---
>   int res = 0;
861,863c851,853
< /*----------------------------------------.
< | Print this symbol's value on YYOUTPUT.  |
< `----------------------------------------*/
---
> /*-----------------------------------.
> | Print this symbol's value on YYO.  |
> `-----------------------------------*/
866c856
< yy_symbol_value_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
---
> yy_symbol_value_print (FILE *yyo, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
868,869c858,859
<   FILE *yyo = yyoutput;
<   YYUSE (yyo);
---
>   FILE *yyoutput = yyo;
>   YYUSE (yyoutput);
875c865
<     YYPRINT (yyoutput, yytoknum[yytype], *yyvaluep);
---
>     YYPRINT (yyo, yytoknum[yytype], *yyvaluep);
881,883c871,873
< /*--------------------------------.
< | Print this symbol on YYOUTPUT.  |
< `--------------------------------*/
---
> /*---------------------------.
> | Print this symbol on YYO.  |
> `---------------------------*/
886c876
< yy_symbol_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
---
> yy_symbol_print (FILE *yyo, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
888c878
<   YYFPRINTF (yyoutput, "%s %s (",
---
>   YYFPRINTF (yyo, "%s %s (",
891,894c881,884
<   YY_LOCATION_PRINT (yyoutput, *yylocationp);
<   YYFPRINTF (yyoutput, ": ");
<   yy_symbol_value_print (yyoutput, yytype, yyvaluep, yylocationp);
<   YYFPRINTF (yyoutput, ")");
---
>   YY_LOCATION_PRINT (yyo, *yylocationp);
>   YYFPRINTF (yyo, ": ");
>   yy_symbol_value_print (yyo, yytype, yyvaluep, yylocationp);
>   YYFPRINTF (yyo, ")");
928c918
<   unsigned long int yylno = yyrline[yyrule];
---
>   unsigned long yylno = yyrline[yyrule];
939c929
<                        &(yyvsp[(yyi + 1) - (yynrhs)])
---
>                        &yyvsp[(yyi + 1) - (yynrhs)]
1043c1033,1036
<             /* Fall through.  */
---
>             else
>               goto append;
> 
>           append:
1061c1054
<   return yystpcpy (yyres, yystr) - yyres;
---
>   return (YYSIZE_T) (yystpcpy (yyres, yystr) - yyres);
1139,1141c1132
<                   if (! (yysize <= yysize1
<                          && yysize1 <= YYSTACK_ALLOC_MAXIMUM))
<                     return 2;
---
>                   if (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM)
1142a1134,1135
>                   else
>                     return 2;
1153a1147
>     default: /* Avoid compiler warnings. */
1165,1166c1159
<     if (! (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM))
<       return 2;
---
>     if (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM)
1167a1161,1162
>     else
>       return 2;
1219c1214
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1225c1220
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1231c1226
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1237c1232
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1243c1238
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1348c1343
< | yynewstate -- Push a new state, which is found in yystate.  |
---
> | yynewstate -- push a new state, which is found in yystate.  |
1354a1350,1353
> 
> /*--------------------------------------------------------------------.
> | yynewstate -- set current state (the top of the stack) to yystate.  |
> `--------------------------------------------------------------------*/
1356c1355
<   *yyssp = yystate;
---
>   *yyssp = (yytype_int16) yystate;
1358a1358,1360
> #if !defined yyoverflow && !defined YYSTACK_RELOCATE
>     goto yyexhaustedlab;
> #else
1361c1363
<       YYSIZE_T yysize = yyssp - yyss + 1;
---
>       YYSIZE_T yysize = (YYSIZE_T) (yyssp - yyss + 1);
1363c1365
< #ifdef yyoverflow
---
> # if defined yyoverflow
1381,1382d1382
< 
<         yyls = yyls1;
1384a1385
>         yyls = yyls1;
1386,1389c1387
< #else /* no yyoverflow */
< # ifndef YYSTACK_RELOCATE
<       goto yyexhaustedlab;
< # else
---
> # else /* defined YYSTACK_RELOCATE */
1411d1408
< #endif /* no yyoverflow */
1418c1415
<                   (unsigned long int) yystacksize));
---
>                   (unsigned long) yystacksize));
1422a1420
> #endif /* !defined yyoverflow && !defined YYSTACK_RELOCATE */
1508c1506
< | yyreduce -- Do a reduction.  |
---
> | yyreduce -- do a reduction.  |
1525a1524
>   yyerror_range[1] = yyloc;
1531c1530
<     { xxsavevalue((yyvsp[-1]), &(yyloc)); YYACCEPT; }
---
>     { xxsavevalue(yyvsp[-1], &(yyloc)); YYACCEPT; }
1549c1548
<     { (yyval) = xxnewlist((yyvsp[0])); }
---
>     { yyval = xxnewlist(yyvsp[0]); }
1555c1554
<     { (yyval) = xxnewlist((yyvsp[0])); }
---
>     { yyval = xxnewlist(yyvsp[0]); }
1561c1560
<     { (yyval) = xxlist((yyvsp[-1]), (yyvsp[0])); }
---
>     { yyval = xxlist(yyvsp[-1], yyvsp[0]); }
1567c1566
<     { (yyval) = xxlist((yyvsp[-1]), (yyvsp[0])); }
---
>     { yyval = xxlist(yyvsp[-1], yyvsp[0]); }
1573c1572
<     { (yyval) = xxnewlist((yyvsp[0])); }
---
>     { yyval = xxnewlist(yyvsp[0]); }
1579c1578
<     { (yyval) = xxlist((yyvsp[-1]), (yyvsp[0])); }
---
>     { yyval = xxlist(yyvsp[-1], yyvsp[0]); }
1585c1584
<     { (yyval) = xxtag((yyvsp[0]), TEXT, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], TEXT, &(yyloc)); }
1591c1590
<     { (yyval) = xxtag((yyvsp[0]), COMMENT, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], COMMENT, &(yyloc)); }
1597c1596
<     { (yyval) = xxtag((yyvsp[0]), MACRO, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], MACRO, &(yyloc)); }
1603c1602
<     { (yyval) = xxtag((yyvsp[0]), VERB, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], VERB, &(yyloc)); }
1609c1608
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
1615c1614
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
1621c1620
<     { xxSetInVerbEnv((yyvsp[-1])); }
---
>     { xxSetInVerbEnv(yyvsp[-1]); }
1627,1628c1626,1627
<     { (yyval) = xxenv((yyvsp[-7]), (yyvsp[-4]), (yyvsp[-1]), &(yyloc));
<                                                   RELEASE_SV((yyvsp[-9])); RELEASE_SV((yyvsp[-3])); }
---
>     { yyval = xxenv(yyvsp[-7], yyvsp[-4], yyvsp[-1], &(yyloc));
>                                                   RELEASE_SV(yyvsp[-9]); RELEASE_SV(yyvsp[-3]); }
1634c1633
<     { (yyval) = xxmath((yyvsp[-1]), &(yyloc)); }
---
>     { yyval = xxmath(yyvsp[-1], &(yyloc)); }
1640c1639
<     { (yyval) = xxblock((yyvsp[-1]), &(yyloc)); }
---
>     { yyval = xxblock(yyvsp[-1], &(yyloc)); }
1646c1645
<     { (yyval) = xxblock(NULL, &(yyloc)); }
---
>     { yyval = xxblock(NULL, &(yyloc)); }
1677,1684c1676,1682
< 
<   yyn = yyr1[yyn];
< 
<   yystate = yypgoto[yyn - YYNTOKENS] + *yyssp;
<   if (0 <= yystate && yystate <= YYLAST && yycheck[yystate] == *yyssp)
<     yystate = yytable[yystate];
<   else
<     yystate = yydefgoto[yyn - YYNTOKENS];
---
>   {
>     const int yylhs = yyr1[yyn] - YYNTOKENS;
>     const int yyi = yypgoto[yylhs] + *yyssp;
>     yystate = (0 <= yyi && yyi <= YYLAST && yycheck[yyi] == *yyssp
>                ? yytable[yyi]
>                : yydefgoto[yylhs]);
>   }
1766a1765,1768
>   /* Pacify compilers when the user code never invokes YYERROR and the
>      label yyerrorlab therefore never appears in user code.  */
>   if (0)
>     YYERROR;
1768,1774d1769
<   /* Pacify compilers like GCC when the user code never invokes
<      YYERROR and the label yyerrorlab therefore never appears in user
<      code.  */
<   if (/*CONSTCOND*/ 0)
<      goto yyerrorlab;
< 
<   yyerror_range[1] = yylsp[1-yylen];
1856a1854,1857
> 
> /*-----------------------------------------------------.
> | yyreturn -- parsing is finished, return the result.  |
> `-----------------------------------------------------*/
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/gramLatex.y R/src/library/tools/src/gramLatex.y
34,40c34
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/gramRd.c R/src/library/tools/src/gramRd.c
1c1
< /* A Bison parser, made by GNU Bison 3.0.4.  */
---
> /* A Bison parser, made by GNU Bison 3.3.2.  */
5c5,6
<    Copyright (C) 1984, 1989-1990, 2000-2015 Free Software Foundation, Inc.
---
>    Copyright (C) 1984, 1989-1990, 2000-2015, 2018-2019 Free Software Foundation,
>    Inc.
42a44,46
> /* Undocumented macros, especially those whose name start with YY_,
>    are private implementation details.  Do not rely on them.  */
> 
47c51
< #define YYBISON_VERSION "3.0.4"
---
> #define YYBISON_VERSION "3.3.2"
64c68
< /* Copy the first part of user declarations.  */
---
> /* First part of user prologue.  */
97,104c101,103
< #include <Rmath.h> /* for imax2(.),..*/
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
---
> #include <Rmath.h>
> #include <R_ext/Minmax.h>
> #include "localization.h"
260c258,259
< #  if defined __cplusplus && 201103L <= __cplusplus
---
> #  if defined __cplusplus
> #   if 201103L <= __cplusplus
264a264,266
> #  else
> #   define YY_NULLPTR ((void*)0)
> #  endif
403,404d404
< /* Copy the second part of user declarations.  */
< 
426c426
< typedef unsigned short int yytype_uint16;
---
> typedef unsigned short yytype_uint16;
432c432
< typedef short int yytype_int16;
---
> typedef short yytype_int16;
444c444
< #  define YYSIZE_T unsigned int
---
> #  define YYSIZE_T unsigned
480,488d479
< #if !defined _Noreturn \
<      && (!defined __STDC_VERSION__ || __STDC_VERSION__ < 201112)
< # if defined _MSC_VER && 1200 <= _MSC_VER
< #  define _Noreturn __declspec (noreturn)
< # else
< #  define _Noreturn YY_ATTRIBUTE ((__noreturn__))
< # endif
< #endif
< 
496c487
< #if defined __GNUC__ && 407 <= __GNUC__ * 100 + __GNUC_MINOR__
---
> #if defined __GNUC__ && ! defined __ICC && 407 <= __GNUC__ * 100 + __GNUC_MINOR__
660,661d650
< /* YYTRANSLATE[YYX] -- Symbol number corresponding to YYX as returned
<    by yylex, with out-of-bounds checking.  */
664a654,655
> /* YYTRANSLATE(TOKEN-NUM) -- Symbol number corresponding to TOKEN-NUM
>    as returned by yylex, with out-of-bounds checking.  */
666c657
<   ((unsigned int) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
---
>   ((unsigned) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
669c660
<    as returned by yylex, without out-of-bounds checking.  */
---
>    as returned by yylex.  */
708,716c699,707
<        0,   224,   224,   225,   226,   229,   232,   235,   236,   238,
<      239,   240,   241,   242,   243,   244,   245,   246,   247,   248,
<      249,   250,   251,   253,   254,   256,   257,   258,   259,   260,
<      261,   262,   263,   264,   266,   267,   268,   269,   270,   271,
<      272,   273,   274,   275,   276,   277,   278,   279,   280,   281,
<      282,   284,   285,   286,   287,   289,   291,   293,   295,   297,
<      300,   303,   308,   310,   311,   320,   322,   324,   328,   329,
<      331,   333,   337,   338,   340,   343,   345,   347,   349,   351,
<      353,   355,   357,   359,   361,   362,   363,   364,   365,   367
---
>        0,   219,   219,   220,   221,   224,   227,   230,   231,   233,
>      234,   235,   236,   237,   238,   239,   240,   241,   242,   243,
>      244,   245,   246,   248,   249,   251,   252,   253,   254,   255,
>      256,   257,   258,   259,   261,   262,   263,   264,   265,   266,
>      267,   268,   269,   270,   271,   272,   273,   274,   275,   276,
>      277,   279,   280,   281,   282,   284,   286,   288,   290,   292,
>      295,   298,   303,   305,   306,   315,   317,   319,   323,   324,
>      326,   328,   332,   333,   335,   338,   340,   342,   344,   346,
>      348,   350,   352,   354,   356,   357,   358,   359,   360,   362
1157c1148
< static unsigned
---
> static int
1160c1151
<   unsigned res = 0;
---
>   int res = 0;
1203,1205c1194,1196
< /*----------------------------------------.
< | Print this symbol's value on YYOUTPUT.  |
< `----------------------------------------*/
---
> /*-----------------------------------.
> | Print this symbol's value on YYO.  |
> `-----------------------------------*/
1208c1199
< yy_symbol_value_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
---
> yy_symbol_value_print (FILE *yyo, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
1210,1211c1201,1202
<   FILE *yyo = yyoutput;
<   YYUSE (yyo);
---
>   FILE *yyoutput = yyo;
>   YYUSE (yyoutput);
1217c1208
<     YYPRINT (yyoutput, yytoknum[yytype], *yyvaluep);
---
>     YYPRINT (yyo, yytoknum[yytype], *yyvaluep);
1223,1225c1214,1216
< /*--------------------------------.
< | Print this symbol on YYOUTPUT.  |
< `--------------------------------*/
---
> /*---------------------------.
> | Print this symbol on YYO.  |
> `---------------------------*/
1228c1219
< yy_symbol_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
---
> yy_symbol_print (FILE *yyo, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
1230c1221
<   YYFPRINTF (yyoutput, "%s %s (",
---
>   YYFPRINTF (yyo, "%s %s (",
1233,1236c1224,1227
<   YY_LOCATION_PRINT (yyoutput, *yylocationp);
<   YYFPRINTF (yyoutput, ": ");
<   yy_symbol_value_print (yyoutput, yytype, yyvaluep, yylocationp);
<   YYFPRINTF (yyoutput, ")");
---
>   YY_LOCATION_PRINT (yyo, *yylocationp);
>   YYFPRINTF (yyo, ": ");
>   yy_symbol_value_print (yyo, yytype, yyvaluep, yylocationp);
>   YYFPRINTF (yyo, ")");
1270c1261
<   unsigned long int yylno = yyrline[yyrule];
---
>   unsigned long yylno = yyrline[yyrule];
1281c1272
<                        &(yyvsp[(yyi + 1) - (yynrhs)])
---
>                        &yyvsp[(yyi + 1) - (yynrhs)]
1385c1376,1379
<             /* Fall through.  */
---
>             else
>               goto append;
> 
>           append:
1403c1397
<   return yystpcpy (yyres, yystr) - yyres;
---
>   return (YYSIZE_T) (yystpcpy (yyres, yystr) - yyres);
1481,1483c1475
<                   if (! (yysize <= yysize1
<                          && yysize1 <= YYSTACK_ALLOC_MAXIMUM))
<                     return 2;
---
>                   if (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM)
1484a1477,1478
>                   else
>                     return 2;
1495a1490
>     default: /* Avoid compiler warnings. */
1507,1508c1502
<     if (! (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM))
<       return 2;
---
>     if (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM)
1509a1504,1505
>     else
>       return 2;
1561c1557
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1567c1563
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1573c1569
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1579c1575
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1585c1581
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1591c1587
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1597c1593
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1603c1599
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1609c1605
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1615c1611
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1621c1617
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1627c1623
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1633c1629
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1639c1635
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1645c1641
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1651c1647
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1657c1653
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1663c1659
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1669c1665
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1675c1671
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1681c1677
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1687c1683
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1693c1689
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1699c1695
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1705c1701
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1711c1707
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1717c1713
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1723c1719
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1729c1725
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1735c1731
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1741c1737
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1747c1743
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1753c1749
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1759c1755
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1765c1761
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1771c1767
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1777c1773
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1783c1779
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1789c1785
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1795c1791
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1801c1797
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1807c1803
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1813c1809
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1819c1815
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1825c1821
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1831c1827
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1837c1833
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1843c1839
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1849c1845
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1855c1851
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1861c1857
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1867c1863
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1873c1869
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1879c1875
<       { RELEASE_SV(((*yyvaluep))); }
---
>       { RELEASE_SV((*yyvaluep)); }
1984c1980
< | yynewstate -- Push a new state, which is found in yystate.  |
---
> | yynewstate -- push a new state, which is found in yystate.  |
1990a1987,1990
> 
> /*--------------------------------------------------------------------.
> | yynewstate -- set current state (the top of the stack) to yystate.  |
> `--------------------------------------------------------------------*/
1992c1992
<   *yyssp = yystate;
---
>   *yyssp = (yytype_int16) yystate;
1994a1995,1997
> #if !defined yyoverflow && !defined YYSTACK_RELOCATE
>     goto yyexhaustedlab;
> #else
1997c2000
<       YYSIZE_T yysize = yyssp - yyss + 1;
---
>       YYSIZE_T yysize = (YYSIZE_T) (yyssp - yyss + 1);
1999c2002
< #ifdef yyoverflow
---
> # if defined yyoverflow
2017,2018d2019
< 
<         yyls = yyls1;
2020a2022
>         yyls = yyls1;
2022,2025c2024
< #else /* no yyoverflow */
< # ifndef YYSTACK_RELOCATE
<       goto yyexhaustedlab;
< # else
---
> # else /* defined YYSTACK_RELOCATE */
2047d2045
< #endif /* no yyoverflow */
2054c2052
<                   (unsigned long int) yystacksize));
---
>                   (unsigned long) yystacksize));
2058a2057
> #endif /* !defined yyoverflow && !defined YYSTACK_RELOCATE */
2144c2143
< | yyreduce -- Do a reduction.  |
---
> | yyreduce -- do a reduction.  |
2161a2161
>   yyerror_range[1] = yyloc;
2167c2167
<     { xxsavevalue((yyvsp[-1]), &(yyloc)); RELEASE_SV((yyvsp[-2])); YYACCEPT; }
---
>     { xxsavevalue(yyvsp[-1], &(yyloc)); RELEASE_SV(yyvsp[-2]); YYACCEPT; }
2173c2173
<     { xxsavevalue((yyvsp[-1]), &(yyloc)); RELEASE_SV((yyvsp[-2])); YYACCEPT; }
---
>     { xxsavevalue(yyvsp[-1], &(yyloc)); RELEASE_SV(yyvsp[-2]); YYACCEPT; }
2185c2185
<     { (yyval) = (yyvsp[0]); RELEASE_SV((yyvsp[-1])); }
---
>     { yyval = yyvsp[0]; RELEASE_SV(yyvsp[-1]); }
2191c2191
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2197c2197
<     { (yyval) = xxnewlist((yyvsp[0])); }
---
>     { yyval = xxnewlist(yyvsp[0]); }
2203c2203
<     { (yyval) = xxlist((yyvsp[-1]), (yyvsp[0])); }
---
>     { yyval = xxlist(yyvsp[-1], yyvsp[0]); }
2209c2209
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2215c2215
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), HAS_SEXPR, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], HAS_SEXPR, &(yyloc)); }
2221c2221
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2227c2227
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2233c2233
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2239c2239
<     { (yyval) = xxmarkup2((yyvsp[-2]), (yyvsp[-1]), (yyvsp[0]), 2, STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-2], yyvsp[-1], yyvsp[0], 2, STATIC, &(yyloc)); }
2245c2245
<     { (yyval) = xxmarkup2((yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), 2, HAS_IFDEF, &(yyloc)); RELEASE_SV((yyvsp[0])); }
---
>     { yyval = xxmarkup2(yyvsp[-3], yyvsp[-2], yyvsp[-1], 2, HAS_IFDEF, &(yyloc)); RELEASE_SV(yyvsp[0]); }
2251c2251
<     { (yyval) = xxmarkup2((yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), 2, HAS_IFDEF, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-3], yyvsp[-2], yyvsp[-1], 2, HAS_IFDEF, &(yyloc)); }
2257c2257
<     { (yyval) = xxmarkup((yyvsp[-2]), (yyvsp[0]), HAS_SEXPR, &(yyloc)); xxpopMode((yyvsp[-1])); }
---
>     { yyval = xxmarkup(yyvsp[-2], yyvsp[0], HAS_SEXPR, &(yyloc)); xxpopMode(yyvsp[-1]); }
2263c2263
<     { (yyval) = xxOptionmarkup((yyvsp[-3]), (yyvsp[-1]), (yyvsp[0]), HAS_SEXPR, &(yyloc)); xxpopMode((yyvsp[-2])); }
---
>     { yyval = xxOptionmarkup(yyvsp[-3], yyvsp[-1], yyvsp[0], HAS_SEXPR, &(yyloc)); xxpopMode(yyvsp[-2]); }
2269c2269
<     { (yyval) = xxtag((yyvsp[0]), COMMENT, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], COMMENT, &(yyloc)); }
2275c2275
<     { (yyval) = xxtag((yyvsp[0]), TEXT, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], TEXT, &(yyloc)); }
2281c2281
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2287c2287
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2293c2293
<     { (yyval) = xxnewlist((yyvsp[0])); }
---
>     { yyval = xxnewlist(yyvsp[0]); }
2299c2299
<     { (yyval) = xxlist((yyvsp[-1]), (yyvsp[0])); }
---
>     { yyval = xxlist(yyvsp[-1], yyvsp[0]); }
2305c2305
<     { (yyval) = xxtag((yyvsp[0]), TEXT, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], TEXT, &(yyloc)); }
2311c2311
<     { (yyval) = xxtag((yyvsp[0]), RCODE, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], RCODE, &(yyloc)); }
2317c2317
<     { (yyval) = xxtag((yyvsp[0]), VERB, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], VERB, &(yyloc)); }
2323c2323
<     { (yyval) = xxtag((yyvsp[0]), COMMENT, &(yyloc)); }
---
>     { yyval = xxtag(yyvsp[0], COMMENT, &(yyloc)); }
2329c2329
<     { (yyval) = xxtag((yyvsp[0]), UNKNOWN, &(yyloc)); yyerror(yyunknown); }
---
>     { yyval = xxtag(yyvsp[0], UNKNOWN, &(yyloc)); yyerror(yyunknown); }
2335c2335
<     { (yyval) = xxmarkup(R_NilValue, (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(R_NilValue, yyvsp[0], STATIC, &(yyloc)); }
2341c2341
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2347c2347
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2353c2353
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2359c2359
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2365c2365
<     { (yyval) = xxmarkup2((yyvsp[-2]), (yyvsp[-1]), (yyvsp[0]), 2, STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-2], yyvsp[-1], yyvsp[0], 2, STATIC, &(yyloc)); }
2371c2371
<     { (yyval) = xxmarkup3((yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup3(yyvsp[-3], yyvsp[-2], yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2377c2377
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2383c2383
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2389c2389
<     { (yyval) = xxmarkup((yyvsp[-2]), (yyvsp[0]), STATIC, &(yyloc)); xxpopMode((yyvsp[-1])); }
---
>     { yyval = xxmarkup(yyvsp[-2], yyvsp[0], STATIC, &(yyloc)); xxpopMode(yyvsp[-1]); }
2395c2395
<     { (yyval) = xxOptionmarkup((yyvsp[-3]), (yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); xxpopMode((yyvsp[-2])); }
---
>     { yyval = xxOptionmarkup(yyvsp[-3], yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); xxpopMode(yyvsp[-2]); }
2401c2401
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2407c2407
<     { (yyval) = xxmarkup((yyvsp[-2]), (yyvsp[0]), HAS_SEXPR, &(yyloc)); xxpopMode((yyvsp[-1])); }
---
>     { yyval = xxmarkup(yyvsp[-2], yyvsp[0], HAS_SEXPR, &(yyloc)); xxpopMode(yyvsp[-1]); }
2413c2413
<     { (yyval) = xxOptionmarkup((yyvsp[-3]), (yyvsp[-1]), (yyvsp[0]), HAS_SEXPR, &(yyloc)); xxpopMode((yyvsp[-2])); }
---
>     { yyval = xxOptionmarkup(yyvsp[-3], yyvsp[-1], yyvsp[0], HAS_SEXPR, &(yyloc)); xxpopMode(yyvsp[-2]); }
2419c2419
<     { (yyval) = xxmarkup((yyvsp[-1]), (yyvsp[0]), STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[-1], yyvsp[0], STATIC, &(yyloc)); }
2425c2425
<     { (yyval) = xxmarkup2((yyvsp[-1]), (yyvsp[0]), R_NilValue, 1, STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-1], yyvsp[0], R_NilValue, 1, STATIC, &(yyloc)); }
2431c2431
<     { (yyval) = xxmarkup2((yyvsp[-2]), (yyvsp[-1]), (yyvsp[0]), 2, STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-2], yyvsp[-1], yyvsp[0], 2, STATIC, &(yyloc)); }
2437c2437
<     { (yyval) = xxmarkup((yyvsp[0]), R_NilValue, STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup(yyvsp[0], R_NilValue, STATIC, &(yyloc)); }
2443c2443
<     { (yyval) = xxmarkup2((yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), 2, HAS_IFDEF, &(yyloc)); RELEASE_SV((yyvsp[0])); }
---
>     { yyval = xxmarkup2(yyvsp[-3], yyvsp[-2], yyvsp[-1], 2, HAS_IFDEF, &(yyloc)); RELEASE_SV(yyvsp[0]); }
2449c2449
<     { (yyval) = xxmarkup2((yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), 2, HAS_IFDEF, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-3], yyvsp[-2], yyvsp[-1], 2, HAS_IFDEF, &(yyloc)); }
2455c2455
<     { (yyval) = xxmarkup2((yyvsp[-2]), (yyvsp[-1]), (yyvsp[0]), 2, STATIC, &(yyloc)); }
---
>     { yyval = xxmarkup2(yyvsp[-2], yyvsp[-1], yyvsp[0], 2, STATIC, &(yyloc)); }
2461c2461
<     { (yyval) = xxnewcommand((yyvsp[-2]), (yyvsp[-1]), (yyvsp[0]), &(yyloc)); }
---
>     { yyval = xxnewcommand(yyvsp[-2], yyvsp[-1], yyvsp[0], &(yyloc)); }
2467c2467
<     { (yyval) = xxusermacro((yyvsp[0]), xxnewlist(NULL), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[0], xxnewlist(NULL), &(yyloc)); }
2473c2473
<     { (yyval) = xxusermacro((yyvsp[-1]), xxnewlist((yyvsp[0])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-1], xxnewlist(yyvsp[0]), &(yyloc)); }
2479c2479
<     { (yyval) = xxusermacro((yyvsp[-2]), xxnewlist2((yyvsp[-1]), (yyvsp[0])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-2], xxnewlist2(yyvsp[-1], yyvsp[0]), &(yyloc)); }
2485c2485
<     { (yyval) = xxusermacro((yyvsp[-3]), xxnewlist3((yyvsp[-2]), (yyvsp[-1]), (yyvsp[0])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-3], xxnewlist3(yyvsp[-2], yyvsp[-1], yyvsp[0]), &(yyloc)); }
2491c2491
<     { (yyval) = xxusermacro((yyvsp[-4]), xxnewlist4((yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), (yyvsp[0])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-4], xxnewlist4(yyvsp[-3], yyvsp[-2], yyvsp[-1], yyvsp[0]), &(yyloc)); }
2497c2497
<     { (yyval) = xxusermacro((yyvsp[-5]), xxnewlist5((yyvsp[-4]), (yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), (yyvsp[0])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-5], xxnewlist5(yyvsp[-4], yyvsp[-3], yyvsp[-2], yyvsp[-1], yyvsp[0]), &(yyloc)); }
2503c2503
<     { (yyval) = xxusermacro((yyvsp[-6]), xxnewlist6((yyvsp[-5]), (yyvsp[-4]), (yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1]), (yyvsp[0])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-6], xxnewlist6(yyvsp[-5], yyvsp[-4], yyvsp[-3], yyvsp[-2], yyvsp[-1], yyvsp[0]), &(yyloc)); }
2509c2509
<     { (yyval) = xxusermacro((yyvsp[-8]), xxnewlist7((yyvsp[-7]), (yyvsp[-6]), (yyvsp[-5]), (yyvsp[-4]), (yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-8], xxnewlist7(yyvsp[-7], yyvsp[-6], yyvsp[-5], yyvsp[-4], yyvsp[-3], yyvsp[-2], yyvsp[-1]), &(yyloc)); }
2515c2515
<     { (yyval) = xxusermacro((yyvsp[-9]), xxnewlist8((yyvsp[-8]), (yyvsp[-7]), (yyvsp[-6]), (yyvsp[-5]), (yyvsp[-4]), (yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-9], xxnewlist8(yyvsp[-8], yyvsp[-7], yyvsp[-6], yyvsp[-5], yyvsp[-4], yyvsp[-3], yyvsp[-2], yyvsp[-1]), &(yyloc)); }
2521c2521
<     { (yyval) = xxusermacro((yyvsp[-10]), xxnewlist9((yyvsp[-9]), (yyvsp[-8]), (yyvsp[-7]), (yyvsp[-6]), (yyvsp[-5]), (yyvsp[-4]), (yyvsp[-3]), (yyvsp[-2]), (yyvsp[-1])), &(yyloc)); }
---
>     { yyval = xxusermacro(yyvsp[-10], xxnewlist9(yyvsp[-9], yyvsp[-8], yyvsp[-7], yyvsp[-6], yyvsp[-5], yyvsp[-4], yyvsp[-3], yyvsp[-2], yyvsp[-1]), &(yyloc)); }
2527c2527
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2533c2533
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2539c2539
<     { xxpopMode((yyvsp[-1])); (yyval) = xxnewlist((yyvsp[0])); 
---
>     { xxpopMode(yyvsp[-1]); yyval = xxnewlist(yyvsp[0]); 
2552c2552
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2558c2558
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2564c2564
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2570c2570
<     { xxpopMode((yyvsp[-2])); (yyval) = (yyvsp[-1]); }
---
>     { xxpopMode(yyvsp[-2]); yyval = yyvsp[-1]; }
2576c2576
<     { xxpopMode((yyvsp[-1])); (yyval) = xxnewlist(NULL); }
---
>     { xxpopMode(yyvsp[-1]); yyval = xxnewlist(NULL); }
2582c2582
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2588c2588
<     { xxpopMode((yyvsp[-1])); (yyval) = (yyvsp[0]); }
---
>     { xxpopMode(yyvsp[-1]); yyval = yyvsp[0]; }
2594c2594
<     { xxpopMode((yyvsp[-2])); (yyval) = (yyvsp[-1]); }
---
>     { xxpopMode(yyvsp[-2]); yyval = yyvsp[-1]; }
2600c2600
<     { xxpopMode((yyvsp[-1])); (yyval) = xxnewlist(NULL); }
---
>     { xxpopMode(yyvsp[-1]); yyval = xxnewlist(NULL); }
2606c2606
<     { xxpopMode((yyvsp[-1])); (yyval) = xxnewlist(xxtag((yyvsp[0]), TEXT, &(yyloc))); }
---
>     { xxpopMode(yyvsp[-1]); yyval = xxnewlist(xxtag(yyvsp[0], TEXT, &(yyloc))); }
2612c2612
<     { (yyval) = xxpushMode(LATEXLIKE, UNKNOWN, FALSE); }
---
>     { yyval = xxpushMode(LATEXLIKE, UNKNOWN, FALSE); }
2618c2618
<     { (yyval) = xxpushMode(RLIKE, UNKNOWN, FALSE); }
---
>     { yyval = xxpushMode(RLIKE, UNKNOWN, FALSE); }
2624c2624
<     { parseState.xxbraceDepth--; (yyval) = xxpushMode(RLIKE, UNKNOWN, FALSE); parseState.xxbraceDepth++; }
---
>     { parseState.xxbraceDepth--; yyval = xxpushMode(RLIKE, UNKNOWN, FALSE); parseState.xxbraceDepth++; }
2630c2630
<     { (yyval) = xxpushMode(INOPTION, UNKNOWN, FALSE); }
---
>     { yyval = xxpushMode(INOPTION, UNKNOWN, FALSE); }
2636c2636
<     { (yyval) = xxpushMode(VERBATIM, UNKNOWN, FALSE); }
---
>     { yyval = xxpushMode(VERBATIM, UNKNOWN, FALSE); }
2642c2642
<     { (yyval) = xxpushMode(VERBATIM, UNKNOWN, TRUE); }
---
>     { yyval = xxpushMode(VERBATIM, UNKNOWN, TRUE); }
2648c2648
<     { parseState.xxbraceDepth--; (yyval) = xxpushMode(VERBATIM, UNKNOWN, FALSE); parseState.xxbraceDepth++; }
---
>     { parseState.xxbraceDepth--; yyval = xxpushMode(VERBATIM, UNKNOWN, FALSE); parseState.xxbraceDepth++; }
2654c2654
<     { (yyval) = xxpushMode(LATEXLIKE, ESCAPE, FALSE); }
---
>     { yyval = xxpushMode(LATEXLIKE, ESCAPE, FALSE); }
2660c2660
<     { (yyval) = xxpushMode(LATEXLIKE, LATEXMACRO2, FALSE); }
---
>     { yyval = xxpushMode(LATEXLIKE, LATEXMACRO2, FALSE); }
2666c2666
<     { (yyval) = (yyvsp[-1]); }
---
>     { yyval = yyvsp[-1]; }
2672c2672
<     { (yyval) = xxnewlist(NULL); }
---
>     { yyval = xxnewlist(NULL); }
2678c2678
<     { (yyval) = (yyvsp[-2]); }
---
>     { yyval = yyvsp[-2]; }
2684c2684
<     { (yyval) = xxnewlist(NULL); }
---
>     { yyval = xxnewlist(NULL); }
2690c2690
<     { (yyval) = (yyvsp[-2]); }
---
>     { yyval = yyvsp[-2]; }
2696c2696
<     { (yyval) = (yyvsp[-1]); }
---
>     { yyval = yyvsp[-1]; }
2727,2734c2727,2733
< 
<   yyn = yyr1[yyn];
< 
<   yystate = yypgoto[yyn - YYNTOKENS] + *yyssp;
<   if (0 <= yystate && yystate <= YYLAST && yycheck[yystate] == *yyssp)
<     yystate = yytable[yystate];
<   else
<     yystate = yydefgoto[yyn - YYNTOKENS];
---
>   {
>     const int yylhs = yyr1[yyn] - YYNTOKENS;
>     const int yyi = yypgoto[yylhs] + *yyssp;
>     yystate = (0 <= yyi && yyi <= YYLAST && yycheck[yyi] == *yyssp
>                ? yytable[yyi]
>                : yydefgoto[yylhs]);
>   }
2816a2816,2819
>   /* Pacify compilers when the user code never invokes YYERROR and the
>      label yyerrorlab therefore never appears in user code.  */
>   if (0)
>     YYERROR;
2818,2824d2820
<   /* Pacify compilers like GCC when the user code never invokes
<      YYERROR and the label yyerrorlab therefore never appears in user
<      code.  */
<   if (/*CONSTCOND*/ 0)
<      goto yyerrorlab;
< 
<   yyerror_range[1] = yylsp[1-yylen];
2906a2905,2908
> 
> /*-----------------------------------------------------.
> | yyreturn -- parsing is finished, return the result.  |
> `-----------------------------------------------------*/
3126c3128
<     	    maxarg = imax2(maxarg, *(c+1) - '0');
---
>     	    maxarg = max(maxarg, *(c+1) - '0');
3188c3190
< 		error("internal error: invalid argument to xxusermacro");
---
> 		error(_("internal error: invalid argument to xxusermacro"));
3204c3206
< 		error("internal error: invalid argument to xxusermacro");
---
> 		error(_("internal error: invalid argument to xxusermacro"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/gramRd.y R/src/library/tools/src/gramRd.y
32,39c32,34
< #include <Rmath.h> /* for imax2(.),..*/
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
---
> #include <Rmath.h>
> #include <R_ext/Minmax.h>
> #include "localization.h"
558c553
<     	    maxarg = imax2(maxarg, *(c+1) - '0');
---
>     	    maxarg = max(maxarg, *(c+1) - '0');
620c615
< 		error("internal error: invalid argument to xxusermacro");
---
> 		error(_("internal error: invalid argument to xxusermacro"));
636c631
< 		error("internal error: invalid argument to xxusermacro");
---
> 		error(_("internal error: invalid argument to xxusermacro"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/http.c R/src/library/tools/src/http.c
23c23
< 
---
> #include "localization.h"
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/install.c R/src/library/tools/src/install.c
27,34c27
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
< 
---
> #include "localization.h"
58c51
< #ifdef Win32
---
> #ifdef _WIN32
63c56
< #ifndef Win32
---
> #ifndef _WIN32
76c69
< #ifdef Win32
---
> #ifdef _WIN32
84c77
< #ifndef Win32
---
> #ifndef _WIN32
Only in R/src/library/tools/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/signals.c R/src/library/tools/src/signals.c
24a25
> #include "localization.h"
42c43
<     warning(_("pskill() is not supported on this platform"));
---
>     warning(_("'%s' function is not supported on this platform"), "pskill()");
140c141
<     error(_("psnice() is not supported on this platform"));
---
>     error(_("'%s' function is not supported on this platform"), "psnice()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/text.c R/src/library/tools/src/text.c
26a27
> #include "localization.h"
158c159
<     if(ign == NA_LOGICAL) error("'ignore_quotes' must be TRUE or FALSE");
---
>     if(ign == NA_LOGICAL) error(_("'%s' argument must be TRUE or FALSE"), "ignore_quotes");
267c268
< 	error("first arg must be a single character string");
---
> 	error(_("first arg must be a single character string"));
269c270
< 	error("first arg must be a single character string");
---
> 	error(_("first arg must be a single character string"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/tools/src/tools.h R/src/library/tools/src/tools.h
25,30d24
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("tools", String)
< #else
< #define _(String) (String)
< #endif
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/RShowDoc.R R/src/library/utils/R/RShowDoc.R
42c42
<         message("   RShowDoc() should be used with a character string argument specifying\n   a documentation file")
---
>         message("RShowDoc() should be used with a character string argument specifying a documentation file")
82,83c82
<         stop(gettextf("no documentation for %s found in package %s",
<                       sQuote(what), sQuote(package)), domain = NA)
---
>         stop(gettextf("no documentation for %s found in package %s", sQuote(what), sQuote(package)), domain = "R-utils")
118,119c117
<     } else if(what %in% c("R-admin", "R-data", "R-exts", "R-FAQ", "R-intro",
<                           "R-ints", "R-lang")) {
---
>     } else if(what %in% c("R-admin", "R-data", "R-exts", "R-FAQ", "R-intro", "R-ints", "R-lang")) {
169c167
<     stop("document not found")
---
>     stop("document was not found")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/RSiteSearch.R R/src/library/utils/R/RSiteSearch.R
52,54c52,53
<     cat(gettextf("A search query has been submitted to %s",
<                  "http://search.r-project.org"), "\n", sep = "")
<     cat(gettext("The results page should open in your browser shortly\n"))
---
>     cat(gettextf("A search query has been submitted to %s", "http://search.r-project.org", domain = "R-utils"), "\n", sep = "")
>     cat(gettext("The results page should open in your browser shortly", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/Sweave.R R/src/library/utils/R/Sweave.R
104,105c104
< 	    cat(sprintf("%16s\n", system(paste("ls -s",
< 				   summary(drobj$output)$description), intern=TRUE)))
---
> 	    cat(sprintf("%16s\n", system(paste("ls -s", summary(drobj$output)$description), intern=TRUE)))
129,131c128
<             chunkopts <- SweaveParseOptions(chunkopts,
<                                             drobj$options,
<                                             driver$checkopts)
---
>             chunkopts <- SweaveParseOptions(chunkopts, drobj$options, driver$checkopts)
145,147c142
<                     warning(gettextf("reference to unknown chunk %s",
<                                      sQuote(chunkref)),
<                             call. = TRUE,domain = NA)
---
>                     warning(gettextf("reference to unknown chunk %s", sQuote(chunkref)), call. = TRUE,domain = "R-utils")
153,155c148
<                     line <- c(namedchunks[[chunkref]],
< 			      paste0("#line ", linenum+linediff+1L,
< 				     ' "', basename(file), '"'))
---
>                     line <- c(namedchunks[[chunkref]], paste0("#line ", linenum+linediff+1L, ' "', basename(file), '"'))
162,163c155
<                 line <- c(paste0("#line ", linenum+linediff, ' "', basename(file), '"'),
<                           line)
---
>                 line <- c(paste0("#line ", linenum+linediff, ' "', basename(file), '"'), line)
201,202c193
<             stop(gettextf("no Sweave file with name %s found",
<                           sQuote(file[1L])), domain = NA)
---
>             stop(gettextf("no Sweave file with name %s found", sQuote(file[1L])), domain = "R-utils")
224,226c215
<                 stop(sQuote(basename(file)),
<                         " is not ASCII and does not declare an encoding",
<                         domain = NA, call. = FALSE)
---
>                 stop(gettextf("%s is not ASCII and does not declare an encoding", sQuote(basename(file)), domain = "R-utils"), domain = NA, call. = FALSE)
229,231c218
<             stop(sQuote(basename(file)),
<                  " declares an encoding that Sweave does not know about",
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("%s declares an encoding that Sweave does not know about", sQuote(basename(file)), domain = "R-utils"), domain = NA, call. = FALSE)
243,244c230
<         warning(gettextf("more than one syntax specification found, using the first one"),
< 		domain = NA)
---
>         warning("more than one syntax specification found, using the first one", domain = "R-utils")
250,251c236
<             stop(gettextf("object %s does not have class \"SweaveSyntax\"",
<                           sQuote(sname)), domain = NA)
---
>             stop(gettextf("object %s does not have class \"SweaveSyntax\"", sQuote(sname)), domain = "R-utils")
255c240
<     srcFilenum <- rep_len(1, length(srcLinenum))
---
>     srcFilenum <- rep(1, length(srcLinenum))
262,266c247
<                 stop(paste(gettextf("recursive Sweave input %s in stack",
<                                     sQuote(ifile)),
<                            paste("\n         ", seq_len(file), ": ",
<                                  rev(file), collapse="")),
<                  domain = NA)
---
>                 stop(paste(gettextf("recursive Sweave input %s in stack", sQuote(ifile), domain = "R-utils"), paste("\n         ", seq_len(file), ": ", rev(file), collapse = "")), domain = NA)
274,277c255,256
< 	    srcLinenum <- c(srcLinenum[pre], attr(itext, "srcLinenum"),
< 	    		    srcLinenum[post])
< 	    srcFilenum <- c(srcFilenum[pre], attr(itext, "srcFilenum")+length(f),
< 	    		    srcFilenum[post])
---
> 	    srcLinenum <- c(srcLinenum[pre], attr(itext, "srcLinenum"), srcLinenum[post])
> 	    srcFilenum <- c(srcFilenum[pre], attr(itext, "srcFilenum")+length(f), srcFilenum[post])
346,348c325
<         stop(gettextf("target syntax not of class %s",
<                       dQuote("SweaveSyntax")),
<              domain = NA)
---
>         stop(gettextf("target syntax not of class %s", dQuote("SweaveSyntax")), domain = "R-utils")
363c340
<     cat("Wrote file", output, "\n")
---
>     cat(gettextf("Wrote file %s", output, domain = "R-utils"), "\n", sep = "")
389c366
<         stop(gettextf("parse error or empty option in\n%s", text), domain = NA)
---
>         stop(gettextf("parse error or empty option in %s", text), domain = "R-utils")
397,398c374
<             sub(paste0("\\.", options[["engine"]], "$"),
<                 "", options[["label"]])
---
>             sub(paste0("\\.", options[["engine"]], "$"), "", options[["label"]])
499c475
< 					     clean.), domain = NA))
---
> 					     clean., domain = "R-tools"), domain = NA))
509,510c485
<             message(gettextf("Warning: unknown option %s", sQuote(a)),
<                     domain = NA)
---
>             message(gettextf("Warning: unknown option %s", sQuote(a)), domain = "R-utils")
614,615c589
<             message(gettextf("Warning: unknown option %s", sQuote(a)),
<                     domain = NA)
---
>             message(gettextf("Warning: unknown option %s", sQuote(a)), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/SweaveDrivers.R R/src/library/utils/R/SweaveDrivers.R
42,43c42,43
<     if (!quiet) cat("Writing to file ", output, "\n",
<                    "Processing code chunks with options ...\n", sep = "")
---
>     if (!quiet) cat(gettextf("Writing to file %s", output, domain = "R-utils"), "\n",
>                    gettext("Processing code chunks with options ...", domain = "R-utils"), "\n", sep = "")
58,60c58
<             warning(gettextf("path to %s contains spaces,\n", sQuote(styfile)),
<                     gettext("this may cause problems when running LaTeX"),
<                     domain = NA)
---
>             warning(gettextf("path to %s contains spaces, this may cause problems when running LaTeX", sQuote(styfile)), domain = "R-utils")
193,194c191
<                     warning("file stem ", sQuote(chunkout), " is not portable",
<                             call. = FALSE, domain = NA)
---
>                     warning(gettextf("file stem %s is not portable", sQuote(chunkout)), call. = FALSE, domain = "R-utils")
204,205c201
<             chunkexps[1L] <- sub(" parse(text = chunk, srcfile = srcfile) : \n ",
<                                  "", chunkexps[1L], fixed = TRUE)
---
>             chunkexps[1L] <- sub(" parse(text = chunk, srcfile = srcfile) : \n ", "", chunkexps[1L], fixed = TRUE)
273,274c269
<                 warning("file stem ", sQuote(chunkprefix), " is not portable",
<                         call. = FALSE, domain = NA)
---
>                 warning(gettextf("file stem %s is not portable", sQuote(chunkprefix)), call. = FALSE, domain = "R-utils")
276,278c271
<                 devs[[1L]](name = chunkprefix,
<                            width = options$width, height = options$height,
<                            options)
---
>                 devs[[1L]](name = chunkprefix, width = options$width, height = options$height, options)
417c410
<                     stop(conditionMessage(e), call. = FALSE, domain = NA)
---
>                     stop(conditionMessage(e), call. = FALSE, domain = "R-utils")
423,424c416
<                 cat("\\includegraphics{", chunkprefix, "}\n", sep = "",
<                     file = object$output)
---
>                 cat("\\includegraphics{", chunkprefix, "}\n", sep = "", file = object$output)
475c467
< 		       stop("at ",location, ", ", conditionMessage(e), domain = NA, call. = FALSE)
---
> 		       stop(gettextf("at %s, %s", location, conditionMessage(e)), call. = FALSE)
525,527c517
< 	cat("\n",
< 	    sprintf("You can now run (pdf)latex on %s", sQuote(outputname)),
< 	    "\n", sep = "")
---
> 	cat("\n", gettextf("You can now run (pdf)latex on %s", sQuote(outputname), domain = "R-utils"), "\n", sep = "")
600,601c590
<             stop(gettextf("invalid value for %s : %s", sQuote(opt), oldval),
<                  domain = NA)
---
>             stop(gettextf("invalid value for %s: %s", sQuote(opt), oldval), domain = "R-utils")
607,608c596
<             warning("value of 'results' option should be lowercase",
<                     call. = FALSE)
---
>             warning("value of 'results' option should be lowercase", call. = FALSE)
616,617c604
<             warning("value of 'strip.white' option should be lowercase",
<                     call. = FALSE)
---
>             warning("value of 'strip.white' option should be lowercase", call. = FALSE)
657,660c644,648
<         msg <- paste(" chunk", options$chunknr)
<         if (!is.null(options$label))
<             msg <- paste0(msg, " (label = ", options$label, ")")
<         msg <- paste(msg, "\n")
---
>         if (!is.null(options$label)) {
>             msg <- gettextf(" chunk %s (label = %s)\n", paste(options$chunknr, collapse = ""), paste(options$label, collapse = ""), domain = "R-utils")
>         } else {
> 	    msg <- gettextf(" chunk %s\n", paste(options$chunknr, collapse = ""), domain = "R-utils")
> 		}
693c681
<             if (!quiet) cat("Writing to file", output, "\n")
---
>             if (!quiet) cat(gettextf("Writing to file %s", output, domain = "R-utils"), "\n", sep = "")
699,700c687,688
<                          sprintf("R code from vignette source '%s'",
<                                  file)),
---
>                          gettextf("R code from vignette source '%s'",
>                                  file, domain = "R-utils")),
704c692
<         if (!quiet) cat("Writing chunks to files ...\n")
---
>         if (!quiet) cat(gettext("Writing chunks to files ...", domain = "R-utils"), "\n", sep = "")
734c722
<         "(missing #line/file info)"
---
>         gettext("(missing #line/file info)", domain = "R-utils")
745,746c733
<             warning("file stem ", sQuote(chunkprefix), " is not portable",
<                     call. = FALSE, domain = NA)
---
>             warning(gettextf("file stem %s is not portable", sQuote(chunkprefix)), call. = FALSE, domain = "R-utils")
777,778c764
<         cat("getOption(\"SweaveHooks\")[[\"", k, "\"]]()\n",
<             file = chunkout, sep = "")
---
>         cat("getOption(\"SweaveHooks\")[[\"", k, "\"]]()\n", file = chunkout, sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/apropos.R R/src/library/utils/R/apropos.R
85c85
<                                              "%d occurrences in %s"), ll, sp[i]),
---
>                                              "%d occurrences in %s", domain = "R-utils"), ll, sp[i]),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/askYesNo.R R/src/library/utils/R/askYesNo.R
42c42
<     else if (is.na(match)) stop("Unrecognized response ", dQuote(ans))
---
>     else if (is.na(match)) stop(gettextf("Unrecognized response %s", dQuote(ans)))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/aspell.R R/src/library/utils/R/aspell.R
61,63c61
<             warning(gettextf("Filter '%s' is not available.",
<                              filter_name),
<                     domain = NA)
---
>             warning(gettextf("Filter '%s' is not available.", filter_name), domain = "R-utils")
74,76c72
<             warning(gettextf("Filter '%s' is not available.",
<                              filter_name),
<                     domain = NA)
---
>             warning(gettextf("Filter '%s' is not available.", filter_name), domain = "R-utils")
79c75
<         stop("Invalid 'filter' argument.")
---
>         stop(gettextf("invalid '%s' argument", "filter"))
97,100c93
<             warning(gettextf("The following dictionaries were not found:\n%s",
<                              paste(sprintf("  %s", dictionaries[ind]),
<                                    collapse = "\n")),
<                     domain = NA)
---
>             warning(gettextf("The following dictionaries were not found:\n%s", paste(sprintf("  %s", dictionaries[ind]), collapse = "\n")), domain = "R-utils")
145,146c138
<             message(gettextf("Processing file %s", fname),
<                     domain = NA)
---
>             message(gettextf("Processing file %s", fname), domain = "R-utils")
179,181c171
< 	    stop(gettextf("Running aspell failed with diagnostics:\n%s",
< 			  paste(out$stderr, collapse = "\n")),
<                  domain = NA)
---
> 	    stop(gettextf("Running aspell failed with diagnostics:\n%s", paste(out$stderr, collapse = "\n")), domain = "R-utils")
289c279
<         writeLines("Possibly mis-spelled words:")
---
>         writeLines(gettext("Possibly mis-spelled words:"))
383,384c373,374
<         writeLines(c(sprintf("File '%s':", nms[i]),
<                      sprintf("  Line %s: \"%s\", \"%s\", \"%s\"",
---
>         writeLines(c(gettextf("File '%s':", nms[i]),
>                      gettextf("  Line %s: \"%s\", \"%s\", \"%s\"",
570,572c560
<     files <- Sys.glob(file.path(tools:::.R_top_srcdir_from_Rd(),
<                                 "src", "library", "*", "vignettes",
<                                 "*.Rnw"))
---
>     files <- Sys.glob(file.path(tools:::.R_top_srcdir_from_Rd(), "src", "library", "*", "vignettes", "*.Rnw"))
627,629c615
<             control <- c(control,
<                          sprintf("-p %s",
<                                  shQuote(file.path(dir, ".aspell", d))))
---
>             control <- c(control, sprintf("-p %s", shQuote(file.path(dir, ".aspell", d))))
1041c1027
< function(ifile, encoding, keep = c("Title", "Description"),
---
> function(ifile, encoding, keep = c(gettext("Title"), gettext("Description")),
1198,1199c1184
<         header <- sprintf("personal_ws-1.1 %s %d UTF-8",
<                           language, length(x))
---
>         header <- sprintf("personal_ws-1.1 %s %d UTF-8", language, length(x))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/browseVignettes.R R/src/library/utils/R/browseVignettes.R
40,42c40
<         message(gettextf("No vignettes found by %s",
<                          paste(deparse(attr(x, "call")), collapse=" ")),
<                 domain = NA)
---
>         message(gettextf("No vignettes found by %s", paste(deparse(attr(x, "call")), collapse=" ")), domain = "R-utils")
60,62c58
<                        sprintf("<a href='%s/%s'>%s</a>&nbsp;",
<                                prefix, pdf, toupper(pdfext)),
<                        ""),
---
>                        sprintf("<a href='%s/%s'>%s</a>&nbsp;", prefix, pdf, toupper(pdfext)), ""),
64,66c60
< 		ifelse(nzchar(rcode),
<                        sprintf("<a href='%s/%s'>R code</a>&nbsp;", prefix, rcode),
<                        ""))
---
> 		ifelse(nzchar(rcode), sprintf("<a href='%s/%s'>R code</a>&nbsp;", prefix, rcode), ""))
85,86c79
<     cat(sprintf("<h2>Vignettes found by <code><q>%s</q></code></h2>",
<                 paste(deparse(attr(x, "call")), collapse=" ")))
---
>     cat(sprintf("<h2>Vignettes found by <code><q>%s</q></code></h2>", paste(deparse(attr(x, "call")), collapse=" ")))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/bug.report.R R/src/library/utils/R/bug.report.R
39,42c39
<         writeLines(c("  Bug reports on R and the base packages need to be submitted",
<                      "  to the tracker at <https://bugs.R-project.org/>.",
<                      "",
<                      "  We will now try to open that website in a browser"))
---
>         writeLines(gettext("  Bug reports on R and the base packages need to be submitted\n  to the tracker at <https://bugs.R-project.org/>.\n\n  We will now try to open that website in a browser"))
53c50
<                       sQuote(package)), domain = NA)
---
>                       sQuote(package)), domain = "R-utils")
76,80c73
<             cat("\nThis package has a bug submission web page, which we will now attempt\n",
<                 "to open.  The information above may be useful in your report.\n",
<                 "If the web page does not work, you should send email to the maintainer,\n",
<                 DESC$Maintainer, ".\n",
<                 sep = "")
---
>             cat(gettextf("\nThis package has a bug submission web page, which we will now attempt\nto open.  The information above may be useful in your report.\nIf the web page does not work, you should send email to the maintainer,\n%s.", DESC$Maintainer, domain = "R-utils"), "\n", sep = "")
86,87d78
<             cat("This package has a BugReports field which is not the URL of a web page:\n\n",
<                 "  BugReports: ", BR, "\n\n", sep = "")
90c81
<                 cat("It appears to contain an email address, so we will try that.\n\n")
---
>                 cat(gettextf("\nThis package has a BugReports field which is not the URL of a web page:\n\n  BugReports: %s\n\nIt appears to contain an email address, so we will try that.", BR, domain = "R-utils"))
92c83,84
<             } else cat("We will ignore it and email the maintainer.\n\n")
---
>             } else cat(gettextf("\nThis package has a BugReports field which is not the URL of a web page:\n\n  BugReports: %s\n\nWe will ignore it and email the maintainer.", BR, domain = "R-utils"))
>             cat("\n\n")
120,121c112,113
<     create.post(instructions = c("", "<<insert bug report here>>", rep.int("", 3)),
<                 description = "bug report",
---
>     create.post(instructions = c("", gettext("<<insert bug report here>>"), rep.int("", 3)),
>                 description = gettext("bug report"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/changedFiles.R R/src/library/utils/R/changedFiles.R
24c24
< 	stop("'full.names' must be TRUE for multiple paths.")
---
> 	stop("'full.names' argument must be TRUE for multiple paths")
124,131c124,132
<     cat("File snapshot:\n path = ", x$path, 
<         "\n timestamp = ", x$timestamp, 
< 	"\n file.info = ", x$file.info, 
< 	"\n md5sum = ", x$md5sum, 
< 	"\n digest = ", deparse(x$digest, control = NULL),
< 	"\n full.names = ", x$full.names,
< 	"\n args = ", deparse(x$args, control = NULL), 
< 	"\n ", nrow(x$info), " files recorded.\n", sep="")
---
>     cat(sprintf(ngettext(nrow(x$info), "File snapshot:\n path = %s\n timestamp = %s\n file.info = %s\n md5sum = %s\n digest = %s\n full.names = %s\n args = %s\n %d file recorded.", "File snapshot:\n path = %s\n timestamp = %s\n file.info = %s\n md5sum = %s\n digest = %s\n full.names = %s\n args = %s\n %d files recorded.", domain = "R-utils"),
> 	 x$path, 
>         x$timestamp, 
> 	x$file.info, 
> 	x$md5sum, 
> 	deparse(x$digest, control = NULL),
> 	x$full.names,
> 	deparse(x$args, control = NULL), 
> 	nrow(x$info), domain = "R-utils"), "\n", sep = "")
134c135
< 	else cat("Files:", rownames(x$info), sep="\n ")
---
> 	else cat(gettext("Files:", domain = "R-utils"), rownames(x$info), sep = "\n ")
141c142
<     	cat("Files added:\n",  paste0("  ", x$added, collapse="\n"), "\n", sep="")
---
>     	cat(gettext("Files added:", domain = "R-utils"), "\n",  paste0("  ", x$added, collapse="\n"), "\n", sep = "")
143c144
<     	cat("Files deleted:\n",  paste0("  ", x$deleted, collapse="\n"), "\n", sep="")
---
>     	cat(gettext("Files deleted:", domain = "R-utils"), "\n",  paste0("  ", x$deleted, collapse="\n"), "\n", sep = "")
150c151
<         cat("File changes:\n")
---
>         cat(gettext("File changes:", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/citation.R R/src/library/utils/R/citation.R
40,42c40
<                          paste(names(args)[!args_length_ok],
<                                collapse = ", ")),
<                 domain = NA)
---
>                          paste(names(args)[!args_length_ok], collapse = ", ")), domain = "R-utils")
57,60c55
<                 stop(gettextf("Use either %s or %s/%s but not both.",
<                               sQuote("given"),
<                               sQuote("first"), sQuote("middle")),
<                      domain = NA)
---
>                 stop(gettextf("Use either %s or %s but not both", sQuote("given"), paste(sQuote("first"), sQuote("middle"), sep = "/", collapse = "")), domain = "R-utils")
63,65c58
<             message(gettextf("It is recommended to use %s instead of %s.",
<                              sQuote("given"), sQuote("first")),
<                     domain = NA)
---
>             message(gettextf("It is recommended to use %s instead of %s", sQuote("given"), sQuote("first")), domain = "R-utils")
72,74c65
<             message(gettextf("It is recommended to use %s instead of %s.",
<                              sQuote("given"), sQuote("middle")),
<                     domain = NA)
---
>             message(gettextf("It is recommended to use %s instead of %s", sQuote("given"), sQuote("middle")), domain = "R-utils")
81,83c72
<                 stop(gettextf("Use either %s or %s but not both.",
<                               sQuote("family"), sQuote("last")),
<                      domain = NA)
---
>                 stop(gettextf("Use either %s or %s but not both", sQuote("family"), sQuote("last")), domain = "R-utils")
86,88c75
<             message(gettextf("It is recommended to use %s instead of %s.",
<                              sQuote("family"), sQuote("last")),
<                     domain = NA)
---
>             message(gettextf("It is recommended to use %s instead of %s", sQuote("family"), sQuote("last")), domain = "R-utils")
100,101c87,88
<                                          "Invalid role specification: %s.",
<                                          "Invalid role specifications: %s."),
---
>                                          "Invalid role specification: %s",
>                                          "Invalid role specifications: %s", domain = "R-utils"),
181,182c168,169
<                                      "Invalid role specification: %s.",
<                                      "Invalid role specifications: %s."),
---
>                                      "Invalid role specification: %s",
>                                      "Invalid role specifications: %s", domain = "R-utils"),
216,217c203
<                       c("given", "family", "role", "email", "comment",
<                         "first", "last", "middle")) # for now ...
---
>                       c("given", "family", "role", "email", "comment", "first", "last", "middle")) # for now ...
222,225c208,211
<         message(gettextf("It is recommended to use %s/%s instead of %s/%s/%s.",
<                          sQuote("given"), sQuote("family"),
<                          sQuote("first"), sQuote("middle"), sQuote("last")),
<                 domain = NA)
---
>         message(gettextf("It is recommended to use %s instead of %s",
>                          paste(sQuote("given"), sQuote("family"), sep = "/", collapse = ""),
>                          paste(sQuote("first"), sQuote("middle"), sQuote("last"), sep = "/", collapse = "")),
>                 domain = "R-utils")
274,276c260
<         warning(gettextf("method is only applicable to %s objects",
<                          sQuote("person")),
<                 domain = NA)
---
>         warning(gettextf("method is only applicable to %s objects", sQuote("person")), domain = "R-utils")
399,401c383
<         stop(gettextf("all arguments must be of class %s",
<                       dQuote("person")),
<              domain = NA)
---
>         stop(gettextf("all arguments must be of class %s", dQuote("person")), domain = "R-utils")
554,556c536,537
<                          paste(names(args)[!args_length_ok],
<                                collapse = ", ")),
<                 domain = NA)
---
>                          paste(names(args)[!args_length_ok], collapse = ", ")),
>                 domain = "R-utils")
562,564c543,544
<                          paste(names(other)[!other_length_ok],
<                                collapse = ", ")),
<                 domain = NA)
---
>                          paste(names(other)[!other_length_ok], collapse = ", ")),
>                 domain = "R-utils")
575,578c555
<             stop(gettextf("%s has to be one of %s",
<                           sQuote("bibtype"),
<                           paste(BibTeX_names, collapse = ", ")),
<                  domain = NA)
---
>             stop(gettextf("%s has to be one of %s", sQuote("bibtype"), paste(BibTeX_names, collapse = ", ")), domain = "R-utils")
649c626
<                                   "A bibentry of bibtype %s has to specify the fields: %s"),
---
>                                   "A bibentry of bibtype %s has to specify the fields: %s", domain = "R-utils"),
706,710c683
<         stop(gettextf("%s should be one of %s",
<                       sQuote("style"),
<                       paste(dQuote(bibentry_format_styles),
<                             collapse = ", ")),
<              domain = NA)
---
>         stop(gettextf("%s should be one of %s", sQuote("style"), paste(dQuote(bibentry_format_styles), collapse = ", ")), domain = "R-utils")
730,731c703
< 			 "citation.bibtex.max", "bibtex=*"),
<                 domain = NA)
---
> 			 "citation.bibtex.max", "bibtex=*"), domain = "R-utils")
779,780c751
<                           c(gettext("\nA BibTeX entry for LaTeX users is\n"),
< 			    paste0("  ", unclass(toBibtex(y))))
---
>                           c(gettextf("\nA BibTeX entry for LaTeX users is\n%s", paste0("  ", unclass(toBibtex(y)))))
788,790c759
<   "To see these entries in BibTeX format, use 'print(<citation>, bibtex=TRUE)',
<   'toBibtex(.)', or set 'options(citation.bibtex.max=999)'."
< 		)), collapse = "\n")
---
> 	gettext("To see these entries in BibTeX format, use 'print(<citation>, bibtex=TRUE)',\n'toBibtex(.)', or set 'options(citation.bibtex.max=999)'.", domain = "R-utils"))))
859,861c828
<                 warning(gettextf("Dropping invalid entry %d:\n%s",
<                                  pc[b],
<                                  conditionMessage(status[[b]])))
---
>                 warning(gettextf("Dropping invalid entry %d:\n%s", pc[b], conditionMessage(status[[b]])))
1042,1045c1009
<             stop(gettextf("%s has to be one of %s",
<                           sQuote("bibtype"),
<                           paste(BibTeX_names, collapse = ", ")),
<                  domain = NA)
---
>             stop(gettextf("%s has to be one of %s", sQuote("bibtype"), paste(BibTeX_names, collapse = ", ")), domain = "R-utils")
1075,1077c1039
<         warning(gettextf("method is only applicable to %s objects",
<                          sQuote("bibentry")),
<                 domain = NA)
---
>         warning(gettextf("method is only applicable to %s objects", sQuote("bibentry")), domain = "R-utils")
1250c1212
< 	    paste0("The ", sQuote(package), " package is part of R.  ",
---
> 	    paste0(gettextf("The %s package is part of R.", sQuote(package), domain = "R-utils"), "  ",
1258,1260c1220
<             warning(gettextf("no date field in DESCRIPTION file of package %s",
<                              sQuote(package)),
<                     domain = NA)
---
>             warning(gettextf("no date field in DESCRIPTION file of package %s", sQuote(package)), domain = "R-utils")
1274,1276c1234
<         warning(gettextf("could not determine year for %s from package DESCRIPTION file",
<                          sQuote(package)),
<                 domain = NA)
---
>         warning(gettextf("could not determine year for %s from package DESCRIPTION file", sQuote(package)), domain = "R-utils")
1342,1343c1300
<         gettextf("To cite package %s in publications use:",
<                  sQuote(package))
---
>         gettextf("To cite package %s in publications use:", sQuote(package))
1463,1464c1420
<         header <- paste(strwrap(header, indent = 0L, exdent = 2L),
<                         collapse = "\n")
---
>         header <- paste(strwrap(header, indent = 0L, exdent = 2L), collapse = "\n")
1468,1469c1424
<         footer <- paste(strwrap(footer, indent = 2L, exdent = 2L),
<                         collapse = "\n")
---
>         footer <- paste(strwrap(footer, indent = 2L, exdent = 2L), collapse = "\n")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/combn.R R/src/library/utils/R/combn.R
49c49
< 	stop("'FUN' must be a function or NULL")
---
> 	stop("'FUN' argument must be a function or NULL")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/completion.R R/src/library/utils/R/completion.R
283,284c283
<             suppressWarnings(gregexpr("['\"]", linebuffer,
<                                       perl = TRUE))[[1L]]
---
>             suppressWarnings(gregexpr("['\"]", linebuffer, perl = TRUE))[[1L]]
289,291c288
<             suppressWarnings(gregexpr("[^\\.\\w:?$@[\\]]+",
<                                       linebuffer,
<                                       perl = TRUE))[[1L]]
---
>             suppressWarnings(gregexpr("[^\\.\\w:?$@[\\]]+", linebuffer, perl = TRUE))[[1L]]
778c775
<                                data()$results[, "Item"])
---
>                                data()$results[, 3L])
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/data.R R/src/library/utils/R/data.R
37c37
<             stop("'package' must be a character string or NULL")
---
>             stop("'package' argument must be a character string or NULL")
86,88c86
<                     warning(gettextf("data index for package %s is invalid and will be ignored",
<                                      sQuote(packageName)),
<                             domain=NA, call.=FALSE)
---
>                     warning(gettextf("data index for package %s is invalid and will be ignored", sQuote(packageName)), domain = "R-utils", call.=FALSE)
91,102c89,98
<         colnames(db) <- c("Package", "LibPath", "Item", "Title")
< 
<         footer <- if (missing(package))
<             paste0("Use ",
<                    sQuote(paste("data(package =",
<                                 ".packages(all.available = TRUE))")),
<                    "\n",
<                    "to list the data sets in all *available* packages.")
<         else
<             NULL
<         y <- list(title = "Data sets", header = NULL, results = db,
<                   footer = footer)
---
> 	#data() powoduje wyswietlenie komunikatu: Błąd w db[, "Package"]: indeks poza granicami
>         colnames(db) <- c(gettext("Package", domain = "R-utils"), gettext("LibPath", domain = "R-utils"), gettext("Item", domain = "R-utils"), gettext("Title", domain = "R-utils"))
>         #colnames(db) <- c("Package", "LibPath", "Item", "Title")
> 
>         if (missing(package)) {
>          footer <- gettextf("Use %s\nto list the data sets in all *available* packages.", sQuote("data(package = .packages(all.available = TRUE))"), domain = "R-utils")
>         } else {
>          footer <- NULL
> 	}
>         y <- list(title = gettext("Data sets", domain = "R-utils"), header = NULL, results = db, footer = footer)
119,120c115
<                         message(sprintf("name=%s:\t found in Rdata.rds", name),
<                                 domain=NA)
---
>                         message(gettextf("name=%s: found in Rdata.rds", name, domain = "R-utils"), domain = NA)
129,131c124,125
< 		    message(sprintf("name=%s:\t NOT found in names() of Rdata.rds, i.e.,\n\t%s\n",
< 				    name, paste(names(rds), collapse=",")),
< 				domain=NA)
---
> 		    message(gettextf("name=%s: NOT found in names() of Rdata.rds, i.e.,\n\t%s",
> 				    name, paste(names(rds), collapse = ",")), domain = "R-utils", "\n", sep = "")
135,138c129
<                 warning("zipped data found for package ",
<                         sQuote(basename(dirname(p))),
<                         ".\nThat is defunct, so please re-install the package.",
<                         domain = NA)
---
>                 warning(gettextf("zipped data found for package %s.\nThat is defunct, so please re-install the package.", sQuote(basename(dirname(p)))), domain = "R-utils")
142c133
<                     warning(gettextf("file 'filelist' is missing for directory %s", sQuote(p)), domain = NA)
---
>                     warning(gettextf("file 'filelist' is missing for directory %s", sQuote(p)), domain = "R-utils")
161,163c152
<                         message("name=", name, ":\t file= ...",
<                                 .Platform$file.sep, basename(file), "::\t",
<                                 appendLF = FALSE, domain = NA)
---
>                         message(gettextf("name=%s:\t file= ... %s::\t%s", name, .Platform$file.sep, basename(file)), appendLF = FALSE, domain = "R-utils")
207c196
<                 if (verbose) message(if (!found) "*NOT* ", "found", domain = NA)
---
>                 if (verbose) message(if (!found) gettext("data *NOT* found") else gettext("data found"), domain = "R-utils")
214c203
<                     domain = NA)
---
>                     domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/databrowser.R R/src/library/utils/R/databrowser.R
32c32
< 	cat("Empty environment, nothing to do!\n")
---
> 	cat(gettext("Empty environment, nothing to do!", domain = "R-utils"), "\n", sep = "")
169c169
< 	main <- paste("R objects in", deparse(substitute(envir)))
---
> 	main <- paste(gettextf("R objects in %s", paste(deparse(substitute(envir)), collapse = ""), domain = "R-utils"))
191c191
< 		      main = "R Workspace", properties = list(),
---
> 		      main = gettext("R Workspace", domain = "R-utils"), properties = list(),
195c195
<         stop(gettextf("kind '%s' not yet implemented", kind), domain = NA)
---
>         stop(gettextf("kind '%s' not yet implemented", kind), domain = "R-utils")
265,266c265,268
<     cat(main, "environment is shown in browser",
< 	if(is.character(browser)) sQuote(browser),"\n")
---
>     if(is.character(browser))
>      cat(gettextf("%s environment is shown in browser %s", main, sQuote(browser), domain = "R-utils"),"\n", sep = "")
>     else
>      cat(gettextf("%s environment is shown in browser", main, domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/de.R R/src/library/utils/R/de.R
30c30
< 		if( !is.vector(telt2) ) stop("wrong argument to 'dataentry'")
---
> 		if( !is.vector(telt2) ) stop("wrong argument passed to 'dataentry'")
38c38
< 	else stop("wrong argument to 'dataentry'")
---
> 	else stop("wrong argument passed to 'dataentry'")
78c78
< 	else stop("wrong argument to 'dataentry'")
---
> 	else stop("wrong argument passed to 'dataentry'")
148c148
< 		warning("'modes' argument ignored")
---
> 		warning(gettextf("'%s' argument ignored", "modes"))
164c164
< 		warning("'names' argument ignored")
---
> 		warning(gettextf("'%s' argument ignored", "names"))
168c168
< 		warning("'modes' argument ignored")
---
> 		warning(gettextf("'%s' argument ignored", "modes"))
191c191
<     if(j == 1L) warning("did not assign() anything")
---
>     if(j == 1L) warning("did not assign anything")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/debugger.R R/src/library/utils/R/debugger.R
50,51c50
<         cat(gettext("Browsing in the environment with call:\n   "),
<             calls[.selection], "\n", sep = "")
---
>         cat(gettext("Browsing in the environment with call:", domain = "R-utils"), "\n   ", calls[.selection], "\n", sep = "")
56,57c55
<         cat(gettextf("'dump' is not an object of class %s\n",
<                      dQuote("dump.frames")))
---
>         cat(gettextf("'%s' argument is not an object of class %s", "dump", dQuote("dump.frames"), domain = "R-utils"), "\n", sep = "")
63c61
<         cat(gettext("Message: "), msg)
---
>         cat(gettext("Message: ", domain = "R-utils"), msg)
66c64
< 	cat(gettextf("'dump' is empty\n"))
---
> 	cat(gettextf("'dump' is empty", domain = "R-utils"), "\n", sep = "")
71c69
<         cat(gettext("Available environments had calls:\n"))
---
>         cat(gettext("Available environments had calls:", domain = "R-utils"), "\n", sep = "")
73c71
<         cat(gettext("\nEnter an environment number, or 0 to exit  "))
---
>         cat("\n", gettext("Enter an environment number, or 0 to exit  ", domain = "R-utils"), sep = "")
139c137
<             cat(gettext("recover called non-interactively; frames dumped, use debugger() to view\n"))
---
>             cat(gettext("recover called non-interactively; frames dumped, use debugger() to view", domain = "R-utils"), "\n", sep = "")
146,147c144
<             which <- menu(calls,
<                           title="\nEnter a frame number, or 0 to exit  ")
---
>             which <- menu(calls, title=gettext("\nEnter a frame number, or 0 to exit  ", domain = "R-utils"))
149,150c146
<                 eval(substitute(browser(skipCalls=skip),
<                                 list(skip=7-which)), envir = sys.frame(which))
---
>                 eval(substitute(browser(skipCalls=skip), list(skip=7-which)), envir = sys.frame(which))
156c152
<         cat(gettext("No suitable frames for recover()\n"))
---
>         cat(gettext("No suitable frames for recover()", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/demo.R R/src/library/utils/R/demo.R
49c49
< 	colnames(db) <- c("Package", "LibPath", "Item", "Title")
---
> 	colnames(db) <- c(gettext("Package", domain = "R-utils"), gettext("LibPath", domain = "R-utils"), gettext("Item", domain = "R-utils"), gettext("Title", domain = "R-utils"))
51,60c51,56
< 	footer <- if(missing(package))
< 	    paste0("Use ",
<                    sQuote(paste("demo(package =",
<                                 ".packages(all.available = TRUE))")),
<                    "\n",
<                    "to list the demos in all *available* packages.")
< 	else
< 	    NULL
< 	y <- list(title = "Demos", header = NULL, results = db,
< 		  footer = footer)
---
> 	if(missing(package)) {
> 	   footer <- gettextf("Use: %s to list the demos in all *available* packages.", sQuote("demo(package = .packages(all.available = TRUE))"), domain = "R-utils")
> 	} else {
> 	footer <- NULL
> 	}
> 	y <- list(title = gettext("Demos"), header = NULL, results = db, footer = footer)
84c80
< 	stop(gettextf("No demo found for topic %s", sQuote(topic)), domain = NA)
---
> 	stop(gettextf("No demo found for topic %s", sQuote(topic)), domain = "R-utils")
87,88c83
< 	warning(gettextf("Demo for topic %s' found more than once,\nusing the one found in %s",
<                 sQuote(topic), sQuote(dirname(available[1L]))), domain = NA)
---
> 	warning(gettextf("Demo for topic %s' found more than once,\nusing the one found in %s", sQuote(topic), sQuote(dirname(available[1L]))), domain = "R-utils")
118c113
< 	    readline("\nType  <Return>	 to start : ")
---
> 	    readline(paste("\n", gettext("Type  <Return> to start:"), " ", sep = ""))
120,121c115
<     source(available, echo = echo, max.deparse.length = Inf,
<            keep.source = TRUE, encoding = encoding)
---
>     source(available, echo = echo, max.deparse.length = Inf, keep.source = TRUE, encoding = encoding)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/edit.R R/src/library/utils/R/edit.R
28,29c28
<                 stop("X11 library is missing: install XQuartz from xquartz.macosforge.org",
<                      domain = NA)
---
>                 stop("X11 library is missing: install XQuartz from xquartz.macosforge.org", domain = "R-utils")
37c36
<     msg <- "dataentry() should not be used in examples etc"
---
>     msg <- gettextf("'%s' function should not be used in examples etc", "dataentry()", domain = "R-utils")
44c43
<         stop("invalid 'data' argument")
---
>         stop(gettextf("invalid '%s' argument", "data"))
47c46
<         stop("invalid 'modes' argument")
---
>         stop(gettextf("invalid '%s' argument", "modes"))
55c54
<     msg <- "View() should not be used in examples etc"
---
>     msg <- gettextf("'%s' function should not be used in examples etc", "View()", domain = "R-utils")
69c68
<         stop("invalid 'x' argument")
---
>         stop(gettextf("invalid '%s' argument", "x"))
120c119
<                                     "classes discarded from columns %s"),
---
>                                     "classes discarded from columns %s", domain = "R-utils"),
156c155
<                         domain = NA)
---
>                         domain = "R-utils")
165c164
<                         domain = NA)
---
>                         domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/example.R R/src/library/utils/R/example.R
37c37
< 	warning(gettextf("no help found for %s", sQuote(topic)), domain = NA)
---
> 	warning(gettextf("no help found for %s", sQuote(topic)), domain = "R-utils")
49,50c49
<         warning(gettextf("%s has a help file but no examples", sQuote(topic)),
<                 domain = NA)
---
>         warning(gettextf("%s has a help file but no examples", sQuote(topic)), domain = "R-utils")
62,63c61
< 	    on.exit(assign(".Random.seed", oldSeed, envir = .GlobalEnv),
<                     add = TRUE)
---
> 	    on.exit(assign(".Random.seed", oldSeed, envir = .GlobalEnv), add = TRUE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/findLineNum.R R/src/library/utils/R/findLineNum.R
174c174
<     if (!length(x)) cat("No source refs found.\n")
---
>     if (!length(x)) cat(gettext("No source refs found.", domain = "R-utils"), "\n", sep = "")
184,187c184,193
<         cat(" ", x[[i]]$name, if (steps) paste(" step ", paste(x[[i]]$at, collapse=",")) else "", sep = "")
<         if (!is.null(x[[i]]$signature))
<             cat(" signature ", paste(x[[i]]$signature, collapse=","), sep = "")
<         cat(" in ", format(x[[i]]$env), "\n", sep = "")
---
> 
> 	if(steps && !is.null(x[[i]]$signature))
> 	 cat(gettextf(" %s step %s signature %s in %s", x[[i]]$name, paste(x[[i]]$at, collapse=","), paste(x[[i]]$signature, collapse=","), format(x[[i]]$env)))
> 	else if(steps && is.null(x[[i]]$signature))
> 	 cat(gettextf(" %s step %s in %s", x[[i]]$name, paste(x[[i]]$at, collapse=","), format(x[[i]]$env)))
> 	else if(!steps && !is.null(x[[i]]$signature))
> 	 cat(gettextf(" %s signature %s in %s", x[[i]]$name, paste(x[[i]]$signature, collapse=","), format(x[[i]]$env)))
> 	else if(!steps && is.null(x[[i]]$signature))
> 	 cat(gettextf(" %s in %s", x[[i]]$name, format(x[[i]]$env)))
> 	cat("\n")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/fix.R R/src/library/utils/R/fix.R
25c25
<         stop("'fix' requires a name")
---
>         stop(gettextf("'%s' function requires a name", "fix"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/format.R R/src/library/utils/R/format.R
44,45c44
<             stop(gettextf("too many list items (at most up to %d)", 26L),
<                  domain = NA)
---
>             stop(gettextf("too many list items (at most up to %d)", 26L), domain = "R-utils")
53,54c52
<             stop(gettextf("too many list items (at most up to %d)", 3899L),
<                  domain = NA)
---
>             stop(gettextf("too many list items (at most up to %d)", 3899L), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/help.R R/src/library/utils/R/help.R
100,103c100
<         writeLines(c(gettextf("No documentation for %s in specified packages and libraries:",
<                               sQuote(topic)),
<                      gettextf("you could try %s",
<                               sQuote(paste0("??", topic)))))
---
>         writeLines(gettextf("No documentation for %s in specified packages and libraries.\nYou could try %s", sQuote(topic), sQuote(paste0("??", topic)), domain = "R-utils"))
111,112c108
<         msg <- gettextf("Help for topic %s is not in any loaded package but can be found in the following packages:",
<                         sQuote(topic))
---
>         msg <- gettextf("Help for topic %s is not in any loaded package but can be found in the following packages:", sQuote(topic))
155,156c151
<             msg <- gettextf("Help on topic %s was found in the following packages:",
<                             sQuote(topic))
---
>             msg <- gettextf("Help on topic %s was found in the following packages:", sQuote(topic), domain = "R-utils")
260c255
<         stop(gettextf("invalid %s argument", sQuote("file")), domain = NA)
---
>         stop(gettextf("invalid '%s' argument", "file"), domain = "R-utils")
264c259
<         stop(gettextf("package %s exists but was not installed under R >= 2.10.0 so help cannot be accessed", sQuote(pkgname)), domain = NA)
---
>         stop(gettextf("package %s exists but was not installed under R >= 2.10.0 so help cannot be accessed", sQuote(pkgname)), domain = "R-utils")
278c273
<         stop(gettextf("creation of %s failed", sQuote(ofile2)), domain = NA)
---
>         stop(gettextf("creation of %s failed", sQuote(ofile2)), domain = "R-utils")
281,282c276
<         message(gettextf("Saving help page to %s", sQuote(basename(ofile2))),
<                 domain = NA)
---
>         message(gettextf("Saving help page to %s", sQuote(basename(ofile2))), domain = "R-utils")
284c278
<         message(gettextf("Saving help page to %s", sQuote(ofile)), domain = NA)
---
>         message(gettextf("Saving help page to %s", sQuote(ofile)), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/history.R R/src/library/utils/R/history.R
40c40
<     file.show(file2, title = "R History", delete.file = TRUE)
---
>     file.show(file2, title = gettext("R History", domain = "R-utils"), delete.file = TRUE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/indices.R R/src/library/utils/R/indices.R
54c54
<         warning(gettextf("no package '%s' was found", pkg), domain = NA)
---
>         warning(gettextf("no package '%s' was found", pkg), domain = "R-utils")
65,66c65
<             stop(gettextf("metadata of package '%s' is corrupt", pkg),
<                  domain = NA)
---
>             stop(gettextf("metadata of package '%s' is corrupt", pkg), domain = "R-utils")
71,72c70
<             stop(gettextf("DESCRIPTION file of package '%s' is corrupt", pkg),
<                  domain = NA)
---
>             stop(gettextf("DESCRIPTION file of package '%s' is corrupt", pkg), domain = "R-utils")
109c107
<         warning(gettextf("DESCRIPTION file of package '%s' is missing or broken", pkg), domain = NA)
---
>         warning(gettextf("DESCRIPTION file of package '%s' is missing or broken", pkg), domain = "R-utils")
222,223c220,221
< 	       lapply(split(seq_len(nrow(db)), db[, "Package"]),
< 		      function(ind) db[ind, c("Item", "Title"), drop = FALSE])
---
> 	       lapply(split(seq_len(nrow(db)), db[, 1L]),
> 		      function(ind) db[ind, 3L:4L, drop = FALSE])
228,233c226,230
<         writeLines(paste0(ifelse(first, "", "\n"), x$title,
<                           " in package ", sQuote(pkg), ":\n"),
<                    outConn)
<         writeLines(formatDL(out[[pkg]][, "Item"],
<                             out[[pkg]][, "Title"]),
<                    outConn)
---
> 	if(first)
>         writeLines(paste(gettextf("%s in package %s:", x$title, sQuote(pkg), domain = "R-utils"), "\n", sep = ""), outConn)
> 	else
>         writeLines(paste("\n", gettextf("%s in package %s:", x$title, sQuote(pkg), domain = "R-utils"), "\n", sep = ""), outConn)
>         writeLines(formatDL(out[[pkg]][, 1L], out[[pkg]][, 2L]), outConn)
239c236
<         writeLines(paste("no", tolower(x$title), "found"))
---
>         writeLines(gettextf("no %s found", tolower(x$title)))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/linkhtml.R R/src/library/utils/R/linkhtml.R
59c59
<         message("Making 'packages.html' ...", appendLF = FALSE, domain = NA)
---
>         message("Making 'packages.html' ...", appendLF = FALSE, domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/menu.R R/src/library/utils/R/menu.R
21c21
<     if(!interactive()) stop("menu() cannot be used non-interactively")
---
>     if(!interactive()) stop("'menu()' function cannot be used non-interactively")
48c48
< 	cat(gettext("Enter an item from the menu, or 0 to exit\n"))
---
> 	cat(gettext("Enter an item from the menu, or 0 to exit", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/modifyList.R R/src/library/utils/R/modifyList.R
62c62
<                                  "%d times caught the same error in %s: %s"),
---
>                                  "%d times caught the same error in %s: %s", domain = "R-utils"),
65,67c65
<                 paste(gettextf(
<                     "%d errors caught in %s.  The error messages and their frequencies are",
<                     sum(tt), e.call),
---
>                 paste(sprintf(ngettext(sum(tt), "%d error caught in %s. The error message and its frequency is:", "%d errors caught in %s. The error messages and their frequencies are:", domain = "R-utils"), sum(tt), e.call),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/news.R R/src/library/utils/R/news.R
54,56c54
<     pos <- regexpr(sprintf("^%s",
<                            .standard_regexps()$valid_numeric_version),
<                    version)
---
>     pos <- regexpr(sprintf("^%s", .standard_regexps()$valid_numeric_version), version)
113a112
> 	    if(is.na(dates)) {
115,119c114,118
<                 format(sprintf("Changes in %s%s",
<                                vstrings,
<                                ifelse(is.na(dates), "",
<                                       sprintf(" (%s)", dates))),
<                        justify = "centre", width = 72L)
---
>                 format(gettextf("Changes in %s", vstrings, domain = "R-utils"), justify = "centre", width = 72L)
> 	    } else {
>             vheaders <-
>                 format(gettextf("Changes in %s (%s)", vstrings, dates, domain = "R-utils"), justify = "centre", width = 72L)
> 	    }
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/objects.R R/src/library/utils/R/objects.R
38,40c38
< 	    warning(gettextf(
< 	"'%s' is a formal generic function; S3 methods will not likely be found",
< 			     fname), domain = NA)
---
> 	    warning(gettextf("%s is a formal generic function; S3 methods will not likely be found", sQuote(fname)), domain = "R-utils")
112,113c110
<             stop(gettextf("no function '%s' is visible", generic.function),
<                  domain = NA)
---
>             stop(gettextf("no function '%s' is visible", generic.function), domain = "R-utils")
120,121c117
<                 warning(gettextf("generic function '%s' dispatches methods for generic '%s'",
<                         generic.function, truegf), domain = NA)
---
>                 warning(gettextf("generic function '%s' dispatches methods for generic '%s'", generic.function, truegf), domain = "R-utils")
136c132
< 			     generic.function), domain = NA)
---
> 			     generic.function), domain = "R-utils")
153,154c149
<                               paste("registered S3method for",
<                                     generic.function))
---
>                               gettextf("registered S3method for %s", generic.function, domain = "R-utils"))
194c189
<             info <- rbindSome(info, S3reg, msg = "registered S3method")
---
>             info <- rbindSome(info, S3reg, msg = gettext("registered S3method", domain = "R-utils"))
196c191
<     else stop("must supply 'generic.function' or 'class'")
---
>     else stop("must supply 'generic.function' or 'class' argument")
261c256
<         cat("see '?methods' for accessing help and source code\n")
---
>         cat(gettext("see '?methods' for accessing help and source code", domain = "R-utils"), "\n", sep = "")
263c258
<         cat("no methods found\n")
---
>         cat(gettext("no methods found", domain = "R-utils"), "\n", sep = "")
275c270
<             else stop(gettextf("no function '%s' could be found", f), domain = NA)
---
>             else stop(gettextf("no function '%s' could be found", f), domain = "R-utils")
436,437c431
<             stop("locked binding of ", sQuote(x), " cannot be changed",
<                  domain = NA)
---
>             stop(gettextf("locked binding of %s cannot be changed", sQuote(x), domain = "R-utils"), domain = "R-utils")
443,445c437
<                 msg <-
<                     gettextf("changing locked binding for %s in %s whilst loading %s",
<                              sQuote(x), sQuote(ns_name), sQuote(in_load))
---
>                 msg <- gettextf("changing locked binding for %s in %s whilst loading %s", sQuote(x), sQuote(ns_name), sQuote(in_load))
447c439
<                     warning(msg, call. = FALSE, domain = NA, immediate. = TRUE)
---
>                     warning(msg, call. = FALSE, domain = "R-utils", immediate. = TRUE)
450,452c442,443
<             warning(gettextf("changing locked binding for %s in %s",
<                              sQuote(x), sQuote(ns_name)),
<                     call. = FALSE, domain = NA, immediate. = TRUE)
---
>             warning(gettextf("changing locked binding for %s in %s", sQuote(x), sQuote(ns_name)),
>                     call. = FALSE, domain = "R-utils", immediate. = TRUE)
491c482
<         stop("'fixInNamespace' requires a name")
---
>         stop(gettextf("'%s' function requires a name", "fixInNamespace"))
531d521
<                 msg <- paste("registered S3 method for", gen)
533c523,525
<                     msg <- paste(msg, "from namespace", nmev)
---
>                     msg <- gettextf("registered S3 method for %s from namespace %s", gen, nmev)
> 		else
>                     msg <- gettextf("registered S3 method for %s", gen)
569c561
<         cat("no object named", sQuote(x$name), "was found\n")
---
>         cat(gettextf("no object named %s was found", sQuote(x$name), domain = "R-utils"), "\n", sep = "")
571,574c563,566
<         cat("A single object matching", sQuote(x$name), "was found\n")
<         cat("It was found in the following places\n")
< 	cat(paste0("  ", x$where), sep="\n")
<         cat("with value\n\n")
---
>         cat(gettextf("A single object matching %s was found", sQuote(x$name), domain = "R-utils"), "\n", sep = "")
>         cat(gettextf("It was found in the following places\n%s\nwith value:", paste0("  ", x$where, collapse = "\n"), domain = "R-utils"))
> #	cat(paste0("  ", x$where, collapse = "\n"), sep="\n")
>         cat("\n\n")
577,579c569,570
<         cat(n, "differing objects matching", sQuote(x$name),
<             "were found\n")
<         cat("in the following places\n")
---
>         cat(sprintf(ngettext(n, "%d differing object matching %s was found\nin the following places:",
> 		"%d differing objects matching %s were found\nin the following places:", domain = "R-utils"), n, sQuote(x$name)), "\n", sep = "")
581c572
<         cat("Use [] to view one of them\n")
---
>         cat(gettextf("Use [] to view one of them", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/packageStatus.R R/src/library/utils/R/packageStatus.R
107c107
<     cat("\nInstalled packages:\n")
---
>     cat("\n", gettext("Installed packages:", domain = "R-utils"), "\n", sep = "")
110c110
<         cat("\n*** Library ", names(x$Libs)[k], "\n", sep = "")
---
>         cat("\n*** ", gettextf("Library %s", names(x$Libs)[k], domain = "R-utils"), "\n", sep = "")
113c113
<     cat("\n\nAvailable packages:\n")
---
>     cat("\n\n", gettext("Available packages:", domain = "R-utils"), "\n", sep = "")
115c115
<     cat("(each package appears only once)\n")
---
>     cat(gettext("(each package appears only once)", domain = "R-utils"), "\n", sep = "")
117c117
<         cat("\n*** Repository ", names(x$Repos)[k], "\n", sep = "")
---
>         cat("\n*** ", gettextf("Repository %s", names(x$Repos)[k], domain = "R-utils"), "\n", sep = "")
125c125
<     cat("Number of installed packages:\n")
---
>     cat(gettext("Number of installed packages:", domain = "R-utils"), "\n", sep = "")
128c128
<     cat("\nNumber of available packages (each package counted only once):\n")
---
>     cat("\n", gettext("Number of available packages (each package counted only once):", domain = "R-utils"), "\n", sep = "")
150c150
<         cat("Nothing to do!\n")
---
>         cat(gettext("Nothing to do!", domain = "R-utils"), "\n", sep = "")
169c169
<             answer <- askYesNo("Update?")
---
>             answer <- askYesNo(gettext("Update?"))
171c171
<                 cat("cancelled by user\n")
---
>                 cat(gettext("cancelled by user", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/packages.R R/src/library/utils/R/packages.R
133c133
<                                      repos),
---
>                                      repos, domain = "R-utils"),
191c191
<             stop("invalid 'filters' argument.")
---
>             stop(gettextf("invalid '%s' argument", "filters"))
371c371
<             answer <- askYesNo("Update?")
---
>             answer <- askYesNo(gettext("Update?"))
413,414c413,414
< 		    warning(sprintf("package '%s' in library '%s' will not be updated",
< 				    oldPkgs[pkg], oldPkgs[pkg, 2]),
---
> 		    warning(gettextf("package %s in library %s will not be updated",
> 				    sQuote(oldPkgs[pkg]), sQuote(oldPkgs[pkg, 2])),
522c522
<                       lib.loc), domain = NA)
---
>                       lib.loc), domain = "R-utils")
597c597
<                         domain = NA)
---
>                         domain = "R-utils")
604c604
<                                      sQuote(pkgpath)), domain = NA)
---
>                                      sQuote(pkgpath)), domain = "R-utils")
623c623
<             stop("'priority' must be character or NULL")
---
>             stop(gettextf("'%s' argument must be character or NULL", "priority"))
707c707
<                                  "Removing packages from %s\n(as %s is unspecified)"),
---
>                                  "Removing packages from %s\n(as %s is unspecified)", domain = "R-utils"),
741c741
<                     domain = NA, immediate. = TRUE)
---
>                     domain = "R-utils", immediate. = TRUE)
779c779
<                             domain = NA, immediate. = TRUE)
---
>                             domain = "R-utils", immediate. = TRUE)
790c790
<                             domain = NA, immediate. = TRUE)
---
>                             domain = "R-utils", immediate. = TRUE)
810,811c810
<         cat(gettext("--- Please select a CRAN mirror for use in this session ---"),
<             "\n", sep = "")
---
>         cat(gettext("--- Please select a CRAN mirror for use in this session ---", domain = "R-utils"), "\n", sep = "")
821c820
<     if("@CRAN@" %in% repos) stop("trying to use CRAN without setting a mirror")
---
>     if("@CRAN@" %in% repos) stop("trying to use CRAN without setting a mirror", domain = "R-utils")
873c872
<         stop("cannot choose a ", label, " mirror non-interactively")
---
>         stop(gettextf("cannot choose a %s mirror non-interactively", label))
1074c1073
<         stop(gettextf("%s must be supplied", sQuote("available")), domain = NA)
---
>         stop(gettextf("%s must be supplied", sQuote("available")), domain = "R-utils")
1122c1121
<                     domain = NA)
---
>                     domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/packages2.R R/src/library/utils/R/packages2.R
55,56c55,62
<         msg <- paste0(if(binary) "as a binary package ", "for ",
<                       sub(" *\\(.*","", R.version.string))
---
>       msg <- sub(" *\\(.*","", R.version.string)
>         if(binary) {
> 	warning(sprintf(ngettext(sum(miss),
> 				 "package %s is not available (as a binary package for %s)",
> 				 "packages %s are not available (as a binary packages for %s)", domain = "R-utils"),
> 			paste(sQuote(p0[miss]), collapse = ", "), msg),
>                 domain = NA, call. = FALSE)
>         } else {
58,59c64,65
< 				 "package %s is not available (%s)",
< 				 "packages %s are not available (%s)"),
---
> 				 "package %s is not available (for %s)",
> 				 "packages %s are not available (for %s)", domain = "R-utils"),
61a68
>         }
66c73
<                                    "packages %s are base packages, and should not be updated"),
---
>                                    "packages %s are base packages, and should not be updated", domain = "R-utils"),
72c79
<             warning(sprintf("Perhaps you meant %s ?",
---
>             warning(gettextf("Perhaps you meant %s?",
74c81
<                     call. = FALSE, domain = NA)
---
>                     call. = FALSE, domain = "R-utils")
107c114
<                                      "dependencies %s are not available"),
---
>                                      "dependencies %s are not available", domain = "R-utils"),
119c126
<                                      "also installing the dependencies %s"),
---
>                                      "also installing the dependencies %s", domain = "R-utils"),
259c266
<                     "packages %s are in use and will not be installed"),
---
>                     "packages %s are in use and will not be installed", domain = "R-utils"),
272,273c279,280
<                                      "Installing package into %s\n(as %s is unspecified)",
<                                      "Installing packages into %s\n(as %s is unspecified)"),
---
>                                      "Installing package into %s directory\n(as %s directory is unspecified)",
>                                      "Installing packages into %s directory\n(as %s directory is unspecified)", domain = "R-utils"),
282c289
<                               "'lib' elements %s are not writable directories"),
---
>                               "'lib' elements %s are not writable directories", domain = "R-utils"),
298c305
<                 domain = NA, immediate. = TRUE)
---
>                 domain = "R-utils", immediate. = TRUE)
312c319
<                          domain = NA)
---
>                          domain = "R-utils")
365c372
<                      domain = NA)
---
>                      domain = "R-utils")
392c399
<             stop("type == \"both\" can only be used on Windows or a CRAN build for macOS")
---
>             stop("'type == \"both\"' option can only be used on Windows or a CRAN build for macOS")
442c449
<                             "There are binary versions available but the source versions are later")
---
>                             "There are binary versions available but the source versions are later", domain = "R-utils")
457c464
<                                  "Do you want to install from sources the packages which need compilation?")
---
>                                  "Do you want to install from sources the packages which need compilation?", domain = "R-utils")
462c469
<                     cat("  Binaries will be installed\n")
---
>                     cat("  ", gettext("Binaries will be installed", domain = "R-utils"), "\n", sep = "")
475c482
<                              "Packages which are only available in source form, and may need compilation of C/C++/Fortran")
---
>                              "Packages which are only available in source form, and may need compilation of C/C++/Fortran", domain = "R-utils")
480c487
<                     res <- askYesNo("Do you want to attempt to install these from sources?")
---
>                     res <- askYesNo(gettext("Do you want to attempt to install these from sources?"))
484c491
<                     cat("  These will not be installed\n")
---
>                     cat("  ", gettext("These will not be installed", domain = "R-utils"), "\n", sep = "")
511c518
<                                      "installing the source packages %s"),
---
>                                      "installing the source packages %s", domain = "R-utils"),
545c552
<                                          "packages %s are available as source packages but not as binaries"),
---
>                                          "packages %s are available as source packages but not as binaries", domain = "R-utils"),
557c564
<                                     "There are binary versions available (and will be installed) but the source versions are later")
---
>                                     "There are binary versions available (and will be installed) but the source versions are later", domain = "R-utils")
630,631c637
<             stop(gettextf("unable to create %s", sQuote(keep_outputs)),
<                  domain = NA)
---
>             stop(gettextf("unable to create %s", sQuote(keep_outputs)), domain = "R-utils")
635,636c641
<         stop(gettextf("invalid %s argument", sQuote("keep_outputs")),
<              domain = NA)
---
>         stop(gettextf("invalid '%s' argument", "keep_outputs"), domain = "R-utils")
672,674c677
<         message(gettextf("system (cmd0): %s",
<                          paste(c(cmd0, args0), collapse = " ")),
<                 domain = NA)
---
>         message(gettextf("system (cmd0): %s", paste(c(cmd0, args0), collapse = " ")), domain = "R-utils")
693,695c696
<                warning(gettextf("installation of package %s had non-zero exit status",
<                                 sQuote(update[i, 1L])),
<                        domain = NA)
---
>                warning(gettextf("installation of package %s had non-zero exit status", sQuote(update[i, 1L]), domain = "R-utils"))
698c699
<                message(sprintf("%d): succeeded '%s'", i, cmd), domain = NA)
---
>                message(gettextf("%d): succeeded '%s'", i, cmd), domain = "R-utils")
709,711c710
<             stop(gettextf("unable to create temporary directory %s",
<                           sQuote(tmpd)),
<                  domain = NA)
---
>             stop(gettextf("unable to create temporary directory %s", sQuote(tmpd)), domain = "R-utils")
727,729c726
< 	if(verbose) message(gettextf("foundpkgs: %s",
<                                      paste(foundpkgs, collapse=", ")),
<                             domain = NA)
---
> 	if(verbose) message(gettextf("foundpkgs: %s", paste(foundpkgs, collapse=", ")), domain = "R-utils")
734,736c731
< 	if(verbose) message(gettextf("files: %s",
<                                      paste(files, collapse=", \n\t")),
<                             domain = NA)
---
> 	if(verbose) message(gettextf("files: %s", paste(files, collapse=", \n\t")), domain = "R-utils")
760,762c755
<                 stop(gettextf("unable to create temporary directory %s",
<                               sQuote(tmpd2)),
<                      domain = NA)
---
>                 stop(gettextf("unable to create temporary directory %s", sQuote(tmpd2)), domain = "R-utils")
802c795
<                     paste("\t@echo begin installing package", sQuote(pkg)),
---
>                     paste("\t@echo ", gettextf("begin installing package %s", sQuote(pkg), domain = "R-utils"), sep = ""),
821,823c814
<                 warning(gettextf("installation of one or more packages failed,\n  probably %s",
<                                  paste(sQuote(failed), collapse = ", ")),
<                         domain = NA)
---
>                 warning(gettextf("installation of one or more packages failed,\n  probably %s", paste(sQuote(failed), collapse = ", ")), domain = "R-utils")
847,849c838
<                     warning(gettextf("installation of package %s had non-zero exit status",
<                                      sQuote(update[i, 1L])),
<                             domain = NA)
---
>                     warning(gettextf("installation of package %s had non-zero exit status", sQuote(update[i, 1L]), domain = "R-utils"))
852,853c841
<                     message(sprintf("%d): succeeded '%s'", i, cmd),
<                             domain = NA)
---
>                     message(gettextf("%d): succeeded '%s'", i, cmd, domain = "R-utils"))
863,865c851
<             cat("\n", gettextf("The downloaded source packages are in\n\t%s",
<                                sQuote(normalizePath(tmpd, mustWork = FALSE))),
<                 "\n", sep = "", file = stderr())
---
>             cat("\n", gettext("The downloaded source packages are in:", domain = "R-utils"), "\n\t",sQuote(normalizePath(tmpd, mustWork = FALSE)), "\n", sep = "", file = stderr())
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/page.R R/src/library/utils/R/page.R
36c36
<             stop(gettextf("no object named '%s' to show", x), domain = NA)
---
>             stop(gettextf("no object named '%s' to show", x), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/progressBar.R R/src/library/utils/R/progressBar.R
108c108
<             domain = NA)
---
>             domain = "R-utils")
117c117
<              domain = NA)
---
>              domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/prompt.R R/src/library/utils/R/prompt.R
169,172c169
<     message(gettextf("Created file named %s.", sQuote(filename)),
<             "\n",
<             gettext("Edit the file and move it to the appropriate directory."),
<             domain = NA)
---
>     message(gettextf("Created file named %s.", sQuote(filename)), "\n", gettext("Edit the file and move it to the appropriate directory."), domain = "R-utils", sep = "")
322c319
<             domain = NA)
---
>             domain = "R-utils")
394,397c391
<     message(gettextf("Created file named %s.", sQuote(filename)),
<             "\n",
<             gettext("Edit the file and move it to the appropriate directory."),
<             domain = NA)
---
>     message(gettextf("Created file named %s.", sQuote(filename)), "\n", gettext("Edit the file and move it to the appropriate directory."), domain = "R-utils", sep = "")
453c447
<     message(gettextf("Created file named %s.", sQuote(filename)),
---
>     message(gettextf("Created file named %s.", sQuote(filename), domain = "R-utils"),
455c449
<             gettext("Edit the file and move it to the appropriate directory."),
---
>             gettext("Edit the file and move it to the appropriate directory.", domain = "R-utils"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/question.R R/src/library/utils/R/question.R
34c34
< 	    cat("Contacting Delphi...")
---
> 	    cat(gettext("Contacting Delphi...", domain = "R-utils"))
37c37
< 	    cat("the oracle is unavailable.\nWe apologize for any inconvenience.\n")
---
> 	    cat(gettext("the oracle is unavailable.\nWe apologize for any inconvenience.", domain = "R-utils"), "\n", sep = "")
89,91c89
< 		stop(gettextf("no documentation of type %s and topic %s (or error in processing help)",
< 			      sQuote(type), sQuote(topicExpr)),
<                      domain = NA)
---
> 		stop(gettextf("no documentation of type %s and topic %s (or error in processing help)", sQuote(type), sQuote(topicExpr)), domain = "R-utils")
131,133c129
<             stop(gettextf("the object of class %s in the function call %s could not be used as a documentation topic",
<                           dQuote(class(f)), sQuote(deparse(expr))),
<                  domain = NA)
---
>             stop(gettextf("the object of class %s in the function call %s could not be used as a documentation topic", dQuote(class(f)), sQuote(deparse(expr))), domain = "R-utils")
136,138c132
<             stop(gettextf("no methods for %s and no documentation for it as a function",
<                           sQuote(f)),
<                  domain = NA)
---
>             stop(gettextf("no methods for %s and no documentation for it as a function", sQuote(f)), domain = "R-utils")
160,163c154
<             warning(gettextf("no method defined for function %s and signature %s",
<                              sQuote(f),
<                              sQuote(sigFormat(sigNames, sigClasses))),
<                     domain = NA)
---
>             warning(gettextf("no method defined for function %s and signature %s", sQuote(f), sQuote(sigFormat(sigNames, sigClasses))), domain = "R-utils")
167,170c158
<             stop(gettextf("no documentation for function %s and signature %s",
<                           sQuote(f),
<                           sQuote(sigFormat(sigNames, sigClasses))),
<                  domain = NA)
---
>             stop(gettextf("no documentation for function %s and signature %s", sQuote(f), sQuote(sigFormat(sigNames, sigClasses))), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/read.DIF.R R/src/library/utils/R/read.DIF.R
137c137
<             warning("header and 'col.names' are of different lengths")
---
>             warning("header and 'col.names' argument are of different lengths")
187,188c187
< 	warning("cols = ", cols, " != length(data) = ", length(data),
<                 domain = NA)
---
> 	warning(gettextf("cols = %d != length(data) = %d", cols, length(data)), domain = "R-utils")
208,209c207
< 	stop(gettextf("'as.is' has the wrong length %d  != cols = %d",
<                      length(as.is), cols), domain = NA)
---
> 	stop(gettextf("'as.is' has the wrong length %d != cols = %d", length(as.is), cols), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/readhttp.R R/src/library/utils/R/readhttp.R
45,46c45
<         stop(gettextf("%s option must be a length one character vector or NULL",
<                       sQuote("HTTPUserAgent")), domain = NA)
---
>         stop(gettextf("%s option must be a length one character vector or NULL", sQuote("HTTPUserAgent")), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/readtable.R R/src/library/utils/R/readtable.R
28,30c28,29
<         stop("'file' must be a character string or connection")
<     .External(C_countfields, file, sep, quote, skip, blank.lines.skip,
<               comment.char)
---
>         stop(gettextf("'%s' argument must be a character string or connection", "file"))
>     .External(C_countfields, file, sep, quote, skip, blank.lines.skip, comment.char)
81c80
<         stop("'file' must be a character string or connection")
---
>         stop(gettextf("'%s' argument must be a character string or connection", "file"))
142c141
<                 warning("header and 'col.names' are of different lengths")
---
>                 warning("header and 'col.names' argument are of different lengths")
201,202c200
< 	warning("cols = ", cols, " != length(data) = ", length(data),
<                 domain = NA)
---
> 	warning(gettextf("cols = %d != length(data) = %d", cols, length(data)), domain = "R-utils")
222,223c220
< 	stop(gettextf("'as.is' has the wrong length %d  != cols = %d",
<                      length(as.is), cols), domain = NA)
---
> 	stop(gettextf("'as.is' has the wrong length %d != cols = %d", length(as.is), cols), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/relist.R R/src/library/utils/R/relist.R
93c93
< 	warning("relist() requires recursively unlisted objects.")
---
> 	warning("'relist()' requires recursively unlisted objects.")
106,107c106
< 	stop("The 'flesh' argument does not contain a skeleton attribute.\n",
< 	     "Either ensure you unlist a relistable object, or specify the skeleton separately.")
---
> 	stop("The 'flesh' argument does not contain a skeleton attribute.\nEither ensure you unlist a relistable object, or specify the skeleton separately.")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/roman.R R/src/library/utils/R/roman.R
136c136
<                                      "invalid roman numerals: %s"),
---
>                                      "invalid roman numerals: %s", domain = "R-utils"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/rtags.R R/src/library/utils/R/rtags.R
80,83c80
<         paste(sprintf("%s\x7f%s\x01%d,%d",
<                       lines, tokens, startlines,
<                       as.integer(offsets)),
<               collapse = "\n")
---
>         paste(sprintf("%s\x7f%s\x01%d,%d", lines, tokens, startlines, as.integer(offsets)), collapse = "\n")
153c150
<         stop("length mismatch: bug in code!", domain = NA)
---
>         stop("length mismatch: bug in code!", domain = "R-utils")
185,186c182
<             stop(gettextf("Could not create file %s, aborting", ofile),
<                  domain = NA)
---
>             stop(gettextf("Could not create file %s, aborting", sQuote(ofile)), domain = "R-utils")
192c188
<         if (verbose) message(gettextf("Processing file %s", s), domain = NA)
---
>         if (verbose) message(gettextf("Processing file %s", s), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/sessionInfo.R R/src/library/utils/R/sessionInfo.R
141,142c141,142
<     cat("Platform: ", x$platform, "\n", sep = "")
<     if (!is.null(x$running)) cat("Running under: ",  x$running, "\n", sep = "")
---
>     cat(gettext("Platform: ", domain = "R-utils"), x$platform, "\n", sep = "")
>     if (!is.null(x$running)) cat(gettext("Running under:", domain = "R-utils"), " ", x$running, "\n", sep = "")
144c144
<     cat("Matrix products: ", x$matprod, "\n", sep = "")
---
>     cat(gettext("Matrix products: ", domain = "R-utils"), x$matprod, "\n", sep = "")
164c164
<         cat("locale:\n")
---
>         cat(gettext("locale:", domain = "R-utils"), "\n", sep = "")
168c168
<             cat("system code page: ", x$system.codepage, "\n", sep = "")
---
>             cat(gettext("system code page: ", domain = "R-utils"), x$system.codepage, "\n", sep = "")
171c171
<     cat("attached base packages:\n")
---
>     cat(gettext("attached base packages:", domain = "R-utils"), "\n", sep = "")
174c174
<         cat("\nother attached packages:\n")
---
>         cat("\n", gettext("other attached packages:", domain = "R-utils"), "\n", sep = "")
178c178
<         cat("\nloaded via a namespace (and not attached):\n")
---
>         cat("\n", gettext("loaded via a namespace (and not attached):", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/sock.R R/src/library/utils/R/sock.R
21,22c21,22
<     if(length(as.integer(x$socket)) != 1L) stop("invalid 'socket' argument")
<     cat("Socket connection #", x$socket, "to", x$host, "on port", x$port, "\n")
---
>     if(length(as.integer(x$socket)) != 1L) stop(gettextf("invalid '%s' argument", "socket"))
>     cat(gettextf("Socket connection #%s to %s on port %s", x$socket, x$host, x$port, domain = "R-utils"), "\n", sep = "")
29c29
< 	stop("'port' must be integer of length 1")
---
> 	stop(gettextf("'%s' argument must be integer of length 1", "port"))
31c31
< 	stop("'host' must be character of length 1")
---
> 	stop(gettextf("'%s' argument must be character of length 1", "host"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/str.R R/src/library/utils/R/str.R
38d37
<     if(0 < length(cl)) cat("Classes", paste(sQuote(cl), collapse=", "), "and ")
40,42c39,64
<     cat("'data.frame':	", nrow(object), " obs. of  ",
< 	(p <- length(object)), " variable", if(p != 1)"s", if(p > 0)":",
< 	"\n", sep = "")
---
>     p <- length(object)
>     if(length(cl) > 0) {
>      if(p == 1)
>       {
>       cat(sprintf(ngettext(nrow(object), "Classes %s and 'data.frame':	%d observation of %d variable",
> 				"Classes %s and 'data.frame':	%d observations of %d variable", domain = "R-utils"), paste(sQuote(cl), collapse=", "), nrow(object), p), ":\n", sep = "")
>       }
>      else
>       {
>       cat(sprintf(ngettext(nrow(object), "Classes %s and 'data.frame':	%d observation of %d variables",
> 				"Classes %s and 'data.frame':	%d observations of %d variables", domain = "R-utils"), paste(sQuote(cl), collapse=", "), nrow(object), p), if(p > 0) ":", "\n", sep = "")
>       }
>     }
>     else
>     {
>      if(p == 1)
>       {
>       cat(sprintf(ngettext(nrow(object), "'data.frame':	%d observation of %d variable",
> 				"'data.frame':	%d observations of %d variable", domain = "R-utils"), nrow(object), p), ":\n", sep = "")
>       }
>      else
>       {
>       cat(sprintf(ngettext(nrow(object), "'data.frame':	%d observation of %d variables",
> 				"'data.frame':	%d observations of %d variables", domain = "R-utils"), nrow(object), p), if(p > 0) ":", "\n", sep = "")
>       }
>     }
122c144
< 	warning('invalid options("str") -- using defaults instead')
---
> 	warning("invalid options(\"str\") -- using defaults instead")
127,129c149
<             warning(gettextf("invalid components in options(\"str\"): %s",
<                              paste(setdiff(names(strO), oDefs), collapse = ", ")),
<                     domain = NA)
---
>             warning(gettextf("invalid components in options(\"str\"): %s", paste(setdiff(names(strO), oDefs), collapse = ", ")), domain = "R-utils")
171c191
<         warning("'str.default': 'le' is NA, so taken as 0", immediate. = TRUE)
---
>         warning("'str.default': 'object' argument is of length NA, so taken as 0", immediate. = TRUE)
186c206
<     maybe_truncate <- function(x, nx = nchar.w(x), S = "\"", ch = "| __truncated__")
---
>     maybe_truncate <- function(x, nx = nchar.w(x), S = "\"", ch = gettext("| __truncated__"))
192c212
< 		stop(gettextf("'nchar.max = %d' is too small", nchar.max), domain=NA)
---
> 		stop(gettextf("'nchar.max = %d' is too small", nchar.max), domain = "R-utils")
201,203c221
<     pClass <- function(cls)
< 	paste0("Class", if(length(cls) > 1) "es",
< 	       " '", paste(cls, collapse = "', '"), "' ")
---
> 
223c241
< 	if(is.na(le)) " __no length(.)__ "
---
> 	if(is.na(le)) gettext(" __no length(.)__ ")
255,256c273,274
<             paste0(" Time-Series ", lestr, " from ", format(tsp.a[1L]),
<                    " to ", format(tsp.a[2L]), ":")
---
>             gettextf(" Time-Series %s from %s to %s:", lestr, format(tsp.a[1L]),
>                    format(tsp.a[2L]), domain = "R-tools")
278,279c296
< 		cat("Prototypical reference class", " '", paste(cl, collapse = "', '"),
< 		    "' [package \"", attr(cl,"package"), "\"]\n", sep="")
---
> 	    cat(gettextf("Prototypical reference class %s [package %s]", paste(dQuote(cl), collapse = ", "), sQuote(attr(cl,"package")), domain = "R-tools"), "\n", sep = "")
285,287c302
< 	    cat("Reference class", " '", paste(cl, collapse = "', '"),
< 		"' [package \"", attr(cl,"package"), "\"] with ",
<                 n.of(length(a), "field"), "\n", sep = "")
---
> 	    cat(sprintf(ngettext(length(a), "Reference class %s [package %s] with %d field", "Reference class %s [package %s] with %d fields", domain = "R-utils"), paste(sQuote(cl), collapse = ", "), dQuote(attr(cl,"package")), length(a)), "\n", sep = "")
292d306
< 	    cat(indent.str, "and ", n.of(length(meths), "method"), sep = "")
294,295c308,309
< 	    if(lo <- length(oMeths)) {
< 		cat(", of which", lo, ngettext(lo, "is", "are", domain = NA), " possibly relevant")
---
> 	    if(length(oMeths)) {
> 		cat(sprintf(ngettext(length(meths), "%s and %d method, of which %d are possibly relevant", "%s and %d methods, of which %d are possibly relevant", domain = "R-utils"), indent.str, length(meths), length(oMeths)))
302a317,318
> 	    } else {
> 		cat(sprintf(ngettext(length(meths), "%s and %d method,", "%s and %d methods,", domain = "R-utils"), indent.str, length(meths)))
305c321
< 		cat(" and ", n.of(length(sNms), "slot"), "\n", sep="")
---
> 		cat(sprintf(ngettext(length(sNms), " and %d slot", " and %d slots", domain = "R-utils"), length(sNms)), "\n", sep = "")
310,312c326,327
< 	    else if(lo == 0) cat(".\n")
< 	}
< 	else { ## S4 non-envRefClass
---
> 
> 	} else { ## S4 non-envRefClass
314,316c329
< 	    cat("Formal class", " '", paste(cl, collapse = "', '"),
< 		"' [package \"", attr(cl,"package"), "\"] with ",
< 		n.of(length(sNms), "slot"), "\n", sep = "")
---
> 	    cat(sprintf(ngettext(length(sNms), "Formal class %s [package %s] with %d slot", "Formal class %s [package %s] with %d slots", domain = "R-utils"), paste(sQuote(cl), collapse = ", "), dQuote(attr(cl,"package")),  length(sNms)), "\n", sep = "")
318,319c331
< 	    strSub(a, comp.str = "@ ", no.list=TRUE, give.length=give.length,
< 		   indent.str = paste(indent.str,".."), nest.lev = nest.lev + 1)
---
> 	    strSub(a, comp.str = "@ ", no.list=TRUE, give.length=give.length, indent.str = paste(indent.str,".."), nest.lev = nest.lev + 1)
332,333c344,350
< 	    else cat(" ", if(!is.null(names(object))) "Named ",
< 		     if(i.pl)"pair", "list()\n", sep = "")
---
> 	    else
> 		{
> 		if(!is.null(names(object)) && i.pl) cat(" ", gettext("Named pairlist()", domain = "R-utils"),"\n",  sep = "")
> 		else if(!is.null(names(object))) cat(" ", gettext("Named list()", domain = "R-utils"), "\n", sep = "")
> 		else if(i.pl) cat(" pairlist()\n")
> 		else cat(" list()\n")
> 		}
347,349c364,371
< 		cat(if(i.pl) "Dotted pair list" else
< 		    if(irregCl) paste(pClass(cl), "hidden list") else "List",
< 		    " of ", as.character(le), "\n", sep = "")
---
> 		if(i.pl) cat(sprintf(ngettext(as.integer(le), "Dotted pair list of %s component", "Dotted pair list of %s components", domain = "R-utils"), as.character(le)), "\n", sep = "")
> 		else if(irregCl) {
> 		 if(length(cl) == 1L) 
> 			cat(sprintf(ngettext(as.integer(le), "Class %s hidden list of %s component", "Class %s hidden list of %s components", domain = "R-utils"), dQuote(cl), as.character(le)), "\n", sep = "")
> 		 else
> 			cat(sprintf(ngettext(as.integer(le), "Classes %s hidden list of %s component", "Classes %s hidden list of %s components", domain = "R-utils"), dQuote(cl), as.character(le)), "\n", sep = "")
>  }
> 		else cat(sprintf(ngettext(as.integer(le), "List of %s component", "List of %s components", domain = "R-utils"), as.character(le)), "\n", sep = "")
370c392
< 		    cat(indent.str, "[list output truncated]\n")
---
> 		    cat(indent.str, gettext("[list output truncated]", domain = "R-utils"), "\n", sep = "")
420,423c442,446
< 		if     (mod == "nume")
< 		    mod <- if(is.integer(object)) "int" else "num"
< 		else if(mod == "char") { mod <- "chr"; char.like <- TRUE }
< 		else if(mod == "comp") mod <- "cplx" #- else: keep 'logi'
---
> 		if(mod == "nume" && is.integer(object)) mod <- gettext("integer", domain = "R-utils")
> 		else if(mod == "nume") mod <- gettext("numeric", domain = "R-utils")
> 		else if(mod == "char") { mod <- gettext("character", domain = "R-utils"); char.like <- TRUE }
> 		else if(mod == "comp") mod <- gettext("complex", domain = "R-utils")
> 		else if(mod == "logi") mod <- gettext("logical", domain = "R-utils") #- else: keep 'logi'
430c453,458
< 		    mod <- paste("Named", mod)
---
> 		    if(mod == gettext("integer", domain = "R-utils") && is.integer(object)) mod <- gettext("Named integer", domain = "R-utils")
> 		    else if(mod == gettext("numeric", domain = "R-utils") && !is.integer(object) && !has.class) mod <- gettext("Named numeric", domain = "R-utils")
> 		    else if(mod == gettext("numeric", domain = "R-utils") && has.class) mod <- gettext("Named numeric", domain = "R-utils")
> 		    else if(mod == gettext("character", domain = "R-utils")) mod <- gettext("Named character", domain = "R-utils")
> 		    else if(mod == gettext("complex", domain = "R-utils"))  mod <- gettext("Named complex", domain = "R-utils")
> 		    else if(mod == gettext("logical", domain = "R-utils"))  mod <- gettext("Named logical", domain = "R-utils")
462c490
<                 cat(pClass(cl))
---
>                 cat(sprintf(ngettext(length(cl), "Class %s ", "Classes %s ", domain = "R-utils"), paste(sQuote(cl), collapse = ", ")))
472,473c500
< 	    cat("Class", if(length(cl) > 1) "es",
< 		" '", paste(cl, collapse = "', '"), "' ", sep = "")
---
> 	    cat(sprintf(ngettext(length(cl), "Class %s", "Classes %s", domain = "R-utils"), paste(sQuote(cl), collapse = ", ")), " ", sep = "")
488c515
< 		str1 <- paste(" Named vector", le.str)
---
> 		str1 <- gettextf(" Named vector %s", le.str, domain = "R-utils")
494d520
< 	    cat(" promise ")
497c523
< 		cat("to ")
---
> 		cat("promise to ")
499c525
< 	    } else cat(" <...>\n")
---
> 	    } else cat("promise <...>\n")
504c530
< 	    str1 <- paste("length", le)
---
> 	    str1 <- gettextf("length %d", le, domain = "R-utils")
543c569
< 	    if(give.mode) str1 <- paste0(str1, ', mode "', mod,'":')
---
> 	    if(give.mode) str1 <- paste0(str1, gettextf(", mode %s:", dQuote(mod)))
613,614c639
< 	    formObj <- function(x) maybe_truncate(paste(format.fun(x), collapse = " "),
< 						  S = "") # *not* string-like
---
> 	    formObj <- function(x) maybe_truncate(paste(format.fun(x), collapse = " "), S = "") # *not* string-like
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/summRprof.R R/src/library/utils/R/summRprof.R
36c36
<         stop(gettextf("no lines found in %s", sQuote(filename)), domain = NA)
---
>         stop(gettextf("no lines found in %s", sQuote(filename)), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/sysdata.R R/src/library/utils/R/sysdata.R
29,39c29,39
<         c("aut" = "Use for full authors who have made substantial contributions to\nthe package and should show up in the package citation.",
<           "com" = "Use for package maintainers that collected code (potentially in\nother languages) but did not make further substantial\ncontributions to the package.",
<           "cph" = "Use for all copyright holders.",
<           "cre" = "Use for the package maintainer.",
<           "ctb" = "Use for authors who have made smaller contributions (such as\ncode patches etc.) but should not show up in the package\ncitation.",
<           "ctr" = "Use for authors who have been contracted to write (parts of) the\npackage and hence do not own intellectual property.",
<           "dtc" = "Use for persons who contributed data sets for the package.",
<           "fnd" = "Use for persons or organizations that furnished financial support\nfor the development of the package",
<           "rev" = "Use for persons or organizations responsible for reviewing\n(parts of) the package.",
<           "ths" = "If the package is part of a thesis, use for the thesis advisor.", 
<           "trl" = "If the R code is merely a translation from another language\n(typically S), use for the translator to R.")
---
>         c("aut" = gettext("Use for full authors who have made substantial contributions to\nthe package and should show up in the package citation.", domain = "R-utils"),
>           "com" = gettext("Use for package maintainers that collected code (potentially in\nother languages) but did not make further substantial\ncontributions to the package.", domain = "R-utils"),
>           "cph" = gettext("Use for all copyright holders.", domain = "R-utils"),
>           "cre" = gettext("Use for the package maintainer.", domain = "R-utils"),
>           "ctb" = gettext("Use for authors who have made smaller contributions (such as\ncode patches etc.) but should not show up in the package\ncitation.", domain = "R-utils"), 
>           "ctr" = gettext("Use for authors who have been contracted to write (parts of) the\npackage and hence do not own intellectual property.", domain = "R-utils"),
>           "dtc" = gettext("Use for persons who contributed data sets for the package.", domain = "R-utils"),
>           "fnd" = gettext("Use for persons or organizations that furnished financial support\nfor the development of the package", domain = "R-utils"),
>           "rev" = gettext("Use for persons or organizations responsible for reviewing\n(parts of) the package.", domain = "R-utils"),
>           "ths" = gettext("If the package is part of a thesis, use for the thesis advisor.", domain = "R-utils"),
>           "trl" = gettext("If the R code is merely a translation from another language\n(typically S), use for the translator to R.", domain = "R-utils"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/tar.R R/src/library/utils/R/tar.R
27c27
<             warning("argument 'compressed' is ignored for the internal method")
---
>             warning(gettextf("'%s' argument is ignored for the internal method", "compressed"))
32c32
<         stop("invalid 'tarfile' argument")
---
>         stop(gettextf("invalid '%s' argument", "tarfile"))
51c51
<         warning("untar(compressed=) is deprecated", call. = FALSE, domain = NA)
---
>         warning("'untar(compressed=)' is deprecated", call. = FALSE, domain = NA)
64c64
<     } else stop("'compressed' must be logical or character")
---
>     } else stop(gettextf("'%s' argument argument must be logical or character", "compressed"))
72c72
<             } else stop(sprintf("No %s command found", sQuote("gzip")))
---
>             } else stop(gettextf("No %s command found", sQuote("gzip"), domain = "R-utils"), domain = NA)
78c78
<             } else stop(sprintf("No %s command found", sQuote("bzip2")))
---
>             } else stop(gettextf("No %s command found", sQuote("bzip2"), domain = "R-utils"), domain = NA)
84c84
<             } else stop(sprintf("No %s command found", sQuote("xz")))
---
>             } else stop(gettextf("No %s command found", sQuote("xz"), domain = "R-utils"), domain = NA)
91c91
<         if (verbose) message("untar: using cmd = ", sQuote(cmd), domain = NA)
---
>         if (verbose) message(gettextf("untar: using cmd = %s", sQuote(cmd)), domain = "R-utils")
100c100
<                          domain = NA)
---
>                          domain = "R-utils")
111c111
<         if (verbose) message("untar: using cmd = ", sQuote(cmd), domain = NA)
---
>         if (verbose) message(gettextf("untar: using cmd = %s", sQuote(cmd)), domain = "R-utils")
113,114c113
<         if (res) warning(sQuote(cmd), " returned error code ", res,
<                          domain = NA)
---
>         if (res) warning(gettextf("command %s returned error code %s", sQuote(cmd), res), domain = "R-utils")
145,146c144
<            stop(gettextf("failed to create directory %s", sQuote(path)),
<                 domain = NA)
---
>            stop(gettextf("failed to create directory %s", sQuote(path)), domain = "R-utils")
163c161
<     else stop("'tarfile' must be a character string or a connection")
---
>     else stop(gettextf("'%s' argument must be a character string or connection", "tarfile"))
176,177c174,175
<             stop(if(is.character(tarfile)) "incomplete block on file"
< 		 else "incomplete block: rather use gzfile(.) created connection?")
---
>             if(is.character(tarfile)) stop("incomplete block on file")
> 		 else stop("incomplete block: rather use gzfile(.) created connection?")
205,206c203
<                 warning(gettextf("checksum error for entry '%s'", name),
<                         domain = NA)
---
>                 warning(gettextf("checksum error for entry '%s'", name), domain = "R-utils")
253c250
<                             warning(gettextf("failed to copy %s to %s", sQuote(name2), sQuote(name)), domain = NA)
---
>                             warning(gettextf("failed to copy %s to %s", sQuote(name2), sQuote(name)), domain = "R-utils")
261c258
<                             warning(gettextf("failed to copy %s to %s", sQuote(from), sQuote(name)), domain = NA)
---
>                             warning(gettextf("failed to copy %s to %s", sQuote(from), sQuote(name)), domain = "R-utils")
263c260
<                             warn1 <- c(warn1, "restoring symbolic link as a file copy")
---
>                             warn1 <- c(warn1, gettext("restoring symbolic link as a file copy"))
272c269
<                             warn1 <- c(warn1, "restoring symbolic link as a file copy")
---
>                             warn1 <- c(warn1, gettext("restoring symbolic link as a file copy"))
274c271
<                                warning(gettextf("failed to copy %s to %s", sQuote(from), sQuote(name)), domain = NA)
---
>                                warning(gettextf("failed to copy %s to %s", sQuote(from), sQuote(name)), domain = "R-utils")
282c279
<             warn1 <- c(warn1, "skipping devices")
---
>             warn1 <- c(warn1, gettext("skipping devices"))
293c290
<             warn1 <- c(warn1, "skipping fifos")
---
>             warn1 <- c(warn1, gettext("skipping fifos"))
310c307
<             warn1 <- c(warn1, "using pax extended headers")
---
>             warn1 <- c(warn1, gettext("using pax extended headers"))
313,314c310
<             hcs <- grep("[0-9]* hdrcharset=", info, useBytes = TRUE,
<                         value = TRUE)
---
>             hcs <- grep("[0-9]* hdrcharset=", info, useBytes = TRUE, value = TRUE)
324,325c320
<             linkpath <- grep("[0-9]* linkpath=", info, useBytes = TRUE,
<                              value = TRUE)
---
>             linkpath <- grep("[0-9]* linkpath=", info, useBytes = TRUE, value = TRUE)
334c329
<             warn1 <- c(warn1, "skipping pax global extended headers")
---
>             warn1 <- c(warn1, gettext("skipping pax global extended headers"))
336c331
<         } else stop("unsupported entry type ", sQuote(ctype))
---
>         } else stop(gettextf("unsupported entry type %s", sQuote(ctype)))
340c335
<         for (w in warn1) warning(w, domain = NA)
---
>         for (w in warn1) warning(w, domain = "R-utils")
408c403
<     else stop("'tarfile' must be a character string or a connection")
---
>     else stop(gettextf("'%s' argument must be a character string or connection", "tarfile"))
436c431
<             warning(gettextf("file '%s' not found", f), domain = NA)
---
>             warning(gettextf("file '%s' was not found", f), domain = "R-utils")
453,454c448
<             warning("storing paths of more than 100 bytes is not portable:\n  ",
<                     sQuote(f), domain = NA)
---
>             warning(gettextf("storing paths of more than 100 bytes is not portable:\n  %s", sQuote(f)), domain = "R-utils")
462c456
<                 warn1 <- c(warn1, "using GNU extension for long pathname")
---
>                 warn1 <- c(warn1, gettext("using GNU extension for long pathname"))
470c464
<             warning(gettextf("file '%s' did not have execute permissions: corrected", f), domain = NA, call. = FALSE)
---
>             warning(gettextf("file '%s' did not have execute permissions: corrected", f), domain = "R-utils", call. = FALSE)
497c491
<                     warn1 <- c(warn1, "using GNU extension for long linkname")
---
>                     warn1 <- c(warn1, gettext("using GNU extension for long linkname"))
538c532
<                 domain = NA, call. = FALSE)
---
>                 domain = "R-utils", call. = FALSE)
541c535
<                 domain = NA, call. = FALSE)
---
>                 domain = "R-utils", call. = FALSE)
548c542
<         for (w in warn1) warning(w, domain = NA)
---
>         for (w in warn1) warning(w, domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/unix/mac.install.R R/src/library/utils/R/unix/mac.install.R
47,48c47
<             warning(gettextf("'tar' returned non-zero exit code %d", xcode),
<                     domain = NA, call. = FALSE)
---
>             warning(gettextf("'tar' returned non-zero exit code %d", xcode), domain = "R-utils", call. = FALSE)
58,60c57
<             stop(gettextf("unable to create temporary directory %s",
<                           sQuote(tmpDir)),
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("unable to create temporary directory %s", sQuote(tmpDir)), domain = "R-utils", call. = FALSE)
67,68c64
<             stop(gettextf("file %s is not a macOS binary package", sQuote(pkg)),
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("file %s is not an OS X binary package", sQuote(pkg)), domain = "R-utils", call. = FALSE)
71,72c67
<             stop(gettextf("file %s is not a macOS binary package", sQuote(pkg)),
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("file %s is not an OS X binary package", sQuote(pkg)), domain = "R-utils", call. = FALSE)
75,76c70
<             stop(gettextf("file %s is not a macOS binary package", sQuote(pkg)),
<                  domain = NA, call. = FALSE)
---
>             stop(gettextf("file %s is not an OS X binary package", sQuote(pkg)), domain = "R-utils", call. = FALSE)
80,81c74,75
<             cat(gettextf("package %s successfully unpacked and MD5 sums checked\n",
<                          sQuote(pkgname)))
---
>             cat(gettextf("package %s successfully unpacked and MD5 sums checked",
>                          sQuote(pkgname)), "\n", sep = "")
92c86
<                               sQuote(lib), sQuote(lockdir)), domain = NA)
---
>                               sQuote(lib), sQuote(lockdir)), domain = "R-utils")
96,97c90
<                 stop(gettextf("ERROR: failed to create lock directory %s",
<                               sQuote(lockdir)), domain = NA)
---
>                 stop(gettextf("ERROR: failed to create lock directory %s", sQuote(lockdir)), domain = "R-utils")
106,107c99
<         	    	warning(gettextf("restored %s", sQuote(pkgname)),
<                                 domain = NA, call. = FALSE, immediate. = TRUE)
---
>         	    	warning(gettextf("restored %s", sQuote(pkgname)), domain = "R-utils", call. = FALSE, immediate. = TRUE)
125c117
<                         domain = NA, call. = FALSE)
---
>                         domain = "R-utils", call. = FALSE)
129,130c121
<         stop(gettextf("cannot remove prior installation of package %s",
<                       sQuote(pkgname)), call. = FALSE, domain = NA)
---
>         stop(gettextf("cannot remove prior installation of package %s", sQuote(pkgname)), call. = FALSE, domain = "R-utils")
156,158c147
<             stop(gettextf("unable to create temporary directory %s",
<                           sQuote(tmpd)),
<                  domain = NA)
---
>             stop(gettextf("unable to create temporary directory %s", sQuote(tmpd)), domain = "R-utils")
184c173
<             cat("\n", gettextf("The downloaded binary packages are in\n\t%s", tmpd),
---
>             cat("\n", gettext("The downloaded binary packages are in:", domain = "R-utils"), "\n\t", sQuote(tmpd),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/unix/sysutils.R R/src/library/utils/R/unix/sysutils.R
21c21
<     warning("'memory.size()' is Windows-specific", call.=FALSE)
---
>     warning(gettextf("'%s' function is Windows-specific", "memory.size()"), call.=FALSE)
27c27
<    warning("'memory.limit()' is Windows-specific", call.=FALSE)
---
>    warning(gettextf("'%s' function is Windows-specific", "memory.limit()"), call.=FALSE)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/vignette.R R/src/library/utils/R/vignette.R
28,30c28
<             pos <- which(file_test("-f",
<                                    file.path(vinfo[, "Dir"], "doc",
<                                              vinfo[, "PDF"])))
---
>             pos <- which(file_test("-f", file.path(vinfo[, "Dir"], "doc", vinfo[, "PDF"])))
40,43c38,39
<                                      sQuote(topic),
<                                      sQuote(file.path(vinfo[pos, "Dir"],
<                                                       "doc"))),
<                             call. = FALSE, domain = NA)
---
>                                      sQuote(topic), sQuote(file.path(vinfo[pos, "Dir"], "doc"))),
>                             call. = FALSE, domain = "R-utils")
54,55c50
<             warning(gettextf("vignette %s not found", sQuote(topic)),
<                     call. = FALSE, domain = NA)
---
>             warning(gettextf("vignette %s not found", sQuote(topic)), call. = FALSE, domain = "R-utils")
74,75c69
< 		  paste0("Use ", sQuote("vignette(all = TRUE)"), "\n",
<                          "to list the vignettes in all *available* packages.")
---
> 		  gettextf("Use %s to list the vignettes in all *available* packages.", sQuote("vignette(all = TRUE)"))
106,108c100
<         warning(gettextf("vignette %s has no PDF/HTML",
<                          sQuote(x$Topic)),
<                 call. = FALSE, domain = NA)
---
>         warning(gettextf("vignette %s has no PDF/HTML", sQuote(x$Topic)), call. = FALSE, domain = "R-utils")
126c118
<             call. = FALSE, domain = NA)
---
>             call. = FALSE, domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/widgets.R R/src/library/utils/R/widgets.R
23c23
<     if(!interactive()) stop("select.list() cannot be used non-interactively")
---
>     if(!interactive()) stop("'select.list()' cannot be used non-interactively")
25c25
<         stop("'title' must be NULL or a length-1 character vector")
---
>         stop(gettextf("'%s' argument must be NULL or a length-1 character vector", "title"))
48,49c48
<         op <- paste0(format(seq_len(nc)), ": ",
<                      ifelse(def, "+", " "), " ", choices)
---
>         op <- paste0(format(seq_len(nc)), ": ", ifelse(def, "+", " "), " ", choices)
59c58
<         cat(gettext("Enter one or more numbers separated by spaces, or an empty line to cancel\n"))
---
>         cat(gettext("Enter one or more numbers separated by spaces, or an empty line to cancel", domain = "R-utils"), "\n", sep = "")
61,62c60
<             res <- tryCatch(scan("", what = 0, quiet = TRUE, nlines = 1),
<                             error = identity)
---
>             res <- tryCatch(scan("", what = 0, quiet = TRUE, nlines = 1), error = identity)
64c62
< 	    cat(gettext("Invalid input, please try again\n"))
---
> 	    cat(gettext("Invalid input, please try again", domain = "R-utils"), "\n", sep = "")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/windows/winDialog.R R/src/library/utils/R/windows/winDialog.R
58c58
< winProgressBar <- function(title = "R progress bar", label = "",
---
> winProgressBar <- function(title = gettext("R progress bar", domain = "R-utils"), label = "",
73,75c73
<        stop(gettextf("'pb' is not from class %s",
<                      dQuote("winProgressBar")),
<             domain = NA)
---
>        stop(gettextf("'pb' is not from class %s", dQuote("winProgressBar")), domain = "R-utils")
85,87c83
<         stop(gettextf("'pb' is not from class %s",
<                       dQuote("winProgressBar")),
<              domain = NA)
---
>         stop(gettextf("'pb' is not from class %s", dQuote("winProgressBar")), domain = "R-utils")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/R/zip.R R/src/library/utils/R/zip.R
27,28c27
<         res <- .External(C_unzip, zipfile, files, exdir, list, overwrite,
<                          junkpaths, setTimes)
---
>         res <- .External(C_unzip, zipfile, files, exdir, list, overwrite, junkpaths, setTimes)
31,32c30
<             data.frame(Name = res[[1]], Length = res[[2]], Date = dates,
<                        stringsAsFactors = FALSE)
---
>             data.frame(Name = res[[1]], Length = res[[2]], Date = dates, stringsAsFactors = FALSE)
37c35
<             stop("'unzip' must be a single character string")
---
>             stop(gettextf("'%s' argument must be a single character string", "unzip"))
105,106c103
<     args <- c(flags, shQuote(path.expand(zipfile)),
<               shQuote(files), extras)
---
>     args <- c(flags, shQuote(path.expand(zipfile)), shQuote(files), extras)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/man/winProgressBar.Rd R/src/library/utils/man/winProgressBar.Rd
16c16
< winProgressBar(title = "R progress bar", label = "",
---
> winProgressBar(title = gettext("R progress bar", domain = "R-utils"), label = "",
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/init.c R/src/library/utils/src/init.c
51c51
< #ifdef Win32
---
> #ifdef _WIN32
76c76
< #ifdef Win32
---
> #ifdef _WIN32
100c100
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/io.c R/src/library/utils/src/io.c
41a42
> #include "localization.h"
45,53d45
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("utils", String)
< #else
< #define _(String) (String)
< #endif
< 
< 
106c98
< #ifdef Win32
---
> #ifdef _WIN32
939c931
< 		warning("line %d appears to contain embedded nulls", nread);
---
> 		warning(_("line %d appears to contain embedded nulls"), nread);
1078c1070
< 	error(_("'file' is not a connection"));
---
> 	error(_("'file' argument is not a connection"));
1111c1103
< 	error(_("'dec' must be a single character"));
---
> 	error(_("'dec' argument must be a single character"));
1137,1138c1129
< 		error(_("corrupt data frame -- length of column %d does not match nrows"),
< 		      j+1);
---
> 		error(_("corrupt data frame -- length of column %d does not match nrows"), j+1);
1148,1149c1139
< 			     EncodeElement2(rnames, i, quote_rn, qmethod,
< 					    &strBuf, sdec), csep);
---
> 			     EncodeElement2(rnames, i, quote_rn, qmethod, &strBuf, sdec), csep);
1160,1161c1150
< 						 quote_col[j], qmethod,
< 						 &strBuf, sdec);
---
> 						 quote_col[j], qmethod, &strBuf, sdec);
1168,1169c1157
< 			    error(_("column %s claims to be a factor but does not have numeric codes"),
< 				  j+1);
---
> 			    error(_("column %s claims to be a factor but does not have numeric codes"), j+1);
1183c1171
< 	    UNIMPLEMENTED_TYPE("write.table, matrix method", x);
---
> 	    UNIMPLEMENTED_TYPE("write.table()", x);
Only in R/src/library/utils/src: localization.h
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/size.c R/src/library/utils/src/size.c
145c145
< 	UNIMPLEMENTED_TYPE("object.size", s);
---
> 	UNIMPLEMENTED_TYPE("object.size()", s);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/stubs.c R/src/library/utils/src/stubs.c
25a26
> #include "localization.h"
27,36c28
< #undef _
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("utils", String)
< #else
< #define _(String) (String)
< #endif
< 
< 
< #ifdef Win32
---
> #ifdef _WIN32
261c253
< #ifdef Win32
---
> #ifdef _WIN32
282c274
< #ifdef Win32
---
> #ifdef _WIN32
292c284
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/utils.c R/src/library/utils/src/utils.c
28a29
> #include "localization.h"
62c63
<     if (!isString(in)) error("input must be a character string");
---
>     if (!isString(in)) error(_("'%s' argument must be a character string"), "input");
85c86
< 	error(_("'hostname' must be a character vector of length 1"));
---
> 	error(_("'hostname' argument must be a character vector of length 1"));
91c92
< 	warning(_("nsl() was unable to resolve host '%s'"), name);
---
> 	warning(_("'nsl()' was unable to resolve host '%s'"), name);
98c99
< 	    warning(_("unknown format returned by 'gethostbyname'"));
---
> 	    warning(_("unknown format returned by 'gethostbyname()'"));
107c108
<     warning(_("nsl() is not supported on this platform"));
---
>     warning(_("'nsl()' is not supported on this platform"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/utils.h R/src/library/utils/src/utils.h
20,25d19
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) dgettext ("utils", String)
< #else
< #define _(String) (String)
< #endif
63c57
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/windows/dataentry.c R/src/library/utils/src/windows/dataentry.c
30c30
< #include "win-nls.h"
---
> #include "localization.h"
40a41
> #include <R_ext/Minmax.h>
52,57d52
< #ifndef max
< #define max(a, b) (((a)>(b))?(a):(b))
< #endif
< #ifndef min
< #define min(a, b) (((a)<(b))?(a):(b))
< #endif
282c277
< 	error("unable to start data editor");
---
> 	error(G_("unable to start data editor"));
496c491
< 	UNIMPLEMENTED("advancerect");
---
> 	UNIMPLEMENTED("advancerect()");
1892c1887
< 	error("unable to start data viewer");
---
> 	error(G_("unable to start data viewer"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/windows/dialogs.c R/src/library/utils/src/windows/dialogs.c
33c33
< #include "win-nls.h"
---
> #include "localization.h"
245c245
< 	snprintf(msgbuf, 256, _("unable to retrieve items for %s (%s)"),
---
> 	snprintf(msgbuf, 256, _("unable to retrieve items for '%s' (%s)"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/windows/registry.c R/src/library/utils/src/windows/registry.c
25c25
< #include "win-nls.h"
---
> 
35c35
< 
---
> #include "localization.h"
177c177
< 	error("RegQueryInfoKey error code %d: '%s'", (int) res,
---
> 	error(_("RegQueryInfoKey error code %d: '%s'"), (int) res,
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/windows/util.c R/src/library/utils/src/windows/util.c
30c30
< #include "win-nls.h"
---
> #include "localization.h"
281c281
< 	error(_("argument must be a character vector or a raw vector"));
---
> 	error(_("'%s' argument must be a character vector or a raw vector"), "text");
294c294
< 	    error("'raw = FALSE' and format is a not a known text format");
---
> 	    error(_("'raw = FALSE' and format is a not a known text format"));
404c404
< 	error(_("'title' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "title");
413c413
< 	error(_("'text' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "text");
452c452
<     if(length(which) != 1) error(_("'%s' must be length 1"), "which");
---
>     if(length(which) != 1) error(_("'%s' argument must be of length 1"), "which");
565c565
< 	if (TYPEOF(windows) != VECSXP) error(_("'%s' must be a list"), "windows");
---
> 	if (TYPEOF(windows) != VECSXP) error(_("'%s' argument must be a list"), "windows");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/library/utils/src/windows/widgets.c R/src/library/utils/src/windows/widgets.c
32c32
< #include "win-nls.h"
---
> #include "localization.h"
182c182
< 	error(_("'default' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "default");
184c184
<     if(wcslen(p) >= 32768) error(_("'default' is overlong"));
---
>     if(wcslen(p) >= 32768) error(_("'default' argument is overlong"));
188c188
< 	error(_("'caption' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "caption");
190c190
< 	error(_("'multi' must be a logical value"));
---
> 	error(_("'multi' argument must be a logical value"));
192c192
< 	error(_("'filterindex' must be an integer value"));
---
> 	error(_("'filterindex' argument must be an integer value"));
250c250
< 	error(_("'default' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "default");
252c252
<     if(strlen(p) >= MAX_PATH) error(_("'default' is overlong"));
---
>     if(strlen(p) >= MAX_PATH) error(_("'default' argument is overlong"));
256c256
< 	error(_("'caption' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "caption");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/CommandLineArgs.c R/src/main/CommandLineArgs.c
25a26
> #include <Localization.h>
85c86
< #ifdef Win32
---
> #ifdef _WIN32
141c142
< #ifdef Win32
---
> #ifdef _WIN32
171c172,174
< 		    R_ShowMessage(_("WARNING: no value given for --encoding"));
---
> 		    snprintf(msg, 1024,
> 			     _("WARNING: no value given for '%s'"), *av);
> 		    R_ShowMessage(msg);
177c180
< #ifdef Win32
---
> #ifdef _WIN32
196c199
< 			 _("WARNING: option '%s' no longer supported"), *av);
---
> 			 _("WARNING: option '%s' is no longer supported"), *av);
235c238,240
< 		    R_ShowMessage(_("WARNING: no value given for '--max-ppsize'"));
---
> 		    snprintf(msg, 1024,
> 			     _("WARNING: no value given for '%s'"), *av);
> 		    R_ShowMessage(msg);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/RNG.c R/src/main/RNG.c
25a26
> #include <Localization.h>
305c306
< 	if (!User_unif_fun) error(_("'user_unif_rand' not in load table"));
---
> 	if (!User_unif_fun) error(_("'%s' is not in load table"), "user_unif_rand");
355,356c356,357
< 	    error(_("'.Random.seed' is a missing argument with no default"));
< 	warning(_("'.Random.seed' is not an integer vector but of type '%s', so ignored"),
---
> 	    error(_("'%s' argument is missing, with no default"), ".Random.seed");
> 	warning(_("'.Random.seed' is not an integer vector but of type '%s'"),
438c439
< 	warning("Internal .Random.seed is corrupt: not saving");
---
> 	warning(_("Internal .Random.seed is corrupt: not saving"));
478c479
< 	warning("someone corrupted the random-number generator: re-initializing");
---
> 	warning(_("someone corrupted the random-number generator: re-initializing"));
495c496
< 	if (!User_norm_fun) error(_("'user_norm_rand' not in load table"));
---
> 	if (!User_norm_fun) error(_("'%s' is not in load table"), "user_norm_rand");
813c814
< 	error("function '.TAOCP1997init' is missing");
---
> 	error(_("function '.TAOCP1997init' is missing"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/Rdynload.c R/src/main/Rdynload.c
83a84
> #include <Localization.h>
107c108
< #ifdef Win32
---
> #ifdef _WIN32
159c160
< 	R_Suicide("DLL table corruption detected"); /* not translated */
---
> 	R_Suicide(_("DLL table corruption detected"));
319c320
< 	error(_("R_RegisterRoutines called with invalid DllInfo object."));
---
> 	error(_("'R_RegisterRoutines()' called with invalid DllInfo object."));
381c382
< 	error("allocation failure in R_setPrimitiveArgTypes");
---
> 	error(_("allocation failure in '%s' function"), "R_setPrimitiveArgTypes()");
561c562
< #ifdef Win32
---
> #ifdef _WIN32
585c586
< 	strcpy(DLLerror, _("`maximal number of DLLs reached..."));
---
> 	strcpy(DLLerror, _("maximal number of DLL files reached..."));
635c636
< 	strcpy(DLLerror, _("could not allocate space for 'path'"));
---
> 	sprintf(DLLerror, _("could not allocate space for '%s'"), "path");
651c652
< #ifdef Win32  /* case-insensitive file system */
---
> #ifdef _WIN32  /* case-insensitive file system */
675c676
< 	strcpy(DLLerror, _("could not allocate space for 'name'"));
---
> 	sprintf(DLLerror, _("could not allocate space for '%s'"), "name");
952c953
< 	error(_("shared object '%s\' was not loaded"), buf);
---
> 	error(_("shared object '%s' was not loaded"), buf);
1031c1032
< 	error(ngettext("cannot allocate memory for registered native symbol (%d byte)",
---
> 	error(n_("cannot allocate memory for registered native symbol (%d byte)",
1251,1252c1252,1253
< 	    error(_("unimplemented type %d in 'createRSymbolObject'"),
< 		  symbol->type);
---
> 	    error(_("unimplemented type %d in '%s' function"),
> 		  symbol->type, "createRSymbolObject()");
1333c1334
< 	error(_("R_getRegisteredRoutines() expects a DllInfo reference"));
---
> 	error(_("'R_getRegisteredRoutines()' expects a DllInfo reference"));
1429c1430
< 	error(_("R_getRegisteredRoutines() expects a DllInfo reference"));
---
> 	error(_("'R_getRegisteredRoutines()' expects a DllInfo reference"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/Renviron.c R/src/main/Renviron.c
30a31
> #include <Localization.h>
126c127
<     if(!buf) R_Suicide("allocation failure in reading Renviron");
---
>     if(!buf) R_Suicide(_("allocation failure in reading Renviron"));
130c131
<     if(!buf) R_Suicide("allocation failure in reading Renviron");
---
>     if(!buf) R_Suicide(_("allocation failure in reading Renviron"));
181,182c182
<     snprintf(msg, MSG_SIZE+50,
< 	     "\n   File %s contains invalid line(s)", filename);
---
>     snprintf(msg, MSG_SIZE+50, _("\n   File %s contains invalid line(s)"), filename);
203c203
< 	strcat(msg, "\n   They were ignored\n");
---
> 	strcat(msg, _("\n   Invalid lines were ignored\n"));
217c217
< 	R_ShowMessage("path to system Renviron is too long: skipping");
---
> 	R_ShowMessage(_("path to system Renviron is too long: skipping"));
226c226
< 	R_ShowMessage("path to system Renviron is too long: skipping");
---
> 	R_ShowMessage(_("path to system Renviron is too long: skipping"));
233c233
< 	R_ShowMessage("cannot find system Renviron");
---
> 	R_ShowMessage(_("cannot find system Renviron"));
251c251
< 	R_ShowMessage("path to arch-specific Renviron.site is too long: skipping");
---
> 	R_ShowMessage(_("path to arch-specific Renviron.site is too long: skipping"));
261c261
< 	R_ShowMessage("path to Renviron.site is too long: skipping");
---
> 	R_ShowMessage(_("path to Renviron.site is too long: skipping"));
287c287
< #ifdef Win32
---
> #ifdef _WIN32
311c311
< 	error(_("argument '%s' must be a character string"), "x");
---
> 	error(_("'%s' argument must be a character string"), "x");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/agrep.c R/src/main/agrep.c
28a29
> #include <Localization.h>
190c191
< 	error(_("'pattern' must be a non-empty character string"));
---
> 	error(_("'%s' argument must be a non-empty character string"), "pattern");
290,291c291,292
< #define ANS(I, J)		REAL(ans)[I + J * nx]
< #define COUNTS(I, J, K)		INTEGER(counts)[I + J * nx + K * nxy]
---
> #define ANS(I, J)		REAL(ans)[I + (J) * nx]
> #define COUNTS(I, J, K)		INTEGER(counts)[I + (J) * nx + (K) * nxy]
484c485
< #define OFFSETS(I, J, K)	INTEGER(offsets)[I + J * nx + K * nxy]
---
> #define OFFSETS(I, J, K)	INTEGER(offsets)[I + (J) * nx + (K) * nxy]
615,616c616
< 		    error(_("input string x[%d] is invalid in this locale"),
< 			  i + 1);
---
> 		    error(_("input string x[%d] is invalid in this locale"), i + 1);
661,662c661
< 			    error(_("input string y[%d] is invalid in this locale"),
< 				  j + 1);
---
> 			    error(_("input string y[%d] is invalid in this locale"), j + 1);
765,766c764
< 	warning(_("argument '%s' will be ignored"),
< 		"ignore.case = TRUE");
---
> 	warning(_("argument '%s' will be ignored"), "ignore.case = TRUE");
819c817
< 	error(_("'pattern' must be a non-empty character string"));
---
> 	error(_("'%s' argument must be a non-empty character string"), "pattern");
873,874c871
< 		    error(_("input string %d is invalid in this locale"),
< 			  i + 1);
---
> 		    error(_("input string %d is invalid in this locale"), i + 1);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/altclasses.c R/src/main/altclasses.c
24a25
> #include <Localization.h>
94c95
< 	error("compact sequences with increment %d not supported yet", inc);
---
> 	error(_("compact sequences with increment %d not supported yet"), inc);
129c130
< 	error("compact sequences with increment %d not supported yet", inc);
---
> 	error(_("compact sequences with increment %d not supported yet"), inc);
177c178
< 	    error("compact sequences with increment %d not supported yet", inc);
---
> 	    error(_("compact sequences with increment %d not supported yet"), inc);
206c207
< 	error("method should only handle unexpanded vectors")
---
> 	error(_("method should only handle unexpanded vectors"))
231c232
< 	error("compact sequences with increment %d not supported yet", inc);
---
> 	error(_("compact sequences with increment %d not supported yet"), inc);
321c322
< 	error("compact sequences with increment %d not supported yet", inc);
---
> 	error(_("compact sequences with increment %d not supported yet"), inc);
366c367
< 	error("compact sequences with increment %f not supported yet", inc);
---
> 	error(_("compact sequences with increment %f not supported yet"), inc);
383c384
< 	error("compact sequences with increment %f not supported yet", inc);
---
> 	error(_("compact sequences with increment %f not supported yet"), inc);
422c423
< 	    error("compact sequences with increment %f not supported yet", inc);
---
> 	    error(_("compact sequences with increment %f not supported yet"), inc);
472c473
< 	error("compact sequences with increment %f not supported yet", inc);
---
> 	error(_("compact sequences with increment %f not supported yet"), inc);
553c554
< 	error("compact sequences with increment %f not supported yet", inc);
---
> 	error(_("compact sequences with increment %f not supported yet"), inc);
576c577
< 	error("result would be too long a vector");
---
> 	error(_("result would be too long a vector"));
663c664
< 	Rprintf("  <deferred string conversion>\n");
---
> 	Rprintf(_("  <deferred string conversion>\n"));
667c668
< 	Rprintf("  <expanded string conversion>\n");
---
> 	Rprintf(_("  <expanded string conversion>\n"));
730c731
< 	    error("unsupported type for deferred string coercion");
---
> 	    error(_("unsupported type for deferred string coercion"));
891c892
< 	error("unsupported type for deferred string coercion");
---
> 	error(_("unsupported type for deferred string coercion"));
931c932
<     default: error("mmap for %s not supported yet", type2char(type));
---
>     default: error(_("mmap for %s not supported yet"), type2char(type));
988c989
<     default: error("mmap for %s not supported yet", type2char(type));
---
>     default: error(_("mmap for %s not supported yet"), type2char(type));
1014c1015
< 	error("object has been unmapped");
---
> 	error(_("object has been unmapped"));
1105c1106
< 	warning("memory mapping failed; returning vector of length zero");
---
> 	warning(_("memory mapping failed; returning vector of length zero"));
1140c1141
< 	error("cannot access data pointer for this mmaped vector");
---
> 	error(_("cannot access data pointer for this mmaped vector"));
1255c1256
<     error("mmop objects not supported on Windows yet");
---
>     error(_("mmop objects not supported on Windows yet"));
1261c1262
<     error("mmop objects not supported on Windows yet");
---
>     error(_("mmop objects not supported on Windows yet"));
1309c1310
< 	MMAP_FILE_WARNING_OR_ERROR("%s is not a regular file", efn);
---
> 	MMAP_FILE_WARNING_OR_ERROR(_("%s is not a regular file"), efn);
1314c1315
< 	MMAP_FILE_WARNING_OR_ERROR("open: %s", strerror(errno));
---
> 	MMAP_FILE_WARNING_OR_ERROR(_("open: %s"), strerror(errno));
1355c1356
< 	    error("type '%s' is not supported", typestr);
---
> 	    error(_("type '%s' is not supported"), typestr);
1363c1364
< 	error("invalud 'file' argument");
---
> 	error(_("invalid '%s' argument"), "file");
1381c1382
< 	error("not a memory-mapped object");
---
> 	error(_("not a memory-mapped object"));
1850c1851
<     default: error("unsupported type");
---
>     default: error(_("unsupported type"));
1919c1920
< 	error("srt must be -2, -1, 0, or +1, +2, or NA");
---
> 	error(_("srt must be -2, -1, 0, or +1, +2, or NA"));
1922c1923
< 	error("no_na must be 0 or +1");
---
> 	error(_("no_na must be 0 or +1"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/altrep.c R/src/main/altrep.c
24a25
> #include <Localization.h>
296,297c297
< 	    warning("cannot unserialize ALTVEC object of class '%s' from "
< 		    "package '%s'; returning length zero vector",
---
> 	    warning(_("cannot unserialize ALTVEC object of class '%s' from package '%s'; returning length zero vector"),
301c301
< 	    error("cannot unserialize this ALTREP object");
---
> 	    error(_("cannot unserialize this ALTREP object"));
308,309c308
< 	warning("serialized class '%s' from package '%s' has type %s; "
< 		"registered class has type %s",
---
> 	warning(_("serialized class '%s' from package '%s' has type %s; registered class has type %s"),
335c334
< 	error("cannot get ALTVEC DATAPTR during GC");
---
> 	error(_("cannot get ALTVEC DATAPTR during GC"));
496c495
< 	error("cannot get ALTSTRING_ELT during GC");
---
> 	error(_("cannot get ALTSTRING_ELT during GC"));
511c510
< 	error("cannot set ALTSTRING_ELT during GC");
---
> 	error(_("cannot set ALTSTRING_ELT during GC"));
633c632
<     error("cannot unserialize this ALTREP object yet");
---
>     error(_("cannot unserialize this ALTREP object yet"));
676c675
<     error("no Length method defined");
---
>     error(_("no Length method defined"));
682c681
<     error("cannot access data pointer for this ALTVEC object");
---
>     error(_("cannot access data pointer for this ALTVEC object"));
781c780
<     error("ALTSTRING classes must provide an Elt method");
---
>     error(_("ALTSTRING classes must provide an Elt method"));
786c785
<     error("ALTSTRING classes must provide a Set_elt method");
---
>     error(_("ALTSTRING classes must provide a Set_elt method"));
949c948
<     default: error("unsupported ALTREP class");
---
>     default: error(_("unsupported ALTREP class"));
982c981
<     default: error("unsupported ALTREP class");
---
>     default: error(_("unsupported ALTREP class"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/apply.c R/src/main/apply.c
23a24
> #include <Localization.h>
98c99
<     if (!isVector(value)) error(_("'FUN.VALUE' must be a vector"));
---
>     if (!isVector(value)) error(_("'%s' argument must be a vector"), "FUN.VALUE");
164,165c165
< 		error(_("values must be length %d,\n but FUN(X[[%d]]) result is length %d"),
< 		       commonLen, i+1, length(val));
---
> 		error(_("values must be length %d, but 'FUN(X[[%d]])' result is length %d"), commonLen, i+1, length(val));
176c176
< 		    error(_("values must be type '%s',\n but FUN(X[[%d]]) result is type '%s'"),
---
> 		    error(_("values must be type '%s', but 'FUN(X[[%d]])' result is type '%s'"),
253,254c253
< 			error(_("dimnames(<value>) is neither NULL nor list of length %d"),
< 			      rnk_v);
---
> 			error(_("dimnames(<value>) is neither NULL nor list of length %d"), rnk_v);
329c328
< 	error(_("'%s' must be a list or expression"), "object");
---
> 	error(_("'%s' argument must be a list or expression"), "object");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/arithmetic.c R/src/main/arithmetic.c
35a36
> #include <Localization.h>
42,43c43,44
< #define R_MSG_NA	_("NaNs produced")
< #define R_MSG_NONNUM_MATH _("non-numeric argument to mathematical function")
---
> #define R_MSG_NA	_("NaN values produced")
> #define R_MSG_NONNUM_MATH _("non-numeric argument passed to mathematical function")
193,196c194,195
<     double q = x1 / x2, tmp;
< 
<     if (x2 == 0.0) return q;
<     tmp = x1 - floor(q) * x2;
---
>     if (x2 == 0.0) return R_NaN;
>     double q = x1 / x2, tmp = x1 - floor(q) * x2;
299c298
< #define INTEGER_OVERFLOW_WARNING _("NAs produced by integer overflow")
---
> #define INTEGER_OVERFLOW_WARNING _("NA values produced by integer overflow")
514c513
<     default: errorcall(call, _("non-numeric argument to binary operator")); \
---
>     default: errorcall(call, _("non-numeric argument passed to binary operator")); \
717c716
< 	errorcall(call, _("invalid argument to unary operator"));
---
> 	errorcall(call, _("invalid argument passed to unary operator"));
1292c1291
< 	errorcall(call, _("unimplemented real function of 1 argument"));
---
> 	errorcall(call, n_("unimplemented real function of %d numeric argument", "unimplemented real function of %d numeric arguments", 1), 1);
1596c1595
< 	error(_("unimplemented real function of %d numeric arguments"), 2);
---
> 	error(n_("unimplemented real function of %d numeric argument", "unimplemented real function of %d numeric arguments", 2), 2);
1623,1624c1622
< 	error(ngettext("%d argument passed to '%s' which requires 1 or 2 arguments",
< 		       "%d arguments passed to '%s'which requires 1 or 2 arguments", n),
---
> 	error(n_("%d argument passed to '%s' function which requires 1 or 2 arguments", "%d arguments passed to '%s' function which requires 1 or 2 arguments", n),
1737c1735
< 	    error(_("argument \"%s\" is missing, with no default"), "x");
---
> 	    error(_("'%s' argument is missing, with no default"), "x");
1755c1753
< 	    error(_("argument \"%s\" is missing, with no default"), "x");
---
> 	    error(_("'%s' argument is missing, with no default"), "x");
1991c1989
< 	error(_("unimplemented real function of %d numeric arguments"), 3);
---
> 	error(n_("unimplemented real function of %d numeric argument", "unimplemented real function of %d numeric arguments", 3), 3);
2165c2163
< 	error(_("unimplemented real function of %d numeric arguments"), 4);
---
> 	error(n_("unimplemented real function of %d numeric argument", "unimplemented real function of %d numeric arguments", 4), 4);
2268c2266
< 	error(_("unimplemented real function of %d numeric arguments"), 5);
---
> 	error(n_("unimplemented real function of %d numeric argument", "unimplemented real function of %d numeric arguments", 5), 5);
2285c2283
<     default: error("bad arith function index"); return NULL;
---
>     default: error(_("bad arithmetic function index")); return NULL;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/array.c R/src/main/array.c
26a27
> #include <Localization.h>
85,86c86
< 	    error(_("'data' must be of a vector type, was '%s'"),
< 		type2char(TYPEOF(vals)));
---
> 	    error(_("'%s' argument must be of a vector type, was '%s'"), "data", type2char(TYPEOF(vals)));
103c103
< 	    error(_("invalid 'nrow' value (too large or NA)"));
---
> 	    error(_("invalid '%s' value (too large or NA)"), "nrow");
105c105
< 	    error(_("invalid 'nrow' value (< 0)"));
---
> 	    error(_("invalid '%s' value (< 0)"), "nrow");
111c111
< 	    error(_("invalid 'ncol' value (too large or NA)"));
---
> 	    error(_("invalid '%s' value (too large or NA)"), "ncol");
113c113
< 	    error(_("invalid 'ncol' value (< 0)"));
---
> 	    error(_("invalid '%s' value (< 0)"), "ncol");
116c116
< 	if (lendat > INT_MAX) error("data is too long");
---
> 	if (lendat > INT_MAX) error(_("data is too long"));
119c119
< 	if (lendat > (double) nc * INT_MAX) error("data is too long");
---
> 	if (lendat > (double) nc * INT_MAX) error(_("data is too long"));
127c127
< 	if (lendat > (double) nr * INT_MAX) error("data is too long");
---
> 	if (lendat > (double) nr * INT_MAX) error(_("data is too long"));
211c211
< 	error(_("negative extents to matrix"));
---
> 	error(_("negative extents passed to matrix"));
214c214
< 	error(_("allocMatrix: too many elements specified"));
---
> 	error(_("'allocMatrix()': too many elements specified"));
242c242
< 	error(_("negative extents to 3D array"));
---
> 	error(_("negative extents passed to 3D array"));
245c245
< 	error(_("'alloc3DArray': too many elements specified"));
---
> 	error(_("'alloc3DArray()': too many elements specified"));
272c272
< 	    error(_("'allocArray': too many elements specified by 'dims'"));
---
> 	    error(_("'allocArray()': too many elements specified by 'dims' argument"));
537c537
< 	    error(_("'%s' must be a list or atomic vector"), "x");
---
> 	    error(_("'%s' argument must be a list or atomic vector"), "x");
581,582c581
< 	error(_("a matrix-like object is required as argument to '%s'"),
< 	      (PRIMVAL(op) == 2) ? "col" : "row");
---
> 	error(_("a matrix-like object is required as argument passed to '%s'"), (PRIMVAL(op) == 2) ? "col" : "row");
1245c1244
< 	errorcall(call, _("requires numeric/complex matrix/vector arguments"));
---
> 	errorcall(call, _("numeric/complex matrix/vector arguments are required"));
1662c1661
<     error(_("argument is not a matrix"));
---
>     error(_("'%s' argument is not a matrix"), "x");
1739c1738
< 	else error(_("value out of range in 'perm'"));
---
> 	else error(_("value is out of range in 'perm' argument"));
1816c1815
< 	UNIMPLEMENTED_TYPE("aperm", a);
---
> 	UNIMPLEMENTED_TYPE("aperm()", a);
1821c1820
<     if (resize == NA_LOGICAL) error(_("'resize' must be TRUE or FALSE"));
---
>     if (resize == NA_LOGICAL) error(_("'%s' argument must be TRUE or FALSE"), "resize");
1891c1890
< 	error(_("'x' must be numeric"));
---
> 	error(_("'%s' must be numeric"), "x");
1894c1893
< 	error(_("'x' is too short")); /* PR#16367 */
---
> 	error(_("'%s' argument is too short"), "x"); /* PR#16367 */
2029c2028
< 	    stop("'dim' specifies too large an array")
---
> 	    stop(_("'dim' specifies too large array"))
2060,2061c2059
< 	    error(_("'data' must be of a vector type, was '%s'"),
< 		type2char(TYPEOF(vals)));
---
> 	    error(_("'%s' argument must be of a vector type, was '%s'"), "data", type2char(TYPEOF(vals)));
2068c2066
<     if (nd == 0) error(_("'dims' cannot be of length 0"));
---
>     if (nd == 0) error(_("'%s' argument cannot be of length 0"), "dims");
2166c2164
< 	error(_("invalid 'nrow' value (too large or NA)"));
---
> 	error(_("invalid '%s' value (too large or NA)"), "nrow");
2168c2166
< 	error(_("invalid 'nrow' value (< 0)"));
---
> 	error(_("invalid '%s' value (< 0)"), "nrow");
2171c2169
< 	error(_("invalid 'ncol' value (too large or NA)"));
---
> 	error(_("invalid '%s' value (too large or NA)"), "ncol");
2173c2171
< 	error(_("invalid 'ncol' value (< 0)"));
---
> 	error(_("invalid '%s' value (< 0)"), "ncol");
2176c2174
< 	error(_("'x' must have positive length"));
---
> 	error(_("'%s' must have positive length"), "x");
2277,2278c2275
< 	    error(_("singular matrix in 'backsolve'. First zero in diagonal [%d]"),
< 		  i + 1);
---
> 	    error(_("singular matrix in 'backsolve()'. First zero in diagonal [%d]"), i + 1);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/attrib.c R/src/main/attrib.c
24a25
> #include <Localization.h>
77,78c78
< 	error(_("row names must be 'character' or 'integer', not '%s'"),
< 	      type2char(TYPEOF(val)));
---
> 	error(_("row names must be 'character' or 'integer', not '%s'"), type2char(TYPEOF(val)));
137,138c137
< 		    error(_("getAttrib: invalid type (%s) for TAG"),
< 			  type2char(TYPEOF(TAG(vec))));
---
> 		    error(_("'getAttrib()': invalid type (%s) for TAG"), type2char(TYPEOF(TAG(vec))));
151c150
< 		error("old list is no longer allowed for dimnames attribute");
---
> 		error(_("old list is no longer allowed for dimnames attribute"));
165c164
< 	error("cannot have attributes on a CHARSXP");
---
> 	error(_("cannot have attributes on a 'CHARSXP'"));
349c348
< 	error("cannot set attribute on a CHARSXP");
---
> 	error(_("cannot set attribute on a 'CHARSXP'"));
376c375
< 	error("cannot set attribute on a CHARSXP");
---
> 	error(_("cannot set attribute on a 'CHARSXP'"));
404c403
<     else error(_("names() applied to a non-vector"));
---
>     else error(_("'names()' function applied to a non-vector"));
426c425
< 	    error(_("'tsp' attribute must be numeric"));
---
> 	    error(_("'%s' attribute must be numeric"), "tsp");
861c860
< 	  error("invalid class argument to internal .class_cache");
---
> 	  error(_("invalid class argument passed to internal '.class_cache'"));
888c887
< 	error(_("invalid to use names()<- on an S4 object of class '%s'"),
---
> 	error(_("invalid to use 'names()<-' on an S4 object of class \"%s\""),
982,983c981
< 	error(_("invalid type (%s) to set 'names' attribute"),
< 	      type2char(TYPEOF(vec)));
---
> 	error(_("invalid type (%s) to set 'names' attribute"), type2char(TYPEOF(vec)));
1058c1056
< 	error(_("'dimnames' applied to non-array"));
---
> 	error(_("'dimnames()' applied to non-array"));
1063c1061
< 	error(_("'%s' must be a list"), "dimnames");
---
> 	error(_("'%s' argument must be a list"), "dimnames");
1066,1067c1064
< 	error(_("length of 'dimnames' [%d] must match that of 'dims' [%d]"),
< 	      length(val), k);
---
> 	error(_("length of 'dimnames' [%d] must match that of 'dims' [%d]"), length(val), k);
1100,1101c1097
< 		error(_("invalid type (%s) for 'dimnames' (must be a vector)"),
< 		      type2char(TYPEOF(_this)));
---
> 		error(_("invalid type (%s) for 'dimnames' (must be a vector)"), type2char(TYPEOF(_this)));
1103,1104c1099
< 		error(_("length of 'dimnames' [%d] not equal to array extent"),
< 		      i+1);
---
> 		error(_("length of 'dimnames' [%d] not equal to array extent"), i+1);
1196c1191
< 	    error(_("the dims contain missing values"));
---
> 	    error(_("the dimensions contain missing values"));
1198c1193
< 	    error(_("the dims contain negative values"));
---
> 	    error(_("the dimensions contain negative values"));
1203c1198
< 	    error(_("dims do not match the length of object"), total, len);
---
> 	    error(_("dimensions do not match the length of object"), total, len);
1205c1200
< 	    error(_("dims [product %d] do not match the length of object [%d]"), total, len);
---
> 	    error(_("dimensions [product %d] do not match the length of object [%d]"), total, len);
1384c1379
< 	    stop("attribute name must be of mode character")
---
> 	    stop(_("attribute name must be of mode character"))
1386c1381
< 	    stop("exactly one attribute name must be given")
---
> 	    stop(_("exactly one attribute name must be given"))
1411c1406
< 	errorcall(call, "either 2 or 3 arguments are required");
---
> 	errorcall(call, _("either 2 or 3 arguments are required"));
1418c1413
< 	errorcall(call, _("'which' must be of mode character"));
---
> 	errorcall(call, _("'which' attribute must be of mode character"));
1504,1505c1499
< 	warningcall(call, _("partial match of '%s' to '%s'"), str,
< 		    CHAR(PRINTNAME(tag)));
---
> 	warningcall(call, _("partial match of '%s' to '%s'"), str, CHAR(PRINTNAME(tag)));
1550,1551c1544
< 	    error(_("invalid type '%s' for slot name"),
< 		  type2char(TYPEOF(nlist)));
---
> 	    error(_("invalid type '%s' for slot name"), type2char(TYPEOF(nlist)));
1593c1586
< 	    error(_("'name' must be non-null character string"));
---
> 	    error(_("'%s' argument must be non-null character string"), "name");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/bind.c R/src/main/bind.c
27a28
> #include <Localization.h>
32c33
< #define imax2(x, y) ((x < y) ? y : x)
---
> #include <R_ext/Minmax.h>
294,295c295,296
< 	errorcall(call, _("type '%s' is unimplemented in '%s'"),
< 		  type2char(TYPEOF(x)), "LogicalAnswer");
---
> 	errorcall(call, _("type '%s' is unimplemented in '%s' function"),
> 		  type2char(TYPEOF(x)), "LogicalAnswer()");
330,331c331,332
< 	errorcall(call, _("type '%s' is unimplemented in '%s'"),
< 		  type2char(TYPEOF(x)), "IntegerAnswer");
---
> 	errorcall(call, _("type '%s' is unimplemented in '%s' function"),
> 		  type2char(TYPEOF(x)), "IntegerAnswer()");
379,380c380,381
< 	errorcall(call, _("type '%s' is unimplemented in '%s'"),
< 		  type2char(TYPEOF(x)), "RealAnswer");
---
> 	errorcall(call, _("type '%s' is unimplemented in '%s' function"),
> 		  type2char(TYPEOF(x)), "RealAnswer()");
452,453c453,454
< 	errorcall(call, _("type '%s' is unimplemented in '%s'"),
< 		  type2char(TYPEOF(x)), "ComplexAnswer");
---
> 	errorcall(call, _("type '%s' is unimplemented in '%s' function"),
> 		  type2char(TYPEOF(x)), "ComplexAnswer()");
480,481c481,482
< 	errorcall(call, _("type '%s' is unimplemented in '%s'"),
< 		  type2char(TYPEOF(x)), "RawAnswer");
---
> 	errorcall(call, _("type '%s' is unimplemented in '%s' function"),
> 		  type2char(TYPEOF(x)), "RawAnswer()");
728c729
< 		errorcall(call, _("repeated formal argument 'recursive'"));
---
> 		errorcall(call, _("repeated formal argument '%s'"), "recursive");
739c740
< 		errorcall(call, _("repeated formal argument 'use.names'"));
---
> 		errorcall(call, _("repeated formal argument '%s'"), "user.names");
936c937
< 	else error(_("argument not a list"));
---
> 	else error(_("'%s' argument is not a list"), "x");
1078c1079
< 		    error(_("class name too long in '%s'"), generic);
---
> 		    error(_("class name is too long in '%s'"), generic);
1162,1163c1163
< 	error(_("cannot create a matrix from type '%s'"),
< 	      type2char(mode));
---
> 	error(_("cannot create a matrix from type '%s'"), type2char(mode));
1232,1233c1232
< 		error(_("number of rows of matrices must match (see arg %d)"),
< 		      na + 1);
---
> 		error(_("number of rows of matrices must match (see argument %d)"), na + 1);
1237c1236
< 	    rows = imax2(rows, length(u));
---
> 	    rows = max(rows, length(u));
1260c1259
< 		warning("number of rows of result is not a multiple of vector length (arg %d)", na + 1);
---
> 		warning(_("number of rows of result is not a multiple of vector length (argument %d)"), na + 1);
1268c1267
< 	    nnames = imax2(nnames, length(dn));
---
> 	    nnames = max(nnames, length(dn));
1497,1498c1496
< 		error(_("number of columns of matrices must match (see arg %d)"),
< 		      na + 1);
---
> 		error(_("number of columns of matrices must match (see argument %d)"), na + 1);
1502c1500
< 	    cols = imax2(cols, length(u));
---
> 	    cols = max(cols, length(u));
1527c1525
< 		warning("number of columns of result is not a multiple of vector length (arg %d)", na + 1);
---
> 		warning(_("number of columns of result is not a multiple of vector length (argument %d)"), na + 1);
1535c1533
< 	    nnames = imax2(nnames, length(dn));
---
> 	    nnames = max(nnames, length(dn));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/builtin.c R/src/main/builtin.c
27a28
> #include <Localization.h>
259c260
< 	    warningcall(call, _("argument is not a function"));
---
> 	    warningcall(call, _("'%s' argument is not a function"), "fun");
274c275
< 	    warningcall(call, _("argument is not a function"));
---
> 	    warningcall(call, _("'%s' argument is not a function"), "fun");
355c356
< 	error(_("'enclos' must be an environment"));
---
> 	error(_("'%s' argument is not an environment"), "enclos");
376c377
< 	error( _("argument is not an environment"));
---
> 	error( _("'%s' argument is not an environment"), "env");
412c413
< 	error(_("argument is not an environment"));
---
> 	error(_("'%s' argument is not an environment"), "env");
426c427
< 	error(_("'parent' is not an environment"));
---
> 	error(_("'%s' argument is not an environment"), "parent");
454c455
< #ifdef Win32
---
> #ifdef _WIN32
478c479
< #ifdef Win32
---
> #ifdef _WIN32
527c528
< #ifdef Win32
---
> #ifdef _WIN32
543c544
< #ifdef Win32
---
> #ifdef _WIN32
613c614
< #ifdef Win32
---
> #ifdef _WIN32
669,670c670
< 		error(_("argument %d (type '%s') cannot be handled by 'cat'"),
< 		      1+iobj, type2char(TYPEOF(s)));
---
> 		error(_("argument %d (type '%s') cannot be handled by 'cat()' function"), 1+iobj, type2char(TYPEOF(s)));
809c809
< 	if (len > INT_MAX) error("too long for a pairlist");
---
> 	if (len > INT_MAX) error(_("too long for a pairlist"));
813c813
< 	error(_("vector: cannot make a vector of mode '%s'."),
---
> 	error(_("'vector()': cannot make a vector of mode '%s'."),
1037c1037
<     if (nargs < 1) errorcall(call, _("'EXPR' is missing"));
---
>     if (nargs < 1) errorcall(call, _("'%s' argument is missing"), "EXPR");
1041c1041
< 	errorcall(call, _("EXPR must be a length 1 vector"));
---
> 	errorcall(call, _("'%s' argument must be a vector of length 1"), "EXPR");
1044,1045c1044
< 		    _("EXPR is a \"factor\", treated as integer.\n"
< 		      " Consider using '%s' instead."),
---
> 		    _("'EXPR' is a \"factor\", treated as integer.\n Consider using '%s' instead."),
1092c1091
< 		    error("empty alternative in numeric switch");
---
> 		    error(_("empty alternative in numeric 'switch()' function"));
1101c1100
< 	warningcall(call, _("'switch' with no alternatives"));
---
> 	warningcall(call, _("'switch()' function with no alternatives"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/character.c R/src/main/character.c
72a73
> #include <Localization.h>
76a78
> #include <R_ext/Minmax.h>
103c105
< 		  ngettext("%d argument passed to '%s' which requires %d to %d",
---
> 		  n_("%d argument passed to '%s' which requires %d to %d",
110c112
< 	error(_("'%s' requires a character vector"), "nzchar()");
---
> 	error(_("'%s' function requires a character vector"), "nzchar()");
113c115
< 	error(_("'%s' requires a character vector"), "nzchar()");
---
> 	error(_("'%s' function requires a character vector"), "nzchar()");
228c230
< 	error(ngettext("%d argument passed to '%s' which requires %d to %d",
---
> 	error(n_("%d argument passed to '%s' which requires %d to %d",
236c238
< 	error(_("'%s' requires a character vector"), "nchar()");
---
> 	error(_("'%s' function requires a character vector"), "nchar()");
239c241
< 	error(_("'%s' requires a character vector"), "nchar()");
---
> 	error(_("'%s' function requires a character vector"), "nchar()");
264c266
< 	char msg_i[30]; sprintf(msg_i, "element %ld", (long)i+1);
---
> 	char msg_i[30]; sprintf(msg_i, _("element %ld"), (long)i+1);
295,297c297,299
< 	    char msg[30];
< 	    sprintf(msg, "element %ld", (long)idx+1);
< 	    error(_("invalid multibyte string, %s"), msg);
---
> 	    //char msg[30];
> 	    //sprintf(msg, "element %ld", (long)idx+1);
> 	    error(_("invalid multibyte string, element %ld"), (long)idx+1);
500,502c502,504
< 	    char msg[30];
< 	    sprintf(msg, "element %ld", (long)xidx+1);
< 	    error(_("invalid multibyte string, %s"), msg);
---
> 	    //char msg[30];
> 	    //sprintf(msg, "element %ld", (long)xidx+1);
> 	    error(_("invalid multibyte string, element %ld"), (long)xidx+1);
505,507c507,509
< 	    char msg[30];
< 	    sprintf(msg, "value element %ld", (long)vidx+1);
< 	    error(_("invalid multibyte string, %s"), msg);
---
> 	    //char msg[30];
> 	    //sprintf(msg, "value element %ld", (long)vidx+1);
> 	    error(_("invalid multibyte string, value element %ld"), (long)vidx+1);
891c893
< 	error(_("invalid '%s' value"), "allow_");
---
> 	error(_("invalid '%s' value"), "allow");
940c942
< 	    } else error(_("invalid multibyte string %d"), i+1);
---
> 	    } else error(_("invalid multibyte input string %d"), i+1);
986c988
< #if defined(Win32) || defined(__STDC_ISO_10646__) || defined(__APPLE__) || defined(__FreeBSD__)
---
> #if defined(_WIN32) || defined(__STDC_ISO_10646__) || defined(__APPLE__) || defined(__FreeBSD__)
1037c1039
< 		    error(_("invalid multibyte string %d"), i+1);
---
> 		    error(_("invalid multibyte input string %d"), i+1);
1092,1093c1094
< 		error(_("decreasing range specification ('%lc-%lc')"),
< 		      s[i], s[i + 2]);
---
> 		error(_("decreasing range specification ('%lc-%lc')"), s[i], s[i + 2]);
1178,1179c1179
< 		error(_("decreasing range specification ('%c-%c')"),
< 		      s[i], s[i + 2]);
---
> 		error(_("decreasing range specification ('%c-%c')"), s[i], s[i + 2]);
1331c1331
<     if (!isString(x)) error("invalid '%s' argument", "x");
---
>     if (!isString(x)) error(_("invalid '%s' argument"), "x");
1334c1334
< #if defined(Win32) || defined(__STDC_ISO_10646__) || defined(__APPLE__)  || defined(__FreeBSD__)
---
> #if defined(_WIN32) || defined(__STDC_ISO_10646__) || defined(__APPLE__)  || defined(__FreeBSD__)
1366c1366
< 	    if (nc < 0) error(_("invalid UTF-8 string 'old'"));
---
> 	    if (nc < 0) error(_("invalid UTF-8 string '%s'"), "old");
1372c1372
< 	    if (nc < 0) error(_("invalid multibyte string 'old'"));
---
> 	    if (nc < 0) error(_("invalid multibyte string '%s'"), "old");
1385c1385
< 	    if (nc < 0) error(_("invalid UTF-8 string 'new'"));
---
> 	    if (nc < 0) error(_("invalid UTF-8 string '%s'"), "new");
1391c1391
< 	    if (nc < 0) error(_("invalid multibyte string 'new'"));
---
> 	    if (nc < 0) error(_("invalid multibyte string '%s'"), "new");
1451c1451
< 		    error(_("invalid input multibyte string %d"), i+1);
---
> 		    error(_("invalid multibyte input string %d"), i+1);
1558c1558
< 	error(_("strtrim() requires a character vector"));
---
> 	error(_("'%s' function requires a character vector"), "strtrim()");
1681c1681
<     ns = (nx > nn) ? nx : nn;
---
>     ns = max(nx, nn);
1701c1701
< 		error("R character strings are limited to 2^31-1 bytes");
---
> 		error(_("R character strings are limited to 2^31-1 bytes"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/coerce.c R/src/main/coerce.c
28a29
> #include <Localization.h>
33,34d33
< #define R_MSG_mode	_("invalid 'mode' argument")
< #define R_MSG_list_vec	_("applies only to lists and vectors")
78c77
< 	warning(_("NAs introduced by coercion"));
---
> 	warning(_("NA values introduced by coercion"));
80c79
< 	warning(_("NAs introduced by coercion to integer range"));
---
> 	warning(_("NA values introduced by coercion to integer range"));
421,422c420
< 	error(_("invalid data of mode '%s' (too short)"),
< 	      type2char(TYPEOF(v)));
---
> 	error(_("invalid data of mode '%s' (too short)"), type2char(TYPEOF(v)));
444c442
< 	UNIMPLEMENTED_TYPE("coerceToSymbol", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToSymbol()", v);
499c497
< 	UNIMPLEMENTED_TYPE("coerceToLogical", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToLogical()", v);
552c550
< 	UNIMPLEMENTED_TYPE("coerceToInteger", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToInteger()", v);
605c603
< 	UNIMPLEMENTED_TYPE("coerceToReal", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToReal()", v);
658c656
< 	UNIMPLEMENTED_TYPE("coerceToComplex", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToComplex()", v);
737c735
< 	UNIMPLEMENTED_TYPE("coerceToRaw", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToRaw()", v);
796c794
< 	UNIMPLEMENTED_TYPE("coerceToString", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToString()", v);
842c840
< 	    UNIMPLEMENTED_TYPE("coerceToExpression", v);
---
> 	    UNIMPLEMENTED_TYPE("coerceToExpression()", v);
911c909
< 	UNIMPLEMENTED_TYPE("coerceToVectorList", v);
---
> 	UNIMPLEMENTED_TYPE("coerceToVectorList()", v);
958c956
< 	    UNIMPLEMENTED_TYPE("coerceToPairList", v);
---
> 	    UNIMPLEMENTED_TYPE("coerceToPairList()", v);
1018c1016
< 	    UNIMPLEMENTED_TYPE("coercePairList", v);
---
> 	    UNIMPLEMENTED_TYPE("coercePairList()", v);
1140c1138
< 	    UNIMPLEMENTED_TYPE("coerceVectorList", v);
---
> 	    UNIMPLEMENTED_TYPE("coerceVectorList()", v);
1261c1259
< #define COERCE_ERROR_STRING "cannot coerce type '%s' to vector of type '%s'"
---
> #define COERCE_ERROR_STRING _("cannot coerce type '%s' to vector of type '%s'")
1264c1262
< 	error(_(COERCE_ERROR_STRING), type2char(TYPEOF(v)), type2char(type))
---
> 	error(COERCE_ERROR_STRING, type2char(TYPEOF(v)), type2char(type))
1489c1487,1490
< 	error_return(R_MSG_mode);
---
>         {
>          Rf_error(_("invalid '%s' argument"), "mode");
>          return R_NilValue; 
>         }
1538c1539,1542
< 	error_return(R_MSG_mode);
---
> 	{
> 	 Rf_error(_("invalid '%s' argument"), "mode");
>          return R_NilValue;
> 	}
1658c1662
< 	    errorcall(call, _("invalid length 0 argument"));
---
> 	    errorcall(call, _("invalid argument of length 0"));
1701c1705
< 		"length > 1 in coercion to logical",
---
> 		_("length > 1 in coercion to logical"),
1721c1725
< 	    UNIMPLEMENTED_TYPE("asLogical", x);
---
> 	    UNIMPLEMENTED_TYPE("asLogical()", x);
1758c1762
< 	    UNIMPLEMENTED_TYPE("asInteger", x);
---
> 	    UNIMPLEMENTED_TYPE("asInteger()", x);
1826c1830
< 	    UNIMPLEMENTED_TYPE("asReal", x);
---
> 	    UNIMPLEMENTED_TYPE("asReal()", x);
1862c1866
< 	    UNIMPLEMENTED_TYPE("asComplex", x);
---
> 	    UNIMPLEMENTED_TYPE("asComplex()", x);
2039c2043
< 	errorcall(call, _("type \"single\" unimplemented in R"));
---
> 	errorcall(call, _("type \"single\" is unimplemented in R"));
2061c2065,2068
< 	error_return(R_MSG_mode);
---
>         {
>          Rf_error(_("invalid '%s' argument"), "mode");
>          return R_NilValue; 
>         }
2137c2144
< 	errorcall_return(call, "is.na " R_MSG_list_vec);
---
> 	errorcall_return(call, strcat(_("'%s' function applies only to lists and vectors"), "is.na()"));
2214,2215c2221
< 	warningcall(call, _("%s() applied to non-(list or vector) of type '%s'"),
< 		    "is.na", type2char(TYPEOF(x)));
---
> 	warningcall(call, _("'%s' function applied to non-(list or vector) of type '%s'"), "is.na()", type2char(TYPEOF(x)));
2330,2331c2336
< 	error("anyNA() applied to non-(list or vector) of type '%s'",
< 	      type2char(TYPEOF(x)));
---
> 	error(_("'%s' function applied to non-(list or vector) of type '%s'"), "anyNA()", type2char(TYPEOF(x)));
2342c2347
< 	errorcall(call, "anyNA takes 1 or 2 arguments");
---
> 	errorcall(call, _("'anyNA()' function takes 1 or 2 arguments"));
2380c2385
< 	errorcall_return(call, "is.nan " R_MSG_list_vec);
---
> 	errorcall_return(call, strcat(_("'%s' function applies only to lists and vectors"), "is.nan()"));
2426c2431
< 	errorcall_return(call, "is.finite " R_MSG_list_vec);
---
> 	errorcall_return(call, strcat(_("'%s' function applies only to lists and vectors"), "is.finite()"));
2493c2498
< 	errorcall_return(call, "is.infinite " R_MSG_list_vec);
---
> 	errorcall_return(call, strcat(_("'%s' function applies only to lists and vectors"), "is.infinite()"));
2559c2564
<     if (length(args) < 1) errorcall(call, _("'name' is missing"));
---
>     if (length(args) < 1) errorcall(call, _("'%s' argument is missing"), "name");
2568c2573
<     if (streql(str, ".Internal")) error("illegal usage");
---
>     if (streql(str, ".Internal")) error(_("illegal usage"));
2598c2603
< 	error(_("'what' must be a function or character string"));
---
> 	error(_("'%s' argument must be a character string or a function"), "what");
2602c2607
< 	error(_("'%s' must be a list or expression"), "args");
---
> 	error(_("'%s' argument must be a list or expression"), "args");
2605c2610
< 	error(_("'%s' must be a list"), "args");
---
> 	error(_("'%s' argument must be a list"), "args");
2609c2614
< 	error(_("'envir' must be an environment"));
---
> 	error(_("'%s' argument must be an environment"), "envir");
2618c2623
< 	if (streql(str, ".Internal")) error("illegal usage");
---
> 	if (streql(str, ".Internal")) error(_("illegal usage"));
2622c2627
< 	    error("illegal usage");
---
> 	    error(_("illegal usage"));
2834c2839
<     warning(_("Setting class(x) to NULL;   result will no longer be an S4 object"));
---
>     warning(_("Setting 'class(x)' to NULL. Result will no longer be an S4 object"));
2837,2839c2842,2843
<     warning(_("Setting class(x) to multiple strings (\"%s\", \"%s\", ...); result will no longer be an S4 object"),
< 	    translateChar(STRING_ELT(newClass, 0)),
< 	    translateChar(STRING_ELT(newClass, 1)));
---
>     warning(_("Setting 'class(x)' to multiple strings (\"%s\", \"%s\", ...). Result will no longer be an S4 object"),
> 	    translateChar(STRING_ELT(newClass, 0)), translateChar(STRING_ELT(newClass, 1)));
2841,2842c2845
<     warning(_("Setting class(x) to \"%s\" sets attribute to NULL; result will no longer be an S4 object"),
< 	    CHAR(asChar(newClass)));
---
>     warning(_("Setting 'class(x)' to \"%s\" sets attribute to NULL. Result will no longer be an S4 object"), CHAR(asChar(newClass)));
2957c2960
< 	error(_("'value' must be non-null character string"));
---
> 	error(_("'%s' argument must be a non-empty character string"), "value");
2962c2965
< 	    error("use of 'real' is defunct: use 'double' instead");
---
> 	    error(_("use of 'real' is defunct: use 'double' instead"));
2964c2967
< 	    error("use of 'single' is defunct: use mode<- instead");
---
> 	    error(_("use of 'single' is defunct: use mode<- instead"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/colors.c R/src/main/colors.c
26a27
> #include <Localization.h>
53c54
<     if (!ptr_RGBpar3) error("package grDevices must be loaded");
---
>     if (!ptr_RGBpar3) error(_("package 'grDevices' must be loaded"));
67c68
<     if (!ptr_col2name) error("package grDevices must be loaded");
---
>     if (!ptr_col2name) error(_("package 'grDevices' must be loaded"));
75c76
<     if (!ptr_R_GE_str2col) error("package grDevices must be loaded");
---
>     if (!ptr_R_GE_str2col) error(_("package 'grDevices' must be loaded"));
83c84
<     if (!ptr_savePalette) error("package grDevices must be loaded");
---
>     if (!ptr_savePalette) error(_("package 'grDevices' must be loaded"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/complex.c R/src/main/complex.c
26c26
< /* Note: gcc -peantic may warn in several places about C99 features 
---
> /* Note: gcc -pedantic may warn in several places about C99 features 
60a61
> #include <Localization.h>
117c118
< #if defined(Win32)
---
> #if defined(_WIN32)
347c348
<     else errorcall(call, _("non-numeric argument to function"));
---
>     else errorcall(call, _("non-numeric argument passed to function"));
639c640
< 	warningcall(call, "NaNs produced in function \"%s\"", PRIMNAME(op));
---
> 	warningcall(call, _("NaN values produced in '%s' function"), PRIMNAME(op));
734c735
< 	warning("NaNs produced in function \"%s\"", PRIMNAME(op));
---
> 	warning(_("NaN values produced in '%s' function"), PRIMNAME(op));
803c804
< 	UNIMPLEMENTED_TYPE("polyroot", z);
---
> 	UNIMPLEMENTED_TYPE("polyroot()", z);
1119c1120
<     Rboolean pasd, bool, test;
---
>     Rboolean pasd, bool_, test;
1135c1136
<     calct(&bool);
---
>     calct(&bool_);
1146,1147c1147,1148
< 	nexth(bool);
< 	calct(&bool);
---
> 	nexth(bool_);
> 	calct(&bool_);
1154c1155
< 	if (!bool && test && j != l2) {
---
> 	if (!bool_ && test && j != l2) {
1190c1191
< 		calct(&bool);
---
> 		calct(&bool_);
1214c1215
<     Rboolean bool, b;
---
>     Rboolean bool_, b;
1259,1260c1260,1261
< 		    calct(&bool);
< 		    nexth(bool);
---
> 		    calct(&bool_);
> 		    nexth(bool_);
1279,1282c1280,1283
< 	calct(&bool);
< 	nexth(bool);
< 	calct(&bool);
< 	if (!bool) {
---
> 	calct(&bool_);
> 	nexth(bool_);
> 	calct(&bool_);
> 	if (!bool_) {
1296c1297
< static void calct(Rboolean *bool)
---
> static void calct(Rboolean *bool_)
1299c1300
<      * bool   - logical, set true if h(s) is essentially zero.	*/
---
>      * bool_   - logical, set true if h(s) is essentially zero.	*/
1308,1309c1309,1310
<     *bool = hypot(hvr, hvi) <= are * 10. * hypot(hr[n-1], hi[n-1]);
<     if (!*bool) {
---
>     *bool_ = hypot(hvr, hvi) <= are * 10. * hypot(hr[n-1], hi[n-1]);
>     if (!*bool_) {
1318c1319
< static void nexth(Rboolean bool)
---
> static void nexth(Rboolean bool_)
1321c1322
<      * bool :	if TRUE  h(s) is essentially zero
---
>      * bool_ :	if TRUE  h(s) is essentially zero
1326c1327
<     if (!bool) {
---
>     if (!bool_) {
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/connections.c R/src/main/connections.c
76a77
> #include <Localization.h>
85a87
> #include <R_ext/Minmax.h>
88c90
< #ifdef Win32
---
> #ifdef _WIN32
123c125
< #ifdef Win32
---
> #ifdef _WIN32
165c167
< 	error(_("connection not found"));
---
> 	error(_("connection was not found"));
206,209c208,210
< 	Rconnection this = getConnection(ncon);
< 	if(strcmp(this->class, "textConnection"))
< 	    warning(_("closing unused connection %d (%s)\n"),
< 		    ncon, this->description);
---
> 	Rconnection thiscon = getConnection(ncon);
> 	if(strcmp(thiscon->conclass, "textConnection"))
> 	    warning(_("closing unused connection %d (%s)"), ncon, thiscon->description);
242,243d242
< # define MAX(a, b) ((a) > (b) ? (a) : (b))
< # define MIN(a, b) ((a) > (b) ? (b) : (a))
254c253
< 	len = MAX(len, unread_len);
---
> 	len = max(len, unread_len);
296c295
< 	error("error reading from the connection");
---
> 	error(_("error reading from the connection"));
396c395
<     error(_("%s not enabled for this connection"), "open");
---
>     error(_("'%s' is not enabled for this connection"), "open");
411c410
<     error(_("%s not enabled for this connection"), "printing");
---
>     error(_("'%s' is not enabled for this connection"), "printing");
548,549c547
< 		    warning(_("invalid input found on input connection '%s'"),
< 			    con->description);
---
> 		    warning(_("invalid input found on input connection '%s'"), con->description);
568c566
<     error(_("%s not enabled for this connection"), "'getc'");
---
>     error(_("'%s' is not enabled for this connection"), "getc");
573c571
<     error(_("%s not enabled for this connection"), "'seek'");
---
>     error(_("'%s' is not enabled for this connection"), "seek");
578c576
<     error(_("%s not enabled for this connection"), "truncation");
---
>     error(_("'%s' is not enabled for this connection"), "truncation");
589c587
<     error(_("%s not enabled for this connection"), "'read'");
---
>     error(_("'%s' is not enabled for this connection"), "read");
595c593
<     error(_("%s not enabled for this connection"), "'write'");
---
>     error(_("'%s' is not enabled for this connection"), "write");
598c596
< void init_con(Rconnection new, const char *description, int enc,
---
> void init_con(Rconnection newcon, const char *description, int enc,
601,624c599,622
<     strcpy(new->description, description);
<     new->enc = enc;
<     strncpy(new->mode, mode, 4); new->mode[4] = '\0';
<     new->isopen = new->incomplete = new->blocking = new->isGzcon = FALSE;
<     new->canread = new->canwrite = TRUE; /* in principle */
<     new->canseek = FALSE;
<     new->text = TRUE;
<     new->open = &null_open;
<     new->close = &null_close;
<     new->destroy = &null_destroy;
<     new->vfprintf = &null_vfprintf;
<     new->fgetc = new->fgetc_internal = &null_fgetc;
<     new->seek = &null_seek;
<     new->truncate = &null_truncate;
<     new->fflush = &null_fflush;
<     new->read = &null_read;
<     new->write = &null_write;
<     new->nPushBack = 0;
<     new->save = new->save2 = -1000;
<     new->private = NULL;
<     new->inconv = new->outconv = NULL;
<     new->UTF8out = FALSE;
<     new->buff = NULL;
<     new->buff_pos = new->buff_stored_len = new->buff_len = 0;
---
>     strcpy(newcon->description, description);
>     newcon->enc = enc;
>     strncpy(newcon->mode, mode, 4); newcon->mode[4] = '\0';
>     newcon->isopen = newcon->incomplete = newcon->blocking = newcon->isGzcon = FALSE;
>     newcon->canread = newcon->canwrite = TRUE; /* in principle */
>     newcon->canseek = FALSE;
>     newcon->text = TRUE;
>     newcon->open = &null_open;
>     newcon->close = &null_close;
>     newcon->destroy = &null_destroy;
>     newcon->vfprintf = &null_vfprintf;
>     newcon->fgetc = newcon->fgetc_internal = &null_fgetc;
>     newcon->seek = &null_seek;
>     newcon->truncate = &null_truncate;
>     newcon->fflush = &null_fflush;
>     newcon->read = &null_read;
>     newcon->write = &null_write;
>     newcon->nPushBack = 0;
>     newcon->save = newcon->save2 = -1000;
>     newcon->private = NULL;
>     newcon->inconv = newcon->outconv = NULL;
>     newcon->UTF8out = FALSE;
>     newcon->buff = NULL;
>     newcon->buff_pos = newcon->buff_stored_len = newcon->buff_len = 0;
628,630c626,628
<     new->id = current_id;
<     new->ex_ptr = NULL;
<     new->status = NA_INTEGER;
---
>     newcon->id = current_id;
>     newcon->ex_ptr = NULL;
>     newcon->status = NA_INTEGER;
635c633
< #ifdef Win32
---
> #ifdef _WIN32
649c647
< #ifdef Win32
---
> #ifdef _WIN32
658c656
< #ifdef Win32
---
> #ifdef _WIN32
710c708
<     Rfileconn this = con->private;
---
>     Rfileconn thiscon = con->private;
723c721
< #ifdef Win32
---
> #ifdef _WIN32
735,736c733,734
< 	    	this->use_fgetwc = TRUE;
< 	    	this->have_wcbuffered = FALSE;
---
> 	    	thiscon->use_fgetwc = TRUE;
> 	    	thiscon->have_wcbuffered = FALSE;
773c771
< 		"fdopen is not supported on this platform");
---
> 		_("'fdopen' is not supported on this platform"));
795,797c793,795
< #ifdef Win32
< 	strncpy(this->name, name, PATH_MAX);
< 	this->name[PATH_MAX - 1] = '\0';
---
> #ifdef _WIN32
> 	strncpy(thiscon->name, name, PATH_MAX);
> 	thiscon->name[PATH_MAX - 1] = '\0';
801,802c799,800
< #ifdef Win32
<     this->anon_file = temp;
---
> #ifdef _WIN32
>     thiscon->anon_file = temp;
804c802
<     this->fp = fp;
---
>     thiscon->fp = fp;
810,812c808,810
<     this->last_was_write = !con->canread;
<     this->rpos = 0;
<     if(con->canwrite) this->wpos = f_tell(fp);
---
>     thiscon->last_was_write = !con->canread;
>     thiscon->rpos = 0;
>     if(con->canwrite) thiscon->wpos = f_tell(fp);
833c831
<     Rfileconn this = con->private;
---
>     Rfileconn thiscon = con->private;
835c833
< 	con->status = fclose(this->fp);
---
> 	con->status = fclose(thiscon->fp);
837,838c835,836
< #ifdef Win32
<     if(this->anon_file) unlink(this->name);
---
> #ifdef _WIN32
>     if(thiscon->anon_file) unlink(thiscon->name);
844c842
<     Rfileconn this = con->private;
---
>     Rfileconn thiscon = con->private;
846,849c844,847
<     if(!this->last_was_write) {
< 	this->rpos = f_tell(this->fp);
< 	this->last_was_write = TRUE;
< 	f_seek(this->fp, this->wpos, SEEK_SET);
---
>     if(!thiscon->last_was_write) {
> 	thiscon->rpos = f_tell(thiscon->fp);
> 	thiscon->last_was_write = TRUE;
> 	f_seek(thiscon->fp, thiscon->wpos, SEEK_SET);
852c850
<     else return vfprintf(this->fp, format, ap);
---
>     else return vfprintf(thiscon->fp, format, ap);
857,858c855,856
<     Rfileconn this = con->private;
<     FILE *fp = this->fp;
---
>     Rfileconn thiscon = con->private;
>     FILE *fp = thiscon->fp;
861,870c859,868
<     if(this->last_was_write) {
< 	this->wpos = f_tell(this->fp);
< 	this->last_was_write = FALSE;
< 	f_seek(this->fp, this->rpos, SEEK_SET);
<     }
< #ifdef Win32
<     if (this->use_fgetwc) {
<     	if (this->have_wcbuffered) {
<     	    c = this->wcbuf;
<     	    this->have_wcbuffered = FALSE;
---
>     if(thiscon->last_was_write) {
> 	thiscon->wpos = f_tell(thiscon->fp);
> 	thiscon->last_was_write = FALSE;
> 	f_seek(thiscon->fp, thiscon->rpos, SEEK_SET);
>     }
> #ifdef _WIN32
>     if (thiscon->use_fgetwc) {
>     	if (thiscon->have_wcbuffered) {
>     	    c = thiscon->wcbuf;
>     	    thiscon->have_wcbuffered = FALSE;
874,875c872,873
<     	    this->wcbuf = (char) wc >> 8;
<     	    this->have_wcbuffered = TRUE;
---
>     	    thiscon->wcbuf = (char) wc >> 8;
>     	    thiscon->have_wcbuffered = TRUE;
885,886c883,884
<     Rfileconn this = con->private;
<     FILE *fp = this->fp;
---
>     Rfileconn thiscon = con->private;
>     FILE *fp = thiscon->fp;
892c890
<     if(this->last_was_write) this->wpos = pos; else this->rpos = pos;
---
>     if(thiscon->last_was_write) thiscon->wpos = pos; else thiscon->rpos = pos;
895,896c893,894
< 	pos = this->rpos;
< 	this->last_was_write = FALSE;
---
> 	pos = thiscon->rpos;
> 	thiscon->last_was_write = FALSE;
900,901c898,899
< 	pos = this->wpos;
< 	this->last_was_write = TRUE;
---
> 	pos = thiscon->wpos;
> 	thiscon->last_was_write = TRUE;
908c906
< //#ifdef Win32
---
> //#ifdef _WIN32
917,918c915,916
<     if(this->last_was_write) this->wpos = f_tell(this->fp);
<     else this->rpos = f_tell(this->fp);
---
>     if(thiscon->last_was_write) thiscon->wpos = f_tell(thiscon->fp);
>     else thiscon->rpos = f_tell(thiscon->fp);
924c922
<     Rfileconn this = con->private;
---
>     Rfileconn thiscon = con->private;
926c924
<     FILE *fp = this->fp;
---
>     FILE *fp = thiscon->fp;
939c937
<     if(!this->last_was_write) this->rpos = f_tell(this->fp);
---
>     if(!thiscon->last_was_write) thiscon->rpos = f_tell(thiscon->fp);
945c943
<     error(_("file truncation unavailable on this platform"));
---
>     error(_("file truncation is unavailable on this platform"));
947,948c945,946
<     this->last_was_write = TRUE;
<     this->wpos = f_tell(this->fp);
---
>     thiscon->last_was_write = TRUE;
>     thiscon->wpos = f_tell(thiscon->fp);
961,962c959,960
<     Rfileconn this = con->private;
<     FILE *fp = this->fp;
---
>     Rfileconn thiscon = con->private;
>     FILE *fp = thiscon->fp;
964,967c962,965
<     if(this->last_was_write) {
< 	this->wpos = f_tell(this->fp);
< 	this->last_was_write = FALSE;
< 	f_seek(this->fp, this->rpos, SEEK_SET);
---
>     if(thiscon->last_was_write) {
> 	thiscon->wpos = f_tell(thiscon->fp);
> 	thiscon->last_was_write = FALSE;
> 	f_seek(thiscon->fp, thiscon->rpos, SEEK_SET);
975,976c973,974
<     Rfileconn this = con->private;
<     FILE *fp = this->fp;
---
>     Rfileconn thiscon = con->private;
>     FILE *fp = thiscon->fp;
978,981c976,979
<     if(!this->last_was_write) {
< 	this->rpos = f_tell(this->fp);
< 	this->last_was_write = TRUE;
< 	f_seek(this->fp, this->wpos, SEEK_SET);
---
>     if(!thiscon->last_was_write) {
> 	thiscon->rpos = f_tell(thiscon->fp);
> 	thiscon->last_was_write = TRUE;
> 	f_seek(thiscon->fp, thiscon->wpos, SEEK_SET);
989,994c987,992
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of file connection failed"));
<     new->class = (char *) malloc(strlen("file") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of file connection failed"));
>     newcon->conclass = (char *) malloc(strlen("file") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
996c994
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
998,1001c996,999
<     strcpy(new->class, "file");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "file");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
1003c1001
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1005,1019c1003,1017
<     init_con(new, description, enc, mode);
<     new->open = &file_open;
<     new->close = &file_close;
<     new->vfprintf = &file_vfprintf;
<     new->fgetc_internal = &file_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &file_seek;
<     new->truncate = &file_truncate;
<     new->fflush = &file_fflush;
<     new->read = &file_read;
<     new->write = &file_write;
<     new->canseek = (raw == 0);
<     new->private = (void *) malloc(sizeof(struct fileconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, enc, mode);
>     newcon->open = &file_open;
>     newcon->close = &file_close;
>     newcon->vfprintf = &file_vfprintf;
>     newcon->fgetc_internal = &file_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->seek = &file_seek;
>     newcon->truncate = &file_truncate;
>     newcon->fflush = &file_fflush;
>     newcon->read = &file_read;
>     newcon->write = &file_write;
>     newcon->canseek = (raw == 0);
>     newcon->private = (void *) malloc(sizeof(struct fileconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
1021c1019
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1023c1021
<     ((Rfileconn)(new->private))->raw = raw;
---
>     ((Rfileconn)(newcon->private))->raw = raw;
1025c1023
<     ((Rfileconn)(new->private))->use_fgetwc = FALSE;
---
>     ((Rfileconn)(newcon->private))->use_fgetwc = FALSE;
1027c1025
<     return new;
---
>     return newcon;
1051c1049
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1072,1073c1070
< 		warning(_("cannot create fifo '%s', reason '%s'"), name,
< 			strerror(errno));
---
> 		warning(_("cannot create fifo connection '%s', reason '%s'"), name, strerror(errno));
1078c1075
< 		warning(_("'%s' exists but is not a fifo"), name);
---
> 		warning(_("'%s' exists but is not a fifo connection"), name);
1092,1093c1089,1090
< 	if(errno == ENXIO) warning(_("fifo '%s' is not ready"), name);
< 	else warning(_("cannot open fifo '%s'"), name);
---
> 	if(errno == ENXIO) warning(_("fifo connection '%s' is not ready"), name);
> 	else warning(_("cannot open fifo connection '%s'"), name);
1101c1098
<     this->fd = fd;
---
>     thiscon->fd = fd;
1119c1116
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1123c1120
<     n = read(this->fd, (char *)&c, 1);
---
>     n = read(thiscon->fd, (char *)&c, 1);
1130c1127
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1134,1135c1131,1132
< 	error(_("too large a block specified"));
<     return read(this->fd, ptr, size * nitems)/size;
---
> 	error(_("specified block is too large"));
>     return read(thiscon->fd, ptr, size * nitems)/size;
1141c1138
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1145,1146c1142,1143
< 	error(_("too large a block specified"));
<     return write(this->fd, ptr, size * nitems)/size;
---
>       error(_("specified block is too large"));
>     return write(thiscon->fd, ptr, size * nitems)/size;
1149c1146
< #elif defined(Win32)  // ----- Windows part ------
---
> #elif defined(_WIN32)  // ----- Windows part ------
1189c1186
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1227,1229c1224,1226
<     this->hdl_namedpipe = NULL;
<     this->overlapped_write = (LPOVERLAPPED)malloc(sizeof(OVERLAPPED));
<     this->overlapped_write = CreateEventA(NULL, TRUE, TRUE, NULL);
---
>     thiscon->hdl_namedpipe = NULL;
>     thiscon->overlapped_write = (LPOVERLAPPED)malloc(sizeof(OVERLAPPED));
>     thiscon->overlapped_write = CreateEventA(NULL, TRUE, TRUE, NULL);
1236c1233
< 	this->hdl_namedpipe =
---
> 	thiscon->hdl_namedpipe =
1242c1239
< 	if (this->hdl_namedpipe == INVALID_HANDLE_VALUE) {
---
> 	if (thiscon->hdl_namedpipe == INVALID_HANDLE_VALUE) {
1249,1250c1246
< 		warning(_("cannot create fifo '%s', reason '%s'"),
< 			hch_pipename, hch_err_msg);
---
> 		warning(_("cannot create fifo '%s', reason '%s'"), hch_pipename, hch_err_msg);
1259c1255
< 	this->hdl_namedpipe <= (HANDLE)(LONG_PTR) 0) {
---
> 	thiscon->hdl_namedpipe <= (HANDLE)(LONG_PTR) 0) {
1263c1259
< 	this->hdl_namedpipe =
---
> 	thiscon->hdl_namedpipe =
1269c1265
< 	if (this->hdl_namedpipe == INVALID_HANDLE_VALUE) {
---
> 	if (thiscon->hdl_namedpipe == INVALID_HANDLE_VALUE) {
1271,1272c1267
< 	    warning(_("cannot open fifo '%s', reason '%s'"),
< 		    hch_pipename, hch_err_msg);
---
> 	    warning(_("cannot open fifo '%s', reason '%s'"), hch_pipename, hch_err_msg);
1283c1278
<     if (boo_retvalue && this->hdl_namedpipe) {
---
>     if (boo_retvalue && thiscon->hdl_namedpipe) {
1296c1291
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1298,1299c1293,1294
<     con->status = CloseHandle(this->hdl_namedpipe) ? 0 : -1;
<     if (this->overlapped_write) CloseHandle(this->overlapped_write);
---
>     con->status = CloseHandle(thiscon->hdl_namedpipe) ? 0 : -1;
>     if (thiscon->overlapped_write) CloseHandle(thiscon->overlapped_write);
1304c1299
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1309c1304
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
1313c1308
<     ReadFile(this->hdl_namedpipe, buffer,
---
>     ReadFile(thiscon->hdl_namedpipe, buffer,
1315c1310
< 	     this->overlapped_write);
---
> 	     thiscon->overlapped_write);
1324c1319
<     Rfifoconn this = con->private;
---
>     Rfifoconn thiscon = con->private;
1328c1323
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
1331c1326
<     ConnectNamedPipe(this->hdl_namedpipe, NULL);
---
>     ConnectNamedPipe(thiscon->hdl_namedpipe, NULL);
1340c1335
<     if (WriteFile(this->hdl_namedpipe, buffer,
---
>     if (WriteFile(thiscon->hdl_namedpipe, buffer,
1357c1352
<     Rfifoconn  this = con->private;
---
>     Rfifoconn  thiscon = con->private;
1364c1359
<     PeekNamedPipe(this->hdl_namedpipe, NULL, 0, NULL, &available_bytes, NULL);
---
>     PeekNamedPipe(thiscon->hdl_namedpipe, NULL, 0, NULL, &available_bytes, NULL);
1368c1363
< 	ReadFile(this->hdl_namedpipe, &c, len, &read_byte, NULL);
---
> 	ReadFile(thiscon->hdl_namedpipe, &c, len, &read_byte, NULL);
1378,1383c1373,1378
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of fifo connection failed"));
<     new->class = (char *) malloc(strlen("fifo") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of fifo connection failed"));
>     newcon->conclass = (char *) malloc(strlen("fifo") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
1385c1380
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1387,1390c1382,1385
<     strcpy(new->class, "fifo");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "fifo");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
1392c1387
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1394,1407c1389,1402
<     init_con(new, description, CE_NATIVE, mode);
<     new->open = &fifo_open;
<     new->close = &fifo_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc_internal = &fifo_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &null_seek;
<     new->truncate = &null_truncate;
<     new->fflush = &null_fflush;
<     new->read = &fifo_read;
<     new->write = &fifo_write;
<     new->private = (void *) malloc(sizeof(struct fifoconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->open = &fifo_open;
>     newcon->close = &fifo_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc_internal = &fifo_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->seek = &null_seek;
>     newcon->truncate = &null_truncate;
>     newcon->fflush = &null_fflush;
>     newcon->read = &fifo_read;
>     newcon->write = &fifo_write;
>     newcon->private = (void *) malloc(sizeof(struct fifoconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
1409c1404
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1411c1406
<     return new;
---
>     return newcon;
1417c1412
<     SEXP sfile, sopen, ans, class, enc;
---
>     SEXP sfile, sopen, ans, classs, enc;
1428c1423
< 	warning(_("only first element of 'description' argument used"));
---
> 	warning(_("only first element of '%s' argument will be used"), "description");
1445c1440
< 	    warning(_("fifo(\"\") only supports open = \"w+\" and open = \"w+b\": using the former"));
---
> 	    warning(_("'%s' only supports 'open = \"w+\"' and 'open = \"w+b\"': using the former"), "fifo(\"\")");
1465,1468c1460,1463
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("fifo"));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar("fifo"));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
1486c1481
<     Rfileconn this = con->private;
---
>     Rfileconn thiscon = con->private;
1488c1483
< #ifdef Win32
---
> #ifdef _WIN32
1496c1491
< #ifdef Win32
---
> #ifdef _WIN32
1505c1500
< 	    warning(_("cannot pipe() cmd '%ls': %s"), wname, strerror(errno));
---
> 	    warning(_("cannot open 'pipe()' command '%ls': %s"), wname, strerror(errno));
1512,1513c1507
< 	warning(_("cannot open pipe() cmd '%s': %s"), con->description,
< 		strerror(errno));
---
> 	warning(_("cannot open 'pipe()' command '%s': %s"), con->description, strerror(errno));
1516c1510
<     this->fp = fp;
---
>     thiscon->fp = fp;
1522,1523c1516,1517
<     this->last_was_write = !con->canread;
<     this->rpos = this->wpos = 0;
---
>     thiscon->last_was_write = !con->canread;
>     thiscon->rpos = thiscon->wpos = 0;
1538,1543c1532,1537
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of pipe connection failed"));
<     new->class = (char *) malloc(strlen("pipe") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of pipe connection failed"));
>     newcon->conclass = (char *) malloc(strlen("pipe") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
1545c1539
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1547,1550c1541,1544
<     strcpy(new->class, "pipe");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "pipe");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
1552c1546
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1554,1565c1548,1559
<     init_con(new, description, ienc, mode);
<     new->open = &pipe_open;
<     new->close = &pipe_close;
<     new->vfprintf = &file_vfprintf;
<     new->fgetc_internal = &file_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->fflush = &file_fflush;
<     new->read = &file_read;
<     new->write = &file_write;
<     new->private = (void *) malloc(sizeof(struct fileconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, ienc, mode);
>     newcon->open = &pipe_open;
>     newcon->close = &pipe_close;
>     newcon->vfprintf = &file_vfprintf;
>     newcon->fgetc_internal = &file_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->fflush = &file_fflush;
>     newcon->read = &file_read;
>     newcon->write = &file_write;
>     newcon->private = (void *) malloc(sizeof(struct fileconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
1567c1561
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1569c1563
<     return new;
---
>     return newcon;
1572c1566
< #ifdef Win32
---
> #ifdef _WIN32
1579c1573
<     SEXP scmd, sopen, ans, class, enc;
---
>     SEXP scmd, sopen, ans, classs, enc;
1591,1592c1585,1586
< 	warning(_("only first element of 'description' argument used"));
< #ifdef Win32
---
> 	warning(_("only first element of '%s' argument will be used"), "description");
> #ifdef _WIN32
1613c1607
< #ifdef Win32
---
> #ifdef _WIN32
1634,1636c1628,1630
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("pipe"));
< #ifdef Win32
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar("pipe"));
> #ifdef _WIN32
1638c1632
< 	SET_STRING_ELT(class, 0, mkChar("pipeWin32"));
---
> 	SET_STRING_ELT(classs, 0, mkChar("pipeWin32"));
1640,1641c1634,1635
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
1735c1729
<     case 3: error(_("whence = \"end\" is not implemented for gzfile connections"));
---
>     case 3: error(_("'whence = \"end\"' option is not implemented for gzfile connections"));
1755c1749
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
1765c1759
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
1772,1777c1766,1771
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of gzfile connection failed"));
<     new->class = (char *) malloc(strlen("gzfile") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of gzfile connection failed"));
>     newcon->conclass = (char *) malloc(strlen("gzfile") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
1779c1773
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1781,1784c1775,1778
<     strcpy(new->class, "gzfile");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "gzfile");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
1786c1780
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1788c1782
<     init_con(new, description, CE_NATIVE, mode);
---
>     init_con(newcon, description, CE_NATIVE, mode);
1790,1802c1784,1796
<     new->canseek = TRUE;
<     new->open = &gzfile_open;
<     new->close = &gzfile_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc_internal = &gzfile_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &gzfile_seek;
<     new->fflush = &gzfile_fflush;
<     new->read = &gzfile_read;
<     new->write = &gzfile_write;
<     new->private = (void *) malloc(sizeof(struct gzfileconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     newcon->canseek = TRUE;
>     newcon->open = &gzfile_open;
>     newcon->close = &gzfile_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc_internal = &gzfile_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->seek = &gzfile_seek;
>     newcon->fflush = &gzfile_fflush;
>     newcon->read = &gzfile_read;
>     newcon->write = &gzfile_write;
>     newcon->private = (void *) malloc(sizeof(struct gzfileconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
1804c1798
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1806,1807c1800,1801
<     ((Rgzfileconn)new->private)->compress = compress;
<     return new;
---
>     ((Rgzfileconn)newcon->private)->compress = compress;
>     return newcon;
1895c1889
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
1955c1949
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
1964,1969c1958,1963
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of bzfile connection failed"));
<     new->class = (char *) malloc(strlen("bzfile") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of bzfile connection failed"));
>     newcon->conclass = (char *) malloc(strlen("bzfile") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
1971c1965
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1973,1976c1967,1970
<     strcpy(new->class, "bzfile");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "bzfile");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
1978c1972
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1980c1974
<     init_con(new, description, CE_NATIVE, mode);
---
>     init_con(newcon, description, CE_NATIVE, mode);
1982,1994c1976,1988
<     new->canseek = FALSE;
<     new->open = &bzfile_open;
<     new->close = &bzfile_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc_internal = &bzfile_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &null_seek;
<     new->fflush = &null_fflush;
<     new->read = &bzfile_read;
<     new->write = &bzfile_write;
<     new->private = (void *) malloc(sizeof(struct bzfileconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     newcon->canseek = FALSE;
>     newcon->open = &bzfile_open;
>     newcon->close = &bzfile_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc_internal = &bzfile_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->seek = &null_seek;
>     newcon->fflush = &null_fflush;
>     newcon->read = &bzfile_read;
>     newcon->write = &bzfile_write;
>     newcon->private = (void *) malloc(sizeof(struct bzfileconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
1996c1990
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
1998,1999c1992,1993
<     ((Rbzfileconn)new->private)->compress = compress;
<     return new;
---
>     ((Rbzfileconn)newcon->private)->compress = compress;
>     return newcon;
2058c2052
< 	    error("problem setting presets");
---
> 	    error(_("problem with setting presets"));
2091c2085
< 	    if (res != nout) error("fwrite error");
---
> 	    if (res != nout) error(_("'fwrite' error"));
2126c2120
< 		    warning("lzma decoder needed more memory");
---
> 		    warning(_("lzma decoder needed more memory"));
2129c2123
< 		    warning("lzma decoder format error");
---
> 		    warning(_("lzma decoder format error"));
2132c2126
< 		    warning("lzma decoder corrupt data");
---
> 		    warning(_("lzma decoder corrupt data"));
2135c2129
< 		    warning("lzma decoding result %d", ret);
---
> 		    warning(_("lzma decoding result %d"), ret);
2175c2169
< 		warning("lzma encoder needed more memory");
---
> 		warning(_("lzma encoder needed more memory"));
2178c2172
< 		warning("lzma encoding result %d", ret);
---
> 		warning(_("lzma encoding result %d"), ret);
2184c2178
< 	if (res != nout) error("fwrite error");
---
> 	if (res != nout) error(_("'fwrite' error"));
2192,2197c2186,2191
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of xzfile connection failed"));
<     new->class = (char *) malloc(strlen("xzfile") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of xzfile connection failed"));
>     newcon->conclass = (char *) malloc(strlen("xzfile") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
2199c2193
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2201,2204c2195,2198
<     strcpy(new->class, "xzfile");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "xzfile");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
2206c2200
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2208c2202
<     init_con(new, description, CE_NATIVE, mode);
---
>     init_con(newcon, description, CE_NATIVE, mode);
2210,2223c2204,2217
<     new->canseek = FALSE;
<     new->open = &xzfile_open;
<     new->close = &xzfile_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc_internal = &xzfile_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &null_seek;
<     new->fflush = &null_fflush;
<     new->read = &xzfile_read;
<     new->write = &xzfile_write;
<     new->private = (void *) malloc(sizeof(struct xzfileconn));
<     memset(new->private, 0, sizeof(struct xzfileconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     newcon->canseek = FALSE;
>     newcon->open = &xzfile_open;
>     newcon->close = &xzfile_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc_internal = &xzfile_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->seek = &null_seek;
>     newcon->fflush = &null_fflush;
>     newcon->read = &xzfile_read;
>     newcon->write = &xzfile_write;
>     newcon->private = (void *) malloc(sizeof(struct xzfileconn));
>     memset(newcon->private, 0, sizeof(struct xzfileconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
2225c2219
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2227,2229c2221,2223
<     ((Rxzfileconn) new->private)->type = type;
<     ((Rxzfileconn) new->private)->compress = compress;
<     return new;
---
>     ((Rxzfileconn) newcon->private)->type = type;
>     ((Rxzfileconn) newcon->private)->compress = compress;
>     return newcon;
2235c2229
<     SEXP sfile, sopen, ans, class, enc;
---
>     SEXP sfile, sopen, ans, classs, enc;
2248c2242
< 	warning(_("only first element of 'description' argument used"));
---
> 	warning(_("only first element of '%s' argument will be used"), "description");
2285c2279
< 		    error(_("this is a %s-compressed file which this build of R does not support"), "lzop");
---
> 		    error(_("this is a file compressed using '%s' which this build of R does not support"), "lzop");
2321c2315
<     PROTECT(class = allocVector(STRSXP, 2));
---
>     PROTECT(classs = allocVector(STRSXP, 2));
2324c2318
< 	SET_STRING_ELT(class, 0, mkChar("gzfile"));
---
> 	SET_STRING_ELT(classs, 0, mkChar("gzfile"));
2327c2321
< 	SET_STRING_ELT(class, 0, mkChar("bzfile"));
---
> 	SET_STRING_ELT(classs, 0, mkChar("bzfile"));
2330c2324
< 	SET_STRING_ELT(class, 0, mkChar("xzfile"));
---
> 	SET_STRING_ELT(classs, 0, mkChar("xzfile"));
2333,2334c2327,2328
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
2344c2338
< #ifdef Win32
---
> #ifdef _WIN32
2356c2350
<     Rclpconn this = con->private;
---
>     Rclpconn thiscon = con->private;
2361c2355
<     this->pos = 0;
---
>     thiscon->pos = 0;
2364c2358
< #ifdef Win32
---
> #ifdef _WIN32
2372,2375c2366,2369
< 	    this->buff = (char *)malloc(len + 1);
< 	    this->last = this->len = len;
< 	    if(this->buff) {
< 		strcpy(this->buff, pc);
---
> 	    thiscon->buff = (char *)malloc(len + 1);
> 	    thiscon->last = thiscon->len = len;
> 	    if(thiscon->buff) {
> 		strcpy(thiscon->buff, pc);
2381c2375
< 		this->buff = NULL; this->last = this->len = 0;
---
> 		thiscon->buff = NULL; thiscon->last = thiscon->len = 0;
2386c2380
< 	    this->buff = NULL; this->last = this->len = 0;
---
> 	    thiscon->buff = NULL; thiscon->last = thiscon->len = 0;
2391c2385
< 	Rboolean res = R_ReadClipboard(this, con->description);
---
> 	Rboolean res = R_ReadClipboard(thiscon, con->description);
2395,2397c2389,2391
< 	int len = (this->sizeKB)*1024;
< 	this->buff = (char *) malloc(len + 1);
< 	if(!this->buff) {
---
> 	int len = (thiscon->sizeKB)*1024;
> 	thiscon->buff = (char *) malloc(len + 1);
> 	if(!thiscon->buff) {
2401,2402c2395,2396
< 	this->len = len;
< 	this->last = 0;
---
> 	thiscon->len = len;
> 	thiscon->last = 0;
2408c2402
<     this->warned = FALSE;
---
>     thiscon->warned = FALSE;
2415,2416c2409,2410
< #ifdef Win32
<     Rclpconn this = con->private;
---
> #ifdef _WIN32
>     Rclpconn thiscon = con->private;
2420c2414
<     if ( (hglb = GlobalAlloc(GHND, this->len)) &&
---
>     if ( (hglb = GlobalAlloc(GHND, thiscon->len)) &&
2422,2423c2416,2417
< 	p = this->buff;
< 	while(p < this->buff + this->pos) *s++ = *p++;
---
> 	p = thiscon->buff;
> 	while(p < thiscon->buff + thiscon->pos) *s++ = *p++;
2442c2436
<     Rclpconn this = con->private;
---
>     Rclpconn thiscon = con->private;
2447c2441
<     if(this-> buff) free(this->buff);
---
>     if(thiscon-> buff) free(thiscon->buff);
2452c2446
<     Rclpconn this = con->private;
---
>     Rclpconn thiscon = con->private;
2454,2455c2448,2449
<     if (this->pos >= this->len) return R_EOF;
<     return this->buff[this->pos++];
---
>     if (thiscon->pos >= thiscon->len) return R_EOF;
>     return thiscon->buff[thiscon->pos++];
2460,2461c2454,2455
<     Rclpconn this = con->private;
<     int newpos, oldpos = this->pos;
---
>     Rclpconn thiscon = con->private;
>     int newpos, oldpos = thiscon->pos;
2466,2467c2460,2461
<     case 2: newpos = this->pos + (int) where; break;
<     case 3: newpos = this->last + (int) where; break;
---
>     case 2: newpos = thiscon->pos + (int) where; break;
>     case 3: newpos = thiscon->last + (int) where; break;
2470c2464
<     if(newpos < 0 || newpos >= this->last)
---
>     if(newpos < 0 || newpos >= thiscon->last)
2472c2466
<     else this->pos = newpos;
---
>     else thiscon->pos = newpos;
2479c2473
<     Rclpconn this = con->private;
---
>     Rclpconn thiscon = con->private;
2483c2477
<     this->last = this->pos;
---
>     thiscon->last = thiscon->pos;
2496,2497c2490,2491
<     Rclpconn this = con->private;
<     int available = this->len - this->pos, request = (int)(size*nitems), used;
---
>     Rclpconn thiscon = con->private;
>     int available = thiscon->len - thiscon->pos, request = (int)(size*nitems), used;
2499c2493
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
2501,2502c2495,2496
<     strncpy(ptr, this->buff + this->pos, used);
<     this->pos += used;
---
>     strncpy(ptr, thiscon->buff + thiscon->pos, used);
>     thiscon->pos += used;
2509c2503
<     Rclpconn this = con->private;
---
>     Rclpconn thiscon = con->private;
2511c2505
<     char c, *p = (char *) ptr, *q = this->buff + this->pos;
---
>     char c, *p = (char *) ptr, *q = thiscon->buff + thiscon->pos;
2516c2510
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
2519c2513
< 	if(this->pos >= this->len) break;
---
> 	if(thiscon->pos >= thiscon->len) break;
2521c2515
< #ifdef Win32
---
> #ifdef _WIN32
2525,2526c2519,2520
< 	    this->pos++;
< 	    if(this->pos >= this->len) break;
---
> 	    thiscon->pos++;
> 	    if(thiscon->pos >= thiscon->len) break;
2530c2524
< 	this->pos++;
---
> 	thiscon->pos++;
2533c2527
<     if (used < len && !this->warned) {
---
>     if (used < len && !thiscon->warned) {
2535c2529
< 	this->warned = TRUE;
---
> 	thiscon->warned = TRUE;
2537c2531
<     if(this->last < this->pos) this->last = this->pos;
---
>     if(thiscon->last < thiscon->pos) thiscon->last = thiscon->pos;
2543c2537
<     Rconnection new;
---
>     Rconnection newcon;
2560,2561c2554,2555
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of clipboard connection failed"));
---
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of clipboard connection failed"));
2564,2566c2558,2560
<     new->class = (char *) malloc(strlen(description) + 1);
<     if(!new->class) {
< 	free(new);
---
>     newcon->conclass = (char *) malloc(strlen(description) + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
2568c2562
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2570,2573c2564,2567
<     strcpy(new->class, description);
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, description);
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
2575c2569
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2577,2591c2571,2585
<     init_con(new, description, CE_NATIVE, mode);
<     new->open = &clp_open;
<     new->close = &clp_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc_internal = &clp_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &clp_seek;
<     new->truncate = &clp_truncate;
<     new->fflush = &clp_fflush;
<     new->read = &clp_read;
<     new->write = &clp_write;
<     new->canseek = TRUE;
<     new->private = (void *) malloc(sizeof(struct clpconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->open = &clp_open;
>     newcon->close = &clp_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc_internal = &clp_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->seek = &clp_seek;
>     newcon->truncate = &clp_truncate;
>     newcon->fflush = &clp_fflush;
>     newcon->read = &clp_read;
>     newcon->write = &clp_write;
>     newcon->canseek = TRUE;
>     newcon->private = (void *) malloc(sizeof(struct clpconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
2593c2587
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2595c2589
<     ((Rclpconn)new->private)->buff = NULL;
---
>     ((Rclpconn)newcon->private)->buff = NULL;
2601,2602c2595,2596
<     ((Rclpconn)new->private)->sizeKB = sizeKB;
<     return new;
---
>     ((Rclpconn)newcon->private)->sizeKB = sizeKB;
>     return newcon;
2660,2665c2654,2659
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of terminal connection failed"));
<     new->class = (char *) malloc(strlen("terminal") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of terminal connection failed"));
>     newcon->conclass = (char *) malloc(strlen("terminal") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
2667c2661
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2669,2672c2663,2666
<     strcpy(new->class, "terminal");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "terminal");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
2674c2668
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2676,2682c2670,2676
<     init_con(new, description, CE_NATIVE, mode);
<     new->isopen = TRUE;
<     new->canread = (strcmp(mode, "r") == 0);
<     new->canwrite = (strcmp(mode, "w") == 0);
<     new->destroy = &null_close;
<     new->private = NULL;
<     return new;
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->isopen = TRUE;
>     newcon->canread = (strcmp(mode, "r") == 0);
>     newcon->canwrite = (strcmp(mode, "w") == 0);
>     newcon->destroy = &null_close;
>     newcon->private = NULL;
>     return newcon;
2688c2682
<     SEXP ans, class;
---
>     SEXP ans, classs;
2693,2696c2687,2690
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar(con->class));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar(con->conclass));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
2703c2697
<     SEXP ans, class;
---
>     SEXP ans, classs;
2708,2711c2702,2705
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar(con->class));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar(con->conclass));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
2719c2713
<     SEXP ans, class;
---
>     SEXP ans, classs;
2724,2727c2718,2721
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar(con->class));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar(con->conclass));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
2757c2751
<     Rrawconn this = con->private;
---
>     Rrawconn thiscon = con->private;
2759,2762c2753,2756
<     this->data = MAYBE_REFERENCED(raw) ? duplicate(raw) : raw;
<     R_PreserveObject(this->data);
<     this->nbytes = XLENGTH(this->data);
<     this->pos = 0;
---
>     thiscon->data = MAYBE_REFERENCED(raw) ? duplicate(raw) : raw;
>     R_PreserveObject(thiscon->data);
>     thiscon->nbytes = XLENGTH(thiscon->data);
>     thiscon->pos = 0;
2776c2770
<     Rrawconn this = con->private;
---
>     Rrawconn thiscon = con->private;
2778,2779c2772,2773
<     R_ReleaseObject(this->data);
<     free(this);
---
>     R_ReleaseObject(thiscon->data);
>     free(thiscon);
2782c2776
< static void raw_resize(Rrawconn this, size_t needed)
---
> static void raw_resize(Rrawconn thiscon, size_t needed)
2790,2793c2784,2787
<     memcpy(RAW(tmp), RAW(this->data), this->nbytes);
<     R_ReleaseObject(this->data);
<     this->data = tmp;
<     R_PreserveObject(this->data);
---
>     memcpy(RAW(tmp), RAW(thiscon->data), thiscon->nbytes);
>     R_ReleaseObject(thiscon->data);
>     thiscon->data = tmp;
>     R_PreserveObject(thiscon->data);
2800,2801c2794,2795
<     Rrawconn this = con->private;
<     size_t freespace = XLENGTH(this->data) - this->pos, bytes = size*nitems;
---
>     Rrawconn thiscon = con->private;
>     size_t freespace = XLENGTH(thiscon->data) - thiscon->pos, bytes = size*nitems;
2803c2797
<     if ((double) size * (double) nitems + (double) this->pos > R_LEN_T_MAX)
---
>     if ((double) size * (double) nitems + (double) thiscon->pos > R_LEN_T_MAX)
2806c2800
<     if(bytes >= freespace) raw_resize(this, bytes + this->pos);
---
>     if(bytes >= freespace) raw_resize(thiscon, bytes + thiscon->pos);
2808,2810c2802,2804
<     memmove(RAW(this->data) + this->pos, ptr, bytes);
<     this->pos += bytes;
<     if(this->nbytes < this->pos) this->nbytes = this->pos;
---
>     memmove(RAW(thiscon->data) + thiscon->pos, ptr, bytes);
>     thiscon->pos += bytes;
>     if(thiscon->nbytes < thiscon->pos) thiscon->nbytes = thiscon->pos;
2816,2817c2810,2811
<     Rrawconn this = con->private;
<     this->nbytes = this->pos;
---
>     Rrawconn thiscon = con->private;
>     thiscon->nbytes = thiscon->pos;
2823,2824c2817,2818
<     Rrawconn this = con->private;
<     size_t available = this->nbytes - this->pos, request = size*nitems, used;
---
>     Rrawconn thiscon = con->private;
>     size_t available = thiscon->nbytes - thiscon->pos, request = size*nitems, used;
2826,2827c2820,2821
<     if ((double) size * (double) nitems + (double) this->pos > R_LEN_T_MAX)
< 	error(_("too large a block specified"));
---
>     if ((double) size * (double) nitems + (double) thiscon->pos > R_LEN_T_MAX)
> 	error(_("specified block is too large"));
2829,2830c2823,2824
<     memmove(ptr, RAW(this->data) + this->pos, used);
<     this->pos += used;
---
>     memmove(ptr, RAW(thiscon->data) + thiscon->pos, used);
>     thiscon->pos += used;
2836,2838c2830,2832
<     Rrawconn this = con->private;
<     if(this->pos >= this->nbytes) return R_EOF;
<     else return (int) RAW(this->data)[this->pos++];
---
>     Rrawconn thiscon = con->private;
>     if(thiscon->pos >= thiscon->nbytes) return R_EOF;
>     else return (int) RAW(thiscon->data)[thiscon->pos++];
2843c2837
<     Rrawconn this = con->private;
---
>     Rrawconn thiscon = con->private;
2845c2839
<     size_t oldpos = this->pos;
---
>     size_t oldpos = thiscon->pos;
2851,2852c2845,2846
<     case 2: newpos = (double) this->pos + where; break;
<     case 3: newpos = (double) this->nbytes + where; break;
---
>     case 2: newpos = (double) thiscon->pos + where; break;
>     case 3: newpos = (double) thiscon->nbytes + where; break;
2855c2849
<     if(newpos < 0 || newpos > this->nbytes)
---
>     if(newpos < 0 || newpos > thiscon->nbytes)
2857c2851
<     else this->pos = (size_t) newpos;
---
>     else thiscon->pos = (size_t) newpos;
2864c2858
<     Rconnection new;
---
>     Rconnection newcon;
2866,2870c2860,2864
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of raw connection failed"));
<     new->class = (char *) malloc(strlen("rawConnection") + 1);
<     if(!new->class) {
< 	free(new);
---
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of raw connection failed"));
>     newcon->conclass = (char *) malloc(strlen("rawConnection") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
2872c2866
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2874,2877c2868,2871
<     strcpy(new->class, "rawConnection");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "rawConnection");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
2879c2873
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2881,2904c2875,2898
<     init_con(new, description, CE_NATIVE, mode);
<     new->isopen = TRUE;
<     new->text = FALSE;
<     new->blocking = TRUE;
<     new->canseek = TRUE;
<     new->canwrite = (mode[0] == 'w' || mode[0] == 'a');
<     new->canread = mode[0] == 'r';
<     if(strlen(mode) >= 2 && mode[1] == '+') new->canread = new->canwrite = TRUE;
<     new->open = &raw_open;
<     new->close = &raw_close;
<     new->destroy = &raw_destroy;
<     if(new->canwrite) {
< 	new->write = &raw_write;
< 	new->vfprintf = &dummy_vfprintf;
< 	new->truncate = &raw_truncate;
<     }
<     if(new->canread) {
< 	new->read = &raw_read;
< 	new->fgetc = &raw_fgetc;
<     }
<     new->seek = &raw_seek;
<     new->private = (void*) malloc(sizeof(struct rawconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->isopen = TRUE;
>     newcon->text = FALSE;
>     newcon->blocking = TRUE;
>     newcon->canseek = TRUE;
>     newcon->canwrite = (mode[0] == 'w' || mode[0] == 'a');
>     newcon->canread = mode[0] == 'r';
>     if(strlen(mode) >= 2 && mode[1] == '+') newcon->canread = newcon->canwrite = TRUE;
>     newcon->open = &raw_open;
>     newcon->close = &raw_close;
>     newcon->destroy = &raw_destroy;
>     if(newcon->canwrite) {
> 	newcon->write = &raw_write;
> 	newcon->vfprintf = &dummy_vfprintf;
> 	newcon->truncate = &raw_truncate;
>     }
>     if(newcon->canread) {
> 	newcon->read = &raw_read;
> 	newcon->fgetc = &raw_fgetc;
>     }
>     newcon->seek = &raw_seek;
>     newcon->private = (void*) malloc(sizeof(struct rawconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
2906c2900
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
2908,2910c2902,2904
<     raw_init(new, raw);
<     if(mode[0] == 'a') raw_seek(new, 0, 3, 0);
<     return new;
---
>     raw_init(newcon, raw);
>     if(mode[0] == 'a') raw_seek(newcon, 0, 3, 0);
>     return newcon;
2915c2909
<     SEXP sfile, sraw, sopen, ans, class;
---
>     SEXP sfile, sraw, sopen, ans, classs;
2941,2944c2935,2938
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("rawConnection"));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar("rawConnection"));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
2955c2949
<     Rrawconn this;
---
>     Rrawconn thiscon;
2960c2954
< 	error(_("'con' is not a rawConnection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"rawConnection\"");
2963,2966c2957,2960
< 	error(_("'con' is not an output rawConnection"));
<     this = con->private;
<     ans = allocVector(RAWSXP, this->nbytes); /* later, use TRUELENGTH? */
<     memcpy(RAW(ans), RAW(this->data), this->nbytes);
---
> 	error(_("'%s' is not an output of class %s"), "con", "\"rawConnection\"");
>     thiscon = con->private;
>     ans = allocVector(RAWSXP, thiscon->nbytes); /* later, use TRUELENGTH? */
>     memcpy(RAW(ans), RAW(thiscon->data), thiscon->nbytes);
2992c2986
<     Rtextconn this = con->private;
---
>     Rtextconn thiscon = con->private;
3003,3005c2997,2999
<     this->data = (char *) malloc(nchars+1);
<     if(!this->data) {
< 	free(this); free(con->description); free(con->class); free(con);
---
>     thiscon->data = (char *) malloc(nchars+1);
>     if(!thiscon->data) {
> 	free(thiscon); free(con->description); free(con->conclass); free(con);
3008c3002
<     char *t = this->data;
---
>     char *t = thiscon->data;
3017,3018c3011,3012
<     this->nchars = nchars;
<     this->cur = this->save = 0;
---
>     thiscon->nchars = nchars;
>     thiscon->cur = thiscon->save = 0;
3034c3028
<     Rtextconn this = con->private;
---
>     Rtextconn thiscon = con->private;
3036,3038c3030,3032
<     free(this->data);
<     /* this->cur = this->nchars = 0; */
<     free(this);
---
>     free(thiscon->data);
>     /* thiscon->cur = thiscon->nchars = 0; */
>     free(thiscon);
3043,3044c3037,3038
<     Rtextconn this = con->private;
<     if(this->save) {
---
>     Rtextconn thiscon = con->private;
>     if(thiscon->save) {
3046,3047c3040,3041
< 	c = this->save;
< 	this->save = 0;
---
> 	c = thiscon->save;
> 	thiscon->save = 0;
3050,3051c3044,3045
<     if(this->cur >= this->nchars) return R_EOF;
<     else return (int) (this->data[this->cur++]);
---
>     if(thiscon->cur >= thiscon->nchars) return R_EOF;
>     else return (int) (thiscon->data[thiscon->cur++]);
3062,3067c3056,3061
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of text connection failed"));
<     new->class = (char *) malloc(strlen("textConnection") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of text connection failed"));
>     newcon->conclass = (char *) malloc(strlen("textConnection") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
3069c3063
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
3071,3074c3065,3068
<     strcpy(new->class, "textConnection");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "textConnection");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
3076c3070
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
3078,3088c3072,3082
<     init_con(new, description, CE_NATIVE, "r");
<     new->isopen = TRUE;
<     new->canwrite = FALSE;
<     new->open = &text_open;
<     new->close = &text_close;
<     new->destroy = &text_destroy;
<     new->fgetc = &text_fgetc;
<     new->seek = &text_seek;
<     new->private = (void*) malloc(sizeof(struct textconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, CE_NATIVE, "r");
>     newcon->isopen = TRUE;
>     newcon->canwrite = FALSE;
>     newcon->open = &text_open;
>     newcon->close = &text_close;
>     newcon->destroy = &text_destroy;
>     newcon->fgetc = &text_fgetc;
>     newcon->seek = &text_seek;
>     newcon->private = (void*) malloc(sizeof(struct textconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
3090c3084
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
3092,3093c3086,3087
<     text_init(new, text, type);
<     return new;
---
>     text_init(newcon, text, type);
>     return newcon;
3107c3101
<     Routtextconn this = con->private;
---
>     Routtextconn thiscon = con->private;
3111,3117c3105,3111
<     if(this->namesymbol &&
<        findVarInFrame3(env, this->namesymbol, FALSE) != R_UnboundValue)
< 	R_unLockBinding(this->namesymbol, env);
<     if(strlen(this->lastline) > 0) {
< 	PROTECT(tmp = xlengthgets(this->data, ++this->len));
< 	SET_STRING_ELT(tmp, this->len - 1, mkCharLocal(this->lastline));
< 	if(this->namesymbol) defineVar(this->namesymbol, tmp, env);
---
>     if(thiscon->namesymbol &&
>        findVarInFrame3(env, thiscon->namesymbol, FALSE) != R_UnboundValue)
> 	R_unLockBinding(thiscon->namesymbol, env);
>     if(strlen(thiscon->lastline) > 0) {
> 	PROTECT(tmp = xlengthgets(thiscon->data, ++thiscon->len));
> 	SET_STRING_ELT(tmp, thiscon->len - 1, mkCharLocal(thiscon->lastline));
> 	if(thiscon->namesymbol) defineVar(thiscon->namesymbol, tmp, env);
3119c3113
< 	this->data = tmp;
---
> 	thiscon->data = tmp;
3126c3120
<     Routtextconn this = con->private;
---
>     Routtextconn thiscon = con->private;
3130c3124
<        However, this could be quite expensive.
---
>        However, thiscon could be quite expensive.
3133,3134c3127,3128
<     if(!this->namesymbol) R_ReleaseObject(this->data);
<     free(this->lastline); free(this);
---
>     if(!thiscon->namesymbol) R_ReleaseObject(thiscon->data);
>     free(thiscon->lastline); free(thiscon);
3141c3135
<     Routtextconn this = con->private;
---
>     Routtextconn thiscon = con->private;
3145c3139
< 	already = (int) strlen(this->lastline); // we do not allow longer lines
---
> 	already = (int) strlen(thiscon->lastline); // we do not allow longer lines
3157c3151
< 	strcpy(b, this->lastline);
---
> 	strcpy(b, thiscon->lastline);
3166c3160
< 	strcpy(b, this->lastline);
---
> 	strcpy(b, thiscon->lastline);
3173c3167
< 	strncpy(b, this->lastline, NBUFSIZE);
---
> 	strncpy(b, thiscon->lastline, NBUFSIZE);
3190,3196c3184,3190
< 	    PROTECT(tmp = xlengthgets(this->data, ++this->len));
< 	    SET_STRING_ELT(tmp, this->len - 1, mkCharLocal(p));
< 	    if(this->namesymbol) {
< 		if(findVarInFrame3(env, this->namesymbol, FALSE)
< 		   != R_UnboundValue) R_unLockBinding(this->namesymbol, env);
< 		defineVar(this->namesymbol, tmp, env);
< 		R_LockBinding(this->namesymbol, env);
---
> 	    PROTECT(tmp = xlengthgets(thiscon->data, ++thiscon->len));
> 	    SET_STRING_ELT(tmp, thiscon->len - 1, mkCharLocal(p));
> 	    if(thiscon->namesymbol) {
> 		if(findVarInFrame3(env, thiscon->namesymbol, FALSE)
> 		   != R_UnboundValue) R_unLockBinding(thiscon->namesymbol, env);
> 		defineVar(thiscon->namesymbol, tmp, env);
> 		R_LockBinding(thiscon->namesymbol, env);
3198c3192
< 		R_ReleaseObject(this->data);
---
> 		R_ReleaseObject(thiscon->data);
3201c3195
< 	    this->data = tmp;
---
> 	    thiscon->data = tmp;
3206c3200
< 	    if(strlen(p) >= this->lastlinelength) {
---
> 	    if(strlen(p) >= thiscon->lastlinelength) {
3208,3209c3202,3203
< 		if (newlen > INT_MAX) error("last line is too long");
< 		void * tmp = realloc(this->lastline, newlen);
---
> 		if (newlen > INT_MAX) error(_("last line is too long"));
> 		void * tmp = realloc(thiscon->lastline, newlen);
3211,3212c3205,3206
< 		    this->lastline = tmp;
< 		    this->lastlinelength = (int) newlen;
---
> 		    thiscon->lastline = tmp;
> 		    thiscon->lastlinelength = (int) newlen;
3214,3216c3208,3210
< 		    warning("allocation problem for last line");
< 		    this->lastline = NULL;
< 		    this->lastlinelength = 0;
---
> 		    warning(_("allocation problem for last line"));
> 		    thiscon->lastline = NULL;
> 		    thiscon->lastlinelength = 0;
3219,3220c3213,3214
< 	    strcpy(this->lastline, p);
< 	    con->incomplete = strlen(this->lastline) > 0;
---
> 	    strcpy(thiscon->lastline, p);
> 	    con->incomplete = strlen(thiscon->lastline) > 0;
3230c3224
<     Routtextconn this = con->private;
---
>     Routtextconn thiscon = con->private;
3234c3228
< 	this->namesymbol = NULL;
---
> 	thiscon->namesymbol = NULL;
3239c3233
< 	this->namesymbol = install(con->description);
---
> 	thiscon->namesymbol = install(con->description);
3243c3237
< 	    defineVar(this->namesymbol, val, VECTOR_ELT(OutTextData, idx));
---
> 	    defineVar(thiscon->namesymbol, val, VECTOR_ELT(OutTextData, idx));
3249c3243
< 	    val = findVar1(this->namesymbol, VECTOR_ELT(OutTextData, idx),
---
> 	    val = findVar1(thiscon->namesymbol, VECTOR_ELT(OutTextData, idx),
3254c3248
< 		defineVar(this->namesymbol, val, VECTOR_ELT(OutTextData, idx));
---
> 		defineVar(thiscon->namesymbol, val, VECTOR_ELT(OutTextData, idx));
3259c3253
< 	    R_LockBinding(this->namesymbol, VECTOR_ELT(OutTextData, idx));
---
> 	    R_LockBinding(thiscon->namesymbol, VECTOR_ELT(OutTextData, idx));
3263,3266c3257,3260
<     this->len = LENGTH(val);
<     this->data = val;
<     this->lastline[0] = '\0';
<     this->lastlinelength = LAST_LINE_LEN;
---
>     thiscon->len = LENGTH(val);
>     thiscon->data = val;
>     thiscon->lastline[0] = '\0';
>     thiscon->lastlinelength = LAST_LINE_LEN;
3273c3267
<     Rconnection new;
---
>     Rconnection newcon;
3276,3280c3270,3274
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of text connection failed"));
<     new->class = (char *) malloc(strlen("textConnection") + 1);
<     if(!new->class) {
< 	free(new);
---
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of text connection failed"));
>     newcon->conclass = (char *) malloc(strlen("textConnection") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
3282c3276
<  	/* for Solaris 12.5 */ new = NULL;
---
>  	/* for Solaris 12.5 */ newcon = NULL;
3284,3287c3278,3281
<     strcpy(new->class, "textConnection");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "textConnection");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
3289c3283
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
3291,3301c3285,3295
<     init_con(new, description, CE_NATIVE, mode);
<     new->isopen = TRUE;
<     new->canread = FALSE;
<     new->open = &text_open;
<     new->close = &outtext_close;
<     new->destroy = &outtext_destroy;
<     new->vfprintf = &text_vfprintf;
<     new->seek = &text_seek;
<     new->private = (void*) malloc(sizeof(struct outtextconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->isopen = TRUE;
>     newcon->canread = FALSE;
>     newcon->open = &text_open;
>     newcon->close = &outtext_close;
>     newcon->destroy = &outtext_destroy;
>     newcon->vfprintf = &text_vfprintf;
>     newcon->seek = &text_seek;
>     newcon->private = (void*) malloc(sizeof(struct outtextconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
3303c3297
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
3305c3299
<     ((Routtextconn)new->private)->lastline = tmp = malloc(LAST_LINE_LEN);
---
>     ((Routtextconn)newcon->private)->lastline = tmp = malloc(LAST_LINE_LEN);
3307,3308c3301,3302
< 	free(new->private);
< 	free(new->description); free(new->class); free(new);
---
> 	free(newcon->private);
> 	free(newcon->description); free(newcon->conclass); free(newcon);
3310c3304
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
3312,3313c3306,3307
<     outtext_init(new, stext, mode, idx);
<     return new;
---
>     outtext_init(newcon, stext, mode, idx);
>     return newcon;
3318c3312
<     SEXP sfile, stext, sopen, ans, class, venv;
---
>     SEXP sfile, stext, sopen, ans, classs, venv;
3367,3370c3361,3364
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("textConnection"));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar("textConnection"));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
3381c3375
<     Routtextconn this;
---
>     Routtextconn thiscon;
3385c3379
< 	error(_("'con' is not a textConnection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"textConnection\"");
3388,3390c3382,3384
< 	error(_("'con' is not an output textConnection"));
<     this = con->private;
<     return this->data;
---
> 	error(_("'%s' is not an output of class %s"), "con", "\"rawConnection\"");
>     thiscon = con->private;
>     return thiscon->data;
3401c3395
<     SEXP scmd, sopen, ans, class, enc;
---
>     SEXP scmd, sopen, ans, concl, enc;
3454,3457c3448,3451
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("sockconn"));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(concl = allocVector(STRSXP, 2));
>     SET_STRING_ELT(concl, 0, mkChar("sockconn"));
>     SET_STRING_ELT(concl, 1, mkChar("connection"));
>     classgets(ans, concl);
3469c3463
<     SEXP sfile, sopen, ans, class, enc;
---
>     SEXP sfile, sopen, ans, classs, enc;
3480c3474
< 	warning(_("only first element of 'description' argument used"));
---
> 	warning(_("only first element of '%s' argument will be used"), "description");
3506,3509c3500,3503
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("unz"));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar("unz"));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
3529c3523
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3578c3572
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3589c3583
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3623,3624c3617,3618
<     free(con->class);
<     con->class = NULL;
---
>     free(con->conclass);
>     con->conclass = NULL;
3672c3666
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3702c3696
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3725c3719
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3737c3731
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3801,3802c3795
< 	if(nbuf+1 >= bufsize)
< 	    error(_("line longer than buffer size %lu"), (unsigned long) bufsize);
---
> 	if(nbuf+1 >= bufsize) error(_("line is longer than buffer size %lu"), (unsigned long) bufsize);
3814,3815c3807
< 	if(nbuf+1 >= bufsize)
< 	    error(_("line longer than buffer size %lu"), (unsigned long) bufsize);
---
> 	if(nbuf+1 >= bufsize) error(_("line is longer than buffer size %lu"), (unsigned long) bufsize);
3863c3855
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
3908c3900
< 	error(_("cannot allocate buffer in readLines"));
---
> 	error(_("cannot allocate buffer in 'readLines()'"));
3915c3907
< 	    if (dnn > R_XLEN_T_MAX) error("too many items");
---
> 	    if (dnn > R_XLEN_T_MAX) error(_("too many items"));
3930c3922
< 		    error(_("cannot allocate buffer in readLines"));
---
> 		    error(_("cannot allocate buffer in 'readLines()'"));
3955c3947
< 	   (strcmp(con->class, "gzfile") != 0)) {
---
> 	   (strcmp(con->conclass, "gzfile") != 0)) {
3962,3963c3954
< 		warning(_("incomplete final line found on '%s'"),
< 			con->description);
---
> 		warning(_("incomplete final line found on '%s'"), con->description);
3968c3959
< 	error(_("too few lines read in readLines"));
---
> 	error(_("too few lines read in 'readLines()'"));
3990c3981
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
4072c4063
< 	if (m < 0) error("error reading from the connection");
---
> 	if (m < 0) error(_("error reading from the connection"));
4081c4072
< 	warning(_("null terminator not found: breaking string at 10000 bytes"));
---
> 	warning(_("null terminator was not found: breaking string at 10000 bytes"));
4206c4197
< 		if (m0 < 0) error("error reading from the connection");
---
> 		if (m0 < 0) error(_("error reading from the connection"));
4297c4288
< 		    if (m0 < 0) error("error reading from the connection");
---
> 		    if (m0 < 0) error(_("error reading from the connection"));
4326c4317
< 		    if (s < 0) error("error reading from the connection");
---
> 		    if (s < 0) error(_("error reading from the connection"));
4359c4350
< 		    if (s < 0) error("error reading from the connection");
---
> 		    if (s < 0) error(_("error reading from the connection"));
4399c4390
< 	error(_("'x' is not an atomic vector type"));
---
> 	error(_("'x' argument is not an atomic vector type"));
4426c4417
< 	    error(_("only 2^31-1 bytes can be written in a single writeBin() call"));
---
> 	    error(_("only 2^31-1 bytes can be written in a single 'writeBin()' call"));
4474c4465
< 		    warning(_("problem writing to connection"));
---
> 		    warning(_("problem with writing to connection"));
4522c4513
< 	    UNIMPLEMENTED_TYPE("writeBin", object);
---
> 	    UNIMPLEMENTED_TYPE("writeBin()", object);
4627c4618
< 	    if(nwrite < len) warning(_("problem writing to connection"));
---
> 	    if(nwrite < len) warning(_("problem with writing to connection"));
4665c4656
< 		if(m < clen - 1) error(_("invalid UTF-8 input in readChar()"));
---
> 		if(m < clen - 1) error(_("invalid UTF-8 input in 'readChar()'"));
4669c4660
< 		    error(_("invalid UTF-8 input in readChar()"));
---
> 		    error(_("invalid UTF-8 input in 'readChar()'"));
4708c4699
< 		error(_("invalid UTF-8 input in readChar()"));
---
> 		error(_("invalid UTF-8 input in 'readChar()'"));
4781,4782c4772,4773
< 	warning(_("text connection used with %s(), results may be incorrect"),
< 	          "readChar");
---
> 	warning(_("text connection used with '%s' function, results may be incorrect"),
> 	          "readChar()");
4853c4844
< 	error(_("'object' is too short"));
---
> 	error(_("'object' argument is too short"));
4879c4870
< 	    error("too much data for a raw vector on this platform");
---
> 	    error(_("too much data for a raw vector on this platform"));
4902,4903c4893,4894
< 	warning(_("text connection used with %s(), results may be incorrect"),
< 	          "writeChar");
---
> 	warning(_("text connection used with '%s' function, results may be incorrect"),
> 	          "writeChar()");
4921c4912
< 		    warning(_("problem writing to connection"));
---
> 		    warning(_("problem with writing to connection"));
4961c4952
< 		    warning(_("problem writing to connection"));
---
> 		    warning(_("problem with writing to connection"));
4998c4989
<     if(!q) error(_("could not allocate space for pushback"));
---
>     if(!q) error(_("could not allocate space for '%s'"), "pushback");
5002c4993
<     if(!(*q)) error(_("could not allocate space for pushback"));
---
>     if(!(*q)) error(_("could not allocate space for '%s'"), "pushback");
5039c5030
< 	if(!q) error(_("could not allocate space for pushback"));
---
> 	if(!q) error(_("could not allocate space for '%s'"), "pushback");
5047c5038
< 	    if(!(*q)) error(_("could not allocate space for pushback"));
---
> 	    if(!(*q)) error(_("could not allocate space for '%s'"), "pushback");
5099c5090
< 	error(_("cannot switch output to stdin"));
---
> 	error(_("cannot switch output to 'stdin'"));
5193c5184
< #ifdef Win32
---
> #ifdef _WIN32
5242c5233
<     SEXP ans, class;
---
>     SEXP ans, classs;
5255,5258c5246,5249
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar(con->class));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar(con->conclass));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
5282c5273
<     SET_VECTOR_ELT(ans, 1, mkString(Rcon->class));
---
>     SET_VECTOR_ELT(ans, 1, mkString(Rcon->conclass));
5313c5304
<     SEXP scmd, sopen, ans, class, enc, headers = R_NilValue,
---
>     SEXP scmd, sopen, ans, classs, enc, headers = R_NilValue,
5330,5331c5321,5322
< 	warning(_("only first element of 'description' argument used"));
< #ifdef Win32
---
> 	warning(_("only first element of '%s' argument will be used"), "description");
> #ifdef _WIN32
5383c5374
< #ifndef Win32
---
> #ifndef _WIN32
5387c5378
< #ifdef Win32
---
> #ifdef _WIN32
5390c5381
< 	error(_("method = \"wininet\" is only supported on Windows"));
---
> 	error(_("'method = \"wininet\"' is only supported on Windows"));
5393c5384
< #ifdef Win32
---
> #ifdef _WIN32
5418c5409
< 		error("ftps:// URLs are not supported by this method");
---
> 		error(_("ftps:// URLs are not supported by this method"));
5420c5411
< #ifdef Win32
---
> #ifdef _WIN32
5425c5416
< 		error("https:// URLs are not supported by this method");
---
> 		error(_("https:// URLs are not supported by this method"));
5431c5422
< 		error("https:// URLs are not supported by the \"internal\" method");
---
> 		error(_("https:// URLs are not supported by the \"internal\" method"));
5439c5430
< #ifdef Win32
---
> #ifdef _WIN32
5451c5442
< 	    error("url(method = \"libcurl\") is not supported on this platform");
---
> 	    error(_("'url(method = \"libcurl\")' is not supported on this platform"));
5463c5454
< 		    warning(_("file(\"\") only supports open = \"w+\" and open = \"w+b\": using the former"));
---
> 	            warning(_("'%s' only supports 'open = \"w+\"' and 'open = \"w+b\"': using the former"), "file(\"\")");
5467c5458
< #ifdef Win32
---
> #ifdef _WIN32
5478c5469
< #ifndef Win32
---
> #ifndef _WIN32
5564,5567c5555,5558
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar(class2));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar(class2));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
5708c5699
< 		    error(_("writing error whilst flushing 'gzcon' connection"));
---
> 		    error(_("writing error while flushing gzcon connection"));
5764c5755
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
5828c5819
< 	error(_("too large a block specified"));
---
> 	error(_("specified block is too large"));
5837c5828
< 		warning(_("write error on 'gzcon' connection"));
---
> 		warning(_("write error on gzcon connection"));
5860c5851
<     SEXP ans, class;
---
>     SEXP ans, classs;
5862c5853
<     Rconnection incon = NULL, new = NULL;
---
>     Rconnection incon = NULL, newcon = NULL;
5868c5859
< 	error(_("'con' is not a connection"));
---
> 	error(_("'%s' argument is not an object of class %s"), "con", "\"connection\"");
5872c5863
< 	error(_("'level' must be one of 0 ... 9"));
---
> 	error(_("'level' argument must be one of 0 ... 9"));
5875c5866
< 	error(_("'allowNonCompression' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "allowNonCompression");
5878c5869
<         error(_("'text' must be TRUE or FALSE"));
---
>         error(_("'%s' argument must be TRUE or FALSE"), "text");
5881c5872
< 	warning(_("this is already a 'gzcon' connection"));
---
> 	warning(_("this is already a gzcon connection"));
5888c5879
<     if(strcmp(incon->class, "file") == 0 &&
---
>     if(strcmp(incon->conclass, "file") == 0 &&
5892,5893c5883,5884
<     else if(strcmp(incon->class, "textConnection") == 0 && strcmp(m, "w") == 0)
< 	error(_("cannot create a 'gzcon' connection from a writable textConnection; maybe use rawConnection"));
---
>     else if(strcmp(incon->conclass, "textConnection") == 0 && strcmp(m, "w") == 0)
> 	error(_("cannot create a gzcon connection from a writable textConnection; maybe use rawConnection"));
5895,5901c5886,5892
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of 'gzcon' connection failed"));
<     new->class = (char *) malloc(strlen("gzcon") + 1);
<     if(!new->class) {
< 	free(new);
< 	error(_("allocation of 'gzcon' connection failed"));
<  	/* for Solaris 12.5 */ new = NULL;
---
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of gzcon connection failed"));
>     newcon->conclass = (char *) malloc(strlen("gzcon") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
> 	error(_("allocation of gzcon connection failed"));
>  	/* for Solaris 12.5 */ newcon = NULL;
5903c5894
<     strcpy(new->class, "gzcon");
---
>     strcpy(newcon->conclass, "gzcon");
5905,5922c5896,5913
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
< 	error(_("allocation of 'gzcon' connection failed"));
< 	/* for Solaris 12.5 */ new = NULL;
<     }
<     init_con(new, description, CE_NATIVE, mode);
<     new->text = text;
<     new->isGzcon = TRUE;
<     new->open = &gzcon_open;
<     new->close = &gzcon_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc = &gzcon_fgetc;
<     new->read = &gzcon_read;
<     new->write = &gzcon_write;
<     new->private = (void *) malloc(sizeof(struct gzconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
> 	error(_("allocation of gzcon connection failed"));
> 	/* for Solaris 12.5 */ newcon = NULL;
>     }
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->text = text;
>     newcon->isGzcon = TRUE;
>     newcon->open = &gzcon_open;
>     newcon->close = &gzcon_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc = &gzcon_fgetc;
>     newcon->read = &gzcon_read;
>     newcon->write = &gzcon_write;
>     newcon->private = (void *) malloc(sizeof(struct gzconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
5924c5915
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
5926,5929c5917,5920
<     ((Rgzconn)(new->private))->con = incon;
<     ((Rgzconn)(new->private))->cp = level;
<     ((Rgzconn)(new->private))->nsaved = -1;
<     ((Rgzconn)(new->private))->allow = allow;
---
>     ((Rgzconn)(newcon->private))->con = incon;
>     ((Rgzconn)(newcon->private))->cp = level;
>     ((Rgzconn)(newcon->private))->nsaved = -1;
>     ((Rgzconn)(newcon->private))->allow = allow;
5934c5925
<     Connections[icon] = new;
---
>     Connections[icon] = newcon;
5936,5938c5927,5929
<     strncpy(new->encname, incon->encname, 100);
<     new->encname[100 - 1] = '\0';
<     new->ex_ptr = PROTECT(R_MakeExternalPtr((void *)new->id, install("connection"),
---
>     strncpy(newcon->encname, incon->encname, 100);
>     newcon->encname[100 - 1] = '\0';
>     newcon->ex_ptr = PROTECT(R_MakeExternalPtr((void *)newcon->id, install("connection"),
5940c5931
<     if(incon->isopen) new->open(new);
---
>     if(incon->isopen) newcon->open(newcon);
5943,5947c5934,5938
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar("gzcon"));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
<     setAttrib(ans, R_ConnIdSymbol, new->ex_ptr);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar("gzcon"));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
>     setAttrib(ans, R_ConnIdSymbol, newcon->ex_ptr);
5982c5973
< 	error("R_compress1 requires a raw vector");
---
> 	error(_("'%s' function requires a raw vector"), "R_compress1()");
5989c5980
<     if(res != Z_OK) error("internal error %d in R_compress1", res);
---
>     if(res != Z_OK) error(_("internal error %d in '%s' function"), res, "R_compress1()");
6007c5998
< 	error("R_decompress1 requires a raw vector");
---
> 	error(_("'%s' function requires a raw vector"), "R_decompress1()");
6013c6004
< 	warning("internal error %d in R_decompress1", res);
---
> 	warning(_("internal error %d in '%s' function"), res, "R_decompress1()");
6033c6024
< 	error("R_compress2 requires a raw vector");
---
> 	error(_("'%s' function requires a raw vector"), "R_compress2()");
6043c6034
<     if(res != BZ_OK) error("internal error %d in R_compress2", res);
---
>     if(res != BZ_OK) error(_("internal error %d in '%s' function"), res, "R_compress2()");
6066c6057
< 	error("R_decompress2 requires a raw vector");
---
> 	error(_("'%s' function requires a raw vector"), "R_decompress2()");
6074c6065
< 	    warning("internal error %d in R_decompress2", res);
---
> 	    warning(_("internal error %d in '%s' function"), res, "R_decompress2()");
6083c6074
< 	    warning("internal error %d in R_decompress1");
---
> 	    warning(_("internal error %d in '%s' function"), res, "R_decompress1()");
6090c6081
< 	warning("unknown type in R_decompress2");
---
> 	warning(_("unknown type in '%s' function"), "R_decompress2()");
6112c6103
< 	error(_("not a list of sockets"));
---
> 	error(_("'%s' argument is not a list of sockets"), "socklist");
6127,6128c6118,6119
< 	if (strcmp(conn->class, "sockconn") != 0)
< 	    error(_("not a socket connection"));
---
> 	if (strcmp(conn->conclass, "sockconn") != 0)
> 	    error(_("this is not a socket connection"));
6154c6145
< 	error("problem setting presets");
---
> 	error(_("problem with setting presets"));
6176c6167
< 	error("R_compress3 requires a raw vector");
---
> 	error(_("'%s' function requires a raw vector"), "R_compress3()");
6186c6177
<     if (ret != LZMA_OK) error("internal error %d in R_compress3", ret);
---
>     if (ret != LZMA_OK) error(_("internal error %d in '%s' function"), ret, "R_compress3()");
6193c6184
< 	warning("internal error %d in R_compress3", ret);
---
> 	warning(_("internal error %d in '%s' function"), ret, "R_compress3()");
6216c6207
< 	error("R_decompress3 requires a raw vector");
---
> 	error(_("'%s' function requires a raw vector"), "R_decompress3()");
6227c6218
< 	    warning("internal error %d in R_decompress3", ret);
---
> 	    warning(_("internal error %d in '%s' function"), ret, "R_decompress3()");
6237,6238c6228
< 	    warning("internal error %d in R_decompress3 %d",
< 		    ret, strm.avail_in);
---
> 	    warning(_("internal error %d in '%s' function (%d)"), ret, "R_decompress3()", strm.avail_in);
6248c6238
< 	    warning("internal error %d in R_decompress2", res);
---
> 	    warning(_("internal error %d in '%s' function"), res, "R_decompress2()");
6256c6246
< 	    warning("internal error %d in R_decompress1");
---
> 	    warning(_("internal error %d in '%s' function"), res, "R_decompress1()");
6263c6253
< 	warning("unknown type in R_decompress3");
---
> 	warning(_("unknown type in '%s' function"), "R_decompress3()");
6281c6271
<     if(TYPEOF(from) != RAWSXP) error("'from' must be raw or character");
---
>     if(TYPEOF(from) != RAWSXP) error(_("'from' argument must be raw or character"));
6293c6283
< 	if(res != Z_OK) error("internal error %d in memCompress", res);
---
> 	if(res != Z_OK) error(_("internal error %d in '%s' function"), res, "memCompress()");
6306c6296
< 	if(res != BZ_OK) error("internal error %d in memCompress", res);
---
> 	if(res != BZ_OK) error(_("internal error %d in '%s' function"), res, "memCompress()");
6322c6312
< 	    error("problem setting presets");
---
> 	    error(_("problem with setting presets"));
6328c6318
< 	if (ret != LZMA_OK) error("internal error %d in memCompress", ret);
---
> 	if (ret != LZMA_OK) error(_("internal error %d in '%s' function"), ret, "memCompress()");
6338c6328
< 	    error("internal error %d in memCompress", ret);
---
> 	    error(_("internal error %d in '%s' function"), ret, "memCompress()");
6361c6351
<     if(TYPEOF(from) != RAWSXP) error("'from' must be raw or character");
---
>     if(TYPEOF(from) != RAWSXP) error(_("'from' argument must be raw or character"));
6392c6382
< 	    error("internal error %d in memDecompress(%d)", res, type);
---
> 	    error(_("internal error %d in '%s' function (%d)"), res, "memDecompress()", type);
6408c6398
< 	    error("internal error %d in memDecompress(%d)", res, type);
---
> 	    error(_("internal error %d in '%s' function (%d)"), res, "memDecompress()", type);
6454,6455c6444
< 		    error("internal error %d in memDecompress(%d) at %d",
< 			  ret, type, strm.avail_in);
---
> 		    error(_("internal error %d in '%s' function (%d) at %d"), ret, "memDecompress()", type, strm.avail_in);
6484,6485c6473,6474
<     Rconnection new;
<     SEXP ans, class;
---
>     Rconnection newcon;
>     SEXP ans, classs;
6490,6494c6479,6483
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of %s connection failed"), class_name);
<     new->class = (char *) malloc(strlen(class_name) + 1);
<     if(!new->class) {
< 	free(new);
---
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of %s connection failed"), class_name);
>     newcon->conclass = (char *) malloc(strlen(class_name) + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
6496c6485
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
6498,6501c6487,6490
<     strcpy(new->class, class_name);
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, class_name);
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
6503c6492
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
6505c6494
<     init_con(new, description, CE_NATIVE, mode);
---
>     init_con(newcon, description, CE_NATIVE, mode);
6508,6509c6497,6498
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc = &dummy_fgetc;
---
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc = &dummy_fgetc;
6512c6501
<     Connections[ncon] = new;
---
>     Connections[ncon] = newcon;
6514,6515c6503,6504
<     new->encname[0] = 0; /* "" (should have the same effect as "native.enc") */
<     new->ex_ptr = PROTECT(R_MakeExternalPtr(new->id, install("connection"), R_NilValue));
---
>     newcon->encname[0] = 0; /* "" (should have the same effect as "native.enc") */
>     newcon->ex_ptr = PROTECT(R_MakeExternalPtr(newcon->id, install("connection"), R_NilValue));
6518,6523c6507,6512
<     PROTECT(class = allocVector(STRSXP, 2));
<     SET_STRING_ELT(class, 0, mkChar(class_name));
<     SET_STRING_ELT(class, 1, mkChar("connection"));
<     classgets(ans, class);
<     setAttrib(ans, R_ConnIdSymbol, new->ex_ptr);
<     R_RegisterCFinalizerEx(new->ex_ptr, conFinalizer, FALSE);
---
>     PROTECT(classs = allocVector(STRSXP, 2));
>     SET_STRING_ELT(classs, 0, mkChar(class_name));
>     SET_STRING_ELT(classs, 1, mkChar("connection"));
>     classgets(ans, classs);
>     setAttrib(ans, R_ConnIdSymbol, newcon->ex_ptr);
>     R_RegisterCFinalizerEx(newcon->ex_ptr, conFinalizer, FALSE);
6526c6515
<     if (ptr) ptr[0] = new;
---
>     if (ptr) ptr[0] = newcon;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/context.c R/src/main/context.c
110a111
> #include <Localization.h>
127c128
< 	    error("bad target context--should NEVER happen if R was called correctly");
---
> 	    error(_("bad target context--should NEVER happen if R was called correctly"));
409,410c410
< 	errorcall(R_ToplevelContext->call,
< 		  _("only positive values of 'n' are allowed"));
---
> 	errorcall(R_ToplevelContext->call, _("only positive values of 'n' are allowed"));
601,602c601
< 		warning(_("debug will apply when function leaves "
< 			  "compiled code"));
---
> 		warning(_("debug will apply when function leaves compiled code"));
692c691
< 	error(_("internal error in 'do_sys'"));
---
> 	error(_("internal error in '%s' function"), "do_sys()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/contour-common.h R/src/main/contour-common.h
330c330
< 		else error("k = %d, should be 2 or 4", k);
---
> 		else error(_("k = %d, should be 2 or 4"), k);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/cum.c R/src/main/cum.c
24a25
> #include <Localization.h>
48c49
< 	    warning(_("integer overflow in 'cumsum'; use 'cumsum(as.numeric(.))'"));
---
> 	    warning(_("integer overflow in '%s' function; use '%s'"), "cumsum()", "cumsum(as.numeric(.))");
175c176
< 	    errorcall(call, _("'cummax' not defined for complex numbers"));
---
> 	    errorcall(call, _("'%s' function is not defined for complex numbers"), "cummax()");
178c179
< 	    errorcall(call, _("'cummin' not defined for complex numbers"));
---
> 	    errorcall(call, _("'%s' function is not defined for complex numbers"), "cummin()");
181c182
< 	    errorcall(call, "unknown cumxxx function");
---
> 	    errorcall(call, _("unknown '%s' function"), "cumxxx()");
205c206
< 	    errorcall(call, _("unknown cumxxx function"));
---
> 	    errorcall(call, _("unknown '%s' function"), "cumxxx()");
232c233
< 	    errorcall(call, _("unknown cumxxx function"));
---
> 	    errorcall(call, _("unknown '%s' function"), "cumxxx()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/datetime.c R/src/main/datetime.c
106a107
> #include <Localization.h>
548c549
< 	    error("time zone specification is too long");
---
> 	    error(_("time zone specification is too long"));
558c559
< 	    error("time zone specification is too long");
---
> 	    error(_("time zone specification is too long"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/dcf.c R/src/main/dcf.c
24a25
> #include <Localization.h>
112c113
<     if(!buf) error(_("could not allocate memory for 'read.dcf'"));
---
>     if(!buf) error(_("could not allocate memory for 'read.dcf()' function"));
158,159c159
< 		    error(_("Found continuation line starting '%s ...' at begin of record."),
< 			  line);
---
> 		    error(_("Found continuation line starting '%s ...' at begin of record."), line);
187c187
< 			    error(_("could not allocate memory for 'read.dcf'"));
---
> 			    error(_("could not allocate memory for 'read.dcf()' function"));
270c270
< 				error(_("could not allocate memory for 'read.dcf'"));
---
> 				error(_("could not allocate memory for 'read.dcf()' function"));
299c299
< 		    error(_("Line starting '%s ...' is malformed!"), line);
---
> 		    error(_("Line starting with '%s ...' is malformed!"), line);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/debug.c R/src/main/debug.c
25a26
> #include <Localization.h>
53c54
< 	    warning("argument is not being debugged");
---
> 	    warning(_("argument is not being debugged"));
76c77
< 	    errorcall(call, _("argument must be a function"));
---
> 	    errorcall(call, _("'%s' argument must be a function"), "what");
111,112c112
< 	    error(_("Value for '%s' must be TRUE or FALSE"),
< 		  trace ? "tracingState" : "debuggingState");
---
> 	    error(_("'%s' argument must be TRUE or FALSE"), trace ? "tracingState" : "debuggingState");
146c146
< 		  _("'tracemem' is not useful for promise and environment objects"));
---
> 		  _("'tracemem()' function is not useful for promise and environment objects"));
149c149
< 		  _("'tracemem' is not useful for weak reference or external pointer objects"));
---
> 		  _("'tracemem()' function is not useful for weak reference or external pointer objects"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/deparse.c R/src/main/deparse.c
106a107
> #include <Localization.h>
112c113
< #ifdef Win32
---
> #ifdef _WIN32
119c120
< #define DEFAULT_Cutoff 60
---
> #define DEFAULT_Cutoff GetOptionWidth()
175c176
< 	    warning(_("invalid 'cutoff' value for 'deparse', using default"));
---
> 	    warning(_("invalid 'cutoff' value (%d) for 'deparse()', using default %d"), cut0, DEFAULT_Cutoff);
289c290
< 	warning(_("deparse of an S4 object may not always be source()able"));
---
> 	warning(_("deparse of an S4 object may not always be sourceable by 'source()'"));
295c296
< 	warning(_("deparse may be not be source()able in R < 2.7.0"));
---
> 	warning(_("deparse may be not be sourceable by 'source()' in R version less than 2.7.0"));
385c386
< 	error(_("'file' must be a character string or connection"));
---
> 	error(_("'%s' argument must be a character string or connection"), "file");
430c431
< 	error(_("'file' must be a character string or connection"));
---
> 	error(_("'%s' must be a character string or connection"), "file");
442c443
< 	error(_("'opts' should be small non-negative integer"));
---
> 	error(_("'opts' argument should be small non-negative integer"));
452c453
< 	    warning(_("object '%s' not found"), EncodeChar(PRINTNAME(TAG(o))));
---
> 	    warning(_("object '%s' was not found"), EncodeChar(PRINTNAME(TAG(o))));
1380c1381
< 		    UNIMPLEMENTED("deparse2buff");
---
> 		    UNIMPLEMENTED("deparse2buff()");
1474c1475
< 	error("'S4SXP': should not happen - please report");
---
> 	error(_("'S4SXP': should not happen - please report"));
1479c1480
< 	UNIMPLEMENTED_TYPE("deparse2buff", s);
---
> 	UNIMPLEMENTED_TYPE("deparse2buff()", s);
1619c1620
< 	default: UNIMPLEMENTED_TYPE("vector2buff", vector);
---
> 	default: UNIMPLEMENTED_TYPE("vector2buff()", vector);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/devices.c R/src/main/devices.c
34a35
> #include <Localization.h>
52c53
< 	error("argument to 'getSymbolValue' is not a symbol");
---
> 	error(_("argument passed to '%s' function is not a symbol"), "getSymbolValue()");
493c494
< 	error(_("not enough memory to allocate device (in GEcreateDevDesc)"));
---
> 	error(_("not enough memory to allocate device (in 'GEcreateDevDesc()' function)"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/dotcode.c R/src/main/dotcode.c
26a27,28
> #include <Localization.h>
> #include <R_ext/Minmax.h>
36,38d37
< #ifndef max
< #define max(a, b) ((a > b)?(a):(b))
< #endif
45c44
<     errorcall(call, "the first argument should not be named");
---
>     errorcall(call, _("the first argument should not be named"));
148,149c147
< 		  errorcall(call, _("Unimplemented type %d in createRSymbolObject"),
< 			    symbol->type);
---
> 		  errorcall(call, _("unimplemented type %d in '%s' function"), symbol->type, "createRSymbolObject()");
236c234
< 	errorcall(call, _("PACKAGE = \"\" is invalid"));
---
> 	errorcall(call, _("'PACKAGE = \"\"' is invalid"));
249,251c247
< 	    warningcall(call,
< 			"using PACKAGE = \"%s\" from namespace '%s'",
< 			dll.DLLname, ns);
---
> 	    warningcall(call, _("using 'PACKAGE = \"%s\"' from namespace '%s'"), dll.DLLname, ns);
275,276c271
< 	errorcall(call, "\"%s\" not resolved from current namespace (%s)",
< 		  buf, ns);
---
> 	errorcall(call, _("\"%s\" was not resolved from current namespace (%s)"), buf, ns);
291,293c286
< 	    errorcall(call,
< 		      _("\"%s\" not available for %s() for package \"%s\""),
< 		      buf, ".C", dll.DLLname);
---
> 	    errorcall(call, _("symbol name \"%s\" is not available for '%s' method for package '%s'"), buf, ".C()", dll.DLLname);
296,298c289
< 	    errorcall(call,
< 		      _("\"%s\" not available for %s() for package \"%s\""),
< 		      buf, ".Fortran", dll.DLLname);
---
> 	    errorcall(call, _("symbol name \"%s\" is not available for '%s' method for package '%s'"), buf, ".Fortran()", dll.DLLname);
301,303c292
< 	    errorcall(call,
< 		      _("\"%s\" not available for %s() for package \"%s\""),
< 		      buf, ".Call", dll.DLLname);
---
> 	    errorcall(call, _("symbol name \"%s\" is not available for '%s' method for package '%s'"), buf, ".Call()", dll.DLLname);
306,308c295
< 	    errorcall(call,
< 		      _("\"%s\" not available for %s() for package \"%s\""),
< 		      buf, ".External", dll.DLLname);
---
> 	    errorcall(call, _("symbol name \"%s\" is not available for '%s' method for package '%s'"), buf, ".External()", dll.DLLname);
311,313c298
< 	    errorcall(call,
< 		      _("%s symbol name \"%s\" not in DLL for package \"%s\""),
< 		      "C/Fortran", buf, dll.DLLname);
---
> 	    errorcall(call, _("'%s' symbol name \"%s\" is not in DLL for package '%s'"), "C/Fortran", buf, dll.DLLname);
317,318c302
< 	errorcall(call, _("%s symbol name \"%s\" not in load table"),
< 		  symbol->type == R_FORTRAN_SYM ? "Fortran" : "C", buf);
---
> 	errorcall(call, _("'%s' symbol name \"%s\" is not in load table"), symbol->type == R_FORTRAN_SYM ? "Fortran" : "C", buf);
368c352
< 	    if(naokused++ == 1) warning(_("'%s' used more than once"), "NAOK");
---
> 	    if(naokused++ == 1) warning(_("'%s' argument was used more than once"), "NAOK");
370c354
< 	    if(dupused++ == 1) warning(_("'%s' used more than once"), "DUP");
---
> 	    if(dupused++ == 1) warning(_("'%s' argument was used more than once"), "DUP");
376c360
< 		    error(_("DLL name is too long"));
---
> 		    error(_("DLL name '%s' is too long"), p);
380c364
< 		    warning(_("'%s' used more than once"), "PACKAGE");
---
> 		    warning(_("'%s' argument was used more than once"), "PACKAGE");
397,398c381
< 		    error("incorrect type (%s) of PACKAGE argument\n",
< 			  type2char(TYPEOF(CAR(s))));
---
> 		    error(_("incorrect type (%s) of 'PACKAGE' argument"), type2char(TYPEOF(CAR(s))));
421c404
< 	error(_("PACKAGE argument must be a single character string"));
---
> 	error(_("'%s' argument must be a single character string"), "PACKAGE");
427c410
< 	error(_("PACKAGE argument is too long"));
---
> 	error(_("'%s' argument is too long"), "PACKAGE");
445c428
< 		warning(_("'%s' used more than once"), "PACKAGE");
---
> 		warning(_("'%s' argument was used more than once"), "PACKAGE");
452c435
< 		warning(_("'%s' used more than once"), "PACKAGE");
---
> 		warning(_("'%s' argument was used more than once"), "PACKAGE");
472c455
< 	    warning("ENCODING is defunct and will be ignored");
---
> 	    warning(_("'ENCODING' argument is defunct and will be ignored"));
476c459
< 	    warning("ENCODING is defunct and will be ignored");
---
> 	    warning(_("'ENCODING' argument is defunct and will be ignored"));
530c513
<     if (length(args) < 1) errorcall(call, _("'.NAME' is missing"));
---
>     if (length(args) < 1) errorcall(call, _("'%s' is missing"), ".NAME");
1216c1199
< 	errorcall(call, _("too many arguments, sorry"));
---
> 	errorcall(call, _("too many arguments"));
1232c1215
<     if (length(args) < 1) errorcall(call, _("'.NAME' is missing"));
---
>     if (length(args) < 1) errorcall(call, _("'%s' is missing"), ".NAME");
1271c1254
< 	if (!constsOK) {
---
> 	if (!constsOK) { //LUKI
1279,1280c1262
< 		    REprintf("NOTE: .Call function %s modified its argument"
< 			" (number %d, type %s, length %d)\n",
---
> 		    REprintf(_("NOTE: .Call function %s modified its argument (number %d, type %s, length %d)\n"),
1286c1268
< 	    R_Suicide("compiler constants were modified (in .Call?)!\n");
---
> 	    R_Suicide(_("compiler constants were modified (in '.Call'?)!\n"));
1418c1400
< 	    error(_("NULL value for DLLInfoReference when looking for DLL"));
---
> 	    error(_("NULL value for 'DLLInfoReference' when looking for DLL"));
1457c1439
<     if (length(args) < 1) errorcall(call, _("'.NAME' is missing"));
---
>     if (length(args) < 1) errorcall(call, _("'%s' is missing"), ".NAME");
1517,1518c1499
< 	    errorcall(call, _("wrong type for argument %d in call to %s"),
< 		      na+1, symName);
---
> 	    errorcall(call, _("wrong type for argument %d in call to '%s'"), na+1, symName);
1577c1558
< 			error(_("NAs in foreign function call (arg %d)"), na + 1);
---
> 			error(_("NA values in foreign function call (arg %d)"), na + 1);
1600c1581
< 			error(_("NA/NaN/Inf in foreign function call (arg %d)"), na + 1);
---
> 			error(_("NA/NaN/Inf value in foreign function call (arg %d)"), na + 1);
1630c1611
< 			error(_("complex NA/NaN/Inf in foreign function call (arg %d)"), na + 1);
---
> 			error(_("complex NA/NaN/Inf value in foreign function call (arg %d)"), na + 1);
1652c1633
< 		    warning("only the first string in a char vector used in .Fortran");
---
> 		    warning(_("only the first string in a character vector used in '.Fortran'"));
1654c1635
< 		    warning("passing a char vector to .Fortran is not portable");
---
> 		    warning(_("passing a char vector to .Fortran is not portable"));
2328c2309
< 	errorcall(call, _("too many arguments, sorry"));
---
> 	errorcall(call, _("too many arguments"));
2348c2329
< 			error("array over-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array over-run in %s(\"%s\") in %s argument %d\n"),
2354c2335
< 			error("array under-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array under-run in %s(\"%s\") in %s argument %d\n"),
2367c2348
< 			error("array over-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array over-run in %s(\"%s\") in %s argument %d\n"),
2373c2354
< 			error("array under-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array under-run in %s(\"%s\") in %s argument %d\n"),
2390c2371
< 			error("array over-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array over-run in %s(\"%s\") in %s argument %d\n"),
2396c2377
< 			error("array under-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array under-run in %s(\"%s\") in %s argument %d\n"),
2421c2402
< 			    error("array over-run in %s(\"%s\") in %s argument %d\n",
---
> 			    error(_("array over-run in %s(\"%s\") in %s argument %d\n"),
2427c2408
< 			    error("array under-run in %s(\"%s\") in %s argument %d\n",
---
> 			    error(_("array under-run in %s(\"%s\") in %s argument %d\n"),
2449c2430
< 			error("array over-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array over-run in %s(\"%s\") in %s argument %d\n"),
2455c2436
< 			error("array under-run in %s(\"%s\") in %s argument %d\n",
---
> 			error(_("array under-run in %s(\"%s\") in %s argument %d\n"),
2480c2461
< 				error("array under-run in .C(\"%s\") in character argument %d, element %d",
---
> 				error(_("array under-run in .C(\"%s\") in character argument %d, element %d"),
2490c2471
< 				error("array over-run in .C(\"%s\") in character argument %d, element %d\n'%s'->'%s'\n",
---
> 				error(_("array over-run in .C(\"%s\") in character argument %d, element %d\n'%s'->'%s'\n"),
2544c2525
<     error(_("type \"%s\" not supported in interlanguage calls"), s);
---
>     error(_("type '%s' is not supported in interlanguage calls"), s);
2611c2592
< 	error("invalid function in call_R");
---
> 	error(_("invalid function in 'call_R()'"));
2613c2594
< 	error("invalid argument count in call_R");
---
> 	error(_("invalid argument count in 'call_R()'"));
2615c2596
< 	error("invalid return value count in call_R");
---
> 	error(_("invalid return value count in 'call_R()'"));
2649c2630
< 	    error(_("mode '%s' is not supported in call_R"), modes[i]);
---
> 	    error(_("mode '%s' is not supported in 'call_R()' function"), modes[i]);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/dounzip.c R/src/main/dounzip.c
27a28
> #include <Localization.h>
36c37
< #ifdef Win32
---
> #ifdef _WIN32
43c44
< #ifdef Win32
---
> #ifdef _WIN32
55c56
< #ifdef Win32
---
> #ifdef _WIN32
132c133
< #ifdef Win32
---
> #ifdef _WIN32
141c142
< #ifdef Win32
---
> #ifdef _WIN32
194c195
< #ifdef Win32
---
> #ifdef _WIN32
227c228
< #ifdef Win32
---
> #ifdef _WIN32
238c239
< #ifdef Win32
---
> #ifdef _WIN32
264c265
< 	error("error %d with zipfile in unzGetGlobalInfo", err);
---
> 	error(_("error %d with zipfile in '%s'"), err, "unzGetGlobalInfo");
279c280
< 	    error("error %d with zipfile in unzGetCurrentFileInfo\n", err);
---
> 	    error(_("error %d with zipfile in '%s'"), err, "unzGetCurrentFileInfo");
295c296
< 		error("error %d with zipfile in unzGoToNextFile\n",err);
---
> 		error(_("error %d with zipfile in '%s'"), err, "unzGoToNextFile");
335c336
< 	error(_("'exdir' is too long"));
---
> 	error(_("'%s' argument is too long"), "exdir");
376c377
< 	    warning("internal error in 'unz' code");
---
> 	    warning(_("internal error in 'unz' code"));
407c408
< 	warning(_("unz connections can only be opened for reading"));
---
> 	warning(_("'unz' connections can only be opened for reading"));
494,499c495,500
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of 'unz' connection failed"));
<     new->class = (char *) malloc(strlen("unz") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newconn;
>     newconn = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newconn) error(_("allocation of 'unz' connection failed"));
>     newconn->conclass = (char *) malloc(strlen("unz") + 1);
>     if(!newconn->conclass) {
> 	free(newconn);
501c502
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newconn = NULL;
503,506c504,507
<     strcpy(new->class, "unz");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newconn->conclass, "unz");
>     newconn->description = (char *) malloc(strlen(description) + 1);
>     if(!newconn->description) {
> 	free(newconn->conclass); free(newconn);
508c509
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newconn = NULL;
510c511
<     init_con(new, description, CE_NATIVE, mode);
---
>     init_con(newconn, description, CE_NATIVE, mode);
512,524c513,525
<     new->canseek = TRUE;
<     new->open = &unz_open;
<     new->close = &unz_close;
<     new->vfprintf = &null_vfprintf;
<     new->fgetc_internal = &unz_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->seek = &null_seek;
<     new->fflush = &null_fflush;
<     new->read = &unz_read;
<     new->write = &null_write;
<     new->private = (void *) malloc(sizeof(struct unzconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     newconn->canseek = TRUE;
>     newconn->open = &unz_open;
>     newconn->close = &unz_close;
>     newconn->vfprintf = &null_vfprintf;
>     newconn->fgetc_internal = &unz_fgetc_internal;
>     newconn->fgetc = &dummy_fgetc;
>     newconn->seek = &null_seek;
>     newconn->fflush = &null_fflush;
>     newconn->read = &unz_read;
>     newconn->write = &null_write;
>     newconn->private = (void *) malloc(sizeof(struct unzconn));
>     if(!newconn->private) {
> 	free(newconn->description); free(newconn->conclass); free(newconn);
526c527
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newconn = NULL;
528c529
<     return new;
---
>     return newconn;
2085c2086
< 		warning("possible truncation of >= 4GB file");
---
> 		warning(_("possible truncation of >= 4GB file"));
2145c2146
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/dstruct.c R/src/main/dstruct.c
26c26,27
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
55c56
< 	error("offset is out of R_FunTab range");
---
> 	error(_("offset is out of R_FunTab range"));
65c66
< 	error("requested primitive type is not consistent with cached value");
---
> 	error(_("requested primitive type is not consistent with cached value"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/duplicate.c R/src/main/duplicate.c
26c26,27
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
199c200
< 	UNIMPLEMENTED_TYPE("lazy_duplicate", s);
---
> 	UNIMPLEMENTED_TYPE("lazy_duplicate()", s);
364c365
< 	UNIMPLEMENTED_TYPE("duplicate", s);
---
> 	UNIMPLEMENTED_TYPE("duplicate()", s);
378c379
< 	error("vector types do not match in copyVector");
---
> 	error(_("vector types do not match in 'copyVector()'"));
404c405
< 	UNIMPLEMENTED_TYPE("copyVector", s);
---
> 	UNIMPLEMENTED_TYPE("copyVector()", s);
480c481
< 	    UNIMPLEMENTED_TYPE("copyMatrix", s);
---
> 	    UNIMPLEMENTED_TYPE("copyMatrix()", s);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/edit.c R/src/main/edit.c
30c30,31
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
37c38
< #ifdef Win32
---
> #ifdef _WIN32
74c75
< #ifdef Win32
---
> #ifdef _WIN32
95c96
< #ifdef Win32
---
> #ifdef _WIN32
111c112
< 	error(_("invalid argument to edit()"));
---
> 	error(_("invalid argument passed to 'edit()' function"));
122c123
< 	    errorcall(call, _("unable to open file"));
---
> 	    errorcall(call, _("unable to open file '%s'"), filename);
130c131
< #ifdef Win32
---
> #ifdef _WIN32
139c140
< #ifdef Win32
---
> #ifdef _WIN32
142c143
< 	    error(_("'title' must be a string"));
---
> 	    error(_("'%s' argument must be a character string"), "title");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/engine.c R/src/main/engine.c
23a24
> #include <Localization.h>
27a29
> #include <R_ext/Minmax.h>
113c115
< 	error(_("unable to allocate memory (in GEregister)"));
---
> 	error(_("unable to allocate memory (in 'GEregister()' function)"));
118c120
< 	error(_("unable to allocate memory (in GEregister)"));
---
> 	error(_("unable to allocate memory (in 'GEregister()' function)"));
182c184
< 	error(_("unable to allocate memory (in GEregister)"));
---
> 	error(_("unable to allocate memory (in 'GEregister()' function)"));
761c763
< 	error(_("'lwd' must be non-negative and finite"));
---
> 	error(_("'%s' argument must be non-negative and finite"), "lwd");
865c867
< 	error(_("'lwd' must be non-negative and finite"));
---
> 	error(_("'%s' argument must be non-negative and finite"), "lwd");
1098c1100
< 	error(_("'lwd' must be non-negative and finite"));
---
> 	error(_("'%s' argument must be non-negative and finite"), "lwd");
1205c1207
< 	error(_("'lwd' must be non-negative and finite"));
---
> 	error(_("'%s' argument must be non-negative and finite"), "lwd");
1328c1330
< 	error(_("'lwd' must be non-negative and finite"));
---
> 	error(_("'%s' argument must be non-negative and finite"), "lwd");
1392c1394
< 	error(_("'lwd' must be non-negative and finite"));
---
> 	error(_("'%s' argument must be non-negative and finite"), "lwd");
1662,1663c1664
< 	    error(_("font face %d not supported for font family '%s'"),
< 		  fontface, VFontTable[familycode].name);
---
> 	    error(_("font face %d is not supported for font family '%s'"), fontface, VFontTable[familycode].name);
1849,1850c1850
< 					printf("metric info for %d, %f %f\n",
< 					       (unsigned char) *ss, h, d);
---
> 					printf("metric info for %d, %f %f\n", (unsigned char) *ss, h, d);
1991,1992c1991,1992
< #define SQRC	0.88622692545275801364		/* sqrt(pi / 4) */
< #define DMDC	1.25331413731550025119		/* sqrt(pi / 4) * sqrt(2) */
---
> #define SQRC	M_SQRT_PI/2 //0.88622692545275801364		/* sqrt(pi / 4) */
> #define DMDC	SQRC * M_SQRT2 //1.25331413731550025119		/* sqrt(pi / 4) * sqrt(2) */
2019c2019
< 	    error("use of negative pch with symbol font is invalid");
---
> 	    error(_("use of negative 'pch' argument with symbol font is invalid"));
2058c2058
< 	    warning(_("pch value '%d' is invalid in this locale"), pch);
---
> 	    warning(_("'pch' value '%d' is invalid in this locale"), pch);
2316c2316
< 	    warning(_("unimplemented pch value '%d'"), pch);
---
> 	    warning(_("unimplemented 'pch' value '%d'"), pch);
2339c2339
< 	error(_("invalid axis extents [GEPretty(.,.,n=%d)"), *ndiv);
---
> 	error(_("invalid axis extents '[GEPretty(.,.,n=%d)]'"), *ndiv);
2343c2343
< 	error(_("infinite axis extents [GEPretty(%g,%g,%d)]"), *lo, *up, *ndiv);
---
> 	error(_("infinite axis extents '[GEPretty(%g,%g,%d)]'"), *lo, *up, *ndiv);
2378c2378
< 	warning(_(" .. GEPretty(.): new *lo = %g < %g = x1"), *lo, x1);
---
> 	warning(_(" .. 'GEPretty(.)': new *lo = %g < %g = x1"), *lo, x1);
2380c2380
< 	warning(_(" .. GEPretty(.): new *up = %g > %g = x2"), *up, x2);
---
> 	warning(_(" .. 'GEPretty(.)': new *up = %g > %g = x2"), *up, x2);
3086c3086
< 	error(_("'expr' argument must be an expression"));
---
> 	error(_("'%s' argument must be an expression"), "expr");
3088c3088
< 	error(_("'list' argument must be a list"));
---
> 	error(_("'%s' argument must be a list"), "list");
3094c3094
< 	error(_("'env' argument must be an environment"));
---
> 	error(_("'%s' argument must be an environment"), "env");
3178c3178
< 	    } else error(_("invalid multibyte char in pch=\"c\""));
---
> 	    } else error(_("invalid multibyte char in 'pch=\"c\"'"));
3186c3186
< 	else error(_("invalid multibyte char in pch=\"c\""));
---
> 	else error(_("invalid multibyte char in 'pch=\"c\"'"));
3233c3233
<     /*else */ error(_("invalid hex digit in 'color' or 'lty'"));
---
>     /*else */ error(_("invalid hex digit in 'color' or 'lty' argument"));
3479,3480c3479,3480
<     *wnew = imax2(w, *wnew);
<     *hnew = imax2(h, *hnew);
---
>     *wnew = max(w, *wnew);
>     *hnew = max(h, *hnew);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/envir.c R/src/main/envir.c
94a95
> #include <Localization.h>
102c103,125
< #define IS_USER_DATABASE(rho)  (OBJECT((rho)) && inherits((rho), "UserDefinedDatabase"))
---
> static SEXP getActiveValue(SEXP fun)
> {
>     SEXP expr = LCONS(fun, R_NilValue);
>     PROTECT(expr);
>     expr = eval(expr, R_GlobalEnv);
>     UNPROTECT(1);
>     return expr;
> }
> 
> static void setActiveValue(SEXP fun, SEXP val)
> {
>     SEXP qfun = lang3(R_DoubleColonSymbol, R_BaseSymbol, R_QuoteSymbol);
>     SEXP arg = lang2(qfun, val);
>     SEXP expr = lang2(fun, arg);
>     PROTECT(expr);
>     eval(expr, R_GlobalEnv);
>     UNPROTECT(1);
> }
> 
> //#define IS_USER_DATABASE(rho)  OBJECT((rho)) && inherits((rho), "UserDefinedDatabase")
> static R_INLINE Rboolean IS_USER_DATABASE(SEXP rho)  { 
>  return (OBJECT((rho)) && inherits((rho), "UserDefinedDatabase"));
>  }
107,108c130,137
< #define FRAME_IS_LOCKED(e) (ENVFLAGS(e) & FRAME_LOCK_MASK)
< #define LOCK_FRAME(e) SET_ENVFLAGS(e, ENVFLAGS(e) | FRAME_LOCK_MASK)
---
> //#define FRAME_IS_LOCKED(e) (ENVFLAGS(e) & FRAME_LOCK_MASK)
> static R_INLINE Rboolean FRAME_IS_LOCKED(SEXP e) {
>  return ENVFLAGS(e) & FRAME_LOCK_MASK;
>  }
> //#define LOCK_FRAME(e) SET_ENVFLAGS(e, ENVFLAGS(e) | FRAME_LOCK_MASK)
> static R_INLINE void LOCK_FRAME(SEXP e) {
>  SET_ENVFLAGS(e, ENVFLAGS(e) | FRAME_LOCK_MASK);
>  }
112c141,144
< #define BINDING_VALUE(b) ((IS_ACTIVE_BINDING(b) ? getActiveValue(CAR(b)) : CAR(b)))
---
> //#define BINDING_VALUE(b) ((IS_ACTIVE_BINDING(b) ? getActiveValue(CAR(b)) : CAR(b)))
> static R_INLINE SEXP BINDING_VALUE(SEXP b) {
>  return IS_ACTIVE_BINDING(b) ? getActiveValue(CAR(b)) : CAR(b);
>  }
114,115c146,153
< #define SYMBOL_BINDING_VALUE(s) ((IS_ACTIVE_BINDING(s) ? getActiveValue(SYMVALUE(s)) : SYMVALUE(s)))
< #define SYMBOL_HAS_BINDING(s) (IS_ACTIVE_BINDING(s) || (SYMVALUE(s) != R_UnboundValue))
---
> //#define SYMBOL_BINDING_VALUE(s) ((IS_ACTIVE_BINDING(s) ? getActiveValue(SYMVALUE(s)) : SYMVALUE(s)))
> static R_INLINE SEXP SYMBOL_BINDING_VALUE(SEXP s) {
>  return IS_ACTIVE_BINDING(s) ? getActiveValue(SYMVALUE(s)) : SYMVALUE(s);
>  }
> //#define SYMBOL_HAS_BINDING(s) (IS_ACTIVE_BINDING(s) || (SYMVALUE(s) != R_UnboundValue))
> static R_INLINE Rboolean SYMBOL_HAS_BINDING(SEXP s) {
>  return IS_ACTIVE_BINDING(s) || (SYMVALUE(s) != R_UnboundValue);
>  }
116a155
> /*
129a169,178
> */
> static R_INLINE void SET_BINDING_VALUE(SEXP b, SEXP val) {
>   if (BINDING_IS_LOCKED(b)) 
>     error(_("cannot change value of locked binding for '%s'"), 
>           CHAR(PRINTNAME(TAG(b)))); 
>   if (IS_ACTIVE_BINDING(b)) 
>     setActiveValue(CAR(b), val); 
>   else 
>     SETCAR(b, val); 
> }
130a180
> /*
143a194
> */
145,161c196,203
< static void setActiveValue(SEXP fun, SEXP val)
< {
<     SEXP qfun = lang3(R_DoubleColonSymbol, R_BaseSymbol, R_QuoteSymbol);
<     SEXP arg = lang2(qfun, val);
<     SEXP expr = lang2(fun, arg);
<     PROTECT(expr);
<     eval(expr, R_GlobalEnv);
<     UNPROTECT(1);
< }
< 
< static SEXP getActiveValue(SEXP fun)
< {
<     SEXP expr = LCONS(fun, R_NilValue);
<     PROTECT(expr);
<     expr = eval(expr, R_GlobalEnv);
<     UNPROTECT(1);
<     return expr;
---
> static R_INLINE void SET_SYMBOL_BINDING_VALUE(SEXP sym, SEXP val) {
>   if (BINDING_IS_LOCKED(sym)) 
>     error(_("cannot change value of locked binding for '%s'"), 
>           CHAR(PRINTNAME(sym))); 
>   if (IS_ACTIVE_BINDING(sym)) 
>     setActiveValue(SYMVALUE(sym), val); 
>   else 
>     SET_SYMVALUE(sym, val);
165c207,210
< #define ISNULL(x) ((x) == R_NilValue)
---
> //#define ISNULL(x) ((x) == R_NilValue)
> static R_INLINE Rboolean ISNULL(SEXP x) {
>  return x == R_NilValue;
> }
194,195c239,246
< #define HASHSIZE(x)	     ((int) STDVEC_LENGTH(x))
< #define HASHPRI(x)	     ((int) STDVEC_TRUELENGTH(x))
---
> //#define HASHSIZE(x)	     ((int) STDVEC_LENGTH(x))
> static R_INLINE int HASHSIZE(SEXP x) {
>  return (int) STDVEC_LENGTH(x);
>  }
> //#define HASHPRI(x)	     ((int) STDVEC_TRUELENGTH(x))
> static R_INLINE int HASHPRI(SEXP x) {
>  return (int) STDVEC_TRUELENGTH(x);
>  }
198c249,252
< #define SET_HASHPRI(x,v)     SET_TRUELENGTH(x,v)
---
> //#define SET_HASHPRI(x,v)     SET_TRUELENGTH(x,v)
> static R_INLINE void SET_HASHPRI(SEXP x, int v) {
>  SET_TRUELENGTH(x, v);
>  }
201c255,258
< #define IS_HASHED(x)	     (HASHTAB(x) != R_NilValue)
---
> //#define IS_HASHED(x)	     (HASHTAB(x) != R_NilValue)
> static R_INLINE Rboolean IS_HASHED(SEXP x) {
>  return HASHTAB(x) != R_NilValue;
>  }
427c484
< 	error("first argument ('table') not of type VECSXP, from R_HashResize");
---
> 	error(_("first argument ('table') is not of type '%s', from '%s'"), "VECSXP", "R_HashResize()");
484c541
< 	error("first argument ('table') not of type VECSXP, R_HashSizeCheck");
---
> 	error(_("first argument ('table') is not of type '%s', from '%s'"), "VECSXP", "R_HashSizeCheck()");
511c568
< 	error("first argument ('table') not of type ENVSXP, from R_HashVector2Hash");
---
> 	error(_("first argument ('table') is not of type '%s', from '%s'"), "ENVSXP", "R_HashVector2Hash()");
649c706,710
< #define IS_GLOBAL_FRAME(e) (ENVFLAGS(e) & GLOBAL_FRAME_MASK)
---
> //#define IS_GLOBAL_FRAME(e) (ENVFLAGS(e) & GLOBAL_FRAME_MASK)
> static R_INLINE Rboolean IS_GLOBAL_FRAME(SEXP e) {
>  return ENVFLAGS(e) & GLOBAL_FRAME_MASK;
>  }
> /*
651a713,717
> */
> static R_INLINE void MARK_AS_GLOBAL_FRAME(SEXP e) {
>  SET_ENVFLAGS(e, ENVFLAGS(e) | GLOBAL_FRAME_MASK);
>  }
> /*
653a720,723
> */
> static R_INLINE void MARK_AS_LOCAL_FRAME(SEXP e) {
>  SET_ENVFLAGS(e, ENVFLAGS(e) & (~ GLOBAL_FRAME_MASK));
>  }
1216c1286
< 	error(_("argument to '%s' is not an environment"), "findVar");
---
> 	error(_("argument passed to '%s' function is not an environment"), "findVar()");
1416c1486
< 	    error(ngettext("the ... list contains fewer than %d element",
---
> 	    error(n_("the ... list contains fewer than %d element",
1420c1490
<     else error(_("..%d used in an incorrect context, no ... to look in"), i);
---
>     else error(_("'..%d' used in an incorrect context, no ... to look in"), i);
1543,1545c1613
< 		errorcall(call,
< 		      _("argument \"%s\" is missing, with no default"),
< 		      CHAR(PRINTNAME(symbol)));
---
> 		errorcall(call, _("'%s' argument is missing, with no default"), CHAR(PRINTNAME(symbol)));
1549,1551c1617
<     errorcall_cpy(call,
<                   _("could not find function \"%s\""),
<                   EncodeChar(PRINTNAME(symbol)));
---
>     errorcall_cpy(call, _("could not find function '%s'"), EncodeChar(PRINTNAME(symbol)));
1656,1657c1722
< 	error("additional variables should now be passed as a list, "
< 	      "not in an environment");
---
> 	error(_("additional variables should now be passed as a list, not an environment"));
1798,1799c1863
< 	    error(_("cannot add binding of '%s' to the base environment"),
< 		  CHAR(PRINTNAME(symbol)));
---
> 	    error(_("cannot add binding of '%s' to the base environment"), CHAR(PRINTNAME(symbol)));
1808c1872,1875
< #define simple_as_environment(arg) (IS_S4_OBJECT(arg) && (TYPEOF(arg) == S4SXP) ? R_getS4DataSlot(arg, ENVSXP) : R_NilValue)
---
> //#define simple_as_environment(arg) (IS_S4_OBJECT(arg) && (TYPEOF(arg) == S4SXP) ? R_getS4DataSlot(arg, ENVSXP) : R_NilValue)
> static R_INLINE SEXP simple_as_environment(SEXP arg) {
>  return IS_S4_OBJECT(arg) && (TYPEOF(arg) == S4SXP) ? R_getS4DataSlot(arg, ENVSXP) : R_NilValue;
>  }
1864c1931
< 	error(_("names(x) must be a character vector of the same length as x"));
---
> 	error(_("'names(x)' must be a character vector of the same length as 'x'"));
1867c1934
< 	error(_("'envir' argument must be an environment"));
---
> 	error(_("'%s' argument must be an environment"), "envir");
1982c2049
< 	    warning(_("object '%s' not found"), EncodeChar(PRINTNAME(tsym)));
---
> 	    warning(_("object '%s' was not found"), EncodeChar(PRINTNAME(tsym)));
2056c2123
< 	error(_("argument \"%s\" is missing, with no default"),
---
> 	error(_("'%s' argument is missing, with no default"),
2067c2134
< 		error(_("object '%s' not found"), EncodeChar(PRINTNAME(t1)));
---
> 		error(_("object '%s' was not found"), EncodeChar(PRINTNAME(t1)));
2419c2486
< 	error(_("'pos' must be an integer"));
---
> 	error(_("'%s' argument must be an integer"), "pos");
2456c2523
< 	    error(_("'attach' only works for lists, data frames and environments"));
---
> 	    error(_("'attach()' function only works for lists, data frames and environments"));
2688c2755
< 	    error("bad hash table contents");	\
---
> 	    error(_("bad hash table contents"));	\
2884c2951
< 	    error(_("argument must be an environment"));
---
> 	    error(_("'%s' argument must be an environment"), "env");
2966c3033
< 	error(_("argument must be an environment"));
---
> 	error(_("'%s' argument must be an environment"), "env");
3168c3235
<     errorcall(call, _("no item called \"%s\" on the search list"), what);
---
>     errorcall(call, _("no item called '%s' on the search list"), what);
3214c3281
< 	errorcall(call, _("invalid object for 'as.environment'"));
---
> 	errorcall(call, _("invalid object for 'as.environment()' function"));
3240c3307
< 	error(_("not an environment"));
---
> 	error(_("'%s' argument is not an environment"), "env");
3268c3335
< 	error(_("not an environment"));
---
> 	error(_("'%s' argument is not an environment"), "env");
3292c3359
< 	error(_("not a symbol"));
---
> 	error(_("'%s' argument is not a symbol"), "sym");
3297c3364
< 	error(_("not an environment"));
---
> 	error(_("'%s' argument is not an environment"), "env");
3305c3372
< 	    error(_("no binding for \"%s\""), EncodeChar(PRINTNAME(sym)));
---
> 	    error(_("no binding for '%s'"), EncodeChar(PRINTNAME(sym)));
3313c3380
< 	error(_("not a symbol"));
---
> 	error(_("'%s' argument is not a symbol"), "sym");
3318c3385
< 	error(_("not an environment"));
---
> 	error(_("'%s' argument is not an environment"), "env");
3326c3393
< 	    error(_("no binding for \"%s\""), EncodeChar(PRINTNAME(sym)));
---
> 	    error(_("no binding for '%s'"), EncodeChar(PRINTNAME(sym)));
3334c3401
< 	error(_("not a symbol"));
---
> 	error(_("'%s' argument is not a symbol"), "sym");
3336c3403
< 	error(_("not a function"));
---
> 	error(_("'%s' argument is not a function"), "fun");
3339,3341c3406,3407
<     if (TYPEOF(env) != ENVSXP &&
< 	TYPEOF((env = simple_as_environment(env))) != ENVSXP)
< 	error(_("not an environment"));
---
>     if (TYPEOF(env) != ENVSXP && TYPEOF((env = simple_as_environment(env))) != ENVSXP)
> 	error(_("'%s' argument is not an environment"), "env");
3371c3437
< 	error(_("not a symbol"));
---
> 	error(_("'%s' argument is not a symbol"), "sym");
3374,3376c3440,3441
<     if (TYPEOF(env) != ENVSXP &&
< 	TYPEOF((env = simple_as_environment(env))) != ENVSXP)
< 	error(_("not an environment"));
---
>     if (TYPEOF(env) != ENVSXP && TYPEOF((env = simple_as_environment(env))) != ENVSXP)
> 	error(_("'%s' argument is not an environment"), "env");
3384c3449
< 	    error(_("no binding for \"%s\""), EncodeChar(PRINTNAME(sym)));
---
> 	    error(_("no binding for '%s'"), EncodeChar(PRINTNAME(sym)));
3392c3457
< 	error(_("not a symbol"));
---
> 	error(_("'%s' argument is not a symbol"), "sym");
3395,3397c3460,3461
<     if (TYPEOF(env) != ENVSXP &&
< 	TYPEOF((env = simple_as_environment(env))) != ENVSXP)
< 	error(_("not an environment"));
---
>     if (TYPEOF(env) != ENVSXP && TYPEOF((env = simple_as_environment(env))) != ENVSXP)
> 	error(_("'%s' argument is not an environment"), "env");
3405c3469
< 	    error(_("no binding for \"%s\""), EncodeChar(PRINTNAME(sym)));
---
> 	    error(_("no binding for '%s'"), EncodeChar(PRINTNAME(sym)));
3491c3555,3556
<     if (TYPEOF(sym) != SYMSXP) error(_("not a symbol"));
---
>     if (TYPEOF(sym) != SYMSXP)
> 	error(_("'%s' argument is not a symbol"), "sym");
3650c3715
< 	errorcall(call, _("namespace already registered"));
---
> 	errorcall(call, _("namespace is already registered"));
3662c3727
< 	errorcall(call, _("namespace not registered"));
---
> 	errorcall(call, _("namespace is not registered"));
3751,3752c3816
< 		error(_("exported symbol '%s' has no value"),
< 		      CHAR(PRINTNAME(expsym)));
---
> 		error(_("exported symbol '%s' has no value"), CHAR(PRINTNAME(expsym)));
3784c3848
< 	error("argument must be a hashed environment");
---
> 	error(_("'%s' argument must be a hashed environment"), "env");
3792c3856
< 	error("R character strings are limited to 2^31-1 bytes");
---
> 	error(_("R character strings are limited to 2^31-1 bytes"));
3806c3870
< 	error("R character strings are limited to 2^31-1 bytes");
---
> 	error(_("R character strings are limited to 2^31-1 bytes"));
3890c3954
<     Rprintf("Resized: size %d => %d\tpri %d => %d\n",
---
>     Rprintf(_("Resized: size %d => %d\tpri %d => %d\n"),
3937,3938c4001
< 	error(_("embedded nul in string: '%s'"),
< 	      EncodeString(c, 0, 0, Rprt_adj_none));
---
> 	error(_("embedded nul in string: '%s'"), EncodeString(c, 0, 0, Rprt_adj_none));
3981c4044
< 	    error("unknown encoding mask: %d", enc);
---
> 	    error(_("unknown encoding mask: %d"), enc);
4017,4018c4080,4081
<     Rprintf("Cache size: %d\n", LENGTH(R_StringHash));
<     Rprintf("Cache pri:  %d\n", HASHPRI(R_StringHash));
---
>     Rprintf(_("Cache size: %d\n"), LENGTH(R_StringHash));
>     Rprintf(_("Cache pri:  %d\n"), HASHPRI(R_StringHash));
4022c4085
< 	    Rprintf("Line %d: ", i);
---
> 	    Rprintf(_("Line %d: "), i);
4044,4045c4107,4108
< 	fprintf(f, "Cache size: %d\n", LENGTH(R_StringHash));
< 	fprintf(f, "Cache pri:  %d\n", HASHPRI(R_StringHash));
---
> 	fprintf(f, _("Cache size: %d\n"), LENGTH(R_StringHash));
> 	fprintf(f, _("Cache pri:  %d\n"), HASHPRI(R_StringHash));
4049c4112
< 		fprintf(f, "Line %d: ", i);
---
> 		fprintf(f, _("Line %d: "), i);
4112c4175
< 	error("argument 'nsenv' is not a namespace");
---
> 	error(_("'%s' argument is not a namespace"), "nsenv");
4128c4191
< 	    REprintf("Function %s in namespace %s has this body.\n",
---
> 	    REprintf(_("Function %s in namespace %s has this body.\n"),
4146,4147c4209
< 		    REprintf("S4 Method %s defined in namespace %s with "
< 			"signature %s has this body.\n",
---
> 		    REprintf(_("S4 Method %s defined in namespace %s with signature %s has this body.\n"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/errors.c R/src/main/errors.c
24a25
> #include <Localization.h>
32c33
< #include <Rmath.h> /* for imax2 */
---
> #include <R_ext/Minmax.h>
36,38d36
< #ifndef min
< #define min(a, b) (a<b?a:b)
< #endif
41c39,41
< #define LONGWARN 75
---
> #define LONGWARN max(75, (GetOptionWidth()-5))
> 
> 
87,88c87
<     errorcall(R_NilValue, "C stack usage  %ld is too close to the limit",
< 	      usage);
---
>     errorcall(R_NilValue, _("C stack usage %ld is too close to the limit"), usage);
165c164
<        user erro handler. But we have been, so as a transition,
---
>        user error handler. But we have been, so as a transition,
197c196
<     if(R_CollectWarnings) PrintWarnings();
---
>     if(R_CollectWarnings) PrintWarnings(NULL);
232c231
<     if(R_CollectWarnings) PrintWarnings();
---
>     if(R_CollectWarnings) PrintWarnings(NULL);
252c251
< #ifdef Win32
---
> #ifdef _WIN32
404,405c403,405
< 	if( !isLanguage(s) &&  ! isExpression(s) )
< 	    error(_("invalid option \"warning.expression\""));
---
> 	if( !isLanguage(s) &&  ! isExpression(s) ) {
> 	    error(_("invalid \"%s\" option"), "warning.expression");
> 	}
424,425c424
<     begincontext(&cntxt, CTXT_CCODE, R_NilValue, R_BaseEnv, R_BaseEnv,
< 		 R_NilValue, R_NilValue);
---
>     begincontext(&cntxt, CTXT_CCODE, R_NilValue, R_BaseEnv, R_BaseEnv, R_NilValue, R_NilValue);
448c447
< 	    REprintf(_("Warning in %s :"), dcall);
---
> 	    REprintf(_("Warning in command '%s':"), dcall);
519c518,519
< 	REprintf(_("Lost warning messages\n"));
---
>     REprintf(_("Lost warning messages"));
>     REprintf("\n");
525c527
< void PrintWarnings(void)
---
> void PrintWarnings(const char *hdr)
528c530
<     char *header;
---
>     const char *header = hdr? hdr: n_("Warning message:", "Warning messages:", R_CollectWarnings);
538c540,541
< 	    REprintf(_("Lost warning messages\n"));
---
> 	    REprintf(_("Lost warning messages"));
> 	    REprintf("\n");
543,546c546,547
<     /* set up a context which will restore inPrintWarnings if there is
<        an exit */
<     begincontext(&cntxt, CTXT_CCODE, R_NilValue, R_BaseEnv, R_BaseEnv,
< 		 R_NilValue, R_NilValue);
---
>     /* set up a context which will restore inPrintWarnings if there is an exit */
>     begincontext(&cntxt, CTXT_CCODE, R_NilValue, R_BaseEnv, R_BaseEnv, R_NilValue, R_NilValue);
550,551d550
<     header = ngettext("Warning message:", "Warning messages:",
< 		      R_CollectWarnings);
560c559
< 	    REprintf(_("In %s :"), dcall);
---
> 	    REprintf(_("In command '%s':"), dcall);
588c587
< 		REprintf(_("In %s :"), dcall);
---
> 		REprintf(_("In command '%s':"), dcall); 
613,614c612,613
< 	    REprintf(ngettext("There was %d warning (use warnings() to see it)",
< 			      "There were %d warnings (use warnings() to see them)",
---
> 	    REprintf(n_("There was %d warning (use 'warnings()' to see it)",
> 			      "There were %d warnings (use 'warnings()' to see them)", 
618c617
< 	    REprintf(_("There were %d or more warnings (use warnings() to see the first %d)"),
---
> 	    REprintf(_("There were %d or more warnings (use 'warnings()' to see the first %d)"), 
713c712,713
< 	    REprintf(_("Lost warning messages\n"));
---
> 	    REprintf(_("Lost warning messages"));
> 	    REprintf("\n");
720,721c720
<     begincontext(&cntxt, CTXT_CCODE, R_NilValue, R_BaseEnv, R_BaseEnv,
< 		 R_NilValue, R_NilValue);
---
>     begincontext(&cntxt, CTXT_CCODE, R_NilValue, R_BaseEnv, R_BaseEnv, R_NilValue, R_NilValue);
729c728
< 	char *head = _("Error in "), *tail = "\n  ";
---
> 	char *head = _("Error in command:"), *tail = "\n  ";
745c744
< 	Rsnprintf(tmp2, BUFSIZE,  "%s", head);
---
> 	Rsnprintf(tmp2, BUFSIZE,  _("Error in command '%s': "), dcall); 
751c750
< 		Rsnprintf(tmp2, BUFSIZE,  _("Error in %s (from %s) : "),
---
> 		Rsnprintf(tmp2, BUFSIZE,  _("Error in command '%s' (from %s): "), 
758c757
< 			     _("Error in %s (from %s) : "),
---
> 			     _("Error in command '%s' (from %s): "),
760c759
< 	    else Rsnprintf(errbuf, BUFSIZE,  _("Error in %s : "), dcall);
---
> 	    else Rsnprintf(errbuf, BUFSIZE,  _("Error in command '%s': "), dcall);
819,820c818
< 	REprintf(_("In addition: "));
< 	PrintWarnings();
---
> 	PrintWarnings(n_("Additional warning message:", "Additional warning messages:", R_CollectWarnings));
954,956c952,955
< 	    if( !isLanguage(s) &&  ! isExpression(s) )  /* shouldn't happen */
< 		REprintf(_("invalid option \"error\"\n"));
< 	    else {
---
> 	    if( !isLanguage(s) &&  ! isExpression(s) ) { /* shouldn't happen */
> 		REprintf(_("invalid \"%s\" option"), "error");
> 		REprintf("\n");
> 	    } else {
974c973
< 	PrintWarnings();
---
> 	PrintWarnings(NULL);
1058,1059c1057
< 		if(streql(cfn, "stop") || streql(cfn, "warning")
< 		   || streql(cfn, "message")) continue;
---
> 		if(streql(cfn, "stop") || streql(cfn, "warning") || streql(cfn, "message")) continue;
1114c1112
< 		REprintf("translating '%s' in domain '%s'\n", tmp, domain);
---
> 		REprintf(_("translating '%s' in domain '%s'\n"), tmp, domain);
1149c1147
< 	error(_("'%s' must be a character string"), "msg1");
---
> 	error(_("'%s' argument must be a character string"), "msg1");
1151c1149
< 	error(_("'%s' must be a character string"), "msg2");
---
> 	error(_("'%s' argument must be a character string"), "msg2");
1216,1217c1214
< 	res = bindtextdomain(translateChar(STRING_ELT(CAR(args),0)),
< 			     translateChar(STRING_ELT(CADR(args),0)));
---
> 	res = bindtextdomain(translateChar(STRING_ELT(CAR(args),0)), translateChar(STRING_ELT(CADR(args),0)));
1252c1249
< 	  errorcall(c_call, _(" [invalid string in stop(.)]"));
---
> 	  errorcall(c_call, _(" [invalid string in '%s']"), "stop(.)");
1284c1281
< 	    warningcall(c_call, _(" [invalid string in warning(.)]"));
---
> 	    warningcall(c_call, _(" [invalid string in '%s']"), "warning(.)");
1300c1297
<     error(_("incorrect number of arguments to \"%s\""), s);
---
>     error(_("incorrect number of arguments passed to '%s' function"), s);
1306c1303
<     error(_("unimplemented feature in %s"), s);
---
>     error(_("unimplemented feature in '%s' function"), s);
1321c1318
<     { ERROR_UNIMPLEMENTED,	N_("unimplemented feature in %s")	},
---
>     { ERROR_UNIMPLEMENTED,	N_("unimplemented feature in '%s' function")	},
1330c1327
<     { WARNING_coerce_NA,	N_("NAs introduced by coercion")	},
---
>     { WARNING_coerce_NA,	N_("NA values introduced by coercion")	},
1409c1406
< 	    error(_("No function to return from, jumping to top level"));
---
> 	    error(_("no function to return from, jumping to top level"));
1439,1440c1436
< 	REprintf(_("In addition: "));
< 	PrintWarnings();
---
> 	PrintWarnings(n_("Additional warning message:", "Additional warning messages:", R_CollectWarnings));
1784,1785c1780
< 	    if (! strcmp(CHAR(ENTRY_CLASS(entry)),
< 			 CHAR(STRING_ELT(classes, i))))
---
> 	    if (! strcmp(CHAR(ENTRY_CLASS(entry)), CHAR(STRING_ELT(classes, i))))
1811c1806
< 		else error(_("error message not a string"));
---
> 		else error(_("error message is not a character string"));
2007c2002
< 	error(_("restart not on stack"));
---
> 	error(_("restart is not on stack"));
2036c2031
< 	error(_("error message must be a character string"));
---
> 	error(_("error message is not a character string"));
2142c2137
< 		error("invalid value of %s", varname);
---
> 		error(_("invalid value of %s"), varname);
2313c2308
<     if (body == NULL) error("must supply a body function");
---
>     if (body == NULL) error(_("body function is required"));
2356c2351
< 	error("not an external pointer");
---
> 	error(_("this is not an external pointer"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/eval.c R/src/main/eval.c
26a27
> #include <Localization.h>
88c89
< #ifdef Win32
---
> #ifdef _WIN32
108c109
< #ifdef Win32
---
> #ifdef _WIN32
196c197
< #ifdef Win32
---
> #ifdef _WIN32
301c302
< #ifdef Win32
---
> #ifdef _WIN32
311c312
< #ifndef Win32
---
> #ifndef _WIN32
317c318
< #ifdef Win32
---
> #ifdef _WIN32
338c339
< #ifdef Win32
---
> #ifdef _WIN32
360,361c361
< 	warning(_("source files skipped by Rprof; please increase '%s'"),
< 		R_Profiling_Error == 1 ? "numfiles" : "bufsize");
---
>     	warning(_("source files skipped by Rprof; please increase '%s'"), R_Profiling_Error == 1 ? "numfiles" : "bufsize");
368c368
< #ifndef Win32
---
> #ifndef _WIN32
380,381c380
< 	error(_("Rprof: cannot open profile file '%s'"),
< 	      translateChar(filename));
---
> 	error(_("Rprof: cannot open profile file '%s'"), translateChar(filename));
409c408
< #ifdef Win32
---
> #ifdef _WIN32
416c415
< 	R_Suicide("unable to create profiling thread");
---
> 	R_Suicide(_("unable to create profiling thread"));
422c421
<     error("profiling requires 'pthread' support");
---
>     error(_("profiling requires 'pthread' support"));
432c431
< 	R_Suicide("setting profile timer failed");
---
> 	R_Suicide(_("setting profile timer failed"));
446c445
< 	warning("cannot use R profiling while byte code profiling");
---
> 	warning(_("cannot use R profiling while byte code profiling"));
487,488c486
<     REprintf("Warning: stack imbalance in '%s', %d then %d\n",
< 	     PRIMNAME(op), save, R_PPStackTop);
---
>     REprintf(_("Warning: stack imbalance in '%s', %d then %d\n"), PRIMNAME(op), save, R_PPStackTop);
500c498
< 			  _("promise already under evaluation: recursive default argument reference or earlier problems?"));
---
> 			  _("promise is already under evaluation: recursive default argument reference or earlier problems?"));
585c583
< 	error("'rho' cannot be C NULL: detected in C-level eval");
---
> 	error(_("'rho' argument cannot be C NULL: detected in C-level '%s' function"), "eval");
587,588c585
< 	error("'rho' must be an environment not %s: detected in C-level eval",
< 	      type2char(TYPEOF(rho)));
---
> 	error(_("'rho' argument must be an environment not %s: detected in C-level '%s' function"), type2char(TYPEOF(rho)), "eval");
604,605c601
< 	errorcall(R_NilValue,
< 		  _("evaluation nested too deeply: infinite recursion / options(expressions=)?"));
---
> 	errorcall(R_NilValue, _("evaluation is nested too deeply: infinite recursion / options(expressions=)?"));
610c606
< #ifdef Win32
---
> #ifdef _WIN32
630c626
< 	    error(_("object '%s' not found"), EncodeChar(PRINTNAME(e)));
---
> 	    error(_("object '%s' was not found"), EncodeChar(PRINTNAME(e)));
634,636c630,631
< 	    if(*n) error(_("argument \"%s\" is missing, with no default"),
< 			 CHAR(PRINTNAME(e)));
< 	    else error(_("argument is missing, with no default"));
---
> 	    if(*n) error(_("'%s' argument is missing, with no default"), CHAR(PRINTNAME(e)));
> 	    else error(_("'%s' argument is missing, with no default"), "expr");
687c682
< 	    Rprintf("trace: ");
---
> 	    Rprintf(_("trace: "));
702c697
< 		    printf("vis: special %s\n", nm);
---
> 		    printf(_("vis: special %s\n", nm));
732c727
< 		printf("vis: builtin %s\n", nm);
---
> 		printf(_("vis: builtin %s\n"), nm);
756c751
< 	UNIMPLEMENTED_TYPE("eval", e);
---
> 	UNIMPLEMENTED_TYPE("eval()", e);
774,776c769
< 		Rprintf(_("%s at %s#%d: "), prefix,
< 			CHAR(STRING_ELT(filename, 0)),
< 			asInteger(srcref));
---
> 		Rprintf(_("%s at %s#%d: "), prefix, CHAR(STRING_ELT(filename, 0)), asInteger(srcref));
1648,1649c1641
< 	errorcall(call,
< 		  "'rho' cannot be C NULL: detected in C-level applyClosure");
---
> 	errorcall(call, _("'rho' argument cannot be C NULL: detected in C-level '%s' function"), "applyClosure()");
1651,1652c1643
< 	errorcall(call, "'rho' must be an environment not %s: detected in C-level applyClosure",
< 		  type2char(TYPEOF(rho)));
---
> 	errorcall(call, _("'rho' argument must be an environment not %s: detected in C-level '%s' function"), type2char(TYPEOF(rho)), "applyClosure()");
1755c1746
< 	Rprintf("debugging in: ");
---
> 	Rprintf(_("debugging in: "));
1786c1777
< 	Rprintf("exiting from: ");
---
> 	Rprintf(_("exiting from: "));
1844c1835
< 	    else error("something weird happened");
---
> 	    else error(_("something weird happened"));
1899,1900c1890
< 	    error(_("could not find symbol \"%s\" in environment of the generic function"),
< 		  CHAR(PRINTNAME(symbol)));
---
> 	    error(_("could not find symbol \"%s\" in environment of the generic function"), CHAR(PRINTNAME(symbol)));
1917c1907
< 		    error(_("symbol \"%s\" not in environment of method"),
---
> 		    error(_("symbol \"%s\" is not in environment of method"),
1979c1969
< 	error(_("object '%s' not found"), EncodeChar(PRINTNAME(symbol)));
---
> 	error(_("object '%s' was not found"), EncodeChar(PRINTNAME(symbol)));
2045c2035
< 	    "the condition has length > 1",
---
> 	    _("the condition has length > 1"),
2070c2060
< 	    _("argument is of length zero");
---
> 	    _("argument is of length 0");
2078a2069
> /*
2080a2072,2075
> */
> static R_INLINE Rboolean BodyHasBraces(SEXP body) {
>  return (isLanguage(body) && CAR(body) == R_BraceSymbol);
>  }
2259c2254
< 		errorcall(call, _("invalid for() loop sequence"));
---
> 		errorcall(call, _("invalid 'for()' loop sequence"));
2419c2414
<     if (length(args) < 2) WrongArgCount("function");
---
>     if (length(args) < 2) WrongArgCount("function()");
2541a2537
> /*
2552c2548,2557
< 
---
> */
> static R_INLINE void SET_TEMPVARLOC_FROM_CAR(R_varloc_t loc, SEXP lhs) {
>         SEXP v = CAR(lhs);
>         if (MAYBE_SHARED(v)) {
>             v = shallow_duplicate(v);
>             ENSURE_NAMED(v);
>             SETCAR(lhs, v);
>         }
>         R_SetVarLocValue(loc, v);
>  }
2556a2562
> /*
2562c2568,2572
< 
---
> */
> static R_INLINE void FIXUP_RHS_NAMED(SEXP rhs) {
>         if (NAMED(rhs) && NAMED(rhs) <= 1)
>             SET_NAMED(rhs, 2);
>  }
2570c2580
< 	error(_("overlong name in '%s'"), EncodeChar(PRINTNAME(fun)));
---
> 	error(_("over-long name in '%s' function"), EncodeChar(PRINTNAME(fun)));
2820c2830
< 	errorcall(call, _("invalid (do_set) left-hand side to assignment"));
---
> 	errorcall(call, _("invalid ('do_set()' function) left-hand side to assignment"));
2832a2843
> /*
2836a2848,2852
> */
> static R_INLINE void COPY_TAG(SEXP to, SEXP from) {
>   SEXP tag = TAG(from);
>   if (tag != R_NilValue) SET_TAG(to, tag);
>  }
3115c3131,3134
< #define simple_as_environment(arg) (IS_S4_OBJECT(arg) && (TYPEOF(arg) == S4SXP) ? R_getS4DataSlot(arg, ENVSXP) : R_NilValue)
---
> //#define simple_as_environment(arg) (IS_S4_OBJECT(arg) && (TYPEOF(arg) == S4SXP) ? R_getS4DataSlot(arg, ENVSXP) : R_NilValue)
> static R_INLINE SEXP simple_as_environment(SEXP arg) {
>  return (IS_S4_OBJECT(arg) && (TYPEOF(arg) == S4SXP) ? R_getS4DataSlot(arg, ENVSXP) : R_NilValue);
>  }
3139,3140c3158
< 	error(_("invalid '%s' argument of type '%s'"),
< 	      "enclos", type2char(tEncl));
---
> 	error(_("invalid '%s' argument of type '%s'"), "enclos", type2char(tEncl));
3167c3185
< 	    error(_("numeric 'envir' arg not of length one"));
---
> 	    error(_("numeric 'envir' argument is not of length one"));
3170,3171c3188
< 	    error(_("invalid '%s' argument of type '%s'"),
< 		  "envir", type2char(TYPEOF(env)));
---
> 	    error(_("invalid '%s' argument of type '%s'"), "envir", type2char(TYPEOF(env)));
3175,3176c3192
< 	error(_("invalid '%s' argument of type '%s'"),
< 	      "envir", type2char(TYPEOF(env)));
---
> 	error(_("invalid '%s' argument of type '%s'"), "envir", type2char(TYPEOF(env)));
3192c3208
< 		error(_("restarts not supported in 'eval'"));
---
> 		error(_("restarts are not supported in 'eval()' function"));
3216c3232
< 		error(_("restarts not supported in 'eval'"));
---
> 		error(_("restarts are not supported in 'eval()' function"));
3275c3291
< 	error(_("'Recall' called from outside a closure"));
---
> 	error(_("'Recall()' function called from outside a closure"));
3288c3304
< 	error(_("'Recall' called from outside a closure"));
---
> 	error(_("'Recall()' function called from outside a closure"));
3652,3653c3668
< 		warning(_("Incompatible methods (\"%s\", \"%s\") for \"%s\""),
< 			lname, rname, generic);
---
> 		warning(_("Incompatible methods (\"%s\", \"%s\") for \"%s\""), lname, rname, generic);
4165,4167c4180
< 	    error(_("\"%s\" is not a %s function"),
< 		  CHAR(PRINTNAME(symbol)),
< 		  type == BUILTINSXP ? "BUILTIN" : "SPECIAL");
---
> 	    error(_("'%s' is not a '%s' function"), CHAR(PRINTNAME(symbol)), type == BUILTINSXP ? "BUILTIN" : "SPECIAL");
4266c4279
< #define R_MSG_NA	_("NaNs produced")
---
> #define R_MSG_NA	_("NaN values produced")
4763c4776
< #define LASTOP  default: error(_("bad opcode"))
---
> #define LASTOP  default: error(_("bad operation code"))
4881,4882c4894,4895
<     if(*n) error(_("argument \"%s\" is missing, with no default"), n);
<     else error(_("argument is missing, with no default"));
---
>     if(*n) error(_("'%s' argument is missing, with no default"), n);
>     else error(_("'%s' argument is missing, with no default"), "expr");
4884a4898
> /*
4886a4901,4904
> */
> static R_INLINE void MAYBE_MISSING_ARGUMENT_ERROR(SEXP symbol, Rboolean keepmiss) {
>     if (! keepmiss) MISSING_ARGUMENT_ERROR(symbol);
>  }
4890c4908
<     error(_("object '%s' not found"), EncodeChar(PRINTNAME(symbol)));
---
>     error(_("object '%s' was not found"), EncodeChar(PRINTNAME(symbol)));
5111a5130
> /*
5119a5139,5146
> */
> static R_INLINE void SETCALLARG_TAG(SEXP tag) {
>         if (tag != R_NilValue) {
>             SEXP cell = GETSTACK(-1);
>             if (cell != R_NilValue)
>                 SET_TAG(cell, CreateTag(tag));
> 	}
>  }
5121a5149
> /*
5126a5155,5160
> */
> static R_INLINE void SETCALLARG_TAG_SYMBOL(SEXP tag) {
>         SEXP cell = GETSTACK(-1);
>         if (cell != R_NilValue)
>             SET_TAG(cell, tag);
>  }
5813c5847
< 			  _("invalid %s type in 'x %s y'"), arg, op);	\
---
> 			  _("invalid '%s' type in 'x %s y'"), arg, op);	\
5832c5866
< 			errorcall(call, "argument %d is empty", k);
---
> 			errorcall(call, _("argument %d is empty"), k);
5846c5880
< 	    errorcall(call, "argument %d is missing", n);
---
> 	    errorcall(call, _("argument %d is missing"), n);
5934c5968,5971
< #define IS_TRUE_BUILTIN(x) ((R_FunTab[PRIMOFFSET(x)].eval % 100 )/10 == 0)
---
> //#define IS_TRUE_BUILTIN(x) ((R_FunTab[PRIMOFFSET(x)].eval % 100 )/10 == 0)
> static R_INLINE Rboolean IS_TRUE_BUILTIN(SEXP x) {
>  return ((R_FunTab[PRIMOFFSET(x)].eval % 100 )/10 == 0);
>  }
6379,6380c6416
< 	else errorcall(VECTOR_ELT(constants, callidx),
< 		       _("invalid for() loop sequence"));
---
> 	else errorcall(VECTOR_ELT(constants, callidx), _("invalid 'for()' loop sequence"));
6497c6533
< 	    error(_("invalid sequence argument in for loop"));
---
> 	    error(_("invalid sequence argument in 'for()' loop"));
6585c6621
< 	  Rprintf("trace: ");
---
> 	  Rprintf(_("trace: "));
6600c6636
< 	  Rprintf("trace: ");
---
> 	  Rprintf(_("trace: "));
6614c6650
< 	    Rprintf("Possibly overriden builtin: %s\n", PRIMNAME(value));
---
> 	    Rprintf(_("Possibly overriden builtin: %s\n"), PRIMNAME(value));
6618c6654
< 	  Rprintf("trace: ");
---
> 	  Rprintf(_("trace: "));
6630,6631c6666
< 	  error(_("there is no .Internal function '%s'"),
< 		CHAR(PRINTNAME(symbol)));
---
> 	  error(_("there is no '.Internal' function '%s'"), CHAR(PRINTNAME(symbol)));
6761c6796
< 	  error(_("not a BUILTIN function"));
---
> 	  error(_("'%s' is not a '%s' function"), CHAR(PRINTNAME(fun)), "BUILTIN");
6790c6825
< 	  Rprintf("trace: ");
---
> 	  Rprintf(_("trace: "));
6910,6911c6945,6946
<     OP(STARTC, 2): DO_STARTDISPATCH("c");             /* no longe used */
<     OP(DFLTC, 0): DO_DFLTDISPATCH(do_c_dflt, R_CSym); /* no longe used */
---
>     OP(STARTC, 2): DO_STARTDISPATCH("c");             /* no longer used */
>     OP(DFLTC, 0): DO_DFLTDISPATCH(do_c_dflt, R_CSym); /* no longer used */
7227c7262
< 	   errorcall(call, _("EXPR must be a length 1 vector"));
---
> 	   errorcall(call, _("'%s' argument must be a vector of length 1"), "EXPR");
7230,7231c7265
< 		       _("EXPR is a \"factor\", treated as integer.\n"
< 			 " Consider using '%s' instead."),
---
> 		       _("'EXPR' is an object of class \"factor\", treated as integer.\n Consider using '%s' instead."),
7237c7271
< 		   errorcall(call, _("bad numeric 'switch' offsets"));
---
> 		   errorcall(call, _("bad numeric 'switch()' offsets"));
7240c7274
< 		   warningcall(call, _("'switch' with no alternatives"));
---
> 		   warningcall(call, _("'switch()' function with no alternatives"));
7243,7244c7277
< 		   errorcall(call, _("numeric EXPR required for 'switch' "
< 				     "without named alternatives"));
---
> 		   errorcall(call, _("numeric 'EXPR' required for 'switch()' without named alternatives"));
7247c7280
< 		   errorcall(call, _("bad character 'switch' offsets"));
---
> 		   errorcall(call, _("bad character 'switch()' offsets"));
7249c7282
< 		   errorcall(call, "bad 'switch' names");
---
> 		   errorcall(call, _("bad 'switch()' names"));
7263c7296
< 	       errorcall(call, "bad numeric 'switch' offsets");
---
> 	       errorcall(call, _("bad numeric 'switch()' offsets"));
7269c7302
< 	       warningcall(call, _("'switch' with no alternatives"));
---
> 	       warningcall(call, _("'switch()' function with no alternatives"));
7363c7396
< 		error("unknown instruction code");
---
> 		error(_("unknown instruction code"));
7423c7456
< 	error("registerBC requires integer vector as bcBytes");
---
> 	error(_("'registerBC()' function requires integer vector as 'bcBytes' argument"));
7425c7458
< 	error("registerBC requires BCODESXP object as bcode");
---
> 	error(_("'registerBC()' function requires BCODESXP object as 'bcode' argument"));
7506c7539
< 	REprintf("ERROR: the modified value of the constant is:\n");
---
> 	REprintf(_("ERROR: the modified value of the constant is:\n"));
7508c7541
< 	REprintf("ERROR: the original value of the constant is:\n");
---
> 	REprintf(_("ERROR: the original value of the constant is:\n"));
7510,7511c7543,7544
< 	REprintf("ERROR: the modified constant is at index %d\n", idx);
< 	REprintf("ERROR: the modified constant is in this function body:\n");
---
> 	REprintf(_("ERROR: the modified constant is at index %d\n"), idx);
> 	REprintf(_("ERROR: the modified constant is in this function body:\n"));
7514c7547
< 	REprintf("ERROR: the modified constant is function body:\n");
---
> 	REprintf(_("ERROR: the modified constant is function body:\n"));
7516c7549
< 	REprintf("ERROR: the body was originally:\n");
---
> 	REprintf(_("ERROR: the body was originally:\n"));
7546,7547c7579
< 	    REprintf("ERROR: modification of compiler constant of type %s"
< 		", length %d\n", CHAR(type2str(TYPEOF(ccopy))), length(ccopy));
---
> 	    REprintf(_("ERROR: modification of compiler constant of type %s, length %d\n"), CHAR(type2str(TYPEOF(ccopy))), length(ccopy));
7558,7559c7590
< 		    REprintf("ERROR: modification of compiler constant"
< 			" of type %s, length %d\n",
---
> 		    REprintf(_("ERROR: modification of compiler constant of type %s, length %d\n"),
7573c7604
< 	R_Suicide("compiler constants were modified!\n");
---
> 	R_Suicide(_("compiler constants were modified!\n"));
7717c7748
<     error(_("argument is not a byte code object"));
---
>     error(_("'code' argument is not a byte code object"));
7747c7778
< 	    error("R_CompiledFileName: buffer too small");
---
> 	    error(_("'R_CompiledFileName()': buffer is too small"));
7754c7785
< 	    error("R_CompiledFileName: buffer too small");
---
> 	    error(_("'R_CompiledFileName()': buffer is too small"));
7811c7842
< 	error("bad constCount value");
---
> 	error(_("bad '%s' value"), "constCount");
7881c7912
< 	error(_("profile timer in use"));
---
> 	error(_("profile timer is in use"));
7919c7950
< 	error(_("not byte code profiling"));
---
> 	error(_("no byte code profiling"));
7993c8024
< 	error("parse error");
---
> 	error(_("parse error"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/format.c R/src/main/format.c
50a51
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/gevents.c R/src/main/gevents.c
28a29
> #include <Localization.h>
153c154
< 		    error(_("recursive use of 'getGraphicsEvent' not supported"));
---
> 		    error(_("recursive use of 'getGraphicsEvent()' function is not supported"));
174c175
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/gram-ex.c R/src/main/gram-ex.c
37c37
< #ifdef Win32
---
> #ifdef _WIN32
61c61
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/gram.c R/src/main/gram.c
1c1
< /* A Bison parser, made by GNU Bison 3.0.4.  */
---
> /* A Bison parser, made by GNU Bison 3.3.2.  */
5c5,6
<    Copyright (C) 1984, 1989-1990, 2000-2015 Free Software Foundation, Inc.
---
>    Copyright (C) 1984, 1989-1990, 2000-2015, 2018-2019 Free Software Foundation,
>    Inc.
42a44,46
> /* Undocumented macros, especially those whose name start with YY_,
>    are private implementation details.  Do not rely on them.  */
> 
47c51
< #define YYBISON_VERSION "3.0.4"
---
> #define YYBISON_VERSION "3.3.2"
64c68
< /* Copy the first part of user declarations.  */
---
> /* First part of user prologue.  */
96a101
> #include <Localization.h>
432c436,437
< #  if defined __cplusplus && 201103L <= __cplusplus
---
> #  if defined __cplusplus
> #   if 201103L <= __cplusplus
436a442,444
> #  else
> #   define YY_NULLPTR ((void*)0)
> #  endif
589,590d596
< /* Copy the second part of user declarations.  */
< 
612c618
< typedef unsigned short int yytype_uint16;
---
> typedef unsigned short yytype_uint16;
618c624
< typedef short int yytype_int16;
---
> typedef short yytype_int16;
630c636
< #  define YYSIZE_T unsigned int
---
> #  define YYSIZE_T unsigned
666,674d671
< #if !defined _Noreturn \
<      && (!defined __STDC_VERSION__ || __STDC_VERSION__ < 201112)
< # if defined _MSC_VER && 1200 <= _MSC_VER
< #  define _Noreturn __declspec (noreturn)
< # else
< #  define _Noreturn YY_ATTRIBUTE ((__noreturn__))
< # endif
< #endif
< 
682c679
< #if defined __GNUC__ && 407 <= __GNUC__ * 100 + __GNUC_MINOR__
---
> #if defined __GNUC__ && ! defined __ICC && 407 <= __GNUC__ * 100 + __GNUC_MINOR__
846,847d842
< /* YYTRANSLATE[YYX] -- Symbol number corresponding to YYX as returned
<    by yylex, with out-of-bounds checking.  */
850a846,847
> /* YYTRANSLATE(TOKEN-NUM) -- Symbol number corresponding to TOKEN-NUM
>    as returned by yylex, with out-of-bounds checking.  */
852c849
<   ((unsigned int) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
---
>   ((unsigned) (YYX) <= YYMAXUTOK ? yytranslate[YYX] : YYUNDEFTOK)
855c852
<    as returned by yylex, without out-of-bounds checking.  */
---
>    as returned by yylex.  */
895,904c892,901
<        0,   408,   408,   409,   410,   411,   412,   415,   416,   419,
<      422,   423,   424,   425,   427,   428,   430,   431,   432,   433,
<      434,   436,   437,   438,   439,   440,   441,   442,   443,   444,
<      445,   446,   447,   448,   449,   450,   451,   452,   453,   454,
<      455,   457,   458,   459,   461,   462,   463,   464,   465,   466,
<      467,   468,   469,   470,   471,   472,   473,   474,   475,   476,
<      477,   478,   479,   480,   481,   482,   486,   489,   492,   496,
<      497,   498,   499,   500,   501,   504,   505,   508,   509,   510,
<      511,   512,   513,   514,   515,   518,   519,   520,   521,   522,
<      526
---
>        0,   409,   409,   410,   411,   412,   413,   416,   417,   420,
>      423,   424,   425,   426,   428,   429,   431,   432,   433,   434,
>      435,   437,   438,   439,   440,   441,   442,   443,   444,   445,
>      446,   447,   448,   449,   450,   451,   452,   453,   454,   455,
>      456,   458,   459,   460,   462,   463,   464,   465,   466,   467,
>      468,   469,   470,   471,   472,   473,   474,   475,   476,   477,
>      478,   479,   480,   481,   482,   483,   487,   490,   493,   497,
>      498,   499,   500,   501,   502,   505,   506,   509,   510,   511,
>      512,   513,   514,   515,   516,   519,   520,   521,   522,   523,
>      527
1330c1327
< static unsigned
---
> static int
1333c1330
<   unsigned res = 0;
---
>   int res = 0;
1376,1378c1373,1375
< /*----------------------------------------.
< | Print this symbol's value on YYOUTPUT.  |
< `----------------------------------------*/
---
> /*-----------------------------------.
> | Print this symbol's value on YYO.  |
> `-----------------------------------*/
1381c1378
< yy_symbol_value_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
---
> yy_symbol_value_print (FILE *yyo, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
1383,1384c1380,1381
<   FILE *yyo = yyoutput;
<   YYUSE (yyo);
---
>   FILE *yyoutput = yyo;
>   YYUSE (yyoutput);
1390c1387
<     YYPRINT (yyoutput, yytoknum[yytype], *yyvaluep);
---
>     YYPRINT (yyo, yytoknum[yytype], *yyvaluep);
1396,1398c1393,1395
< /*--------------------------------.
< | Print this symbol on YYOUTPUT.  |
< `--------------------------------*/
---
> /*---------------------------.
> | Print this symbol on YYO.  |
> `---------------------------*/
1401c1398
< yy_symbol_print (FILE *yyoutput, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
---
> yy_symbol_print (FILE *yyo, int yytype, YYSTYPE const * const yyvaluep, YYLTYPE const * const yylocationp)
1403c1400
<   YYFPRINTF (yyoutput, "%s %s (",
---
>   YYFPRINTF (yyo, "%s %s (",
1406,1409c1403,1406
<   YY_LOCATION_PRINT (yyoutput, *yylocationp);
<   YYFPRINTF (yyoutput, ": ");
<   yy_symbol_value_print (yyoutput, yytype, yyvaluep, yylocationp);
<   YYFPRINTF (yyoutput, ")");
---
>   YY_LOCATION_PRINT (yyo, *yylocationp);
>   YYFPRINTF (yyo, ": ");
>   yy_symbol_value_print (yyo, yytype, yyvaluep, yylocationp);
>   YYFPRINTF (yyo, ")");
1443c1440
<   unsigned long int yylno = yyrline[yyrule];
---
>   unsigned long yylno = yyrline[yyrule];
1454c1451
<                        &(yyvsp[(yyi + 1) - (yynrhs)])
---
>                        &yyvsp[(yyi + 1) - (yynrhs)]
1558c1555,1558
<             /* Fall through.  */
---
>             else
>               goto append;
> 
>           append:
1576c1576
<   return yystpcpy (yyres, yystr) - yyres;
---
>   return (YYSIZE_T) (yystpcpy (yyres, yystr) - yyres);
1654,1656c1654
<                   if (! (yysize <= yysize1
<                          && yysize1 <= YYSTACK_ALLOC_MAXIMUM))
<                     return 2;
---
>                   if (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM)
1657a1656,1657
>                   else
>                     return 2;
1668a1669
>     default: /* Avoid compiler warnings. */
1680,1681c1681
<     if (! (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM))
<       return 2;
---
>     if (yysize <= yysize1 && yysize1 <= YYSTACK_ALLOC_MAXIMUM)
1682a1683,1684
>     else
>       return 2;
1828c1831
< | yynewstate -- Push a new state, which is found in yystate.  |
---
> | yynewstate -- push a new state, which is found in yystate.  |
1834a1838,1841
> 
> /*--------------------------------------------------------------------.
> | yynewstate -- set current state (the top of the stack) to yystate.  |
> `--------------------------------------------------------------------*/
1836c1843
<   *yyssp = yystate;
---
>   *yyssp = (yytype_int16) yystate;
1838a1846,1848
> #if !defined yyoverflow && !defined YYSTACK_RELOCATE
>     goto yyexhaustedlab;
> #else
1841c1851
<       YYSIZE_T yysize = yyssp - yyss + 1;
---
>       YYSIZE_T yysize = (YYSIZE_T) (yyssp - yyss + 1);
1843c1853
< #ifdef yyoverflow
---
> # if defined yyoverflow
1861,1862d1870
< 
<         yyls = yyls1;
1864a1873
>         yyls = yyls1;
1866,1869c1875
< #else /* no yyoverflow */
< # ifndef YYSTACK_RELOCATE
<       goto yyexhaustedlab;
< # else
---
> # else /* defined YYSTACK_RELOCATE */
1891d1896
< #endif /* no yyoverflow */
1898c1903
<                   (unsigned long int) yystacksize));
---
>                   (unsigned long) yystacksize));
1902a1908
> #endif /* !defined yyoverflow && !defined YYSTACK_RELOCATE */
1988c1994
< | yyreduce -- Do a reduction.  |
---
> | yyreduce -- do a reduction.  |
2005a2012
>   yyerror_range[1] = yyloc;
2023c2030
<     { yyresult = xxvalue((yyvsp[-1]),3,&(yylsp[-1]));	goto yyreturn; }
---
>     { yyresult = xxvalue(yyvsp[-1],3,&(yylsp[-1]));	goto yyreturn; }
2029c2036
<     { yyresult = xxvalue((yyvsp[-1]),4,&(yylsp[-1]));	goto yyreturn; }
---
>     { yyresult = xxvalue(yyvsp[-1],4,&(yylsp[-1]));	goto yyreturn; }
2041c2048
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2047c2054
<     { (yyval) = (yyvsp[0]); }
---
>     { yyval = yyvsp[0]; }
2053c2060
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0])); setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]); setId( yyval, (yyloc)); }
2059c2066
<     { (yyval) = (yyvsp[0]);	setId( (yyval), (yyloc)); }
---
>     { yyval = yyvsp[0];	setId( yyval, (yyloc)); }
2065c2072
<     { (yyval) = (yyvsp[0]);	setId( (yyval), (yyloc)); }
---
>     { yyval = yyvsp[0];	setId( yyval, (yyloc)); }
2071c2078
<     { (yyval) = (yyvsp[0]);	setId( (yyval), (yyloc)); }
---
>     { yyval = yyvsp[0];	setId( yyval, (yyloc)); }
2077c2084
<     { (yyval) = (yyvsp[0]);	setId( (yyval), (yyloc)); }
---
>     { yyval = yyvsp[0];	setId( yyval, (yyloc)); }
2083c2090
<     { (yyval) = xxexprlist((yyvsp[-2]),&(yylsp[-2]),(yyvsp[-1])); setId( (yyval), (yyloc)); }
---
>     { yyval = xxexprlist(yyvsp[-2],&(yylsp[-2]),yyvsp[-1]); setId( yyval, (yyloc)); }
2089c2096
<     { (yyval) = xxparen((yyvsp[-2]),(yyvsp[-1]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxparen(yyvsp[-2],yyvsp[-1]);	setId( yyval, (yyloc)); }
2095c2102
<     { (yyval) = xxunary((yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxunary(yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2101c2108
<     { (yyval) = xxunary((yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxunary(yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2107c2114
<     { (yyval) = xxunary((yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxunary(yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2113c2120
<     { (yyval) = xxunary((yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxunary(yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2119c2126
<     { (yyval) = xxunary((yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxunary(yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2125c2132
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2131c2138
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2137c2144
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2143c2150
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2149c2156
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2155c2162
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2161c2168
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2167c2174
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2173c2180
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2179c2186
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2185c2192
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2191c2198
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2197c2204
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2203c2210
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2209c2216
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2215c2222
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2221c2228
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2227c2234
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2233c2240
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2239c2246
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2245c2252
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2251c2258
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[0]),(yyvsp[-2]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[0],yyvsp[-2]);	setId( yyval, (yyloc)); }
2257c2264
<     { (yyval) = xxdefun((yyvsp[-5]),(yyvsp[-3]),(yyvsp[0]),&(yyloc)); 	setId( (yyval), (yyloc)); }
---
>     { yyval = xxdefun(yyvsp[-5],yyvsp[-3],yyvsp[0],&(yyloc)); 	setId( yyval, (yyloc)); }
2263c2270
<     { (yyval) = xxfuncall((yyvsp[-3]),(yyvsp[-1]));  setId( (yyval), (yyloc)); modif_token( &(yylsp[-3]), SYMBOL_FUNCTION_CALL ) ; }
---
>     { yyval = xxfuncall(yyvsp[-3],yyvsp[-1]);  setId( yyval, (yyloc)); modif_token( &(yylsp[-3]), SYMBOL_FUNCTION_CALL ) ; }
2269c2276
<     { (yyval) = xxif((yyvsp[-2]),(yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxif(yyvsp[-2],yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2275c2282
<     { (yyval) = xxifelse((yyvsp[-4]),(yyvsp[-3]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxifelse(yyvsp[-4],yyvsp[-3],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2281c2288
<     { (yyval) = xxfor((yyvsp[-2]),(yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxfor(yyvsp[-2],yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2287c2294
<     { (yyval) = xxwhile((yyvsp[-2]),(yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxwhile(yyvsp[-2],yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2293c2300
<     { (yyval) = xxrepeat((yyvsp[-1]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxrepeat(yyvsp[-1],yyvsp[0]);	setId( yyval, (yyloc)); }
2299c2306
<     { (yyval) = xxsubscript((yyvsp[-4]),(yyvsp[-3]),(yyvsp[-2]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxsubscript(yyvsp[-4],yyvsp[-3],yyvsp[-2]);	setId( yyval, (yyloc)); }
2305c2312
<     { (yyval) = xxsubscript((yyvsp[-3]),(yyvsp[-2]),(yyvsp[-1]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxsubscript(yyvsp[-3],yyvsp[-2],yyvsp[-1]);	setId( yyval, (yyloc)); }
2311c2318
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));      setId( (yyval), (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ; }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);      setId( yyval, (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ; }
2317c2324
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));      setId( (yyval), (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ; }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);      setId( yyval, (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ; }
2323c2330
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2329c2336
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2335c2342
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));      setId( (yyval), (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ;}
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);      setId( yyval, (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ;}
2341c2348
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));      setId( (yyval), (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ;}
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);      setId( yyval, (yyloc)); modif_token( &(yylsp[-2]), SYMBOL_PACKAGE ) ;}
2347c2354
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2353c2360
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2359c2366
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2365c2372
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2371c2378
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));      setId( (yyval), (yyloc)); modif_token( &(yylsp[0]), SLOT ) ; }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);      setId( yyval, (yyloc)); modif_token( &(yylsp[0]), SLOT ) ; }
2377c2384
<     { (yyval) = xxbinary((yyvsp[-1]),(yyvsp[-2]),(yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxbinary(yyvsp[-1],yyvsp[-2],yyvsp[0]);	setId( yyval, (yyloc)); }
2383c2390
<     { (yyval) = xxnxtbrk((yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxnxtbrk(yyvsp[0]);	setId( yyval, (yyloc)); }
2389c2396
<     { (yyval) = xxnxtbrk((yyvsp[0]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxnxtbrk(yyvsp[0]);	setId( yyval, (yyloc)); }
2395c2402
<     { (yyval) = xxcond((yyvsp[-1]));   }
---
>     { yyval = xxcond(yyvsp[-1]);   }
2401c2408
<     { (yyval) = xxifcond((yyvsp[-1])); }
---
>     { yyval = xxifcond(yyvsp[-1]); }
2407c2414
<     { (yyval) = xxforcond((yyvsp[-3]),(yyvsp[-1]));	setId( (yyval), (yyloc)); }
---
>     { yyval = xxforcond(yyvsp[-3],yyvsp[-1]);	setId( yyval, (yyloc)); }
2413c2420
<     { (yyval) = xxexprlist0();	setId( (yyval), (yyloc)); }
---
>     { yyval = xxexprlist0();	setId( yyval, (yyloc)); }
2419c2426
<     { (yyval) = xxexprlist1((yyvsp[0]), &(yylsp[0])); }
---
>     { yyval = xxexprlist1(yyvsp[0], &(yylsp[0])); }
2425c2432
<     { (yyval) = xxexprlist2((yyvsp[-2]), (yyvsp[0]), &(yylsp[0])); }
---
>     { yyval = xxexprlist2(yyvsp[-2], yyvsp[0], &(yylsp[0])); }
2431c2438
<     { (yyval) = (yyvsp[-1]);		setId( (yyval), (yyloc)); }
---
>     { yyval = yyvsp[-1];		setId( yyval, (yyloc)); }
2437c2444
<     { (yyval) = xxexprlist2((yyvsp[-2]), (yyvsp[0]), &(yylsp[0])); }
---
>     { yyval = xxexprlist2(yyvsp[-2], yyvsp[0], &(yylsp[0])); }
2443c2450
<     { (yyval) = (yyvsp[-1]);}
---
>     { yyval = yyvsp[-1];}
2449c2456
<     { (yyval) = xxsublist1((yyvsp[0]));	  }
---
>     { yyval = xxsublist1(yyvsp[0]);	  }
2455c2462
<     { (yyval) = xxsublist2((yyvsp[-3]),(yyvsp[0])); }
---
>     { yyval = xxsublist2(yyvsp[-3],yyvsp[0]); }
2461c2468
<     { (yyval) = xxsub0();	 }
---
>     { yyval = xxsub0();	 }
2467c2474
<     { (yyval) = xxsub1((yyvsp[0]), &(yylsp[0]));  }
---
>     { yyval = xxsub1(yyvsp[0], &(yylsp[0]));  }
2473c2480
<     { (yyval) = xxsymsub0((yyvsp[-1]), &(yylsp[-1])); 	modif_token( &(yylsp[0]), EQ_SUB ) ; modif_token( &(yylsp[-1]), SYMBOL_SUB ) ; }
---
>     { yyval = xxsymsub0(yyvsp[-1], &(yylsp[-1])); 	modif_token( &(yylsp[0]), EQ_SUB ) ; modif_token( &(yylsp[-1]), SYMBOL_SUB ) ; }
2479c2486
<     { (yyval) = xxsymsub1((yyvsp[-2]),(yyvsp[0]), &(yylsp[-2])); 	modif_token( &(yylsp[-1]), EQ_SUB ) ; modif_token( &(yylsp[-2]), SYMBOL_SUB ) ; }
---
>     { yyval = xxsymsub1(yyvsp[-2],yyvsp[0], &(yylsp[-2])); 	modif_token( &(yylsp[-1]), EQ_SUB ) ; modif_token( &(yylsp[-2]), SYMBOL_SUB ) ; }
2485c2492
<     { (yyval) = xxsymsub0((yyvsp[-1]), &(yylsp[-1])); 	modif_token( &(yylsp[0]), EQ_SUB ) ; }
---
>     { yyval = xxsymsub0(yyvsp[-1], &(yylsp[-1])); 	modif_token( &(yylsp[0]), EQ_SUB ) ; }
2491c2498
<     { (yyval) = xxsymsub1((yyvsp[-2]),(yyvsp[0]), &(yylsp[-2])); 	modif_token( &(yylsp[-1]), EQ_SUB ) ; }
---
>     { yyval = xxsymsub1(yyvsp[-2],yyvsp[0], &(yylsp[-2])); 	modif_token( &(yylsp[-1]), EQ_SUB ) ; }
2497c2504
<     { (yyval) = xxnullsub0(&(yylsp[-1])); 	modif_token( &(yylsp[0]), EQ_SUB ) ; }
---
>     { yyval = xxnullsub0(&(yylsp[-1])); 	modif_token( &(yylsp[0]), EQ_SUB ) ; }
2503c2510
<     { (yyval) = xxnullsub1((yyvsp[0]), &(yylsp[-2])); 	modif_token( &(yylsp[-1]), EQ_SUB ) ; }
---
>     { yyval = xxnullsub1(yyvsp[0], &(yylsp[-2])); 	modif_token( &(yylsp[-1]), EQ_SUB ) ; }
2509c2516
<     { (yyval) = xxnullformal(); }
---
>     { yyval = xxnullformal(); }
2515c2522
<     { (yyval) = xxfirstformal0((yyvsp[0])); 	modif_token( &(yylsp[0]), SYMBOL_FORMALS ) ; }
---
>     { yyval = xxfirstformal0(yyvsp[0]); 	modif_token( &(yylsp[0]), SYMBOL_FORMALS ) ; }
2521c2528
<     { (yyval) = xxfirstformal1((yyvsp[-2]),(yyvsp[0])); 	modif_token( &(yylsp[-2]), SYMBOL_FORMALS ) ; modif_token( &(yylsp[-1]), EQ_FORMALS ) ; }
---
>     { yyval = xxfirstformal1(yyvsp[-2],yyvsp[0]); 	modif_token( &(yylsp[-2]), SYMBOL_FORMALS ) ; modif_token( &(yylsp[-1]), EQ_FORMALS ) ; }
2527c2534
<     { (yyval) = xxaddformal0((yyvsp[-2]),(yyvsp[0]), &(yylsp[0]));   modif_token( &(yylsp[0]), SYMBOL_FORMALS ) ; }
---
>     { yyval = xxaddformal0(yyvsp[-2],yyvsp[0], &(yylsp[0]));   modif_token( &(yylsp[0]), SYMBOL_FORMALS ) ; }
2533c2540
<     { (yyval) = xxaddformal1((yyvsp[-4]),(yyvsp[-2]),(yyvsp[0]),&(yylsp[-2])); modif_token( &(yylsp[-2]), SYMBOL_FORMALS ) ; modif_token( &(yylsp[-1]), EQ_FORMALS ) ;}
---
>     { yyval = xxaddformal1(yyvsp[-4],yyvsp[-2],yyvsp[0],&(yylsp[-2])); modif_token( &(yylsp[-2]), SYMBOL_FORMALS ) ; modif_token( &(yylsp[-1]), EQ_FORMALS ) ;}
2570,2577c2577,2583
< 
<   yyn = yyr1[yyn];
< 
<   yystate = yypgoto[yyn - YYNTOKENS] + *yyssp;
<   if (0 <= yystate && yystate <= YYLAST && yycheck[yystate] == *yyssp)
<     yystate = yytable[yystate];
<   else
<     yystate = yydefgoto[yyn - YYNTOKENS];
---
>   {
>     const int yylhs = yyr1[yyn] - YYNTOKENS;
>     const int yyi = yypgoto[yylhs] + *yyssp;
>     yystate = (0 <= yyi && yyi <= YYLAST && yycheck[yyi] == *yyssp
>                ? yytable[yyi]
>                : yydefgoto[yylhs]);
>   }
2659a2666,2669
>   /* Pacify compilers when the user code never invokes YYERROR and the
>      label yyerrorlab therefore never appears in user code.  */
>   if (0)
>     YYERROR;
2661,2667d2670
<   /* Pacify compilers like GCC when the user code never invokes
<      YYERROR and the label yyerrorlab therefore never appears in user
<      code.  */
<   if (/*CONSTCOND*/ 0)
<      goto yyerrorlab;
< 
<   yyerror_range[1] = yylsp[1-yylen];
2749a2755,2758
> 
> /*-----------------------------------------------------.
> | yyreturn -- parsing is finished, return the result.  |
> `-----------------------------------------------------*/
4328,4329c4337
<        the rest are to be copied literally.  The #if 0 block below allows xgettext
<        to see these.
---
>        the rest are to be copied literally.
4331c4339
< #define YYENGLISH 8
---
> #define YYENGLISH 10
4409a4418,4423
>                 case 8:
>                         snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected '%s' value"), "NULL");
>                                 break;
>                 case 9:
>                         snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected '%s' value"), "function");
>                                 break;
4411c4425
<                   snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected %s"),
---
>                   snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected statement %s"),
4419c4433
< 	snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE - 1, _("unexpected %s"),
---
> 	snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE - 1, _("unexpected statement %s"),
4837c4851
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
4853c4867
< 			    errorcall(R_NilValue, _("'\\x' used without hex digits in character string starting \"%s\""), currtext);
---
> 			    errorcall(R_NilValue, _("'%s' used without hex digits in character string starting \"%s\""), "\\x", currtext);
4860c4874
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
4869c4883
< 		    error(_("\\uxxxx sequences not supported inside backticks (line %d)"), ParseState.xxlineno);
---
> 		    error(_("'%s' sequences not supported inside backticks (line %d)"), "\\uxxxx", ParseState.xxlineno);
4884c4898
< 			    errorcall(R_NilValue, _("'\\u' used without hex digits in character string starting \"%s\""), currtext);
---
> 			    errorcall(R_NilValue, _("'%s' used without hex digits in character string starting \"%s\""), "\\u", currtext);
4892,4893c4906
< 			error(_("invalid \\u{xxxx} sequence (line %d)"),
< 			      ParseState.xxlineno);
---
> 			error(_("invalid %s sequence (line %d)"), "\\u{xxxx}", ParseState.xxlineno);
4897c4910
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
4906c4919
< 		    error(_("\\Uxxxxxxxx sequences not supported inside backticks (line %d)"), ParseState.xxlineno);
---
> 		    error(_("'%s' sequences not supported inside backticks (line %d)"), "\\Uxxxxxxxx", ParseState.xxlineno);
4921c4934
< 			    errorcall(R_NilValue, _("'\\U' used without hex digits in character string starting \"%s\""), currtext);
---
> 			    errorcall(R_NilValue, _("'%s' used without hex digits in character string starting \"%s\""), "\\U", currtext);
4929c4942
< 			error(_("invalid \\U{xxxxxxxx} sequence (line %d)"), ParseState.xxlineno);
---
> 			error(_("invalid %s sequence (line %d)"), "\\U{xxxxxxxx}", ParseState.xxlineno);
4933c4946
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
5035c5048
<         snprintf(yytext, MAXELTSIZE, "[%u chars quoted with '%c']", (unsigned int)total, quote);
---
>         snprintf(yytext, MAXELTSIZE, n_("[%u char quoted with '%c']", "[%u chars quoted with '%c']", (unsigned int)total), (unsigned int)total, quote);
5037c5050
<         snprintf(yytext, MAXELTSIZE, "[%d wide chars quoted with '%c']", wcnt, quote);
---
>         snprintf(yytext, MAXELTSIZE, n_("[%d wide char quoted with '%c']", "[%d wide chars quoted with '%c']", wcnt), wcnt, quote);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/gram.y R/src/main/gram.y
31a32
> #include <Localization.h>
2076,2077c2077
<        the rest are to be copied literally.  The #if 0 block below allows xgettext
<        to see these.
---
>        the rest are to be copied literally.
2079c2079
< #define YYENGLISH 8
---
> #define YYENGLISH 10
2157a2158,2163
>                 case 8:
>                         snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected '%s' value"), "NULL");
>                                 break;
>                 case 9:
>                         snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected '%s' value"), "function");
>                                 break;
2159c2165
<                   snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected %s"),
---
>                   snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE, _("unexpected statement %s"),
2167c2173
< 	snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE - 1, _("unexpected %s"),
---
> 	snprintf(R_ParseErrorMsg, PARSE_ERROR_SIZE - 1, _("unexpected statement %s"),
2585c2591
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
2601c2607
< 			    errorcall(R_NilValue, _("'\\x' used without hex digits in character string starting \"%s\""), currtext);
---
> 			    errorcall(R_NilValue, _("'%s' used without hex digits in character string starting \"%s\""), "\\x", currtext);
2608c2614
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
2617c2623
< 		    error(_("\\uxxxx sequences not supported inside backticks (line %d)"), ParseState.xxlineno);
---
> 		    error(_("'%s' sequences not supported inside backticks (line %d)"), "\\uxxxx", ParseState.xxlineno);
2632c2638
< 			    errorcall(R_NilValue, _("'\\u' used without hex digits in character string starting \"%s\""), currtext);
---
> 			    errorcall(R_NilValue, _("'%s' used without hex digits in character string starting \"%s\""), "\\u", currtext);
2640,2641c2646
< 			error(_("invalid \\u{xxxx} sequence (line %d)"),
< 			      ParseState.xxlineno);
---
> 			error(_("invalid %s sequence (line %d)"), "\\u{xxxx}", ParseState.xxlineno);
2645c2650
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
2654c2659
< 		    error(_("\\Uxxxxxxxx sequences not supported inside backticks (line %d)"), ParseState.xxlineno);
---
> 		    error(_("'%s' sequences not supported inside backticks (line %d)"), "\\Uxxxxxxxx", ParseState.xxlineno);
2669c2674
< 			    errorcall(R_NilValue, _("'\\U' used without hex digits in character string starting \"%s\""), currtext);
---
> 			    errorcall(R_NilValue, _("'%s' used without hex digits in character string starting \"%s\""), "\\U", currtext);
2677c2682
< 			error(_("invalid \\U{xxxxxxxx} sequence (line %d)"), ParseState.xxlineno);
---
> 			error(_("invalid %s sequence (line %d)"), "\\U{xxxxxxxx}", ParseState.xxlineno);
2681c2686
< 		    error(_("nul character not allowed (line %d)"), ParseState.xxlineno);
---
> 		    error(_("nul character is not allowed (line %d)"), ParseState.xxlineno);
2783c2788
<         snprintf(yytext, MAXELTSIZE, "[%u chars quoted with '%c']", (unsigned int)total, quote);
---
>         snprintf(yytext, MAXELTSIZE, n_("[%u char quoted with '%c']", "[%u chars quoted with '%c']", (unsigned int)total), (unsigned int)total, quote);
2785c2790
<         snprintf(yytext, MAXELTSIZE, "[%d wide chars quoted with '%c']", wcnt, quote);
---
>         snprintf(yytext, MAXELTSIZE, n_("[%d wide char quoted with '%c']", "[%d wide chars quoted with '%c']", wcnt), wcnt, quote);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/graphics.c R/src/main/graphics.c
30a31
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/grep.c R/src/main/grep.c
61a62
> #include <Localization.h>
64a66
> #include <R_ext/Minmax.h>
103c105
< 	    else warning ("R_PCRE_JIT_STACK_MAXSIZE invalid and ignored");
---
> 	    else warning(_("R_PCRE_JIT_STACK_MAXSIZE invalid and ignored"));
113,119d114
< #ifndef MAX
< # define MAX(a, b) ((a) > (b) ? (a) : (b))
< #endif
< 
< #ifndef isRaw
< #define isRaw(x) (TYPEOF(x) == RAWSXP)
< #endif
166c161
< 	warning("JIT stack limit reached in PCRE for element %d",
---
> 	warning(_("JIT stack limit reached in PCRE for element %d"),
171c166
< 	warning("back-tracking limit reached in PCRE for element %d",
---
> 	warning(_("back-tracking limit reached in PCRE for element %d"),
175c170
< 	warning("recursion limit reached in PCRE for element %d\n  consider increasing the C stack size for the R process",
---
> 	warning(_("recursion limit reached in PCRE for element %d\n  consider increasing the C stack size for the R process"),
180c175
< 	warning("unexpected internal error in PCRE for element %d",
---
> 	warning(_("unexpected internal error in PCRE for element %d"),
185c180
< 	warning("PCRE detected a recursive loop in the pattern for element %d",
---
> 	warning(_("PCRE detected a recursive loop in the pattern for element %d"),
238c233
< 		warning("allocation failure in set_pcre_recursion_limit");
---
> 		warning(_("allocation failure in set_pcre_recursion_limit"));
458c453
< 		    bufp += MAX(slen - 1, 0);
---
> 		    bufp += max(slen - 1, 0);
481c476
< 			bufp += MAX(slen-1, 0);
---
> 			bufp += max(slen-1, 0);
584c579
< 			bufp += MAX(ovector[1], 1);
---
> 			bufp += max(ovector[1], 1);
661c656
< 			wbufp += MAX(regmatch[0].rm_eo, 1);
---
> 			wbufp += max(regmatch[0].rm_eo, 1);
743c738
< 			bufp += MAX(regmatch[0].rm_eo, 1);
---
> 			bufp += max(regmatch[0].rm_eo, 1);
749c744
< 			warning("Out-of-memory error in regexp matching for element %d",
---
> 			warning(_("Out-of-memory error in regexp matching for element %d"),
761c756
< 			warning("Out-of-memory error in regexp matching for element %d",
---
> 			warning(_("Out-of-memory error in regexp matching for element %d"),
1096c1091
< 		    warning("Out-of-memory error in regexp matching for element %d",
---
> 		    warning(_("Out-of-memory error in regexp matching for element %d"),
1858c1853
< 	    if (!utf8Valid(s)) error(("input string %d is invalid UTF-8"), i+1);
---
> 	    if (!utf8Valid(s)) error(_("input string %d is invalid UTF-8"), i+1);
1862c1857
< 		error(("input string %d is invalid in this locale"), i+1);
---
> 		error(_("input string %d is invalid in this locale"), i+1);
2026c2021
< 		warning("Out-of-memory error in regexp matching for element %d",
---
> 		warning(_("Out-of-memory error in regexp matching for element %d"),
2212c2207
< 	    warning("Out-of-memory error in regexp matching for element %d",
---
> 	    warning(_("Out-of-memory error in regexp matching for element %d"),
2704c2699
< 	    if (n > INT_MAX) error("too long a vector");
---
> 	    if (n > INT_MAX) error(_("vector is too long"));
2794c2789
< 			warning("Out-of-memory error in regexp matching for element %d",
---
> 			warning(_("Out-of-memory error in regexp matching for element %d"),
3014c3009
< 		    warning("Out-of-memory error in regexp matching for element %d",
---
> 		    warning(_("Out-of-memory error in regexp matching for element %d"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/gzio.h R/src/main/gzio.h
37c37
< 
---
> #include <Localization.h>
40c40
< #ifdef Win32
---
> #ifdef _WIN32
47c47
< #ifdef Win32
---
> #ifdef _WIN32
289c289
< 	warning("invalid or incomplete compressed data");
---
> 	warning(_("invalid or incomplete compressed data"));
292c292
< 	warning("error reading the file");
---
> 	warning(_("error reading the file"));
349c349
< 		warning("invalid or incomplete compressed data");
---
> 		warning(_("invalid or incomplete compressed data"));
371c371
< 	    warning("invalid or incomplete compressed data");
---
> 	    warning(_("invalid or incomplete compressed data"));
373c373
< 	    warning("error reading the file");
---
> 	    warning(_("error reading the file"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/identical.c R/src/main/identical.c
23a24
> #include <Localization.h>
51,54c52,61
<     if (nargs < 5)
< 	error("%d arguments passed to .Internal(%s) which requires %d",
< 	      length(args), PRIMNAME(op), PRIMARITY(op));
< 
---
>     if (nargs < 5) {
>            char *primname = PRIMNAME(op);
>            const int bufsize = strlen(".Internal()") + strlen(primname);
>            char result [bufsize];
>            snprintf(result, bufsize, ".Internal(%s)", primname);
>             error(n_("%d argument passed to '%s' function which requires %d",
>                      "%d arguments passed to '%s' function which requires %d",
>                            (unsigned long) length(args)),
>                   length(args), result, PRIMARITY(op));
>     }
311c318
< 	printf("Unknown Type: %s (%x)\n", type2char(TYPEOF(x)), TYPEOF(x));
---
> 	printf(_("Unknown Type: %s (%x)\n"), type2char(TYPEOF(x)), TYPEOF(x));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/inspect.c R/src/main/inspect.c
30a31
> #include <Localization.h>
55,56c56
< 	Rprintf("<namespace:%s>",
< 		translateChar(STRING_ELT(R_NamespaceEnvSpec(x), 0)));
---
> 	Rprintf("<namespace:%s>", translateChar(STRING_ELT(R_NamespaceEnvSpec(x), 0)));
147,148c147,152
<     if (TYPEOF(v) == SYMSXP)
< 	Rprintf("\"%s\"%s", EncodeChar(PRINTNAME(v)), (SYMVALUE(v) == R_UnboundValue) ? "" : " (has value)");
---
>     if (TYPEOF(v) == SYMSXP) {
> 	if(SYMVALUE(v) == R_UnboundValue)
> 	  Rprintf("\"%s\"", EncodeChar(PRINTNAME(v)));
> 	else
> 	  Rprintf(_("\"%s\" (has value)"), EncodeChar(PRINTNAME(v)));
> 	}
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/internet.c R/src/main/internet.c
23a24
> #include <Localization.h>
201c202
<     if (length(sport) != 1) error("invalid 'socket' argument");
---
>     if (length(sport) != 1) error(_("invalid '%s' argument"), "socket");
215c216
<     if (length(ssock) != 1) error("invalid 'socket' argument");
---
>     if (length(ssock) != 1) error(_("invalid '%s' argument"), "socket");
225c226
< 	error("Error reading data in Rsockread");
---
> 	error(_("Error reading data in 'Rsockread()' function"));
235c236
<     if (length(ssock) != 1) error("invalid 'socket' argument");
---
>     if (length(ssock) != 1) error(_("invalid '%s' argument"), "socket");
248c249
<     if (length(sport) != 1) error("invalid 'port' argument");
---
>     if (length(sport) != 1) error(_("invalid '%s' argument"), "port");
260c261
<     if (length(ssock) != 1) error("invalid 'socket' argument");
---
>     if (length(ssock) != 1) error(_("invalid '%s' argument"), "socket");
279c280
<     if (length(ssock) != 1) error("invalid 'socket' argument");
---
>     if (length(ssock) != 1) error(_("invalid '%s' argument"), "socket");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/lapack.c R/src/main/lapack.c
23a24
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/localecharset.c R/src/main/localecharset.c
620c620
< #ifdef Win32
---
> #ifdef _WIN32
728c728
< #ifndef Win32
---
> #ifndef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/logic.c R/src/main/logic.c
24a25
> #include <Localization.h>
66c67
< #define isRaw(x) (TYPEOF(x) == RAWSXP)
---
> //#define isRaw(x) (TYPEOF(x) == RAWSXP)
261c262
< 	UNIMPLEMENTED_TYPE("lunary", arg);
---
> 	UNIMPLEMENTED_TYPE("lunary()", arg);
276,277c277
< 	error(_("'%s' operator requires 2 arguments"),
< 	      PRIMVAL(op) == 1 ? "&&" : "||");
---
> 	error(_("'%s' operator requires 2 arguments"), PRIMVAL(op) == 1 ? "&&" : "||");
283,284c283
< 	errorcall(call, _("invalid 'x' type in 'x %s y'"),
< 		  PRIMVAL(op) == 1 ? "&&" : "||");
---
> 	errorcall(call, _("invalid '%s' type in 'x %s y'"), "x", PRIMVAL(op) == 1 ? "&&" : "||");
292c291
< 	    errorcall(call, _("invalid 'y' type in 'x %s y'"),	\
---
> 	    errorcall(call, _("invalid '%s' type in 'x %s y'"),	"y", \
370c369
< 	error(_("Unary operator `!' called with two arguments"));
---
> 	error(_("Unary operator '!' called with two arguments"));
436c435
< 	error("bad op value for do_logic3");
---
> 	error(_("bad operator value for 'do_logic3()' function"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/main.c R/src/main/main.c
34c34,35
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
105c106
< 		PrintWarnings();
---
> 		PrintWarnings(NULL);
266c267
< 	    PrintWarnings();
---
> 	    PrintWarnings(NULL);
399c400
< 	    PrintWarnings();
---
> 	    PrintWarnings(NULL);
439c440
< #ifndef Win32
---
> #ifndef _WIN32
446c447
<     if (!R_ignore_SIGPIPE) error("ignoring SIGPIPE signal");
---
>     if (!R_ignore_SIGPIPE) error(_("ignoring 'SIGPIPE' signal"));
451c452
< #ifdef Win32
---
> #ifdef _WIN32
462c463,465
< 	    REprintf("\nTraceback:\n");
---
> 	    REprintf("\n");
> 	    REprintf(_("Traceback:"));
> 	    REprintf("\n");
475,478c478,481
<     if(signum == SIGILL)
< 	error("caught access violation - continue with care");
<     else
< 	error("caught access violation - continue with care");
---
> //    if(signum == SIGILL)
> 	error(_("caught access violation - continue with care"));
> //    else
> //	error(_("caught access violation - continue with care"));
507c510,511
< 	    REprintf(_("Error: segfault from C stack overflow\n"));
---
> 	    REprintf(_("Error: segfault from C stack overflow"));
> 	    REprintf("\n");
520,523c524,527
<     /* Do not translate these messages */
<     REprintf("\n *** caught %s ***\n",
< 	     signum == SIGILL ? "illegal operation" :
< 	     signum == SIGBUS ? "bus error" : "segfault");
---
>     if(signum == SIGILL) REprintf(_("\n *** caught illegal operation ***\n"));
>     else if(signum == SIGBUS) REprintf(_("\n *** caught bus error ***\n"));
>     else REprintf(_("\n *** caught seqfault ***\n"));
> 
530c534,535
< 		s = "illegal opcode";
---
> 	REprintf(_("address %p, cause: illegal opcode"), ip->si_addr);
> 	REprintf("\n");
535c540,541
< 		s = "illegal operand";
---
> 	REprintf(_("address %p, cause: illegal operand"), ip->si_addr);
> 	REprintf("\n");
540c546,547
< 		s = "illegal addressing mode";
---
> 	REprintf(_("address %p, cause: illegal addressing mode"), ip->si_addr);
> 	REprintf("\n");
545c552,553
< 		s = "illegal trap";
---
> 	REprintf(_("address %p, cause: illegal trap"), ip->si_addr);
> 	REprintf("\n");
550c558,559
< 		s = "coprocessor error";
---
> 	REprintf(_("address %p, cause: coprocessor error"), ip->si_addr);
> 	REprintf("\n");
554c563,564
< 		s = "unknown";
---
> 	REprintf(_("address %p, cause: unknown"), ip->si_addr);
> 	REprintf("\n");
561c571,572
< 		s = "invalid alignment";
---
> 	REprintf(_("address %p, cause: invalid alignment"), ip->si_addr);
> 	REprintf("\n");
566c577,578
< 		s = "non-existent physical address";
---
> 	REprintf(_("address %p, cause: non-existent physical address"), ip->si_addr);
> 	REprintf("\n");
571c583,584
< 		s = "object specific hardware error";
---
> 	REprintf(_("address %p, cause: object specific hardware error"), ip->si_addr);
> 	REprintf("\n");
575c588,589
< 		s = "unknown";
---
> 	REprintf(_("address %p, cause: unknown"), ip->si_addr);
> 	REprintf("\n");
582c596,597
< 		s = "memory not mapped";
---
> 	REprintf(_("address %p, cause: memory not mapped"), ip->si_addr);
> 	REprintf("\n");
587c602,603
< 		s = "invalid permissions";
---
> 	REprintf(_("address %p, cause: invalid permissions"), ip->si_addr);
> 	REprintf("\n");
591c607,608
< 		s = "unknown";
---
> 	REprintf(_("address %p, cause: unknown"), ip->si_addr);
> 	REprintf("\n");
594d610
< 	REprintf("address %p, cause '%s'\n", ip->si_addr, s);
601c617,619
< 	    REprintf("\nTraceback:\n");
---
> 	    REprintf("\n");
> 	    REprintf(_("Traceback:"));
> 	    REprintf("\n");
613,617c631
< 	REprintf("\nPossible actions:\n1: %s\n2: %s\n3: %s\n4: %s\n",
< 		 "abort (with core dump, if enabled)",
< 		 "normal R exit",
< 		 "exit R without saving workspace",
< 		 "exit R saving workspace");
---
> 	REprintf(_("\nPossible actions:\n1: abort (with core dump, if enabled)\n2: normal R exit\n3: exit R without saving workspace\n4: exit R saving workspace\n"));
619,620c633
< 	    if(R_ReadConsole("Selection: ", ConsoleBuf, CONSOLE_BUFFER_SIZE,
< 			     0) > 0) {
---
> 	    if(R_ReadConsole(_("Selection: "), ConsoleBuf, CONSOLE_BUFFER_SIZE, 0) > 0) {
627c640
< 	REprintf("R is aborting now ...\n");
---
> 	REprintf(_("R is aborting now ...\n"));
630c643
< 	REprintf("An irrecoverable exception occurred. R is aborting now ...\n");
---
> 	REprintf(_("An irrecoverable exception occurred. R is aborting now ...\n"));
659c672
< 	    warning("failed to set alternate signal stack");
---
> 	    warning(_("failed to set alternate signal stack"));
661c674
< 	warning("failed to allocate alternate signal stack");
---
> 	warning(_("failed to allocate alternate signal stack"));
683c696
< #ifndef Win32
---
> #ifndef _WIN32
796c809
< #ifdef Win32
---
> #ifdef _WIN32
806,807c819
< 	    snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		     "Setting LC_CTYPE=%s failed\n", p);
---
> 	    snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_CTYPE=%s failed\n"), p);
810,811c822
< 		snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 			 "Setting LC_COLLATE=%s failed\n", p);
---
> 		snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_COLLATE=%s failed\n"), p);
815,816c826
< 		snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 			 "Setting LC_TIME=%s failed\n", p);
---
> 		snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_TIME=%s failed\n"), p);
820,821c830
< 		snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 			 "Setting LC_MONETARY=%s failed\n", p);
---
> 		snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_MONETARY=%s failed\n"), p);
833,834c842
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_CTYPE failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_CTYPE failed, using \"C\"\n"));
836,837c844
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_COLLATE failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_COLLATE failed, using \"C\"\n"));
839,840c846
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_TIME failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_TIME failed, using \"C\"\n"));
843,844c849
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_MESSAGES failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_MESSAGES failed, using \"C\"\n"));
849,850c854
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_MONETARY failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_MONETARY failed, using \"C\"\n"));
854,855c858
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_PAPER failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_PAPER failed, using \"C\"\n"));
859,860c862
< 	snprintf(deferred_warnings[ndeferred_warnings++], 250,
< 		 "Setting LC_MEASUREMENT failed, using \"C\"\n");
---
> 	snprintf(deferred_warnings[ndeferred_warnings++], 250, _("Setting LC_MEASUREMENT failed, using \"C\"\n"));
1069,1070c1071
< 	REprintf(_("During startup - "));
< 	PrintWarnings();
---
> 	PrintWarnings(n_("Warning message during startup:", "Warning messages during startup:", R_CollectWarnings));
1129c1130
< 	Rprintf("where %d", lct++);
---
> 	Rprintf(_("where %d"), lct++);
1276c1277
< 	Rprintf("Called from: ");
---
> 	Rprintf(_("Called from: "));
1281c1282
< 	    Rprintf("top level \n");
---
> 	    Rprintf(_("top level \n"));
1367c1368
< 	    warning(_("save=\"ask\" in non-interactive use: command-line default will be used"));
---
> 	    warning(_("save=\"ask\" is in non-interactive use: command-line default will be used"));
1375c1376
< 	error(_("unrecognized value of 'save'"));
---
> 	error(_("unrecognized value of 'save' argument"));
1378c1379
< 	warning(_("invalid 'status', 0 assumed"));
---
> 	warning(_("invalid 'status' argument, 0 assumed"));
1383c1384
< 	warning(_("invalid 'runLast', FALSE assumed"));
---
> 	warning(_("invalid 'runLast' argument, FALSE assumed"));
1455c1456
< 	return(FALSE); /* error("there are no task callbacks registered"); */
---
> 	return(FALSE); /* error(_("there are no task callbacks registered")); */
1492c1493
< 	error(_("negative index passed to R_removeTaskCallbackByIndex"));
---
> 	error(_("negative index passed to 'R_removeTaskCallbackByIndex()' function"));
1605,1607c1606,1608
< 	    REprintf(_("warning messages from top-level task callback '%s'\n"),
< 		     h->name);
< 	    PrintWarnings();
---
> 	    REprintf(_("warning messages from top-level task callback '%s'"), h->name);
> 	    REprintf("\n");
> 	    PrintWarnings(NULL);
1667c1668
< 	/* warning("error occurred in top-level task callback\n"); */
---
> 	/* warning(_("error occurred in top-level task callback\n")); */
1709c1710
< #ifndef Win32
---
> #ifndef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/mapply.c R/src/main/mapply.c
23a24
> #include <Localization.h>
76c77
< 	error(_("argument 'MoreArgs' of 'mapply' is not a list"));
---
> 	error(_("argument 'MoreArgs' of 'mapply()' function is not a list"));
113c114
< 	    warning(_("longer argument not a multiple of length of shorter"));
---
> 	    warning(_("longer argument is not a multiple of length of shorter"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/match.c R/src/main/match.c
45c45,46
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
179,180c180,183
< #define ARGUSED(x) LEVELS(x)
< #define SET_ARGUSED(x,v) SETLEVELS(x,v)
---
> //#define ARGUSED(x) LEVELS(x)
> static R_INLINE int ARGUSED(SEXP x) { return LEVELS(x); }
> //#define SET_ARGUSED(x,v) SETLEVELS(x,v)
> static R_INLINE void SET_ARGUSED(SEXP x, int v) { SETLEVELS(x, v); }
234c237
< 	                      _("formal argument \"%s\" matched by multiple actual arguments"),
---
> 	                      _("formal argument '%s' matched by multiple actual arguments"),
277c280
< 				_("formal argument \"%s\" matched by multiple actual arguments"),
---
> 				_("formal argument '%s' matched by multiple actual arguments"),
280,283c283
< 			    warningcall(call,
< 					_("partial argument match of '%s' to '%s'"),
< 					CHAR(PRINTNAME(TAG(b))),
< 					CHAR(PRINTNAME(TAG(f))) );
---
> 			    warningcall(call, _("partial argument match of '%s' to '%s'"), CHAR(PRINTNAME(TAG(b))), CHAR(PRINTNAME(TAG(f))) );
391c391
< 		      ngettext("unused argument %s",
---
> 		      n_("unused argument %s",
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/memory.c R/src/main/memory.c
64c64
< #ifdef Win32
---
> #ifdef _WIN32
86a87
> #include <Localization.h>
90a92
> #include <R_ext/Minmax.h>
94c96
< #if defined(Win32)
---
> #if defined(_WIN32)
150,151c152,155
< #define OLDTYPE(s) LEVELS(s)
< #define SETOLDTYPE(s, t) SETLEVELS(s, t)
---
> //#define OLDTYPE(s) LEVELS(s)
> inline int OLDTYPE(SEXP x) { return LEVELS(x); }
> //#define SETOLDTYPE(s, t) SETLEVELS(s, t)
> inline void SETOLDTYPE(SEXP x, int v) { SETLEVELS(x, v); }
157,158c161
< 	error("unprotected object (%p) encountered (was %s)",
< 	      x, sexptype2char(OLDTYPE(x)));
---
> 	error(_("unprotected object (%p) encountered (was %s)"), x, sexptype2char(OLDTYPE(x)));
804c807
< 	REprintf("untraced old-to-new reference\n");
---
> 	REprintf(_("untraced old-to-new reference\n"));
813c816
<     REprintf("Node counts %s:\n", where);
---
>     REprintf(_("Node counts %s:\n"), where);
820c823
< 		REprintf("Inconsistent class assignment for node!\n");
---
> 		REprintf(_("Inconsistent class assignment for node!\n"));
830c833
< 		    REprintf("Inconsistent class assignment for node!\n");
---
> 		    REprintf(_("Inconsistent class assignment for node!\n"));
832c835
< 		    REprintf("Inconsistent node generation\n");
---
> 		    REprintf(_("Inconsistent node generation\n"));
840c843
< 		    REprintf("Inconsistent class assignment for node!\n");
---
> 		    REprintf(_("Inconsistent class assignment for node!\n"));
842c845
< 		    REprintf("Inconsistent node generation\n");
---
> 		    REprintf(_("Inconsistent node generation\n"));
845c848
< 	REprintf("Class: %d, New = %d, Old = %d, OldToNew = %d, Total = %d\n",
---
> 	REprintf(_("Class: %d, New = %d, Old = %d, OldToNew = %d, Total = %d\n"),
855,856c858,861
<     REprintf("\n%s, VSize = %lu", full_gc ? "Full" : "Minor",
< 	     R_SmallVallocSize + R_LargeVallocSize);
---
>     if(full_gc)
>       REprintf("\nFull, VSize = %lu", R_SmallVallocSize + R_LargeVallocSize);
>     else
>       REprintf("\nMinor, VSize = %lu", R_SmallVallocSize + R_LargeVallocSize);
860c865
< 	REprintf(", class %d: %d", i, OldCount);
---
> 	REprintf((", class %d: %d"), i, OldCount);
873,874c878
<     REprintf("Node occupancy: %.0f%%\nVector occupancy: %.0f%%\n",
< 	     100.0 * node_occup, 100.0 * vect_occup);
---
>     REprintf(_("Node occupancy: %.0f%%\nVector occupancy: %.0f%%\n"), 100.0 * node_occup, 100.0 * vect_occup);
879,880c883,884
<     REprintf("Total allocation: %lu\n", alloc);
<     REprintf("Ncells %lu\nVcells %lu\n", R_NSize, R_VSize);
---
>     REprintf(_("Total allocation: %lu\n"), alloc);
>     REprintf(_("Ncells %lu\nVcells %lu\n"), R_NSize, R_VSize);
891c895
< 	REprintf("Class: %d, pages = %d, maxrel = %d, released = %d\n", i,
---
> 	REprintf(_("Class: %d, pages = %d, maxrel = %d, released = %d\n"), i,
895c899
< 	REprintf("Allocated = %d, in use = %d\n", R_GenHeap[i].AllocCount, n);
---
> 	REprintf(_("Allocated = %d, in use = %d\n"), R_GenHeap[i].AllocCount, n);
1189c1193
< 	    REprintf("****snapping into wrong generation\n");
---
> 	    REprintf(_("****snapping into wrong generation\n"));
1627c1631
< 		    REprintf("****snapping into wrong generation\n");
---
> 		    REprintf(_("****snapping into wrong generation\n"));
2103c2107
< 	R_Suicide("couldn't allocate memory for pointer stack");
---
> 	R_Suicide(_("couldn't allocate memory for pointer stack"));
2160c2164
< 	R_Suicide("couldn't allocate node stack");
---
> 	R_Suicide(_("couldn't allocate node stack"));
2626c2630
< 	error("use of allocVector(CHARSXP ...) is defunct\n");
---
> 	error(_("use of allocVector(CHARSXP ...) is defunct\n"));
2688c2692
< 	if (length > R_SHORT_LEN_MAX) error("invalid length for pairlist");
---
> 	if (length > R_SHORT_LEN_MAX) error(_("invalid length for pairlist"));
2695c2699
< 	if (length > R_SHORT_LEN_MAX) error("invalid length for pairlist");
---
> 	if (length > R_SHORT_LEN_MAX) error(_("invalid length for pairlist"));
3009d3012
< #define R_MAX(a,b) (a) < (b) ? (b) : (a)
3072,3073c3075,3076
<     R_N_maxused = R_MAX(R_N_maxused, R_NodesInUse);
<     R_V_maxused = R_MAX(R_V_maxused, R_VSize - VHEAP_FREE());
---
>     R_N_maxused = max(R_N_maxused, R_NodesInUse);
>     R_V_maxused = max(R_V_maxused, R_VSize - VHEAP_FREE());
3088c3091
< 	REprintf("Garbage collection %d = %d", gc_count, gen_gc_counts[0]);
---
> 	REprintf(_("Garbage collection %d = %d"), gc_count, gen_gc_counts[0]);
3091c3094
< 	REprintf(" (level %d) ... ", gens_collected);
---
> 	REprintf(_(" (level %d) ... "), gens_collected);
3109c3112
< 	REprintf("\n%.1f Mbytes of cons cells used (%d%%)\n",
---
> 	REprintf(_("\n%.1f Mbytes of cons cells used (%d%%)\n"),
3114c3117
< 	REprintf("%.1f Mbytes of vectors used (%d%%)\n",
---
> 	REprintf(_("%.1f Mbytes of vectors used (%d%%)\n"),
3137,3138c3140
< 	    error("GC encountered a node (%p) with type FREESXP (was %s)"
< 		  " at memory.c:%d",
---
> 	    error(_("GC encountered a node (%p) with type FREESXP (was %s) at memory.c:%d"),
3143,3144c3145
< 	    error("GC encountered a node (%p) with an unknown SEXP type: %d"
< 		  " at memory.c:%d",
---
> 	    error(_("GC encountered a node (%p) with an unknown SEXP type: %d at memory.c:%d"),
3149,3150c3150
< 	error("GC encountered a node (%p) with an unknown SEXP type: %d"
< 	      " at memory.c:%d",
---
> 	error(_("GC encountered a node (%p) with an unknown SEXP type: %d at memory.c:%d"),
3160c3160
< 	error("internal TRUE value has been modified");
---
> 	error(_("internal TRUE value has been modified"));
3164c3164
< 	error("internal FALSE value has been modified");
---
> 	error(_("internal FALSE value has been modified"));
3169c3169
< 	error("internal logical NA value has been modified");
---
> 	error(_("internal logical NA value has been modified"));
3213c3213
<    PROTECT. error("protect(): stack overflow") would call deparse1,
---
>    PROTECT. error(_("protect(): stack overflow")) would call deparse1,
3247c3247
<     error(ngettext("unprotect(): only %d protected item",
---
>     error(n_("unprotect(): only %d protected item",
3324c3324
<     error(ngettext("R_Reprotect: only %d protected item, can't reprotect index %d",
---
>     error(n_("R_Reprotect: only %d protected item, can't reprotect index %d",
3378,3379c3378
< 	error(_("'Calloc' could not allocate memory (%.0f of %u bytes)"),
< 	      (double) nelem, elsize);
---
> 	error(_("'Calloc()' function could not allocate memory (%.0f of %u bytes)"), (double) nelem, elsize);
3389c3388
< 	error(_("'Realloc' could not re-allocate memory (%.0f bytes)"),
---
> 	error(_("'Realloc()' function could not re-allocate memory (%.0f bytes)"),
3397c3396
<     /* if(!ptr) warning("attempt to free NULL pointer by Free"); */
---
>     /* if(!ptr) warning(_("attempt to free NULL pointer by Free")); */
3659c3658
< 	error("value of 'SET_ATTRIB' must be a pairlist or NULL, not a '%s'",
---
> 	error(_("value of 'SET_ATTRIB' must be a pairlist or NULL, not a '%s'"),
3713c3712
< 	error("LENGTH or similar applied to %s object", type2char(TYPEOF(x)));
---
> 	error(_("LENGTH or similar applied to %s object"), type2char(TYPEOF(x)));
3725c3724
< 	error("SETLENGTH() cannot be applied to an ALTVEC object.");
---
> 	error(_("SETLENGTH() cannot be applied to an ALTVEC object."));
3727,3728c3726
< 	error(_("SETLENGTH() can only be applied to a standard vector, "
< 		"not a '%s'"), type2char(TYPEOF(x)));
---
> 	error(_("SETLENGTH() can only be applied to a standard vector, not a '%s'"), type2char(TYPEOF(x)));
3745,3746c3743,3744
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "CHAR", "CHARSXP", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a charecter, not a '%s'"), "CHAR()",
> 	      type2char(TYPEOF(x)));
3752,3753c3750,3751
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "STRING_ELT", "character vector", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a character vector, not a '%s'"), "STRING_ELT()",
> 	      type2char(TYPEOF(x)));
3767,3768c3765,3766
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "VECTOR_ELT", "list", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a list, not a '%s'"), "VECTOR_ELT()",
> 	      type2char(TYPEOF(x)));
3791c3789
< 	error("cannot get STDVEC_DATAPTR from ALTREP object");
---
> 	error(_("cannot get STDVEC_DATAPTR from ALTREP object"));
3793c3791
< 	error("STDVEC_DATAPTR can only be applied to a vector, not a '%s'",
---
> 	error(_("STDVEC_DATAPTR can only be applied to a vector, not a '%s'"),
3801,3802c3799,3800
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "LOGICAL",  "logical", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a logical, not a '%s'"), "LOGICAL()",
> 	      type2char(TYPEOF(x)));
3809,3810c3807,3808
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "LOGICAL",  "logical", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a logical, not a '%s'"),
> 	      "LOGICAL()", type2char(TYPEOF(x)));
3818,3819c3816,3817
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "INTEGER", "integer", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to an integer, not a '%s'"), "INTEGER()",
> 	      type2char(TYPEOF(x)));
3826,3827c3824,3825
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "INTEGER", "integer", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to an integer, not a '%s'"),
> 	      "INTEGER()", type2char(TYPEOF(x)));
3834,3835c3832,3833
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "RAW", "raw", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a raw, not a '%s'"), "RAW()",
> 	      type2char(TYPEOF(x)));
3842,3843c3840,3841
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "RAW", "raw", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a raw, not a '%s'"),
> 	      "RAW()", type2char(TYPEOF(x)));
3850,3851c3848,3849
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "REAL", "numeric", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a numeric, not a '%s'"), "REAL()",
> 	      type2char(TYPEOF(x)));
3858,3859c3856,3857
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "REAL", "numeric", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a numeric, not a '%s'"),
> 	      "REAL()", type2char(TYPEOF(x)));
3866,3867c3864,3865
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "COMPLEX", "complex", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a complex, not a '%s'"), "COMPLEX()",
> 	      type2char(TYPEOF(x)));
3874,3875c3872,3873
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "COMPLEX", "complex", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a complex, not a '%s'"),
> 	      "COMPLEX()", "complex", type2char(TYPEOF(x)));
3882,3883c3880,3881
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "STRING_PTR", "character", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a character, not a '%s'"),
> 	      "STRING_PTR()", type2char(TYPEOF(x)));
3890,3891c3888,3889
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "STRING_PTR_RO", "character", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a character, not a '%s'"),
> 	      "STRING_PTR_RO()", type2char(TYPEOF(x)));
3903,3904c3901,3902
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "SET_STRING_ELT", "character vector", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a character vector, not a '%s'"), "SET_STRING_ELT()",
> 	      type2char(TYPEOF(x)));
3906c3904
<        error("Value of SET_STRING_ELT() must be a 'CHARSXP' not a '%s'",
---
>        error(_("value of 'SET_STRING_ELT()' function must be a 'CHARSXP' not a '%s'"),
3909,3910c3907
< 	error(_("attempt to set index %lld/%lld in SET_STRING_ELT"),
< 	      (long long)i, (long long)XLENGTH(x));
---
> 	error(_("attempt to set index %ld/%ld in 'SET_STRING_ELT()' function"), (long long)i, (long long)XLENGTH(x));
3926,3927c3923,3924
< 	error("%s() can only be applied to a '%s', not a '%s'",
< 	      "SET_VECTOR_ELT", "list", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function can only be applied to a list, not a '%s'"), "SET_VECTOR_ELT()",
> 	      type2char(TYPEOF(x)));
3930,3931c3927
< 	error(_("attempt to set index %lld/%lld in SET_VECTOR_ELT"),
< 	      (long long)i, (long long)XLENGTH(x));
---
> 	error(_("attempt to set index %ld/%ld in 'SET_VECTOR_ELT()' function"), (long long)i, (long long)XLENGTH(x));
3955c3951
< 	error("CAR/CDR/TAG or similar applied to %s object",
---
> 	error(_("CAR/CDR/TAG or similar applied to %s object"),
3980c3976
< 	error(_("bad value"));
---
> 	error(_("incorrect value"));
4140c4136
< 	error("value of 'SET_CXTAIL' must be a char or NULL, not a '%s'",
---
> 	error(_("value of 'SET_CXTAIL()' function must be a 'char' or NULL, not a '%s'"),
4284c4280
< 	error(_("Rprofmem: cannot open output file '%s'"), filename);
---
> 	error(_("'Rprofmem()': cannot open output file '%s'"), filename);
4320c4316
< 	error("R_AllocStringBuffer( (size_t)-1 ) is no longer allowed");
---
> 	error(_("'R_AllocStringBuffer( (size_t)-1 )' function is no longer allowed"));
4337c4333
< 	error("could not allocate memory (%u Mb) in C function 'R_AllocStringBuffer'",
---
> 	error(_("could not allocate memory (%u Mb) in 'R_AllocStringBuffer()' function"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/mkdtemp.c R/src/main/mkdtemp.c
60c60
< #ifndef Win32
---
> #ifndef _WIN32
151c151
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/names.c R/src/main/names.c
27a28
> #include <Localization.h>
656c657
< #ifdef Win32
---
> #ifdef _WIN32
662c663
< #ifdef Win32
---
> #ifdef _WIN32
1175c1176
< 	R_Suicide("couldn't allocate memory for symbol table");
---
> 	R_Suicide(_("couldn't allocate memory for symbol table"));
1299c1300
< 	    error(_("class name too long in '%s'"), className);
---
> 	    error(_("class name is too long in '%s'"), className);
1304c1305
< 	error(_("class name too long in '%s'"), className);
---
> 	error(_("class name is too long in '%s'"), className);
1309c1310
< 	    error(_("class name too long in '%s'"), className);
---
> 	    error(_("class name is too long in '%s'"), className);
1314c1315
< 	error(_("class name too long in '%s'"), className);
---
> 	error(_("class name is too long in '%s'"), className);
1333c1334
< 	errorcall(call, _("invalid .Internal() argument"));
---
> 	errorcall(call, _("invalid '%s' argument"), ".Internal()");
1336c1337
< 	errorcall(call, _("invalid .Internal() argument"));
---
> 	errorcall(call, _("invalid '%s' argument"), ".Internal()");
1338c1339
< 	errorcall(call, _("there is no .Internal function '%s'"),
---
> 	errorcall(call, _("there is no '.Internal' function '%s'"),
1359,1360c1360
< 	    errorcall(call,
< 		      ".Internal(%s()) not called from a base namespace\n", fn);
---
> 	    errorcall(call, _("'.Internal(%s())' not called from a base namespace\n"), fn);
1364,1365c1364
< 	    errorcall(call,
< 		      ".Internal(%s()) called from namespace '%s'\n", fn, ns);
---
> 	    errorcall(call, _("'.Internal(%s())' called from namespace '%s'\n"), fn, ns);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/objects.c R/src/main/objects.c
30a31
> #include <Localization.h>
49c50
< 		    error(_("formal argument \"%s\" matched by multiple actual arguments"), tag);
---
> 		    error(_("formal argument '%s' matched by multiple actual arguments"), tag);
59c60
< 			error(_("formal argument \"%s\" matched by multiple actual arguments"), tag);
---
> 			error(_("formal argument '%s' matched by multiple actual arguments"), tag);
318c319
< 		REprintf("S3 method lookup found '%s' on search path \n",
---
> 		REprintf(_("S3 method lookup found '%s' on search path \n"),
523c524
< 	errorcall(call, _("'generic' argument must be a character string"));
---
> 	errorcall(call, _("'%s' argument must be a character string"), "generic");
536c537
< 	errorcall(call, _("'UseMethod' used in an inappropriate fashion"));
---
> 	errorcall(call, _("'UseMethod()' used in an inappropriate fashion"));
565,566c566,567
<     if (usemethod(translateChar(STRING_ELT(generic, 0)), obj, call, CDR(args),
< 		  env, callenv, defenv, &ans) == 1) {
---
> 
>     if (usemethod(translateChar(STRING_ELT(generic, 0)), obj, call, CDR(args), env, callenv, defenv, &ans) == 1) {
695c696
< 	error(_("'NextMethod' called from outside a function"));
---
> 	error(_("'NextMethod()' called from outside a function"));
701c702
<        error(_("'NextMethod' called from an anonymous function"));
---
>        error(_("'NextMethod()' called from an anonymous function"));
776c777
< 	error(_("invalid generic argument to 'NextMethod'"));
---
> 	error(_("invalid generic argument passed to '%s' function"), "NextMethod()");
788c789
< 	    error(_("invalid 'group' argument found in 'NextMethod'"));
---
> 	    error(_("invalid 'group' argument found in 'NextMethod()' function"));
994c995
< 	error(_("'what' must be a character vector"));
---
> 	error(_("'%s' argument must be a character vector"), "what");
998c999
< 	error(_("'which' must be a length 1 logical vector"));
---
> 	error(_("'%s' argument must be a logical vector of length 1"), "which");
1143c1144,1147
< #define NOT_METHODS_DISPATCH_PTR(ptr) (ptr == 0 || ptr == dispatchNonGeneric)
---
> //#define NOT_METHODS_DISPATCH_PTR(ptr) (ptr == 0 || ptr == dispatchNonGeneric)
> static inline Rboolean NOT_METHODS_DISPATCH_PTR(R_stdGen_ptr_t ptr) {
>   return (ptr == 0 || ptr == dispatchNonGeneric);
> }
1173c1177
< 	    error(_("'onOff' must be TRUE or FALSE"));
---
> 	    error(_("'%s' argument must be TRUE or FALSE"), "onOff");
1180c1184
< 	    warning("R_isMethodsDispatchOn(TRUE) called -- may not work correctly");
---
> 	    warning(_("R_isMethodsDispatchOn(TRUE) called -- may not work correctly"));
1238,1239c1242
< 	error(_("unable to find a non-generic version of function \"%s\""),
< 	      translateChar(asChar(name)));
---
> 	error(_("unable to find a non-generic version of function '%s'"), translateChar(asChar(name)));
1269,1270c1272
< 	warningcall(call,
< 		    _("'standardGeneric' called without 'methods' dispatch enabled (will be ignored)"));
---
> 	warningcall(call, _("'standardGeneric' called without 'methods' dispatch enabled (will be ignored)"));
1277,1278c1279
< 	errorcall(call,
< 		  _("argument to 'standardGeneric' must be a non-empty character string"));
---
> 	errorcall(call, _("argument passed to '%s' function must be a non-empty character string"), "standardGeneric()");
1307c1308
< 	error(_("argument '%s' must be a character string"), "code");
---
> 	error(_("'%s' argument must be a character string"), "code");
1327c1328
<           error("'internal' slot does not name an internal function: %s",
---
>           error(_("'internal' slot does not name an internal function: %s"),
1437,1438c1438
< 	    error(_("the formal definition of a primitive generic must be a function object (got type '%s')"),
< 		  type2char(TYPEOF(fundef)));
---
> 	    error(_("the formal definition of a primitive generic must be a function object (got type '%s')"), type2char(TYPEOF(fundef)));
1467c1467
< 	error(_("object returned as generic function \"%s\" does not appear to be one"), PRIMNAME(op));
---
> 	error(_("object returned as generic function '%s' does not appear to be one"), PRIMNAME(op));
1606,1607c1606
< 	error(_("primitive function \"%s\" has been set for methods but no generic function supplied"),
< 	      PRIMNAME(op));
---
> 	error(_("primitive function '%s' has been set for methods but no generic function supplied"), PRIMNAME(op));
1657c1656
< 	error(_("R_getClassDef(.) called with NULL string pointer"));
---
> 	error(_("'R_getClassDef(.)' called with NULL string pointer"));
1708,1709c1707
< 	error(_("trying to generate an object from a virtual class (\"%s\")"),
< 	      translateChar(asChar(e)));
---
> 	error(_("trying to generate an object from a virtual class (\"%s\")"), translateChar(asChar(e)));
1743c1741
< 	error("invalid '%s' argument", "flag");
---
> 	error(_("invalid '%s' argument"), "flag");
1745c1743
< 	error("invalid '%s' argument", "complete");
---
> 	error(_("invalid '%s' argument"), "complete");
1757c1755
< 	error("'R_get_primname' called on a non-primitive");
---
> 	error(_("'R_get_primname()' called on a non-primitive"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/options.c R/src/main/options.c
25c25,26
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
27c28
< #include "Print.h"
---
> #include <Print.h>
109c110
< 		error("option %s has NULL value", CHAR(PRINTNAME(tag)));
---
> 		error(_("option %s has NULL value"), CHAR(PRINTNAME(tag)));
392c393
< 	error(_("'%s' must be a character string"), "x");
---
> 	error(_("'%s' argument must be a character string"), "x");
473c474
< 	UNIMPLEMENTED_TYPE("options", args);
---
> 	UNIMPLEMENTED_TYPE("options()", args);
490c491
< 	    UNIMPLEMENTED_TYPE("options", args);
---
> 	    UNIMPLEMENTED_TYPE("options()", args);
643c644
< 		    warning(_("'OutDec' must be a string of one character"));
---
> 		    warning(_("'%s' argument must be a string of one character"), "OutDec");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/paste.c R/src/main/paste.c
31c31,32
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
33,34c34
< 
< #define imax2(x, y) ((x < y) ? y : x)
---
> #include <R_ext/Minmax.h>
118c118
< 		error(_("non-string argument to .Internal(%s)"), PRIMNAME(op));
---
> 		error(_("non-string argument passed to .Internal(%s)"), PRIMNAME(op));
321c321
< 		error(_("non-string argument to .Internal(%s)"), PRIMNAME(op));
---
> 		error(_("non-string argument passed to .Internal(%s)"), PRIMNAME(op));
380c380
< #ifdef Win32
---
> #ifdef _WIN32
477c477
< 	    warning(_("'decimal.mark' must be a string of one character"));
---
> 	    warning(_("'%s' argument must be a string of one character"), "decimal.mark");
492c492
< 	    w = imax2(w, wd);
---
> 	    w = max(w, wd);
503c503
< 	    w = imax2(w, wd);
---
> 	    w = max(w, wd);
513c513
< 	    w = imax2(w, wd);
---
> 	    w = max(w, wd);
524c524
< 	    w = imax2(w, wd); wi = imax2(wi, wd);
---
> 	    w = max(w, wd); wi = max(wi, wd);
568,569c568,569
< 			w = imax2(w, Rstrlen(STRING_ELT(xx, i), 0));
< 		    else if (na) w = imax2(w, R_print.na_width);
---
> 			w = max(w, Rstrlen(STRING_ELT(xx, i), 0));
> 		    else if (na) w = max(w, R_print.na_width);
575c575
< 		    cnt = imax2(cnt, LENGTH(STRING_ELT(xx, i)) + imax2(0, w-il));
---
> 		    cnt = max(cnt, LENGTH(STRING_ELT(xx, i)) + max(0, w-il));
577c577
< 		    cnt = imax2(cnt, R_print.na_width + imax2(0, w-R_print.na_width));
---
> 		    cnt = max(cnt, R_print.na_width + max(0, w-R_print.na_width));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/platform.c R/src/main/platform.c
40a41
> #include <Localization.h>
213c214
< #ifdef Win32
---
> #ifdef _WIN32
289c290
< #ifdef Win32
---
> #ifdef _WIN32
359c360
< 	error(_("invalid filename specification"));
---
> 	error(_("invalid '%s' specification"), "filename");
371c372
< #ifdef Win32
---
> #ifdef _WIN32
377c378
< 	    error(_("invalid filename specification"));
---
> 	    error(_("invalid '%s' specification"), "filename");
517,518c518
< 	    warning(_("cannot create file '%s', reason '%s'"),
< 		    translateChar(STRING_ELT(fn, i)), strerror(errno));
---
> 	    warning(_("cannot create file '%s', reason '%s'"), translateChar(STRING_ELT(fn, i)), strerror(errno));
538c538
< #ifdef Win32
---
> #ifdef _WIN32
544,545c544
< 		warning(_("cannot remove file '%s', reason '%s'"),
< 			translateChar(STRING_ELT(f, i)), strerror(errno));
---
> 		warning(_("cannot remove file '%s', reason '%s'"), translateChar(STRING_ELT(f, i)), strerror(errno));
583c582
< #ifdef Win32
---
> #ifdef _WIN32
598c597
< #ifdef Win32
---
> #ifdef _WIN32
604c603
< 	    	error(_("'%s' path too long"), "from");
---
> 	    	error(_("'%s' path is too long"), "from");
613,614c612
< 		warning(_("cannot symlink '%ls' to '%ls', reason '%s'"),
< 			from, to, formatError(GetLastError()));
---
> 		warning(_("cannot symlink '%ls' to '%ls', reason '%s'"), from, to, formatError(GetLastError()));
635,636c633
< 		warning(_("cannot symlink '%s' to '%s', reason '%s'"),
< 			from, to, strerror(errno));
---
> 		warning(_("cannot symlink '%s' to '%s', reason '%s'"), from, to, strerror(errno));
677c674
< #ifdef Win32
---
> #ifdef _WIN32
681c678
< 	    	error(_("'%s' path too long"), "from");
---
> 	    	error(_("'%s' path is too long"), "from");
686,687c683
< 		warning(_("cannot link '%ls' to '%ls', reason '%s'"),
< 			from, to, formatError(GetLastError()));
---
> 		warning(_("cannot link '%ls' to '%ls', reason '%s'"), from, to, formatError(GetLastError()));
708,709c704
< 		warning(_("cannot link '%s' to '%s', reason '%s'"),
< 			from, to, strerror(errno));
---
> 		warning(_("cannot link '%s' to '%s', reason '%s'"), from, to, strerror(errno));
722c717
< #ifdef Win32
---
> #ifdef _WIN32
732c727
< #ifdef Win32
---
> #ifdef _WIN32
749c744
< 	error(_("'from' and 'to' are of different lengths"));
---
> 	error(_("'from' and 'to' arguments are of different lengths"));
757c752
< #ifdef Win32
---
> #ifdef _WIN32
760c755
< 	    error(_("expanded 'from' name too long"));
---
> 	    error(_("expanded '%s' name is too long"), "from");
764c759
< 	    error(_("expanded 'to' name too long"));
---
> 	    error(_("expanded '%s' name is too long"), "to");
775c770
< 	    error(_("expanded 'from' name too long"));
---
> 	    error(_("expanded '%s' name is too long"), "from");
779c774
< 	    error(_("expanded 'to' name too long"));
---
> 	    error(_("expanded '%s' name is too long"), "to");
783,784c778
< 	    warning(_("cannot rename file '%s' to '%s', reason '%s'"),
< 		    from, to, strerror(errno));
---
> 	    warning(_("cannot rename file '%s' to '%s', reason '%s'"), from, to, strerror(errno));
800c794
< #ifdef Win32
---
> #ifdef _WIN32
828c822
< #ifdef Win32
---
> #ifdef _WIN32
838c832
< 	error(_("invalid filename argument"));
---
> 	error(_("invalid '%s' argument"), "filename");
846c840
< #elif defined(Win32)
---
> #elif defined(_WIN32)
875c869
< #ifdef Win32
---
> #ifdef _WIN32
881c875
< #ifdef Win32
---
> #ifdef _WIN32
898c892
< #ifdef Win32
---
> #ifdef _WIN32
991c985
< #ifdef Win32
---
> #ifdef _WIN32
1031c1025
< #ifdef Win32
---
> #ifdef _WIN32
1048c1042
< #ifdef Win32
---
> #ifdef _WIN32
1057c1051
< 	error(_("invalid filename argument"));
---
> 	error(_("invalid '%s' argument"), "filename");
1061c1055
< #ifdef Win32
---
> #ifdef _WIN32
1112c1106
< #ifdef Win32
---
> #ifdef _WIN32
1152c1146
< #ifdef Win32
---
> #ifdef _WIN32
1179c1173
< #ifdef Win32
---
> #ifdef _WIN32
1288c1282
< #ifdef Win32
---
> #ifdef _WIN32
1365c1359
< #ifdef Win32
---
> #ifdef _WIN32
1385c1379
< #ifdef Win32
---
> #ifdef _WIN32
1406c1400
< #ifndef Win32
---
> #ifndef _WIN32
1414c1408
< 	error(_("file choice cancelled"));
---
> 	error(_("file choice was cancelled"));
1416c1410
< 	error(_("file name too long"));
---
> 	error(_("file name is too long"));
1426c1420
< #ifdef Win32
---
> #ifdef _WIN32
1462c1456
< #ifdef Win32
---
> #ifdef _WIN32
1478,1479c1472
< 	warning("cannot get info on '%ls', reason '%s'",
< 		name, formatError(GetLastError()));
---
> 	warning(_("cannot get info on '%ls', reason '%s'"), name, formatError(GetLastError()));
1493,1494c1486
< 	warning("cannot open reparse point '%ls', reason '%s'",
< 		name, formatError(GetLastError()));
---
> 	warning(_("cannot open reparse point '%ls', reason '%s'"), name, formatError(GetLastError()));
1505,1506c1497
< 	warning("cannot delete reparse point '%ls', reason '%s'",
< 		name, formatError(GetLastError()));
---
> 	warning(_("cannot delete reparse point '%ls', reason '%s'"), name, formatError(GetLastError()));
1637c1628
< #ifdef Win32
---
> #ifdef _WIN32
1826c1817
< #ifdef Win32
---
> #ifdef _WIN32
1855,1856c1846
< 	warning(_("OS reports request to set locale to \"%s\" cannot be honored"),
< 		CHAR(STRING_ELT(locale, 0)));
---
> 	warning(_("OS reports request to set locale to \"%s\" cannot be honored"), CHAR(STRING_ELT(locale, 0)));
1939c1929
< #ifndef Win32
---
> #ifndef _WIN32
2088c2078
< #if defined(Win32)
---
> #if defined(_WIN32)
2124c2114
< #elif defined(Win32)
---
> #elif defined(_WIN32)
2173c2163
< #ifndef Win32
---
> #ifndef _WIN32
2226c2216
< 	warning(_("'%s' already exists"), dir);
---
> 	warning(_("directory '%s' already exists"), dir);
2229,2230c2219
< 	warning(_("cannot create dir '%s', reason '%s'"), dir,
< 		strerror(serrno));
---
> 	warning(_("cannot create directory '%s', reason '%s'"), dir, strerror(serrno));
2252c2241
<     	error(_("'%s' too long"), "path");
---
>     	error(_("'%s' is too long"), "path");
2283c2272
< 	    warning(_("'%ls' already exists"), dir);
---
> 	    warning(_("directory '%ls' already exists"), dir);
2285c2274
<             warning(_("cannot create dir '%ls', reason '%s'"), dir,
---
>             warning(_("cannot create directory '%ls', reason '%s'"), dir,
2291c2280
< 	warning(_("cannot create dir '%ls', reason '%s'"), dir,
---
> 	warning(_("cannot create directory '%ls', reason '%s'"), dir,
2300c2289
< #ifdef Win32
---
> #ifdef _WIN32
2333c2322
< 	warning(_("over-long path"));
---
> 	warning(_("path is too long"));
2346c2335
< 	    warning(_("over-long path"));
---
> 	    warning(_("path is too long"));
2363c2352
< 		warning(_("problem creating directory %ls: %s"),
---
> 		warning(_("problem with creating directory %ls: %s"),
2375c2364
< 		    warning(_("over-long path"));
---
> 		    warning(_("path is too long"));
2384c2373
< 	    warning(_("problem reading dir %ls: %s"), this, strerror(errno));
---
> 	    warning(_("problem with reading directory %ls: %s"), this, strerror(errno));
2395c2384
< 	    warning(_("over-long path length"));
---
> 	    warning(_("path is too long"));
2403c2392
< 		warning(_("problem copying %ls to %ls: %s"),
---
> 		warning(_("problem with copying %ls to %ls: %s"),
2467c2456
< 	    error(_("'%s' path too long"), "to");
---
> 	    error(_("'%s' path is too long"), "to");
2476c2465
< 	    	    error(_("'%s' path too long"), "from");
---
> 	    	    error(_("'%s' path is too long"), "from");
2583c2572
< 	warning(_("over-long path length"));
---
> 	warning(_("path is too long"));
2596c2585
< 	    warning(_("over-long path length"));
---
> 	    warning(_("path is too long"));
2615c2604
< 		warning(_("problem creating directory %s: %s"),
---
> 		warning(_("problem with creating directory %s: %s"),
2627c2616
< 		    warning(_("over-long path length"));
---
> 		    warning(_("path is too long"));
2637,2638c2626
< 	    warning(_("problem reading directory %s: %s"),
< 		    this, strerror(errno));
---
> 	    warning(_("problem with reading directory %s: %s"), this, strerror(errno));
2650c2638
< 	    warning(_("over-long path length"));
---
> 	    warning(_("path is too long"));
2659c2647
< 		warning(_("problem copying %s to %s: %s"),
---
> 		warning(_("problem with copying %s to %s: %s"),
2757c2745
< #ifdef Win32
---
> #ifdef _WIN32
2772c2760
< #ifdef Win32
---
> #ifdef _WIN32
2800c2788
<     if(!m && n) error(_("'mode' must be of length at least one"));
---
>     if(!m && n) error(_("'mode' argument must be of length at least one"));
2814c2802
< #ifdef Win32
---
> #ifdef _WIN32
2821c2809
< #ifdef Win32
---
> #ifdef _WIN32
2841c2829
<     warning("insufficient OS support on this platform");
---
>     warning(_("insufficient OS support on this platform"));
2893c2881
< 		warning("possible truncation of value for element %d", i + 1);
---
> 		warning(_("possible truncation of value for element %d"), i + 1);
2928c2916
< #ifdef Win32
---
> #ifdef _WIN32
2983c2971
< 	#ifdef Win32
---
> 	#ifdef _WIN32
3013c3001
< #ifdef Win32
---
> #ifdef _WIN32
3045c3033
< 	warning("cannot open reparse point '%ls', reason '%s'",
---
> 	warning(_("cannot open reparse point '%ls', reason '%s'"),
3066c3054
< 	warning("cannot set reparse point '%ls', reason '%s'",
---
> 	warning(_("cannot set reparse point '%ls', reason '%s'"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/plot.c R/src/main/plot.c
25a26
> #include <Localization.h>
30c31,32
< #include <Rmath.h> // for Rexp10, imax2
---
> #include <Rmath.h> // for Rexp10
> #include <R_ext/Minmax.h>
50c52
< 	dn = imax2(1, n);
---
> 	dn = max(1, n);
81,82c83
< 		warning("CreateAtVector \"log\"(from axis()): "
< 			"usr[0] = %g > %g = usr[1] !", umin, umax);
---
> 		warning(_("CreateAtVector \"log\"(from axis()): usr[0] = %g > %g = usr[1] !"), umin, umax);
92c93
< 		error("CreateAtVector [log-axis()]: axp[0] = %g < 0!", dn);
---
> 		error(_("CreateAtVector [log-axis()]: axp[0] = %g < 0!"), dn);
94c95
< 		warning("CreateAtVector [log-axis()]: small axp[0] = %g", dn);
---
> 		warning(_("CreateAtVector [log-axis())]: small axp[0] = %g"), dn);
105c106
< 	    REprintf("CreateAtVector [log-axis(), case 1]: (nint, ne) = (%d,%d)\n",
---
> 	    REprintf(_("CreateAtVector [log-axis(), case 1]: (nint, ne) = (%d,%d)\n"),
109,111c110
< 		error("log - axis(), 'at' creation, _LARGE_ range: "
< 		      "ne = %d <= 0 !!\n"
< 		      "\t axp[0:1]=(%g,%g) ==> i = %d;	nint = %d",
---
> 		error(_("log - axis(), 'at' creation, _LARGE_ range: ne = %d <= 0 !!\n\t axp[0:1]=(%g,%g) ==> i = %d;	nint = %d"),
120,122c119
< 		error("log - axis(), 'at' creation, _LARGE_ range: "
< 		      "invalid {xy}axp or par; nint=%d\n"
< 		      "	 axp[0:1]=(%g,%g), usr[0:1]=(%g,%g); i=%d, ni=%d",
---
> 		error(_("log - axis(), 'at' creation, _LARGE_ range: invalid {xy}axp or par; nint=%d\n	 axp[0:1]=(%g,%g), usr[0:1]=(%g,%g); i=%d, ni=%d"),
144,146c141
< 		error("log - axis(), 'at' creation, _MEDIUM_ range: "
< 		      "invalid {xy}axp or par;\n"
< 		      "	 axp[0]= %g, usr[0:1]=(%g,%g)",
---
> 		error(_("log - axis(), 'at' creation, _MEDIUM_ range: invalid {xy}axp or par;\n	 axp[0]= %g, usr[0:1]=(%g,%g)"),
174,176c169
< 		error("log - axis(), 'at' creation, _SMALL_ range: "
< 		      "invalid {xy}axp or par;\n"
< 		      "	 axp[0]= %g, usr[0:1]=(%g,%g)",
---
> 		error(_("log - axis(), 'at' creation, _SMALL_ range: invalid {xy}axp or par;\n	 axp[0]= %g, usr[0:1]=(%g,%g)"),
191c184
< 	    error("log - axis(), 'at' creation: INVALID {xy}axp[3] = %g",
---
> 	    error(_("log - axis(), 'at' creation: INVALID {xy}axp[3] = %g"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/plot3d.c R/src/main/plot3d.c
25a26
> #include <Localization.h>
118c119
< 		    warning(_("contour(): circular/long seglist -- set %s > %d?"), 
---
> 		    warning(_("contour(): circular/long segment list -- set '%s' > %d?"), 
196c197
< 	    warning(_("all z values are equal"));
---
> 	    warning(_("all 'z' values are equal"));
198c199
< 	    warning(_("all z values are NA"));
---
> 	    warning(_("all 'z' values are NA"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/plotmath.c R/src/main/plotmath.c
27a28
> #include <Localization.h>
306c307
< 	error("invalid `which' in C function TeX"); return 0;/*-Wall*/
---
> 	error(_("invalid 'which' argument in C function TeX")); return 0;/*-Wall*/
980c981
< 		if(res == -1) error("invalid multibyte string '%s'", s);
---
> 		if(res == -1) error(_("invalid multibyte string '%s'"), s);
999c1000
< 			error("invalid multibyte string");
---
> 			error(_("invalid multibyte string"));
1063c1064
< 		error("invalid character in current multibyte locale");
---
> 		error(_("invalid character in current multibyte locale"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/print.c R/src/main/print.c
65c65,66
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
67,69c68,70
< #include "Print.h"
< #include "Fileio.h"
< #include "Rconnections.h"
---
> #include <Print.h>
> #include <Fileio.h>
> #include <Rconnections.h>
146c147
< 	    error(_("invalid 'na.print' specification"));
---
> 	    error(_("invalid '%s' specification"), "na.print");
159,160c160
<     printMatrix(x, 0, getAttrib(x, R_DimSymbol), quote, R_print.right,
< 		rowlab, collab, rowname, colname);
---
>     printMatrix(x, 0, getAttrib(x, R_DimSymbol), quote, R_print.right, rowlab, collab, rowname, colname);
190c190
< 	Rprintf("<bytecode: %p>\n", BODY(s));
---
> 	Rprintf(_("<bytecode: %p>\n"), BODY(s));
254c254
< 	    error(_("invalid 'na.print' specification"));
---
> 	    error(_("invalid '%s' specification"), "na.print");
265c265
< 	    error(_("'gap' must be non-negative integer"));
---
> 	    error(_("'%s' argument must be non-negative integer"), "gap");
326c326
< 	error("missing methods namespace: this should not happen");
---
> 	error(_("missing methods namespace: this should not happen"));
335c335
< 	error("missing show() in methods namespace: this should not happen");
---
> 	error("missing 'show()' in methods namespace: this should not happen");
465c465,466
< 			strcat(pbuf, " [truncated]");
---
> 			strcat(pbuf, " ");
> 			strcat(pbuf, _("[truncated]"));
522c523
< #ifdef Win32
---
> #ifdef _WIN32
542c543
< #ifdef Win32
---
> #ifdef _WIN32
565,567c566,569
< 	    if(n_pr < ns)
< 		Rprintf(" [ reached getOption(\"max.print\") -- omitted %d entries ]\n",
< 			ns - n_pr);
---
> 	    if(n_pr < ns) {
> 		Rprintf(n_(" [ reached 'getOption(\"max.print\")' -- omitted %d entry ]", " [ reached 'getOption(\"max.print\")' -- omitted %d entries ]", ns - n_pr), ns - n_pr);
> 		Rprintf("\n");
> 		}
586c588
< 		Rprintf("An object of class \"%s\"\n", className);
---
> 		Rprintf(_("An object of class \"%s\"\n"), className);
593,594c595,596
< 		if(names != R_NilValue) Rprintf("named ");
< 		Rprintf("list()\n");
---
> 		if(names != R_NilValue) Rprintf(_("named list()\n"));
> 		else Rprintf("list()\n");
767c769
< #ifdef Win32
---
> #ifdef _WIN32
782c784
< #ifdef Win32
---
> #ifdef _WIN32
801c803
< 		Rprintf("<S4 object without a class>\n");
---
> 		Rprintf(_("<S4 object without a class>\n"));
803c805
< 		Rprintf("<Object of type '%s' with S4 bit but without a class>\n",
---
> 		Rprintf(_("<Object of type '%s' with S4 bit but without a class>\n"),
808c810
< 		Rprintf("<S4 object of class \"%s\">\n",
---
> 		Rprintf(_("<S4 object of class \"%s\">\n"),
811c813
< 		Rprintf("<S4 object of class \"%s\" from package '%s'>\n",
---
> 		Rprintf(_("<S4 object of class \"%s\" from package '%s'>\n"),
850c852
< 	Rprintf("<promise: %p>\n", s);
---
> 	Rprintf(_("<promise: %p>\n"), s);
911c913
< 	Rprintf("<pointer: %p>\n", R_ExternalPtrAddr(s));
---
> 	Rprintf(_("<pointer: %p>\n"), R_ExternalPtrAddr(s));
914c916
< 	Rprintf("<bytecode: %p>\n", s);
---
> 	Rprintf(_("<bytecode: %p>\n"), s);
917c919
< 	Rprintf("<weak reference>\n");
---
> 	Rprintf(_("<weak reference>\n"));
923c925
< 	Rprintf("<S4 Type Object>\n");
---
> 	Rprintf(_("<S4 Type Object>\n"));
926c928
< 	UNIMPLEMENTED_TYPE("PrintValueRec", s);
---
> 	UNIMPLEMENTED_TYPE("PrintValueRec()", s);
932c934
< #ifdef Win32
---
> #ifdef _WIN32
987c989
< 		sprintf(ptag, "Slot \"%s\":", EncodeChar(PRINTNAME(TAG(a))));
---
> 		sprintf(ptag, _("Slot \"%s\":"), EncodeChar(PRINTNAME(TAG(a))));
1076c1078
< 	warning(_("invalid character length in 'dblepr'"));
---
> 	warning(_("invalid character length in '%s' function"), "dblepr()");
1097c1099
< 	warning(_("invalid character length in 'intpr'"));
---
> 	warning(_("invalid character length in '%s' function"), "intpr()");
1119c1121
< 	warning(_("invalid character length in 'realpr'"));
---
> 	warning(_("invalid character length in '%s' function"), "realpr()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/printarray.c R/src/main/printarray.c
35c35,36
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
45c46,49
< #define strwidth(x) Rstrwid(x, (int) strlen(x), CE_NATIVE, 0)
---
> //#define strwidth(x) Rstrwid(x, (int) strlen(x), CE_NATIVE, 0)
> inline int strwidth(const char *x) {
>   return Rstrwid(x, (int) strlen(x), CE_NATIVE, 0);
> }
344c348,349
< 	Rprintf("<0 x 0 matrix>\n");
---
> 	Rprintf(_("<0 x 0 matrix>"));
> 	Rprintf("\n");
372c377
< 	UNIMPLEMENTED_TYPE("printMatrix", x);
---
> 	UNIMPLEMENTED_TYPE("printMatrix()", x);
374,377c379,382
< #ifdef ENABLE_NLS
<     if(r_pr < r) // number of formats must be consistent here
< 	Rprintf(ngettext(" [ reached getOption(\"max.print\") -- omitted %d row ]\n",
< 			 " [ reached getOption(\"max.print\") -- omitted %d rows ]\n",
---
> //#ifdef ENABLE_NLS
>     if(r_pr < r) { // number of formats must be consistent here
> 	Rprintf(n_(" [ reached 'getOption(\"max.print\")' -- omitted %d row ]",
> 			 " [ reached 'getOption(\"max.print\")' -- omitted %d rows ]",
380,384c385,391
< #else
<     if(r_pr < r)
< 	Rprintf(" [ reached getOption(\"max.print\") -- omitted %d rows ]\n",
< 		r - r_pr);
< #endif
---
> 	Rprintf("\n");
>     }
> //#else
> //    if(r_pr < r) 
> //	Rprintf(" [ reached 'getOption(\"max.print\")' -- omitted %d rows ]\n",
> //		r - r_pr);
> //#endif
466,469c473,504
< 	    } else { // nb == 0 -- e.g. <2 x 3 x 0 array of logical>
< 		for (i = 0; i < ndim; i++)
< 		    Rprintf("%s%d", (i == 0) ? "<" : " x ", dims[i]);
< 		Rprintf(" array of %s>\n", CHAR(type2str_nowarn(TYPEOF(x))));
---
> 	    } else { // nb == 0 -- e.g. <logical array of size 2 x 3 x 0>
> 	    	const int bufsize = 100;
> 	    	char buf[bufsize];
> 	    	int cx = 0;
> 	    	int dx = 0;
> 	    	for (i = 0; i < ndim; i++)  {
> 	    		if(i == 0) cx = snprintf(buf, bufsize, "%d", dims[i]);
> 	    		else {
> 	    			dx = snprintf(buf+cx, bufsize-cx, " x %d", dims[i]);
> 	    			cx += dx;
> 	    		}
> 	    	}
> 		    switch (TYPEOF(x)) {
> 		    case LGLSXP:
> 		    	Rprintf(_("<logical array of size %s>"), buf);
> 			break;
> 		    case INTSXP:
> 		    	Rprintf(_("<integer array of size %s>"), buf);
> 			break;
> 		    case REALSXP:
> 		    	Rprintf(_("<real array of size %s>"), buf);
> 			break;
> 		    case CPLXSXP:
> 		    	Rprintf(_("<complex array of size %s>"), buf);
> 			break;
> 		    case STRSXP:
> 		    	Rprintf(_("<character array of size %s>"), buf);
> 			break;
> 		    default: //should never happen!
> 		    	Rprintf("<%s array of size %s>", CHAR(type2str_nowarn(TYPEOF(x))), buf);
> 		    }
> 		    	Rprintf("\n");
497,499c532,543
< 	    Rprintf(" [ reached getOption(\"max.print\") -- omitted");
< 	    if(nr_last < nr) Rprintf(" %d row(s) and", nr - nr_last);
< 	    Rprintf(" %d matrix slice(s) ]\n", nb - nb_pr);
---
> 	    if(nr_last < nr) {
> 	    Rprintf(n_(" [ reached 'getOption(\"max.print\")' -- omitted %d row and %d matrix slice ]",
> 			     " [ reached 'getOption(\"max.print\")' -- omitted %d rows and %d matrix slices ]",
> 			     nr - nr_last), nr - nr_last, nb - nb_pr);
> 	   Rprintf("\n");
> 		}
> 	    else {
> 	    Rprintf(n_(" [ reached 'getOption(\"max.print\")' -- omitted %d matrix slice ]",
> 			     " [ reached 'getOption(\"max.print\")' -- omitted %d matrix slices ]",
> 			     nb - nb_pr), nb - nb_pr);
> 	   Rprintf("\n");
> 	   }
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/printutils.c R/src/main/printutils.c
60a61
> #include <Localization.h>
64a66
> #include <R_ext/Minmax.h>
76c78
< #ifdef Win32
---
> #ifdef _WIN32
79,81d80
< #ifndef min
< #define min(a, b) (((a)<(b))?(a):(b))
< #endif
153c152
< 	sprintf(ch, "<environment: R_GlobalEnv>");
---
> 	sprintf(ch, _("<environment: %s>"), "R_GlobalEnv");
155c154
< 	sprintf(ch, "<environment: base>");
---
> 	sprintf(ch, _("<environment: %s>"), "base");
157c156
< 	sprintf(ch, "<environment: R_EmptyEnv>");
---
> 	sprintf(ch, _("<environment: %s>"), "R_EmptyEnv");
159c158
< 	snprintf(ch, 1000, "<environment: %s>",
---
> 	snprintf(ch, 1000, _("<environment: %s>"),
162c161
< 	snprintf(ch, 1000, "<environment: namespace:%s>",
---
> 	snprintf(ch, 1000, _("<environment: namespace:%s>"),
164c163
<     else snprintf(ch, 1000, "<environment: %p>", (void *)x);
---
>     else snprintf(ch, 1000, _("<environment: %p>"), (void *)x);
318c317
< void z_prec_r(Rcomplex *r, Rcomplex *x, double digits);
---
> void z_prec_r(Rcomplex *r, const Rcomplex *x, double digits);
374c373
< #ifdef Win32
---
> #ifdef _WIN32
401c400
< 	warning("unsupported encoding (%d) in Rstrwid", ienc);
---
> 	warning(_("unsupported encoding (%d) in '%s' function"), ienc, "Rstrwid()");
490c489
< #ifdef Win32 /* It seems Windows does not know what is printable! */
---
> #ifdef _WIN32 /* It seems Windows does not know what is printable! */
552c551
< #ifdef Win32
---
> #ifdef _WIN32
574c573
< #ifdef Win32
---
> #ifdef _WIN32
644c643
< #ifdef Win32
---
> #ifdef _WIN32
770c769
< #ifdef Win32
---
> #ifdef _WIN32
825c824
< 	UNIMPLEMENTED_TYPE("EncodeElement", x);
---
> 	UNIMPLEMENTED_TYPE("EncodeElement()", x);
895c894
< 	    warning("printing of extremely long output is truncated");
---
> 	    warning(_("printing of extremely long output is truncated"));
909c908
< 	    warning("printing of extremely long output is truncated");
---
> 	    warning(_("printing of extremely long output is truncated"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/printvector.c R/src/main/printvector.c
37c37,38
< #include "Rinternals.h"
---
> #include <Localization.h>
> #include <Rinternals.h>
349,351c350,354
< 	if(n_pr < n)
< 		Rprintf(" [ reached getOption(\"max.print\") -- omitted %d entries ]\n",
< 			n - n_pr);
---
> 	if(n_pr < n) {
> 		Rprintf(n_(" [ reached 'getOption(\"max.print\")' -- omitted %d entry ]",
> 			" [ reached 'getOption(\"max.print\")' -- omitted %d entries ]", n - n_pr), n - n_pr);
> 		Rprintf("\n");
> 	}
498,500c501,505
< 	if(n_pr < n)
< 		Rprintf(" [ reached getOption(\"max.print\") -- omitted %d entries ]\n",
< 			n - n_pr);
---
> 	if(n_pr < n) {
> 		Rprintf(n_(" [ reached 'getOption(\"max.print\")' -- omitted %d entry ]",
> 			" [ reached 'getOption(\"max.print\")' -- omitted %d entries ]", n - n_pr), n - n_pr);
> 		Rprintf("\n");
> 	}
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/qsort.c R/src/main/qsort.c
31a32
> #include <Localization.h>
55c56
< 	error(_("argument is not a numeric vector"));
---
> 	error(_("'%s' argument is not a numeric vector"), "x");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/radixsort.c R/src/main/radixsort.c
28a29
> #include <Localization.h>
72c73
< 	error("Internal error: savetl_init checks failed (%d %d %p %p).",
---
> 	error(_("Internal error: 'savetl_init()' checks failed (%d %d %p %p)."),
78c79
< 	error("Could not allocate saveds in savetl_init");
---
> 	error(_("Could not allocate '%s' variable in '%s' function"), "saveds", "savetl_init()");
82c83
< 	error("Could not allocate saveds in savetl_init");
---
> 	error(_("Could not allocate '%s' variable in '%s' function"), "saveds", "savetl_init()");
110c111
< 	    error("Could not realloc saveds in savetl");
---
> 	    error(_("Could not reallocate '%s' variable in '%s' function"), "saveds", "savetl()");
116c117
< 	    error("Could not realloc savedtl in savetl");
---
> 	    error(_("Could not reallocate '%s' variable in '%s' function"), "savedtl", "savetl()");
141c142
< 	Error("Failed to realloc working memory stack to %d*4bytes (flip=%d)",
---
> 	Error(_("Failed to reallocate working memory stack to %d*4bytes (flip=%d)"),
266c267
< 	Error("Internal error: range = %d; isorted cannot handle range > %d",
---
> 	Error(_("Internal error: range = %d; isorted cannot handle range > %d"),
408c409
< 	Error("Failed to allocate working memory for otmp. Requested %d * %d bytes",
---
> 	Error(n_("Failed to allocate working memory for '%s' variable. Requested %d * %d byte", "Failed to allocate working memory for '%s' variable. Requested %d * %d bytes", n*sizeof(int)), "otmp",
424c425
< 	Error("Failed to allocate working memory for xtmp. Requested %d * %d bytes",
---
> 	Error(n_("Failed to allocate working memory for '%s' variable. Requested %d * %d byte", "Failed to allocate working memory for '%s' variable. Requested %d * %d bytes", n*sizeof(double)), "xtmp",
510c511
<             Error("Failed to realloc working memory %d*8bytes (xsub in iradix), radix=%d",
---
>             Error(_("Failed to reallocate working memory %d*8bytes (xsub in 'iradix()' function), radix=%d"),
523c524
< 	Error("Internal error. thiscounts[0]=%d but should have been decremented to 0. dradix=%d",
---
> 	Error(_("Internal error. thiscounts[0]=%d but should have been decremented to 0. dradix=%d"),
598c599
< 	Error("Logical error. thiscounts[0]=%d but should have been decremented to 0. radix=%d",
---
> 	Error(_("Logical error. thiscounts[0]=%d but should have been decremented to 0. radix=%d"),
741c742
<             Error("Failed to realloc working memory %d*8bytes (xsub in dradix), radix=%d",
---
>             Error(_("Failed to realloc working memory %d*8bytes (xsub in 'dradix()' function), radix=%d"),
753c754
< 	Error("Logical error. thiscounts[0]=%d but should have been decremented to 0. dradix=%d",
---
> 	Error(_("Logical error. thiscounts[0]=%d but should have been decremented to 0. dradix=%d"),
765c766
<                 error("Not yet used, still using iradix instead");
---
>                 error(_("Not yet used, still using iradix instead"));
853c854
< 	error("Not yet used, still using iradix instead");
---
> 	error(_("Not yet used, still using iradix instead"));
879c880
< 	Error("Logical error. thiscounts[0]=%d but should have been decremented to 0. radix=%d",
---
> 	Error(_("Logical error. thiscounts[0]=%d but should have been decremented to 0. radix=%d"),
1030c1031
< 	Error("Logical error. counts[0]=%d in cradix but should have been decremented to 0. radix=%d",
---
> 	Error(_("Logical error. counts[0]=%d in cradix but should have been decremented to 0. radix=%d"),
1064,1066c1065
< 	Error
< 	    ("Internal error. ustr isn't empty when starting cgroup: ustr_n=%d, ustr_alloc=%d",
< 	     ustr_n, ustr_alloc);
---
> 	Error(_("Internal error. 'ustr' variable isn't empty when starting 'cgroup()' function: ustr_n=%d, ustr_alloc=%d"), ustr_n, ustr_alloc);
1091c1090
< 		Error("Unable to realloc %d * %d bytes in cgroup", ustr_alloc,
---
> 		Error(_("Unable to reallocate %d * %d bytes in 'cgroup()' function"), ustr_alloc,
1127,1128c1126
< 	Error
< 	    ("Failed to allocate working memory for csort_otmp. Requested %d * %d bytes",
---
> 	Error(n_("Failed to allocate working memory for '%s' variable. Requested %d * %d byte", "Failed to allocate working memory for '%s' variable. Requested %d * %d bytes", n*sizeof(int)), "csort_otmp",
1171c1169
< 	    Error("Internal error. csort's otmp contains all-NA");
---
> 	    Error(_("Internal error. 'otmp' variable in 'csort()' function contains all NA values"));
1219c1217
< 		Error("Failed to realloc ustr. Requested %d * %d bytes",
---
> 		Error(n_("Failed to reallocate '%s' variable. Requested %d * %d byte", "Failed to reallocate '%s' variable. Requested %d * %d bytes", ustr_alloc*sizeof(SEXP)), "ustr",
1244c1242
< 	    Error("Failed to alloc cradix_counts");
---
> 	    Error(_("Failed to allocate '%s' variable"), "cradix_counts");
1252c1250
<             Error("Failed to alloc cradix_tmp");
---
>             Error(_("Failed to allocate '%s' variable"), "cradix_tmp");
1477c1475
< 	} else Error("Internal error: isort received n=%d. isorted should have dealt with this (e.g. as a reverse sorted vector) already",n);
---
> 	} else Error(_("Internal error: 'isort()' function received n=%d. 'isorted()' function should have dealt with this (e.g. as a reverse sorted vector) already"),n);
1500c1498
<             Error("Internal error: isort passed all-NA. isorted should have caught this before this point");
---
>             Error(_("Internal error: 'isort()' passed all-NA. isorted should have caught this before this point"));
1531c1529
< 	Error("Internal error: dsort received n=%d. dsorted should have dealt with this (e.g. as a reverse sorted vector) already",n);
---
> 	Error(_("Internal error: 'dsort()' received n=%d. dsorted should have dealt with this (e.g. as a reverse sorted vector) already"),n);
1555c1553
<         error("radix sort assumes sizeof(int) == 4");
---
>         error(_("radix sort assumes sizeof(int) == 4"));
1558c1556
<         error("radix sort assumes sizeof(double) == 8");
---
>         error(_("radix sort assumes sizeof(double) == 8"));
1606c1604
< 	error(_("long vectors not supported"));
---
> 	error(_("long vectors are not supported"));
1650c1648
<         Error("First arg is type '%s', not yet supported",
---
>         Error(_("First argument is type '%s', not yet supported"),
1692,1693c1690
< 	    Error
< 		("Internal error: previous default should have caught unsupported type");
---
> 	    Error(_("Internal error: previous default should have caught unsupported type"));
1706c1703
<             Error("Couldn't allocate xsub in do_radixsort, requested %d * %d bytes.",
---
>             Error(_("Couldn't allocate '%s' variable in forder, requested %d * %d bytes."), "xsub",
1711c1708
<             Error("Couldn't allocate newo in do_radixsort, requested %d * %d bytes.",
---
>             Error(_("Couldn't allocate '%s' variable in forder, requested %d * %d bytes."), "newo",
1750c1747
< 	    Error("Arg %d is type '%s', not yet supported",
---
> 	    Error(_("Arg %d is type '%s', not yet supported"),
1786c1783
<                         Error("Internal error: previous default should have caught unsupported type");
---
>                         Error(_("Internal error: previous default should have caught unsupported type"));
1857c1854
<         Error("Internal error: at the end of do_radixsort sortStr == FALSE but ustr_n !=0 [%d]",
---
>         Error(_("Internal error: at the end of forder sortStr==FALSE but ustr_n!=0 [%d]"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/random.c R/src/main/random.c
25a26
> #include <Localization.h>
95c96
< 	warning(_("NAs produced"));
---
> 	warning(_("NA values produced"));
109c110
< 	    error("internal error in do_random1");
---
> 	    error(_("internal error in '%s' function"), "do_random1()");
112c113
< 	    warning(_("NAs produced"));
---
> 	    warning(_("NA values produced"));
178c179
< 	warning(_("NAs produced"));
---
> 	warning(_("NA values produced"));
201c202
< 	    error("internal error in do_random2");
---
> 	    error(_("internal error in '%s' function"), "do_random2()");
204c205
< 	    warning(_("NAs produced"));
---
> 	    warning(_("NA values produced"));
277c278
< 	warning(_("NAs produced"));
---
> 	warning(_("NA values produced"));
288c289
< 	    error("internal error in do_random3");
---
> 	    error(_("internal error in '%s' function"), "do_random3()");
291c292
< 	    warning(_("NAs produced"));
---
> 	    warning(_("NA values produced"));
445c446
< 	    error(_("NA in probability vector"));
---
> 	    error(_("NA values in probability vector"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/raw.c R/src/main/raw.c
23a24
> #include <Localization.h>
27d27
< #define isRaw(x) (TYPEOF(x) == RAWSXP)
37c37
< 	error(_("argument must be a character vector of length 1"));
---
> 	error(_("'%s' argument must be a character vector of length 1"), "x");
39c39
< 	warning(_("argument should be a character vector of length 1\nall but the first element will be ignored"));
---
> 	warning(_("argument should be a character vector of length 1.\nAll but the first element will be ignored"));
53c53
< 	error(_("argument 'x' must be a raw vector"));
---
> 	error(_("'%s' argument must be a raw vector"), "x");
56c56
< 	error(_("argument 'multiple' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "multiple");
90c90
< 	error(_("argument 'x' must be a raw vector"));
---
> 	error(_("'%s' argument must be a raw vector"), "x");
113c113
< 	error(_("argument 'x' must be a raw vector"));
---
> 	error(_("'%s' argument must be a raw vector"), "x");
133c133
< 	error(_("argument 'x' must be an integer vector"));
---
> 	error(_("'%s' argument must be an integer vector"), "x");
153c153
< 	error(_("argument 'x' must be raw, integer or logical"));
---
> 	error(_("'%s' argument must be raw, integer or logical"), "x");
155c155
< 	error(_("argument '%s' must be a character string"), "type");
---
> 	error(_("'%s' argument must be a character string"), "type");
172c172
< 			error(_("argument 'x' must not contain NAs"));
---
> 			error(_("argument 'x' must not contain NA values"));
186c186
< 			error(_("argument 'x' must not contain NAs"));
---
> 			error(_("argument 'x' must not contain NA values"));
249c249
< 	error(_("argument must be a character vector of length 1"));
---
> 	error(_("'%s' argument must be a character vector of length 1"), "x");
251c251
< 	warning(_("argument should be a character vector of length 1\nall but the first element will be ignored"));
---
> 	warning(_("argument should be a character vector of length 1.\nAll but the first element will be ignored"));
304c304
< 	error(_("argument 'x' must be an integer vector"));
---
> 	error(_("'%s' argument must be an integer vector"), "x");
307c307
< 	error(_("argument 'multiple' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "multiple");
313c313
< 	    warning("allow_surrogate_pairs = TRUE is incompatible with multiple = TRUE and will be ignored");
---
> 	    warning(_("allow_surrogate_pairs = TRUE is incompatible with multiple = TRUE and will be ignored"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/relop.c R/src/main/relop.c
25a26
> #include <Localization.h>
28a30
> #include <R_ext/Minmax.h>
71c73
< 	error("operator needs two arguments");
---
> 	error(_("operator needs two arguments"));
620c622
< 	UNIMPLEMENTED_TYPE("bitwNot", a);
---
> 	UNIMPLEMENTED_TYPE("bitwNot()", a);
626d627
< #define mymax(x, y) ((x >= y) ? x : y)
634c635
< 	error(_("'a' and 'b' must have the same type"));		\
---
> 	error(_("'A' and 'B' must have the same type"));		\
640c641
< 		mn = (m && n) ? mymax(m, n) : 0;			\
---
> 		mn = (m && n) ? max(m, n) : 0;			\
659c660
<     BIT(&, "bitwAnd");
---
>     BIT(&, "bitwAnd()");
664c665
<     BIT(|, "bitwOr");
---
>     BIT(|, "bitwOr()");
669c670
<     BIT(^, "bitwXor");
---
>     BIT(^, "bitwXor()");
679c680
< 	error(_("'a' and 'b' must have the same type"));
---
> 	error(_("'A' and 'B' must have the same type"));
686c687
< 		mn = (m && n) ? mymax(m, n) : 0;
---
> 		mn = (m && n) ? max(m, n) : 0;
700c701
< 	UNIMPLEMENTED_TYPE("bitShiftL", a);
---
> 	UNIMPLEMENTED_TYPE("bitShiftL()", a);
713c714
< 	error(_("'a' and 'b' must have the same type"));
---
> 	error(_("'A' and 'B' must have the same type"));
720c721
< 		mn = (m && n) ? mymax(m, n) : 0;
---
> 		mn = (m && n) ? max(m, n) : 0;
734c735
< 	UNIMPLEMENTED_TYPE("bitShiftR", a);
---
> 	UNIMPLEMENTED_TYPE("bitShiftR()", a);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/rlocale.c R/src/main/rlocale.c
256c256
< #if defined(Win32) || defined(_AIX)
---
> #if defined(_WIN32) || defined(_AIX)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/rlocale_data.h R/src/main/rlocale_data.h
74c74
< #ifdef					Win32
---
> #ifdef					_WIN32
82c82
< #ifdef					Win32
---
> #ifdef					_WIN32
88c88
< #ifdef					Win32
---
> #ifdef					_WIN32
96c96
< #ifdef					Win32
---
> #ifdef					_WIN32
104c104
< #ifdef					Win32
---
> #ifdef					_WIN32
110c110
< #ifdef					Win32
---
> #ifdef					_WIN32
118c118
< #ifdef					Win32
---
> #ifdef					_WIN32
126c126
< #ifdef					Win32
---
> #ifdef					_WIN32
132c132
< #ifdef					Win32
---
> #ifdef					_WIN32
141c141
< #ifdef					Win32
---
> #ifdef					_WIN32
153c153
< #ifdef					Win32
---
> #ifdef					_WIN32
159c159
< #ifdef					Win32
---
> #ifdef					_WIN32
166c166
< #ifdef					Win32
---
> #ifdef					_WIN32
176c176
< #ifdef					Win32
---
> #ifdef					_WIN32
183c183
< #ifdef					Win32
---
> #ifdef					_WIN32
189c189
< #ifdef					Win32
---
> #ifdef					_WIN32
195c195
< #ifdef					Win32
---
> #ifdef					_WIN32
201c201
< #ifdef					Win32
---
> #ifdef					_WIN32
207c207
< #ifdef					Win32
---
> #ifdef					_WIN32
213c213
< #ifdef					Win32
---
> #ifdef					_WIN32
219c219
< #ifdef					Win32
---
> #ifdef					_WIN32
225c225
< #ifdef					Win32
---
> #ifdef					_WIN32
231c231
< #ifdef					Win32
---
> #ifdef					_WIN32
236c236
< #ifdef					Win32
---
> #ifdef					_WIN32
755c755
< #ifdef					Win32
---
> #ifdef					_WIN32
1302c1302
< #if defined(__APPLE__) || defined(Win32) || defined(_AIX)
---
> #if defined(__APPLE__) || defined(_WIN32) || defined(_AIX)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/saveload.c R/src/main/saveload.c
28a29
> #include <Localization.h>
337c338
< 	error(_("a I read error occurred"));
---
> 	error(_("a 'I' read error occurred"));
347c348
< 	error(_("a R read error occurred"));
---
> 	error(_("a 'R' read error occurred"));
357c358
< 	error(_("a C read error occurred"));
---
> 	error(_("a 'C' read error occurred"));
367c368
< 	error(_("a S read error occurred"));
---
> 	error(_("a 'S' read error occurred"));
493,494c494
< 	    error(_("restore compatibility error - no version %d compatibility"),
< 		  VersionId);
---
> 	    error(_("restore compatibility error - no version %d compatibility"), VersionId);
577c577
<     default: error(_("bad SEXP type in data file"));
---
>     default: error(_("bad 'SEXP' type in data file"));
612c612
< 	    warning(_("unrecognized internal function name \"%s\""), d->buffer.data);
---
> 	    warning(_("unrecognized internal function name '%s'"), d->buffer.data);
650c650
<     default: error(_("bad SEXP type in data file"));
---
>     default: error(_("bad 'SEXP' type in data file"));
714,715c714
< 	RestoreError(_("cannot save file position while restoring data"),
< 		     startup);
---
> 	RestoreError(_("cannot save file position while restoring data"), startup);
727,728c726
< 	RestoreError(_("cannot restore file position while restoring data"),
< 		     startup);
---
> 	RestoreError(_("cannot restore file position while restoring data"), startup);
770c768
< #define R_assert(e) ((e) ? (void) 0 : error("assertion `%s' failed: file `%s', line %d\n", #e, __FILE__, __LINE__))
---
> #define R_assert(e) ((e) ? (void) 0 : error(_("assertion '%s' failed: file '%s', line %d\n"), #e, __FILE__, __LINE__))
924,925c922
< 	    error(_("cannot save environment with locked/active bindings \
< in version 1 workspaces"));
---
> 	    error(_("cannot save environment with locked/active bindings in version 1 workspaces"));
1026c1023
< 	error(_("NewWriteVec called with non-vector type"));
---
> 	error(_("'NewWriteVec()' function called with non-vector type"));
1091c1088
< 	    error(_("NewWriteItem: unknown type %i"), TYPEOF(s));
---
> 	    error(_("'NewWriteItem()': unknown type %i"), TYPEOF(s));
1275c1272
< 	    warning(_("unrecognized internal function name \"%s\""), d->buffer.data);
---
> 	    warning(_("unrecognized internal function name '%s'"), d->buffer.data);
1293c1290
< 	error(_("NewReadItem: unknown type %i"), type);
---
> 	error(_("'NewReadItem()': unknown type %i"), type);
1445c1442
< 	    error(_("out of memory reading ascii string"));
---
> 	    error(_("out of memory while reading ascii string"));
1585c1582
< 	    error(_("out of memory reading binary string"));
---
> 	    error(_("out of memory while reading binary string"));
1686c1683
< 	    error(_("out of memory reading binary string"));
---
> 	    error(_("out of memory while reading binary string"));
2038c2035
< 	error(_("'file' must be non-empty string"));
---
> 	error(_("'%s' argument must be a non-empty character string"), "file");
2040c2037
< 	error(_("'ascii' must be logical"));
---
> 	error(_("'%s' argument must be logical"), "ascii");
2074c2071
< 	    error(_("object '%s' not found"), EncodeChar(PRINTNAME(TAG(t))));
---
> 	    error(_("object '%s' was not found"), EncodeChar(PRINTNAME(TAG(t))));
2108c2105
< 	    error(_("not a valid named list"));
---
> 	    error(_("'%s' is not a valid named list"), CHAR(PRINTNAME(TAG(ans))));
2114,2116c2111
< 		warningcall(R_NilValue,
< 			    _("'%s' looks like a pre-2.4.0 S4 object: please recreate it"),
< 			    CHAR(STRING_ELT(names, i)));
---
> 		warningcall(R_NilValue, _("'%s' looks like a pre-2.4.0 S4 object: please recreate it"), CHAR(STRING_ELT(names, i)));
2135,2137c2130
< 	    warningcall(R_NilValue,
< 			_("'%s' looks like a pre-2.4.0 S4 object: please recreate it"),
< 			CHAR(PRINTNAME(TAG(a))));
---
> 	    warningcall(R_NilValue, _("'%s' looks like a pre-2.4.0 S4 object: please recreate it"), CHAR(PRINTNAME(TAG(a))));
2172c2165
<     if (!fp) error(_("unable to open file"));
---
>     if (!fp) error(_("unable to open file '%s'"), translateChar(STRING_ELT(fname, 0)));
2253,2254c2246
< 	    error(_("cannot save data -- unable to open '%s': %s"),
< 		  name, strerror(errno));
---
> 	    error(_("cannot save data -- unable to open '%s': %s"), name, strerror(errno));
2276c2268
< 		Rprintf("[Previously saved workspace restored]\n\n");
---
> 		Rprintf(_("[Previously saved workspace restored]\n\n"));
2340c2332
< 	error(_("'ascii' must be logical"));
---
> 	error(_("'%s' argument must be logical"), "ascii");
2373c2365
< 	error(_("connection not open for writing"));
---
> 	error(_("connection is not open for writing"));
2409c2401
< 	    error(_("object '%s' not found"), EncodeChar(PRINTNAME(TAG(t))));
---
> 	    error(_("object '%s' was not found"), EncodeChar(PRINTNAME(TAG(t))));
2457,2458c2449,2450
<     if(!con->canread) error(_("connection not open for reading"));
<     if(con->text) error(_("can only load() from a binary connection"));
---
>     if(!con->canread) error(_("connection is not open for reading"));
>     if(con->text) error(_("can only load from a binary connection"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/scan.c R/src/main/scan.c
35a36
> #include <Localization.h>
94c95
< #ifdef Win32
---
> #ifdef _WIN32
477c478
< static R_INLINE void NORET expected(char *what, char *got, LocalData *d)
---
> static R_INLINE void expected(LocalData *d)
484d484
<     error(_("scan() expected '%s', got '%s'"), what, got);
499c499
< 	    else expected("a logical", buffer, d);
---
> 	    else { expected(d); error(_("scan() expected a logical, got '%s'"), buffer); };
508c508
< 		expected("an integer", buffer, d);
---
> 		{ expected(d); error(_("scan() expected an integer, got '%s'"), buffer); };
517c517
< 		expected("a real", buffer, d);
---
> 		{ expected(d); error(_("scan() expected a real, got '%s'"), buffer); }
526c526
< 		expected("a complex", buffer, d);
---
> 		{ expected(d); error(_("scan() expected a complex, got '%s'"), buffer); }
541c541
< 		expected("a raw", buffer, d);
---
> 		{ expected(d); error(_("scan() expected a raw, got '%s'"), buffer);  }
545c545
< 	UNIMPLEMENTED_TYPE("extractItem", ans);
---
> 	UNIMPLEMENTED_TYPE("extractItem()", ans);
616c616
< 	REprintf("Read %lld item%s\n", (long long) n, (n == 1) ? "" : "s");
---
> 	REprintf(n_("Read %lld item\n", "Read %lld items\n", (long long) n), (long long) n );
654c654
< 	UNIMPLEMENTED_TYPEt("scanVector", type);
---
> 	UNIMPLEMENTED_TYPEt("scanVector()", type);
788c788
< 	REprintf("Read %lld record%s\n", (long long) n, (n == 1) ? "" : "s");
---
> 	REprintf(n_("Read %lld record\n", "Read %lld records\n", (long long) n), (long long) n);
819c819
< 	    UNIMPLEMENTED_TYPE("scanFrame", old);
---
> 	    UNIMPLEMENTED_TYPE("scanFrame()", old);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/seq.c R/src/main/seq.c
28a29
> #include <Localization.h>
155c156
< 	errorcall(call, _("argument of length 0"));
---
> 	errorcall(call, _("argument is of length 0"));
158c159
< 		    ngettext("numerical expression has %d element: only the first used",
---
> 		    n_("numerical expression has %d element: only the first used",
163c164
< 		    ngettext("numerical expression has %d element: only the first used",
---
> 		    n_("numerical expression has %d element: only the first used",
234c235
< 	UNIMPLEMENTED_TYPE("rep2", s); \
---
> 	UNIMPLEMENTED_TYPE("rep2()", s); \
336c337
< 	UNIMPLEMENTED_TYPE("rep3", s);
---
> 	UNIMPLEMENTED_TYPE("rep3()", s);
358,359c359
< 	error(_("attempt to replicate an object of type '%s'"),
< 	      type2char(TYPEOF(s)));
---
> 	error(_("attempt to replicate an object of type '%s'"), type2char(TYPEOF(s)));
551c551
< 	UNIMPLEMENTED_TYPE("rep4", x);					\
---
> 	UNIMPLEMENTED_TYPE("rep4()", x);					\
600c600
< 	    UNIMPLEMENTED_TYPE("rep4", x);
---
> 	    UNIMPLEMENTED_TYPE("rep4()", x);
643c643
< 	errorcall(call, "replication of pairlists is defunct");
---
> 	errorcall(call, _("replication of pairlists is defunct"));
661,662c661
< 	warningcall(call, _("first element used of '%s' argument"),
< 		    "length.out");
---
> 	warningcall(call, _("first element used of '%s' argument"), "length.out");
682c681
< 	    warningcall(call, "'x' is NULL so the result will be NULL");
---
> 	    warningcall(call, _("'x' is NULL so the result will be NULL"));
691,692c690
< 	errorcall(call, "attempt to replicate an object of type '%s'",
< 		  type2char(TYPEOF(x)));
---
> 	errorcall(call, _("attempt to replicate an object of type '%s'"), type2char(TYPEOF(x)));
816c814
< 		errorcall(call, _("'%s' must be a finite number"), "from");
---
> 		errorcall(call, _("'%s' argument must be a finite number"), "from");
834c832
< 	    errorcall(call, _("'length.out' must be a non-negative number"));
---
> 	    errorcall(call, _("'%s' argument must be a non-negative number"), "length.out");
836,837c834
< 	    warningcall(call, _("first element used of '%s' argument"),
< 			"length.out");
---
> 	    warningcall(call, _("first element used of '%s' argument"), "length.out");
845c842
< 	    if(length(from) != 1) errorcall(call, _("'%s' must be of length 1"), "from");
---
> 	    if(length(from) != 1) errorcall(call, _("'%s' argument must be of length 1"), "from");
848c845
< 		errorcall(call, _("'%s' must be a finite number"), "from");
---
> 		errorcall(call, _("'%s' argument must be a finite number"), "from");
852c849
< 	    if(length(to) != 1) errorcall(call, _("'%s' must be of length 1"), "to");
---
> 	    if(length(to) != 1) errorcall(call, _("'%s' argument must be of length 1"), "to");
855c852
< 		errorcall(call, _("'%s' must be a finite number"), "to");
---
> 		errorcall(call, _("'%s' argument must be a finite number"), "to");
860c857
< 	    if(length(by) != 1) errorcall(call, _("'%s' must be of length 1"), "by");
---
> 	    if(length(by) != 1) errorcall(call, _("'%s' argument must be of length 1"), "by");
926,927c923,924
< 	if(!R_FINITE(rfrom)) errorcall(call, _("'%s' must be a finite number"), "from");
< 	if(!R_FINITE(rto))   errorcall(call, _("'%s' must be a finite number"), "to");
---
> 	if(!R_FINITE(rfrom)) errorcall(call, _("'%s' argument must be a finite number"), "from");
> 	if(!R_FINITE(rto))   errorcall(call, _("'%s' argument must be a finite number"), "to");
957,958c954,955
< 	if(!R_FINITE(rfrom)) errorcall(call, _("'%s' must be a finite number"), "from");
< 	if(!R_FINITE(rby))   errorcall(call, _("'%s' must be a finite number"), "by");
---
> 	if(!R_FINITE(rfrom)) errorcall(call, _("'%s' argument must be a finite number"), "from");
> 	if(!R_FINITE(rby))   errorcall(call, _("'%s' argument must be a finite number"), "by");
978,979c975,976
< 	if(!R_FINITE(rto)) errorcall(call, _("'%s' must be a finite number"), "to");
< 	if(!R_FINITE(rby)) errorcall(call, _("'%s' must be a finite number"), "by");
---
> 	if(!R_FINITE(rto)) errorcall(call, _("'%s' argument must be a finite number"), "to");
> 	if(!R_FINITE(rby)) errorcall(call, _("'%s' argument must be a finite number"), "by");
1015c1012
< 	    error("'length' is not a BUILTIN");
---
> 	    error(_("'%s' is not a '%s' function"), "length", "BUILTIN");
1046,1047c1043
< 	warningcall(call, _("first element used of '%s' argument"),
< 		    "length.out");
---
> 	warningcall(call, _("first element used of '%s' argument"), "length.out");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/serialize.c R/src/main/serialize.c
27a28
> #include <Localization.h>
33a35
> #include <R_ext/Minmax.h>
37c39
< #ifdef Win32
---
> #ifdef _WIN32
226c228
< #define R_assert(e) ((e) ? (void) 0 : error("assertion '%s' failed: file '%s', line %d\n", #e, __FILE__, __LINE__))
---
> #define R_assert(e) ((e) ? (void) 0 : error(_("assertion '%s' failed: file '%s', line %d\n"), #e, __FILE__, __LINE__))
430c432
< #ifdef Win32
---
> #ifdef _WIN32
455c457
< #ifdef Win32
---
> #ifdef _WIN32
890d891
< #define min2(a, b) ((a) < (b)) ? (a) : (b)
900c901
< 	R_xlen_t done, this;
---
> 	R_xlen_t done, thiss;
902,905c903,906
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
< 	    xdrmem_create(&xdrs, buf, (int)(this * sizeof(int)), XDR_ENCODE);
< 	    for(int cnt = 0; cnt < this; cnt++)
---
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
> 	    xdrmem_create(&xdrs, buf, (int)(thiss * sizeof(int)), XDR_ENCODE);
> 	    for(int cnt = 0; cnt < thiss; cnt++)
909c910
< 	    stream->OutBytes(stream, buf, (int)(sizeof(int) * this));
---
> 	    stream->OutBytes(stream, buf, (int)(sizeof(int) * thiss));
916,918c917,919
< 	R_xlen_t done, this;
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
---
> 	R_xlen_t done, thiss;
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
920c921
< 			     (int)(sizeof(int) * this));
---
> 			     (int)(sizeof(int) * thiss));
937c938
< 	R_xlen_t done, this;
---
> 	R_xlen_t done, thiss;
939,942c940,943
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
< 	    xdrmem_create(&xdrs, buf, (int)(this * sizeof(double)), XDR_ENCODE);
< 	    for(int cnt = 0; cnt < this; cnt++)
---
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
> 	    xdrmem_create(&xdrs, buf, (int)(thiss * sizeof(double)), XDR_ENCODE);
> 	    for(int cnt = 0; cnt < thiss; cnt++)
946c947
< 	    stream->OutBytes(stream, buf, (int)(sizeof(double) * this));
---
> 	    stream->OutBytes(stream, buf, (int)(sizeof(double) * thiss));
952,954c953,955
< 	R_xlen_t done, this;
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
---
> 	R_xlen_t done, thiss;
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
956c957
< 			     (int)(sizeof(double) * this));
---
> 			     (int)(sizeof(double) * thiss));
973c974
< 	R_xlen_t done, this;
---
> 	R_xlen_t done, thiss;
976,979c977,980
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
< 	    xdrmem_create(&xdrs, buf, (int)(this * sizeof(Rcomplex)), XDR_ENCODE);
< 	    for(int cnt = 0; cnt < this; cnt++) {
---
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
> 	    xdrmem_create(&xdrs, buf, (int)(thiss * sizeof(Rcomplex)), XDR_ENCODE);
> 	    for(int cnt = 0; cnt < thiss; cnt++) {
984c985
< 	    stream->OutBytes(stream, buf, (int)(sizeof(Rcomplex) * this));
---
> 	    stream->OutBytes(stream, buf, (int)(sizeof(Rcomplex) * thiss));
991,993c992,994
< 	R_xlen_t done, this;
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
---
> 	R_xlen_t done, thiss;
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
995c996
< 			     (int)(sizeof(Rcomplex) * this));
---
> 			     (int)(sizeof(Rcomplex) * thiss));
1194,1197c1195,1198
< 		R_xlen_t done, this;
< 		for (done = 0; done < len; done += this) {
< 		    this = min2(CHUNK_SIZE, len - done);
< 		    stream->OutBytes(stream, RAW(s) + done, (int) this);
---
> 		R_xlen_t done, thiss;
> 		for (done = 0; done < len; done += thiss) {
> 		    thiss = min(CHUNK_SIZE, len - done);
> 		    stream->OutBytes(stream, RAW(s) + done, (int) thiss);
1476c1477
< 	R_xlen_t done, this;
---
> 	R_xlen_t done, thiss;
1478,1482c1479,1483
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
< 	    stream->InBytes(stream, buf, (int)(sizeof(int) * this));
< 	    xdrmem_create(&xdrs, buf, (int)(this * sizeof(int)), XDR_DECODE);
< 	    for(int cnt = 0; cnt < this; cnt++)
---
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
> 	    stream->InBytes(stream, buf, (int)(sizeof(int) * thiss));
> 	    xdrmem_create(&xdrs, buf, (int)(thiss * sizeof(int)), XDR_DECODE);
> 	    for(int cnt = 0; cnt < thiss; cnt++)
1491,1493c1492,1494
< 	R_xlen_t done, this;
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
---
> 	R_xlen_t done, thiss;
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
1495c1496
< 			    (int)(sizeof(int) * this));
---
> 			    (int)(sizeof(int) * thiss));
1512c1513
< 	R_xlen_t done, this;
---
> 	R_xlen_t done, thiss;
1514,1518c1515,1519
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
< 	    stream->InBytes(stream, buf, (int)(sizeof(double) * this));
< 	    xdrmem_create(&xdrs, buf, (int)(this * sizeof(double)), XDR_DECODE);
< 	    for(R_xlen_t cnt = 0; cnt < this; cnt++)
---
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
> 	    stream->InBytes(stream, buf, (int)(sizeof(double) * thiss));
> 	    xdrmem_create(&xdrs, buf, (int)(thiss * sizeof(double)), XDR_DECODE);
> 	    for(R_xlen_t cnt = 0; cnt < thiss; cnt++)
1527,1529c1528,1530
< 	R_xlen_t done, this;
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
---
> 	R_xlen_t done, thiss;
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
1531c1532
< 			    (int)(sizeof(double) * this));
---
> 			    (int)(sizeof(double) * thiss));
1548c1549
< 	R_xlen_t done, this;
---
> 	R_xlen_t done, thiss;
1551,1555c1552,1556
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
< 	    stream->InBytes(stream, buf, (int)(sizeof(Rcomplex) * this));
< 	    xdrmem_create(&xdrs, buf, (int)(this * sizeof(Rcomplex)), XDR_DECODE);
< 	    for(R_xlen_t cnt = 0; cnt < this; cnt++) {
---
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
> 	    stream->InBytes(stream, buf, (int)(sizeof(Rcomplex) * thiss));
> 	    xdrmem_create(&xdrs, buf, (int)(thiss * sizeof(Rcomplex)), XDR_DECODE);
> 	    for(R_xlen_t cnt = 0; cnt < thiss; cnt++) {
1566,1568c1567,1569
< 	R_xlen_t done, this;
< 	for (done = 0; done < length; done += this) {
< 	    this = min2(CHUNK_SIZE, length - done);
---
> 	R_xlen_t done, thiss;
> 	for (done = 0; done < length; done += thiss) {
> 	    thiss = min(CHUNK_SIZE, length - done);
1570c1571
< 			    (int)(sizeof(Rcomplex) * this));
---
> 			    (int)(sizeof(Rcomplex) * thiss));
1900c1901
< 		    warning(_("unrecognized internal function name \"%s\""), cbuf);
---
> 		    warning(_("unrecognized internal function name '%s'"), cbuf);
1980c1981
< 		    this = min2(CHUNK_SIZE, len - done);
---
> 		    this = min(CHUNK_SIZE, len - done);
2508c2509
< 	error(_("'ascii' must be logical"));
---
> 	error(_("'%s' argument must be logical"), "ascii");
2546c2547
< 	error(_("connection not open for writing"));
---
> 	error(_("connection is not open for writing"));
2592c2593
<     if(!con->canread) error(_("connection not open for reading"));
---
>     if(!con->canread) error(_("connection is not open for reading"));
2878c2879
< 	error("character vectors are no longer accepted by unserialize()");
---
> 	error(_("character vectors are no longer accepted by 'unserialize()' function"));
2914c2915
< 	error(_("not a proper file name"));
---
> 	error(_("'%s' argument is not a proper file name"), "file");
2916c2917
< 	error(_("not a proper raw vector"));
---
> 	error(_("'%s' argument is not a proper raw vector"), "bytes");
3095c3096
< 	    error(_("object '%s' not found"), EncodeChar(STRING_ELT(vars, i)));
---
> 	    error(_("object '%s' was not found"), EncodeChar(STRING_ELT(vars, i)));
3172,3173c3173
<     if (err) error("lazy-load database '%s' is corrupt",
< 		   CHAR(STRING_ELT(file, 0)));
---
>     if (err) error(_("lazy-load database '%s' is corrupt"), CHAR(STRING_ELT(file, 0)));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/sort.c R/src/main/sort.c
25a26
> #include <Localization.h>
209c210
< 	    UNIMPLEMENTED_TYPE("isUnsorted", x);
---
> 	    UNIMPLEMENTED_TYPE("isUnsorted()", x);
395c396
< 	error(_("'decreasing' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "decreasing");
532c533
<     if (n < 2) error("'n >= 2' is required");
---
>     if (n < 2) error(_("'n >= 2' is required"));
549c550
<     if (n < 2) error("'n >= 2' is required");
---
>     if (n < 2) error(_("'n >= 2' is required"));
566c567
<     if (n < 2) error("'n >= 2' is required");
---
>     if (n < 2) error(_("'n >= 2' is required"));
589c590
<     if (n < 2) error("'n >= 2' is required");
---
>     if (n < 2) error(_("'n >= 2' is required"));
627c628
< 	    UNIMPLEMENTED_TYPE("sortVector", s);
---
> 	    UNIMPLEMENTED_TYPE("sortVector()", s);
726c727
< 	UNIMPLEMENTED_TYPE("Psort", x);
---
> 	UNIMPLEMENTED_TYPE("Psort()", x);
835c836
< 	    UNIMPLEMENTED_TYPE("equal", x);
---
> 	    UNIMPLEMENTED_TYPE("equal()", x);
873c874
< 	    UNIMPLEMENTED_TYPE("greater", x);
---
> 	    UNIMPLEMENTED_TYPE("greater()", x);
905c906
< 	    UNIMPLEMENTED_TYPE("listgreater", x);
---
> 	    UNIMPLEMENTED_TYPE("listgreater()", x);
1002c1003
< 	    UNIMPLEMENTED_TYPE("listgreater", x);
---
> 	    UNIMPLEMENTED_TYPE("listgreater()", x);
1167c1168
< 	    UNIMPLEMENTED_TYPE("orderVector1", key);
---
> 	    UNIMPLEMENTED_TYPE("orderVector1()", key);
1304c1305
< 	    UNIMPLEMENTED_TYPE("orderVector1", key);
---
> 	    UNIMPLEMENTED_TYPE("orderVector1()", key);
1407c1408
< 	error(_("'decreasing' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "decreasing");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/source.c R/src/main/source.c
24a25
> #include <Localization.h>
135c136
< 
---
>     //R_ParseErrorMsg comes from gram.[cy]'s 'yyerror(const char *s)'
163,164c164
< 	    error("%s in \"%s\"",
< 		  R_ParseErrorMsg, CHAR(STRING_ELT(context, 0)));
---
> 	    error(_("%s in command \"%s\""), R_ParseErrorMsg, CHAR(STRING_ELT(context, 0)));
167,169c167
< 	    error("%s in:\n\"%s\n%s\"",
< 		  R_ParseErrorMsg, CHAR(STRING_ELT(context, len-2)),
< 		  CHAR(STRING_ELT(context, len-1)));
---
> 	    error(_("%s in:\n\"%s\n%s\""),  R_ParseErrorMsg, CHAR(STRING_ELT(context, len-2)), CHAR(STRING_ELT(context, len-1)));
203c201
< 	error(_("'file' must be a character string or connection"));
---
> 	error(_("'%s' must be a character string or connection"), "file");
246c244
< 	warning(_("argument '%s = \"%s\"' will be ignored"), "encoding", encoding);
---
> 	warning(_("'%s = \"%s\"' option will be ignored"), "encoding", encoding);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/split-incl.c R/src/main/split-incl.c
58c58
< 		UNIMPLEMENTED_TYPE("split", x);
---
> 		UNIMPLEMENTED_TYPE("split()", x);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/split.c R/src/main/split.c
25c25,26
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/sprintf.c R/src/main/sprintf.c
25a26
> #include <Localization.h>
30c31
< #ifdef Win32
---
> #ifdef _WIN32
105c106
< 	error(_("'fmt' is not a character vector"));
---
> 	error(_("'%s' argument is not a character vector"), "fmt");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/startup.c R/src/main/startup.c
29,31c29,32
< #include "Defn.h"
< #include "Fileio.h" /* for R_fopen */
< #include "Startup.h"
---
> #include <Localization.h>
> #include <Defn.h>
> #include <Fileio.h> /* for R_fopen */
> #include <Startup.h>
109c110
< #ifndef Win32
---
> #ifndef _WIN32
186c187
< 	    R_ShowMessage("WARNING: invalid R_MAX_VSIZE ignored\n");
---
> 	    R_ShowMessage(_("WARNING: invalid R_MAX_VSIZE ignored\n"));
189c190
< 		     "WARNING: R_MAX_VSIZE smaller than Min_Vsize = %lu is ignored\n",
---
> 		     _("WARNING: R_MAX_VSIZE smaller than Min_Vsize = %lu is ignored\n"),
212c213
< 	    R_ShowMessage("WARNING: invalid R_VSIZE ignored\n");
---
> 	    R_ShowMessage(_("WARNING: invalid 'R_VSIZE' ignored\n"));
215c216
< 		     "WARNING: R_VSIZE smaller than Min_Vsize = %lu is ignored\n",
---
> 		     _("WARNING: R_VSIZE smaller than Min_Vsize = %lu is ignored\n"),
225c226
< 	    R_ShowMessage("WARNING: invalid R_NSIZE ignored\n");
---
> 	    R_ShowMessage(_("WARNING: invalid 'R_NSIZE' ignored\n"));
228c229
< 		     "WARNING: R_NSIZE smaller than Min_Nsize = %lu is ignored\n",
---
> 		     _("WARNING: R_NSIZE smaller than Min_Nsize = %lu is ignored\n"),
243c244
< 	R_ShowMessage("WARNING: vsize ridiculously low, Megabytes assumed\n");
---
> 	R_ShowMessage(_("WARNING: 'vsize' argument is ridiculously low, Megabytes assumed\n"));
246a248
>       if(sml) {
248,250c250,254
< 		 "WARNING: %s v(ector heap)size '%lu' ignored,"
< 		 " using default = %gM\n",
< 		 sml ? "too small" : "too large",
---
> 		 _("WARNING: too small v(ector heap)size '%lu' ignored, using default = %gM\n"),
> 		 (unsigned long) vsize, R_VSIZE / Mega);
>       } else
> 		snprintf(msg, 1024,
> 		 _("WARNING: too large v(ector heap)size '%lu' ignored, using default = %gM\n"),
256a261,265
> 	  if(sml) {
> 		snprintf(msg, 1024,
> 		 _("WARNING: too small language heap (n)size '%lu' ignored, using default = %ld\n"),
> 		 (unsigned long) nsize, R_NSIZE);
> 	  } else
258,260c267,268
< 		 "WARNING: %s language heap (n)size '%lu' ignored,"
< 		 " using default = %ld\n",
< 		 sml ? "too small" : "too large", (unsigned long) nsize, R_NSIZE);
---
> 		 _("WARNING: too large language heap (n)size '%lu' ignored, using default = %ld\n"),
> 		 (unsigned long) nsize, R_NSIZE);
283c291
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/subassign.c R/src/main/subassign.c
91a92
> #include <Localization.h>
187c188
< 	    error("bad expand value");
---
> 	    error(_("bad expand value"));
257c258
< 	UNIMPLEMENTED_TYPE("EnlargeVector", x);
---
> 	UNIMPLEMENTED_TYPE("EnlargeVector()", x);
291c292
<     warningcall(call, "implicit list embedding of S4 objects is deprecated");
---
>     warningcall(call, _("implicit list embedding of S4 objects is deprecated"));
666c667
< 		error(_("NAs are not allowed in subscripted assignments"));
---
> 		error(_("NA values are not allowed in subscripted assignments"));
861c862
< 	warningcall(call, "sub assignment (*[*] <- *) not done; __bug?__");
---
> 	warningcall(call, _("sub assignment (*[*] <- *) not done; __bug?__"));
969c970
< 	error(_("NAs are not allowed in subscripted assignments"));
---
> 	error(_("NA values are not allowed in subscripted assignments"));
1212c1213
< 		    error(_("NAs are not allowed in subscripted assignments"));
---
> 		    error(_("NA values are not allowed in subscripted assignments"));
1380c1381
< 	error("internal error: index %d from length %d", ind, length(sub));
---
> 	error(_("internal error: index %d from length %d"), ind, length(sub));
1507c1508
< 	error(_("SubAssignArgs: invalid number of arguments"));
---
> 	error(_("'SubAssignArgs()': invalid number of arguments"));
1767c1768
< 	  errorcall(call, _("[[<- defined for objects of type \"S4\" only for subclasses of environment"));
---
> 	  errorcall(call, _("'[[<-' defined for objects of type \"S4\" only for subclasses of environment"));
1787c1788
< 	    error(_("wrong args for environment subassignment"));
---
> 	    error(_("wrong arguments for environment subassignment"));
1819c1820
< 	    error(_("[[ ]] with missing subscript"));
---
> 	    error(_("'[[ ]]' with missing subscript"));
1837c1838
< 		error(_("[[ ]] subscript out of bounds"));
---
> 		error(_("'[[ ]]' subscript out of bounds"));
1843c1844
< 		error(_("[[ ]] improper number of subscripts"));
---
> 		error(_("'[[ ]]' improper number of subscripts"));
1856c1857
< 		    error(_("[[ ]] subscript out of bounds"));
---
> 		    error(_("'[[ ]]' subscript (%d) out of bounds"), i+1);
1990c1991
< 	    error(_("incompatible types (from %s to %s) in [[ assignment"),
---
> 	    error(_("incompatible types (from %s to %s) in '[[' assignment"),
2025c2026
< 		error(_("[[ ]] improper number of subscripts"));
---
> 		error(_("'[[ ]]' improper number of subscripts"));
2037c2038
< 		    error(_("[[ ]] subscript (%d) out of bounds"), i+1);
---
> 		    error(_("'[[ ]]' subscript (%d) out of bounds"), i+1);
2183c2184
< 	    warning(_("Coercing LHS to a list"));
---
> 	    warning(_("coercing LHS to a list"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/subscript.c R/src/main/subscript.c
36a37
> #include <Localization.h>
298c299
< 	error("should only be called in an assignment context.");
---
> 	error(_("should only be called in an assignment context."));
317c318
< 		error("invalid subscript for pairlist");
---
> 		error(_("invalid subscript for pairlist"));
388c389
< 			ECALL(call, _("subscript out of bounds"));
---
> 			ECALL(call, _("subscript is out of bounds"));
407c408
< 			ECALL(call, _("subscript out of bounds"));
---
> 			ECALL(call, _("subscript is out of bounds"));
432c433
< 		    ECALL(call, _("subscript out of bounds"));
---
> 		    ECALL(call, _("subscript is out of bounds"));
449c450
< a subscript out of bounds error.  */
---
> a subscript is out of bounds error.  */
472c473
< 	    if (v == 0) errorcall(call, _("subscript out of bounds"));
---
> 	    if (v == 0) errorcall(call, _("subscript is out of bounds"));
686c687
< 	    ECALL(call, _("subscript out of bounds"));
---
> 	    ECALL(call, _("subscript is out of bounds"));
726c727
< 	    ECALL(call, _("subscript out of bounds"));
---
> 	    ECALL(call, _("subscript is out of bounds"));
877c878
< 		ECALL(call, _("subscript out of bounds"));
---
> 		ECALL(call, _("subscript is out of bounds"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/subset.c R/src/main/subset.c
40a41
> #include <Localization.h>
1001c1002
< 		    error("getter call used outside of a complex assignment.");
---
> 		    error(_("getter call used outside of a complex assignment"));
1061c1062
< 	    error("invalid subscript for pairlist");
---
> 	    error(_("invalid subscript for pairlist"));
1091c1092
< 	    UNIMPLEMENTED_TYPE("do_subset2", x);
---
> 	    UNIMPLEMENTED_TYPE("do_subset2()", x);
1234c1235
< 	    errorcall(call, "$ operator not defined for this S4 class");
---
> 	    errorcall(call, _("$ operator not defined for this S4 class"));
1353c1354
< 	errorcall(call, "$ operator is invalid for atomic vectors");
---
> 	errorcall(call, _("$ operator is invalid for atomic vectors"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/summary.c R/src/main/summary.c
24a25
> #include <Localization.h>
28c29
< 
---
> #include <R_ext/Minmax.h>
34d34
< #define imax2(x, y) ((x < y) ? y : x)
116c116
< 	warningcall(call, _("integer overflow - use sum(as.numeric(.))"));
---
> 	warningcall(call, _("integer overflow in '%s' function; use '%s'"), "isum()", "sum(as.numeric(.))");
549c549
<     REprintf("C do_summary(op%s, *): did NOT dispatch\n", PRIMNAME(op));
---
>     REprintf(_("C do_summary(op%s, *): did NOT dispatch\n"), PRIMNAME(op));
816,817c816
< 				warningcall(call,_(
< 				  "Integer overflow - use sum(as.numeric(.))"));
---
> 				warningcall(call,_("integer overflow in '%s' function; use '%s'"), "do_summary()", "sum(as.numeric(.))");
935c934
< 		warningcall(call, _("no non-missing arguments to min; returning Inf"));
---
> 		warningcall(call, _("no non-missing arguments passed to 'min()' function; returning Inf"));
937c936
< 		warningcall(call, _("no non-missing arguments to max; returning -Inf"));
---
> 		warningcall(call, _("no non-missing arguments passed to 'max()' function; returning -Inf"));
1093c1092
< 	error(_("argument to 'which' is not logical"));
---
> 	error(_("argument passed to 'which()' function is not logical"));
1207c1206
< 	len = imax2(len, n);
---
> 	len = max(len, n);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/sysutils.c R/src/main/sysutils.c
26a27
> #include <Localization.h>
60c61
< #ifdef Win32
---
> #ifdef _WIN32
106c107
< #ifdef Win32
---
> #ifdef _WIN32
152c153
< #if defined(Win32)
---
> #if defined(_WIN32)
177,178c178
< 	error(_("unsupported conversion from '%s' in codepage %d"),
< 	      from, localeCP);
---
> 	error(_("unsupported conversion from '%s' in codepage %d"), from, localeCP);
267c267
< 	error(_("no 'pattern'"));
---
> 	error(_("no '%s' argument"), "pattern");
269c269
< 	error(_("no 'tempdir'"));
---
> 	error(_("no '%s' argument"), "tempdir");
271c271
< 	error(_("no 'fileext'"));
---
> 	error(_("no '%s' argument"), "fileext");
356c356
< #ifdef Win32
---
> #ifdef _WIN32
377c377
< #ifdef Win32
---
> #ifdef _WIN32
399c399
< #ifdef Win32
---
> #ifdef _WIN32
429c429
< #ifdef Win32
---
> #ifdef _WIN32
477c477
< #elif defined(Win32)
---
> #elif defined(_WIN32)
489c489
<     error(_("'Sys.setenv' is not available on this system"));
---
>     error(_("'%s' function is not available on this system"), "Sys.setenv()");
515c515
< # ifdef Win32
---
> # ifdef _WIN32
544c544
<     warning(_("'Sys.unsetenv' is not available on this system"));
---
>     warning(_("'%s' function is not available on this system"), "Sys.unsetenv()");
642,644c642,643
< #ifdef Win32
< 	    error(_("unsupported conversion from '%s' to '%s' in codepage %d"),
< 		  from, to, localeCP);
---
> #ifdef _WIN32
> 	    error(_("unsupported conversion from '%s' to '%s' in codepage %d"), from, to, localeCP);
659c658
< 		error(_("'x' must be a character vector"));
---
> 		error(_("'%s' argument must be a character vector"), "x");
676c675
< 		    error(_("'x' must be a character vector or a list of NULL or raw vectors"));
---
> 		    error(_("'x' argument must be a character vector or a list of NULL or raw vectors"));
792c791
< #if defined Win32 || __APPLE__
---
> #if defined _WIN32 || __APPLE__
794c793
< # ifdef Win32
---
> # ifdef _WIN32
888c887
< #ifdef Win32
---
> #ifdef _WIN32
903c902
< #ifdef Win32
---
> #ifdef _WIN32
985,986c984,985
< 	error(_("'%s' must be called on a CHARSXP, but got '%s'"),
< 	      "translateChar", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function must be called on a CHARSXP, but got '%s'"),
> 	      "translateChar()", type2char(TYPEOF(x)));
1006,1007c1005,1006
< 	error(_("'%s' must be called on a CHARSXP, but got '%s'"),
< 	      "translateChar", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function must be called on a CHARSXP, but got '%s'"),
> 	      "translateChar()", type2char(TYPEOF(x)));
1027,1028c1026,1027
< 	error(_("'%s' must be called on a CHARSXP, but got '%s'"),
< 	      "translateChar", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function must be called on a CHARSXP, but got '%s'"),
> 	      "translateChar()", type2char(TYPEOF(x)));
1046,1047c1045,1046
< 	error(_("'%s' must be called on a CHARSXP, but got '%s'"),
< 	      "installTrChar", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function must be called on a CHARSXP, but got '%s'"),
> 	      "installTrChar()", type2char(TYPEOF(x)));
1111c1110
< #ifdef Win32
---
> #ifdef _WIN32
1161,1162c1160,1161
< 	error(_("'%s' must be called on a CHARSXP, but got '%s'"),
< 	      "translateCharUTF8", type2char(TYPEOF(x)));
---
> 	error(_("'%s' function must be called on a CHARSXP, but got '%s'"),
> 	      "translateCharUTF8()", type2char(TYPEOF(x)));
1219c1218
< #ifdef Win32
---
> #ifdef _WIN32
1282c1281
< #ifdef Win32
---
> #ifdef _WIN32
1335c1334
< #ifdef Win32
---
> #ifdef _WIN32
1359c1358
< #ifdef Win32
---
> #ifdef _WIN32
1377c1376
<  #ifdef Win32
---
>  #ifdef _WIN32
1449c1448
< #ifdef Win32
---
> #ifdef _WIN32
1549c1548
<     if (res > ny) error("converted string too long for buffer");
---
>     if (res > ny) error(_("converted string is too long for buffer"));
1570c1569
< #ifdef Win32
---
> #ifdef _WIN32
1610c1609
< #ifndef  Win32
---
> #ifndef  _WIN32
1734c1733
< #ifdef Win32
---
> #ifdef _WIN32
1745c1744
< #ifdef Win32
---
> #ifdef _WIN32
1752c1751
< #ifdef Win32
---
> #ifdef _WIN32
1777c1776
< #ifdef Win32
---
> #ifdef _WIN32
1784c1783
< #ifdef Win32
---
> #ifdef _WIN32
1804c1803
< #ifdef Win32
---
> #ifdef _WIN32
1811c1810
< #ifdef Win32
---
> #ifdef _WIN32
1827c1826
< #ifndef Win32
---
> #ifndef _WIN32
1875c1874
< #ifdef Win32
---
> #ifdef _WIN32
1891c1890
< 	error(_("temporary name too long"));
---
> 	error(_("temporary name is too long"));
1909c1908
< 	error(_("allocation failed in R_tmpnam2"));
---
> 	error(_("allocation failure in '%s' function"), "R_tmpnam2()");
1943c1942
< #ifdef Win32
---
> #ifdef _WIN32
1990c1989
< #ifdef Win32
---
> #ifdef _WIN32
2008c2007
< #ifdef Win32
---
> #ifdef _WIN32
2023c2022
< #ifdef Win32
---
> #ifdef _WIN32
2042c2041
< #ifdef Win32
---
> #ifdef _WIN32
2070c2069
< #ifdef Win32
---
> #ifdef _WIN32
2083c2082
< #ifdef Win32
---
> #ifdef _WIN32
2091c2090
< #ifdef Win32
---
> #ifdef _WIN32
2095c2094
< #ifdef Win32
---
> #ifdef _WIN32
2174c2173
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/unique.c R/src/main/unique.c
27a28
> #include <Localization.h>
32,34c33,34
< #define ARGUSED(x) LEVELS(x)
< #define SET_ARGUSED(x,v) SETLEVELS(x,v)
< 
---
> static R_INLINE int ARGUSED(SEXP x) { return LEVELS(x); }
> static R_INLINE void SET_ARGUSED(SEXP x, int v) { SETLEVELS(x, v); }
362c362
< #define IMAX 4294967296L
---
> #define IMAX 4294967296L //2^32
414c414
< 	UNIMPLEMENTED_TYPE("HashTableSetup", x);
---
> 	UNIMPLEMENTED_TYPE("HashTableSetup()", x);
444c444
< 	if (d->nmax-- < 0) error("hash table is full");
---
> 	if (d->nmax-- < 0) error(_("hash table is full"));
456c456
< 	if (d->nmax-- < 0) error("hash table is full");
---
> 	if (d->nmax-- < 0) error(_("hash table is full"));
514c514
<     if (!isVector(x)) error(_("'duplicated' applies only to vectors"));
---
>     if (!isVector(x)) error(_("'%s' method applies only to vectors"), "duplicated()");
543c543
<     if (!isVector(x)) error(_("'duplicated' applies only to vectors"));
---
>     if (!isVector(x)) error(_("'%s' method applies only to vectors"), "duplicated()");
573c573
<     if (!isVector(x)) error(_("'duplicated' applies only to vectors"));
---
>     if (!isVector(x)) error(_("'%s' method applies only to vectors"), "duplicated()");
597c597
<     if (!isVector(x)) error(_("'duplicated' applies only to vectors"));
---
>     if (!isVector(x)) error(_("'%s' method applies only to vectors"), "duplicated()");
636c636
<     if (!isVector(x)) error(_("'duplicated' applies only to vectors"));
---
>     if (!isVector(x)) error(_("'%s' method applies only to vectors"), "duplicated()");
691c691
< 	error(_("'fromLast' must be length 1"));
---
> 	error(_("'%s' argument must be of length 1"), "fromLast");
694c694
< 	error(_("'fromLast' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "fromLast");
705,707c705,707
< 	error(_("%s() applies only to vectors"),
< 	      (PRIMVAL(op) == 0 ? "duplicated" :
< 	       (PRIMVAL(op) == 1 ? "unique" : /* 2 */ "anyDuplicated")));
---
> 	error(_("'%s' method applies only to vectors"),
> 	      (PRIMVAL(op) == 0 ? "duplicated()" :
> 	       (PRIMVAL(op) == 1 ? "unique()" : /* 2 */ "anyDuplicated()")));
712c712
< 	    error(_("'nmax' must be positive"));
---
> 	    error(_("'%s' argument must be positive"), "nmax");
786c786
< 	UNIMPLEMENTED_TYPE("duplicated", x);
---
> 	UNIMPLEMENTED_TYPE("duplicated()", x);
964a965
> 	default: error(_("invalid type")); break;
1040c1041
< 	error(_("'match' requires vector arguments"));
---
> 	error(_("'match()' function requires vector arguments"));
1350c1351
< 	error(_("... used in a situation where it does not exist"));
---
> 	error(_("'...' used in a situation where it does not exist"));
1356c1357
< 	error(_("... is not a pairlist"));
---
>     error(_("'...' is not a pairlist"));
1399c1400
< 	error(_("'envir' must be an environment"));
---
> 	error(_("'%s' argument must be an environment"), "envir");
1501c1502
<     if(narm == NA_LOGICAL) error("'na.rm' must be TRUE or FALSE");
---
>     if(narm == NA_LOGICAL) error(_("'%s' argument must be TRUE or FALSE"), "na.rm");
1550c1551
< 	error("non-numeric matrix in rowsum(): this should not happen");
---
> 	error(_("non-numeric matrix in 'rowsum()': this should not happen"));
1552c1553
<     if (TYPEOF(rn) != STRSXP) error("row names are not character");
---
>     if (TYPEOF(rn) != STRSXP) error(_("row names are not character"));
1576c1577
<     if(narm == NA_LOGICAL) error("'na.rm' must be TRUE or FALSE");
---
>     if(narm == NA_LOGICAL) error(_("'%s' argument must be TRUE or FALSE"), "na.rm");
1589c1590
< 	    error(_("non-numeric data frame in rowsum"));
---
> 	    error(_("non-numeric data frame in 'rowsum()'"));
1628c1629
<     if (TYPEOF(rn) != STRSXP) error("row names are not character");
---
>     if (TYPEOF(rn) != STRSXP) error(_("row names are not character"));
1695c1696
< 	error(_("'names' must be a character vector"));
---
> 	error(_("'%s' argument must be a character vector"), "names");
1699c1700
< 	error(_("'%s' must be a character string"), "sep");
---
> 	error(_("'%s' argument must be a character string"), "sep");
1772c1773
< 	error("C function 'csduplicated' not called on a STRSXP");
---
> 	error(_("'csduplicated()' function was not called on a STRSXP"));
1798c1799
<     if (k > dn/2) error("This algorithm is for size <= n/2");
---
>     if (k > dn/2) error(_("This algorithm is for size <= n/2"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/util.c R/src/main/util.c
25a26
> #include <Localization.h>
28a30
> #include <R_ext/Minmax.h>
35d36
< #define R_imax2(x, y) ((x < y) ? y : x)
42c43
< #ifdef Win32
---
> #ifdef _WIN32
104c105
< const static char type_msg[] = "invalid type passed to internal function\n";
---
> //const static char type_msg[] = "invalid type passed to internal function\n";
110c111
< 	    errorcall(call, type_msg);
---
> 	    errorcall(call, _("invalid type passed to internal function\n"));
112c113
< 	    error(type_msg);
---
> 	    error(_("invalid type passed to internal function\n"));
297c298
<     warning(_("type %d is unimplemented in '%s'"), t, "type2str");
---
>     warning(_("type %d is unimplemented in '%s' function"), t, "type2str()");
299c300
<     snprintf(buf, 50, "unknown type #%d", t);
---
>     snprintf(buf, 50, _("unknown type #%d"), t);
309,310c310
<     error(_("type %d is unimplemented in '%s'"), t,
< 	  "type2ImmutableScalarString");
---
>     error(_("type %d is unimplemented in '%s' function"), t, "type2ImmutableScalarString()");
320c320
<     warning(_("type %d is unimplemented in '%s'"), t, "type2char");
---
>     warning(_("type %d is unimplemented in '%s' function"), t, "type2char()");
322c322
<     snprintf(buf, 50, "unknown type #%d", t);
---
>     snprintf(buf, 50, _("unknown type #%d"), t);
335c335
<     error(_("type %d is unimplemented in '%s'"), t, "type2symbol");
---
>     error(_("type %d is unimplemented in '%s' function"), t, "type2symbol()");
346c346
< 	    error(_("unimplemented type '%s' in '%s'\n"), TypeTable[i].str, s);
---
> 	    error(_("unimplemented type '%s' in '%s' function"), TypeTable[i].str, s);
348c348
<     error(_("unimplemented type (%d) in '%s'\n"), t, s);
---
>     error(_("type %d is unimplemented in '%s' function"), t, s);
482,484c482,488
< 	if (PRIMINTERNAL(op))
< 	    error(ngettext("%d argument passed to .Internal(%s) which requires %d",
< 		     "%d arguments passed to .Internal(%s) which requires %d",
---
> 	if (PRIMINTERNAL(op)) {
> 	   char *primname = PRIMNAME(op);
> 	   const int bufsize = strlen(".Internal()") + strlen(primname);
> 	   char result [bufsize];
> 	   snprintf(result, bufsize, ".Internal(%s)", primname);
> 	    error(n_("%d argument passed to '%s' function which requires %d",
> 		     "%d arguments passed to '%s' function which requires %d",
486,487c490,491
< 		  length(args), PRIMNAME(op), PRIMARITY(op));
< 	else
---
> 		  length(args), result, PRIMARITY(op));
> 	} else
489,490c493,494
< 		      ngettext("%d argument passed to '%s' which requires %d",
< 			       "%d arguments passed to '%s' which requires %d",
---
> 		      n_("%d argument passed to '%s' function which requires %d",
> 			       "%d arguments passed to '%s' function which requires %d",
504,505c508
< 	errorcall(call, _("supplied argument name '%s' does not match '%s'"),
< 		  supplied, formal);
---
> 	errorcall(call, _("supplied argument name '%s' does not match '%s'"), supplied, formal);
514c517
< 		error(_("'nthcdr' list shorter than %d"), n);
---
> 		error(_("'nthcdr()' list is shorter than %d"), n);
649c652
< 	error(_("'all.x' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "all.x");
651c654
< 	error(_("'all.y' must be TRUE or FALSE"));
---
> 	error(_("'%s' argument must be TRUE or FALSE"), "all.y");
723c726
< #ifdef Win32
---
> #ifdef _WIN32
733c736
< #ifdef Win32
---
> #ifdef _WIN32
760c763
< #if defined(Win32) && defined(_MSC_VER)
---
> #if defined(_WIN32) && defined(_MSC_VER)
777c780
< #ifdef Win32
---
> #ifdef _WIN32
797c800
< #ifdef Win32
---
> #ifdef _WIN32
815c818
< 	    if (wcslen(pp) > PATH_MAX - 1) error(_("path too long"));
---
> 	    if (wcslen(pp) > PATH_MAX - 1) error(_("'%s' argument is too long"), "path");
849c852
< 		error(_("path too long"));
---
> 		error(_("'%s' argument is too long"), "path");
871c874
< #ifdef Win32
---
> #ifdef _WIN32
891c894
< 		error(_("path too long"));
---
> 		error(_("'%s' argument is too long"), "path");
932c935
< 		error(_("path too long"));
---
> 		error(_("'%s' argument is too long"), "path");
955c958
< #ifndef Win32 /* Windows version is in src/gnuwin32/extra.c */
---
> #ifndef _WIN32 /* Windows version is in src/gnuwin32/extra.c */
969c972
< 	error(_("'path' must be a character vector"));
---
> 	error(_("'%s' argument must be a character vector"), "path");
1000c1003
< 	else if (mustWork == 1) error("fatal translation error");
---
> 	else if (mustWork == 1) error(_("fatal translation error"));
1005c1008
<     warning("this platform does not have realpath so the results may not be canonical");
---
>     warning(_("this platform does not have realpath so the results may not be canonical"));
1073c1076
< #ifdef Win32
---
> #ifdef _WIN32
1105c1108
< 	warning(_("only the first character of 'quote' will be used"));
---
> 	warning(_("only the first character of 'quote' argument will be used"));
1119c1122
< 		w = R_imax2(w, Rstrlen(s, quote));
---
> 		w = max(w, Rstrlen(s, quote));
1124c1127
< #ifdef Win32
---
> #ifdef _WIN32
1152c1155
< #ifdef Win32
---
> #ifdef _WIN32
1198c1201
< 	error(_("'value' must be of positive length"));
---
> 	error(_("'value' argument must be of positive length"));
1353c1356
< 	    if (m < 0) error(_("invalid input '%s' in 'utf8towcs'"), s);
---
> 	    if (m < 0) error(_("invalid input '%s' in 'utf8towcs()' function"), s);
1366c1369
< 	    if (m < 0) error(_("invalid input '%s' in 'utf8towcs'"), s);
---
> 	    if (m < 0) error(_("invalid input '%s' in 'utf8towcs()' function"), s);
1566c1569
< #ifdef Win32
---
> #ifdef _WIN32
1921c1924
< 	errorcall(call, "argument is not a character vector");
---
> 	errorcall(call, _("'%s' argument is not a character vector"), "x");
2076c2079
< #ifdef Win32
---
> #ifdef _WIN32
2134c2137
< 			error("failed to set ICU locale %s (%d)", s, status);
---
> 			error(_("failed to set ICU locale %s (%d)"), s, status);
2138c2141
< 			error("failed to open ICU collator (%d)", status);
---
> 			error(_("failed to open ICU collator (%d)"), status);
2160c2163
< 		    error("failed to set ICU collator attribute");
---
> 		    error(_("failed to set ICU collator attribute"));
2185c2188
<     } else ans = "ICU not in use";
---
>     } else ans = _("ICU not in use");
2210c2213
< #ifndef Win32
---
> #ifndef _WIN32
2222c2225
< 		error("failed to set ICU locale (%d)", status);
---
> 		error(_("failed to set ICU locale (%d)"), status);
2226c2229
< 		error("failed to open ICU collator (%d)", status);
---
> 		error(_("failed to open ICU collator (%d)"), status);
2244c2247
<     if (U_FAILURE(status)) error("could not collate using ICU");
---
>     if (U_FAILURE(status)) error(_("could not collate using ICU"));
2259c2262
<     return mkString("ICU not in use");
---
>     return mkString(_("ICU not in use"));
2264c2267
< # ifdef Win32
---
> # ifdef _WIN32
2301c2304
<     if (!isString(in)) error("input must be a character string");
---
>     if (!isString(in)) error(_("input must be a character string"));
2319c2322
< 	if(breaks[i-1] > breaks[i]) error(_("'breaks' is not sorted"));
---
> 	if(breaks[i-1] > breaks[i]) error(_("'breaks' argument is not sorted"));
2373c2376
<     if (TYPEOF(in) != INTSXP)  error("invalid input");
---
>     if (TYPEOF(in) != INTSXP)  error(_("invalid input"));
2413c2416
<     if(TYPEOF(xt) != REALSXP || TYPEOF(x) != REALSXP) error("invalid input");
---
>     if(TYPEOF(xt) != REALSXP || TYPEOF(x) != REALSXP) error(_("invalid input"));
2441c2444
< #ifdef Win32
---
> #ifdef _WIN32
2470c2473
< 	error(_("'eps.correct' must be 0, 1, or 2"));
---
> 	error(_("'%s' argument must be 0, 1, or 2"), "eps.correct");
2499c2502
<     if (!isVector(x)) error(_("'x' must be a vector"));
---
>     if (!isVector(x)) error(_("'%s' argument must be a vector"), "x");
2581c2584
< #ifdef Win32
---
> #ifdef _WIN32
2604c2607
< 	error("width cannot be zero");
---
> 	error(_("width cannot be zero"));
2619c2622
< 	    error("'type' must be \"integer\" for  \"d\"-format");
---
> 	    error(_("'type' argument must be \"integer\" for \"d\"-format"));
2639,2640c2642
< 	fprintf(stderr, "strsignif.c: form='%s', width=%d, dig=%d\n",
< 		form, width, dig);
---
> 	fprintf(stderr, "strsignif.c: form='%s', width=%d, dig=%d\n", form, width, dig);
2682,2683c2684
< 				fprintf(stderr, "\t>>> jL=%d, j=%d; new res= '%s'\n",
< 					jL, j, result[i]);
---
> 				fprintf(stderr, "\t>>> jL=%d, j=%d; new res= '%s'\n", jL, j, result[i]);
2690,2691c2691
< 			    fprintf(stderr, "\t  iex >= -4; using %d for 'dig'\n",
< 				    (iex >= dig) ? (iex+1) : dig);
---
> 			    fprintf(stderr, "\t  iex >= -4; using %d for 'dig'\n", (iex >= dig) ? (iex+1) : dig);
2703c2703
< 	    error("'type' must be \"real\" for this format");
---
> 	    error(_("'type' argument must be \"real\" for this format"));
2733c2733
< 	error("unsupported type ");
---
> 	error(_("unsupported type "));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/version.c R/src/main/version.c
25c25,26
< #include "Defn.h"
---
> #include <Localization.h>
> #include <Defn.h>
31c32
<     char buf[384];
---
>     char buf[500];
34c35
<     PrintVersion_part_1(buf, 384);
---
>     PrintVersion_part_1(buf, 500);
36c37
< 
---
>     Rprintf("Ivory is not part of the R project, so please do not report bugs\nvia r-bugs or the R website - instead refer to the author.\n\n");
54,55c55,56
<     PROTECT(value = allocVector(VECSXP,14));
<     PROTECT(names = allocVector(STRSXP,14));
---
>     PROTECT(value = allocVector(VECSXP,15));
>     PROTECT(names = allocVector(STRSXP,15));
82c83
<     snprintf(buf, 128, "%d", R_SVN_REVISION);
---
>     snprintf(buf, 128, "%d", R_SVN_BASEREVISION);
84,85c85,90
<     SET_STRING_ELT(names, 11, mkChar("language"));
<     SET_VECTOR_ELT(value, 11, mkString("R"));
---
>     SET_STRING_ELT(names, 11, mkChar("svn rev ivory"));
> 
>     snprintf(buf, 128, "%d", R_SVN_REVISION);
>     SET_VECTOR_ELT(value, 11, mkString(buf));
>     SET_STRING_ELT(names, 12, mkChar("language"));
>     SET_VECTOR_ELT(value, 12, mkString("R"));
88,91c93,96
<     SET_STRING_ELT(names, 12, mkChar("version.string"));
<     SET_VECTOR_ELT(value, 12, mkString(buf));
<     SET_STRING_ELT(names, 13, mkChar("nickname"));
<     SET_VECTOR_ELT(value, 13, mkString(R_NICK));
---
>     SET_STRING_ELT(names, 13, mkChar("version.string"));
>     SET_VECTOR_ELT(value, 13, mkString(buf));
>     SET_STRING_ELT(names, 14, mkChar("nickname"));
>     SET_VECTOR_ELT(value, 14, mkString(R_NICK));
112c117
<     if(R_SVN_REVISION <= 0) {// 'svn info' failed in ../../Makefile.in
---
>     if(R_SVN_BASEREVISION <= 0) {// 'svn info' failed in ../../Makefile.in
114c119
< 		R_MAJOR, R_MINOR, R_STATUS, R_YEAR, R_MONTH, R_DAY);
---
> 		R_MAJOR, R_MINOR, R_STATUS, R_BASEYEAR, R_BASEMONTH, R_BASEDAY);
117c122
< 		R_MAJOR, R_MINOR, R_YEAR, R_MONTH, R_DAY);
---
> 		R_MAJOR, R_MINOR, R_BASEYEAR, R_BASEMONTH, R_BASEDAY);
120c125
< 		R_STATUS, R_YEAR, R_MONTH, R_DAY, R_SVN_REVISION);
---
> 		R_STATUS, R_BASEYEAR, R_BASEMONTH, R_BASEDAY, R_SVN_BASEREVISION);
122a128,145
> 		R_MAJOR, R_MINOR, R_STATUS, R_BASEYEAR, R_BASEMONTH, R_BASEDAY,
> 		R_SVN_BASEREVISION);
>     }
> }
> 
> void attribute_hidden PrintIvoryVersionString(char *s, size_t len)
> {
>     if(R_SVN_REVISION <= 0) {// 'svn info' failed in ../../Makefile.in
>         snprintf(s, len, "Ivory version %s.%s %s (%s-%s-%s)",
>                 R_MAJOR, R_MINOR, R_STATUS, R_YEAR, R_MONTH, R_DAY);
>     } else if(strlen(R_STATUS) == 0) {
>         snprintf(s, len, "Ivory version %s.%s (%s-%s-%s)",
>                 R_MAJOR, R_MINOR, R_YEAR, R_MONTH, R_DAY);
>     } else if(strcmp(R_STATUS, "Under development (unstable)") == 0) {
>         snprintf(s, len, "Ivory %s (%s-%s-%s r%d)",
>                 R_STATUS, R_YEAR, R_MONTH, R_DAY, R_SVN_REVISION);
>     } else {
>         snprintf(s, len, "Ivory version %s.%s %s (%s-%s-%s r%d)",
131a155,157
>     PrintIvoryVersionString(s, len);
>     strcat(s, " -- \"Internationalized Version of R\"\n");
>     SPRINTF_2("Copyright (C) 2013-%s Lukasz Daniel (lukasz.daniel@gmail.com)\nSee README-IVORY file for details.\n\n", R_YEAR);
133c159
<     PrintVersionString(s, len);
---
>     PrintVersionString(tmp, len);
137c163
< 	strcat(s, nick);
---
> 	strcat(tmp, nick);
139,140c165,166
<     SPRINTF_2("\nCopyright (C) %s The R Foundation for Statistical Computing\n",
< 	      R_YEAR);
---
>     strcat(s, tmp);
>     SPRINTF_2("\nCopyright (C) %s The R Foundation for Statistical Computing\n", R_YEAR);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/main/xspline.c R/src/main/xspline.c
15c15
< 
---
> #include <Localization.h>
534c534
<       error(_("There must be at least three control points"));
---
>       error(_("there must be at least three control points"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/X11/dataentry.c R/src/modules/X11/dataentry.c
38a39
> #include <Localization.h>
43c44
< 
---
> #include <R_ext/Minmax.h>
224,229d224
< #ifndef max
< #define max(a, b) (((a)>(b))?(a):(b))
< #endif
< #ifndef min
< #define min(a, b) (((a)<(b))?(a):(b))
< #endif
310c305
<     char *title = "R Data Editor";
---
>     char *title = _("R Data Editor");
320c315
< 	errorcall(call, "invalid argument");
---
> 	errorcall(call, _("invalid argument"));
368c363
< 	    errorcall(call, "invalid type for value");
---
> 	    errorcall(call, _("invalid type for value"));
379c374
< 	errorcall(call, "unable to start data editor");
---
> 	errorcall(call, _("unable to start data editor"));
439c434
< 		    error("dataentry: internal memory problem");
---
> 		    error(_("dataentry: internal memory problem"));
475c470
< 	errorcall(call, "invalid argument");
---
> 	errorcall(call, _("invalid argument"));
478c473
< 	errorcall(call, "invalid argument");
---
> 	errorcall(call, _("invalid argument"));
508c503
< 	    errorcall(call, "invalid argument");
---
> 	    errorcall(call, _("invalid argument"));
514c509
< 	errorcall(call, "unable to start data viewer");
---
> 	errorcall(call, _("unable to start data viewer"));
735c730
< 	UNIMPLEMENTED("advancerect");
---
> 	UNIMPLEMENTED("advancerect()");
788c783
< 	error("get_col_name: column number too big to stringify");
---
> 	error(_("get_col_name: column number too big to stringify"));
915c910
< 	error("dataentry: internal memory error");
---
> 	error(_("dataentry: internal memory error"));
1032c1027
< 	error("internal type error in dataentry");
---
> 	error(_("internal type error in 'dataentry'"));
1045c1040
< 		error("internal type error in dataentry");
---
> 		error(_("internal type error in 'dataentry'"));
1146c1141
< 			warning("dataentry: parse error on string");
---
> 			warning(_("dataentry: parse error on string"));
1348c1343
< 	warning("dataentry: expression too long");
---
> 	warning(_("dataentry: expression too long"));
1758c1753
< 	    warning("dataentry: expression too long");
---
> 	    warning(_("dataentry: expression too long"));
1881c1876
<     error("X11 fatal IO error: please save work and shut down R");
---
>     error(_("X11 fatal IO error: please save work and shut down R"));
1906,1907c1901,1902
< 	warning("locale not supported by Xlib: some X ops will operate in C locale");
<     if (!XSetLocaleModifiers ("")) warning("X cannot set locale modifiers");
---
> 	warning(_("locale not supported by Xlib: some X ops will operate in C locale"));
>     if (!XSetLocaleModifiers ("")) warning(_("X cannot set locale modifiers"));
1911c1906
< 	    warning("unable to open display");
---
> 	    warning(_("unable to open display"));
1942c1937
< 	    warning("unable to create fontset %s", opt_fontset_name);
---
> 	    warning(_("unable to create fontset %s"), opt_fontset_name);
1948c1943
< 	    warning("unable to load font %s", font_name);
---
> 	    warning(_("unable to load font %s"), font_name);
2073c2068
< 	warning("unable to open window for data editor");
---
> 	warning(_("unable to open window for data editor"));
2107c2102
< 	    warning("unable to open X Input Method");
---
> 	    warning(_("unable to open X Input Method"));
2142c2137
< 	    warning("unable to open X Input Context");
---
> 	    warning(_("unable to open X Input Context"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/X11/devX11.c R/src/modules/X11/devX11.c
33c33
< 
---
> #include <Localization.h>
546c546
< 	    warning(_("X11 driver unable to obtain color cube\n  reverting to monochrome"));
---
> 	    warning(_("X11 driver is unable to obtain color cube. Reverting to monochrome"));
594,595c594
< 	error(_("Error: X11 cannot allocate additional graphics colors.\n\
< Consider using X11 with colortype=\"pseudo.cube\" or \"gray\"."));
---
> 	error(_("Error: X11 cannot allocate additional graphics colors.\nConsider using X11 with colortype=\"pseudo.cube\" or \"gray\"."));
654c653
< 	printf("Unknown Visual\n");
---
> 	printf(_("Unknown Visual\n"));
718c717
< 	printf("Unknown Visual\n");
---
> 	printf(_("Unknown Visual\n"));
797,799c796,797
< 			warning("cairo error '%s'", 
< 				cairo_status_to_string(res));
< 			error("fatal error on resize: please shut down the device");
---
> 			warning(_("cairo error '%s'"), cairo_status_to_string(res));
> 			error(_("fatal error on resize: please shut down the device"));
907c905
<     printf("loading fontset %s\n", fontset_name);
---
>     printf(_("loading fontset %s\n"), fontset_name);
919c917
< 	   warning("font for charset %s is lacking.", missing_charset_list[i]);
---
> 	   warning(_("font for charset %s is lacking."), missing_charset_list[i]);
939c937
<     printf("trying face %d size %d\n", face, size);
---
>     printf(_("trying face %d size %d\n"), face, size);
993c991
<     Rprintf("loading:\n%s\n",buf);
---
>     Rprintf(_("loading:\n%s\n"),buf);
1001c999
<     if (tmp) Rprintf("success\n"); else Rprintf("failure\n");
---
>     if (tmp) Rprintf(_("success\n")); else Rprintf(_("failure\n"));
1029c1027
< 		error(_("could not find any X11 fonts\nCheck that the Font Path is correct."));
---
> 		error(_("could not find any X11 fonts. Check that the Font Path is correct."));
1049c1047
< 	Rprintf("loading:\n%s\n",buf);
---
> 	Rprintf(_("loading:\n%s\n"),buf);
1056c1054
< 	if (tmp) Rprintf("success\n"); else Rprintf("failure\n");
---
> 	if (tmp) Rprintf(_("success\n")); else Rprintf(_("failure\n"));
1069c1067
< 	Rprintf("loading:\n%s\n",buf);
---
> 	Rprintf(_("loading:\n%s\n"),buf);
1078c1076
< 	if (tmp) Rprintf("success\n"); else Rprintf("failure\n");
---
> 	if (tmp) Rprintf(_("success\n")); else Rprintf(_("failure\n"));
1089,1090c1087
< 	    warning(_("X11 used font size %d when %d was requested"),
< 		    pixelsize, size);
---
> 	    warning(_("X11 used font size %d when %d was requested"), pixelsize, size);
1123,1124c1120
< 	    error(_("X11 font %s, face %d at size %d could not be loaded"),
< 		  family, face, size);
---
> 	    error(_("X11 font %s, face %d at size %d could not be loaded"), family, face, size);
1328c1324
< 	warning(_("locale not supported by Xlib: some X ops will operate in C locale"));
---
> 	warning(_("locale is not supported by Xlib: some X operations will operate in C locale"));
1339c1335
< 	    error(_("filename too long in png() call"));
---
> 	    error(_("filename is too long in '%s' call"), "png()");
1365c1361
< 	    error(_("filename too long in jpeg() call"));
---
> 	    error(_("filename is too long in '%s' call"), "jpeg()");
1389c1385
< 	    error(_("filename too long in tiff() call"));
---
> 	    error(_("filename is too long in '%s' call"), "tiff()");
1401c1397
< 	    error(_("filename too long in bmp() call"));
---
> 	    error(_("filename is too long in '%s' call"), "bmp()");
1461c1457
< 	warning(_("jpeg() does not support transparency: using white bg"));
---
> 	warning(_("'jpeg()' function does not support transparency: using white background"));
1566,1567c1562
< 		    warning(_("unable to obtain information on display '%s'"),
< 			    dsp);
---
> 		    warning(_("unable to obtain information on display '%s'"), dsp);
1638,1639c1633
< 			warning("cairo error '%s'",
< 				cairo_status_to_string(res));
---
> 			warning(_("cairo error '%s'"), cairo_status_to_string(res));
1646,1647c1640
< 			warning("cairo error '%s'", 
< 				cairo_status_to_string(res));
---
> 			warning(_("cairo error '%s'"), cairo_status_to_string(res));
1667c1660
< 		    warning("cairo error '%s'", cairo_status_to_string(res));
---
> 		    warning(_("cairo error '%s'"), cairo_status_to_string(res));
1676c1669
< 		    warning("cairo error '%s'", cairo_status_to_string(res));
---
> 		    warning(_("cairo error '%s'"), cairo_status_to_string(res));
1719,1720c1712
< 	    warning(_("'width=%d, height=%d' are unlikely values in pixels"),
< 		    iw, ih);
---
> 	    warning(_("'width=%d, height=%d' are unlikely values in pixels"), iw, ih);
1795c1787
< 	    warning(_("font family not found in X11 font database"));
---
> 	    warning(_("font family is not found in X11 font database"));
1846c1838
< 	    printf("--- end of fontlist ---\n\n");
---
> 	    printf(_("--- end of fontlist ---\n\n"));
2125c2117
< 	sprintf(t, "R Graphics: Device %d", ndevNumber(dd) + 1);
---
> 	sprintf(t, _("R Graphics: Device %d"), ndevNumber(dd) + 1);
2127c2119
<     strcat(t, " (ACTIVE)");
---
>     strcat(t, _(" (ACTIVE DEVICE)"));
2142c2134
< 	sprintf(t, "R Graphics: Device %d", ndevNumber(dd) + 1);
---
> 	sprintf(t, _("R Graphics: Device %d"), ndevNumber(dd) + 1);
2144c2136
<     strcat(t, " (inactive)");
---
>     strcat(t, _(" (inactive device)"));
2185c2177
<     warning(_("%s not available for this device"), "Path drawing");
---
>     warning(_("Path drawing is not available for this device"));
2529c2521
< 	error(_("attempt to use the locator after dev.hold()"));
---
> 	error(_("attempt to use the locator after 'dev.hold()'"));
2766c2758
< 	warning("that type is not supported on this platform - using \"nbcairo\"");
---
> 	warning(_("that type is not supported on this platform - using \"nbcairo\""));
2780c2772
< 	warning("cairo-based types are not supported on this build - using \"Xlib\"");
---
> 	warning(_("cairo-based types are not supported on this build - using \"Xlib\""));
3121c3113
< 	    errorcall(call, _("unable to start device %s"), devname);
---
> 	    errorcall(call, _("unable to start device '%s'"), devname);
3145c3137
< 	error("a forked child should not open a graphics device");
---
> 	error(_("a forked child should not open a graphics device"));
3152c3144
< 	errorcall(call, _("invalid 'width' or 'height'"));
---
> 	errorcall(call, _("invalid 'width' or 'height' arguments"));
3159c3151
< 	error(_("invalid colortype passed to X11 driver"));
---
> 	error(_("invalid 'colortype' argument passed to X11 driver"));
3172,3173c3164
< 	warningcall(call,
< 		    _("unknown X11 color/colour model -- using monochrome"));
---
> 	warningcall(call, _("unknown X11 color/colour model -- using monochrome"));
3265c3256
<     if (!xd->cs || !xd->useCairo) error(_("not an open X11cairo device"));
---
>     if (!xd->cs || !xd->useCairo) error(_("no open 'X11cairo' device"));
3269c3260
< 	    error("cairo error '%s'", cairo_status_to_string(res));
---
> 	    error(_("cairo error '%s'"), cairo_status_to_string(res));
3291c3282
<     error(_("savePlot() is not supported on this build"));
---
>     error(_("'savePlot()' function is not supported on this build"));
3340c3331
<       error("X11 clipboard selection is not supported on this system");
---
>       error(_("X11 clipboard selection is not supported on this system"));
3416c3407
< 	error(_("cannot allocate memory for X11Routines structure"));
---
> 	error(_("cannot allocate memory for 'X11Routines' structure"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/X11/rbitmap.c R/src/modules/X11/rbitmap.c
44c44
< 
---
> #include <Localization.h>
300c300
<     warning("No png support in this version of R");
---
>     warning(_("no png support in this version of R"));
452c452
<     warning("No jpeg support in this version of R");
---
>     warning(_("no jpeg support in this version of R"));
486c486
< 	warning("unable to open TIFF file '%s'", outfile);
---
> 	warning(_("unable to open TIFF file '%s'"), outfile);
549c549
<     warning("No TIFF support in this version of R");
---
>     warning(_("no TIFF support in this version of R"));
560c560
< #define BMPERROR {error("Problems writing to 'bmp' file");return 0;}
---
> #define BMPERROR {error(_("Problems writing to 'bmp' file"));return 0;}
573c573
< 	error("Problems writing to 'bmp' file");
---
> 	error(_("Problems writing to 'bmp' file"));
582c582
< 	error("Problems writing to 'bmp' file");
---
> 	error(_("Problems writing to 'bmp' file"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/Rhttpd.c R/src/modules/internet/Rhttpd.c
45a46,47
> #include <Localization.h>
> 
353c355
< #ifndef Win32
---
> #ifndef _WIN32
1189c1191
< 	Rf_error("unable to create socket");
---
> 	Rf_error(_("unable to create socket"));
1207c1209
< 	    Rf_error("unable to bind socket to TCP port %d", port);
---
> 	    Rf_error(_("unable to bind socket to TCP port %d"), port);
1213c1215
< 	Rf_error("cannot listen to TCP port %d", port);
---
> 	Rf_error(_("cannot listen to TCP port %d"), port);
1261c1263
< 	Rf_error("invalid bind address specification");
---
> 	Rf_error(_("invalid bind address specification"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/Rsock.c R/src/modules/internet/Rsock.c
29c29
< #ifdef Win32
---
> #ifdef _WIN32
156c156
< #ifdef Win32
---
> #ifdef _WIN32
183c183
< #ifndef Win32
---
> #ifndef _WIN32
190c190
< #ifdef Win32
---
> #ifdef _WIN32
238c238
< #elif defined(Win32)
---
> #elif defined(_WIN32)
311c311
< 	} else {  /* always poll occationally--not really necessary */
---
> 	} else {  /* always poll occasionally--not really necessary */
315c315
< #elif defined(Win32)
---
> #elif defined(_WIN32)
404c404
< #ifdef Win32
---
> #ifdef _WIN32
456c456
< #elif defined(Win32)
---
> #elif defined(_WIN32)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/internet.c R/src/modules/internet/internet.c
27a28,29
> #include <Localization.h>
> 
50c52
< #ifdef Win32
---
> #ifdef _WIN32
107c109
< 	REprintf("can only open URLs for reading");
---
> 	REprintf(_("can only open URLs for reading"));
112c114
< #ifdef Win32
---
> #ifdef _WIN32
230c232
< #ifdef Win32
---
> #ifdef _WIN32
238c240
< 	REprintf("can only open URLs for reading");
---
> 	REprintf(_("can only open URLs for reading"));
350,355c352,357
<     Rconnection new;
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of url connection failed"));
<     new->class = (char *) malloc(strlen("url-wininet") + 1);
<     if(!new->class) {
< 	free(new);
---
>     Rconnection newcon;
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of url connection failed"));
>     newcon->conclass = (char *) malloc(strlen("url") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
357c359
<         /* for Solaris 12.5 */ new = NULL;
---
>         /* for Solaris 12.5 */ newcon = NULL;
359,361c361,364
<     new->description = (char *) malloc(strlen(description) + 1);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "url");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
363c366
<         /* for Solaris 12.5 */ new = NULL;
---
>         /* for Solaris 12.5 */ newcon = NULL;
365,367c368,370
<     init_con(new, description, CE_NATIVE, mode);
<     new->canwrite = FALSE;
< #ifdef Win32
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->canwrite = FALSE;
> #ifdef _WIN32
369,373c372,375
< 	new->open = &url_open2;
< 	new->read = &url_read2;
< 	new->close = &url_close2;
< 	new->fgetc_internal = &url_fgetc_internal2;
< 	strcpy(new->class, "url-wininet");
---
> 	newcon->open = &url_open2;
> 	newcon->read = &url_read2;
> 	newcon->close = &url_close2;
> 	newcon->fgetc_internal = &url_fgetc_internal2;
377,386c379,387
< 	new->open = &url_open;
< 	new->read = &url_read;
< 	new->close = &url_close;
< 	new->fgetc_internal = &url_fgetc_internal;
< 	strcpy(new->class, "url");
<     }
<     new->fgetc = &dummy_fgetc;
<     struct urlconn *uc = new->private = (void *) malloc(sizeof(struct urlconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
> 	newcon->open = &url_open;
> 	newcon->read = &url_read;
> 	newcon->close = &url_close;
> 	newcon->fgetc_internal = &url_fgetc_internal;
>     }
>     newcon->fgetc = &dummy_fgetc;
>     struct urlconn *uc = newcon->private = (void *) malloc(sizeof(struct urlconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
388c389
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
394c395
< 	    free(new->description); free(new->class); free(new->private); free(new);
---
> 	    free(newcon->description); free(newcon->conclass); free(newcon->private); free(newcon);
396c397
< 	    /* for Solaris 12.5 */ new = NULL;
---
> 	    /* for Solaris 12.5 */ newcon = NULL;
401c402
<     return new;
---
>     return newcon;
406c407
< static void putdots(DLsize_t *pold, DLsize_t new)
---
> static void putdots(DLsize_t *pold, DLsize_t newt)
409,410c410,411
<     *pold = new;
<     for(i = old; i < new; i++) {
---
>     *pold = newt;
>     for(i = old; i < newt; i++) {
418c419
< static void putdashes(int *pold, int new)
---
> static void putdashes(int *pold, int newi)
421,422c422,423
<     *pold = new;
<     for(i = old; i < new; i++)  REprintf("=");
---
>     *pold = newi;
>     for(i = old; i < newi; i++)  REprintf("=");
433c434
< #ifdef Win32
---
> #ifdef _WIN32
462c463
< #ifdef Win32
---
> #ifdef _WIN32
471c472
< 	warning(_("only first element of 'url' argument used"));
---
> 	warning(_("only first element of '%s' argument will be used"), "url");
477c478
< 	warning(_("only first element of 'destfile' argument used"));
---
> 	warning(_("only first element of '%s' argument will be used"), "destfile");
493c494
< #ifdef Win32
---
> #ifdef _WIN32
512c513
< #ifdef Win32
---
> #ifdef _WIN32
521,522c522
< 	    error(_("cannot open URL '%s', reason '%s'"),
< 		  url, strerror(errno));
---
> 	    error(_("cannot open URL '%s', reason '%s'"), url, strerror(errno));
528,529c528
< 	    error(_("cannot open destfile '%s', reason '%s'"),
< 		  file, strerror(errno));
---
> 	    error(_("cannot open destfile '%s', reason '%s'"), file, strerror(errno));
538c537
< #ifdef Win32
---
> #ifdef _WIN32
549c548
< #ifdef Win32
---
> #ifdef _WIN32
555,556c554
< 	    error(_("cannot open destfile '%s', reason '%s'"),
< 		  file, strerror(errno));
---
> 	    error(_("cannot open destfile '%s', reason '%s'"), file, strerror(errno));
560c558
< 	if(!quiet) REprintf(_("trying URL '%s'\n"), url);
---
> 	if(!quiet) REprintf(_("Trying URL '%s'\n"), url);
562c560
< #ifdef Win32
---
> #ifdef _WIN32
584c582
< //	    if(!quiet) REprintf(_("opened URL\n"), url);
---
> //	    if(!quiet) REprintf(_("Opened URL\n"), url);
586c584
< #ifdef Win32
---
> #ifdef _WIN32
600c598
< 		    settext(pbar.wprog, "Download progress");
---
> 		    settext(pbar.wprog, _("Download progress"));
615c613
< #ifdef Win32
---
> #ifdef _WIN32
626c624
< 				snprintf(pbuf, 30, "%d%% downloaded", pc);
---
> 				snprintf(pbuf, 30, _("%d%% downloaded"), pc);
641c639
< #ifdef Win32
---
> #ifdef _WIN32
647,648c645
< 		    REprintf("downloaded %0.1f MB\n\n",
< 			     (double)nbytes/1024/1024);
---
> 		    REprintf(_("Downloaded %0.1f MB"), (double)nbytes/1024/1024);
650c647
< 		    REprintf("downloaded %d KB\n\n", (int) nbytes/1024);
---
> 		    REprintf(_("Downloaded %d KB"), (int) nbytes/1024);
652c649,650
< 		    REprintf("downloaded %d bytes\n\n", (int) nbytes);
---
> 		    REprintf(n_("Downloaded %d byte", "Downloaded %d bytes", (int) nbytes), (int) nbytes);
> 		REprintf("\n\n");
654c652
< #ifdef Win32
---
> #ifdef _WIN32
662,663c660
< 		warning(_("downloaded length %0.f != reported length %0.f"),
< 			(double)nbytes, (double)total);
---
> 		warning(_("downloaded length %0.f != reported length %0.f"), (double)nbytes, (double)total);
678c675
< #ifdef Win32
---
> #ifdef _WIN32
689,690c686,687
< 	if(!quiet) REprintf(_("trying URL '%s'\n"), url);
< #ifdef Win32
---
> 	if(!quiet) REprintf(_("Trying URL '%s'\n"), url);
> #ifdef _WIN32
696c693
< //	    if(!quiet) REprintf(_("opened URL\n"), url);
---
> //	    if(!quiet) REprintf(_("Opened URL\n"), url);
698c695
< #ifdef Win32
---
> #ifdef _WIN32
711c708
< 		settext(pbar.wprog, "Download progress");
---
> 		settext(pbar.wprog, _("Download progress"));
727c724
< #ifdef Win32
---
> #ifdef _WIN32
738c735
< 			    snprintf(pbuf, 30, "%d%% downloaded", pc);
---
> 			    snprintf(pbuf, 30, _("%d%% downloaded"), pc);
753c750
< #ifdef Win32
---
> #ifdef _WIN32
759c756
< 		    REprintf("downloaded %0.1f MB\n\n",
---
> 		    REprintf(_("Downloaded %0.1f MB"),
762c759
< 		    REprintf("downloaded %d KB\n\n", (int) nbytes/1024);
---
> 		    REprintf(_("Downloaded %d KB"), (int) nbytes/1024);
764c761,762
< 		    REprintf("downloaded %d bytes\n\n", (int) nbytes);
---
> 		    REprintf(n_("Downloaded %d byte", "Downloaded %d bytes", (int) nbytes), (int) nbytes);
> 			REprintf("\n\n");
766c764
< #ifdef Win32
---
> #ifdef _WIN32
825d822
< 		REprintf("Content type '%s'", type ? type : "unknown");
828,829c825,827
< 		    REprintf(" length %0.0f bytes (%0.1f MB)\n", (double)len,
< 			len/1024.0/1024.0);
---
> 		    REprintf(n_("Content type '%s' length %0.0f byte (%0.1f MB)",
> 				      "Content type '%s' length %0.0f bytes (%0.1f MB)",
> 				      len), type ? type : "unknown", (double)len, len/1024.0/1024.0);
831,832c829,831
< 		    REprintf(" length %d bytes (%d KB)\n",
< 			     (int)len, (int)(len/1024));
---
> 		    REprintf(n_("Content type '%s' length %d byte (%d KB)",
> 				      "Content type '%s' length %d bytes (%d KB)",
> 				      (int)len), type ? type : "unknown", (int)len, (int)(len/1024));
834,836c833,838
< 		    REprintf(" length %d bytes\n", (int)len);
< 		else REprintf(" length unknown\n", len);
< #ifdef Win32
---
> 		    REprintf(n_("Content type '%s' length %d byte",
> 				      "Content type '%s' length %d bytes",
> 				      (int)len), type ? type : "unknown", (int)len);
> 		else REprintf(_("Content type '%s' length unknown"), type ? type : "unknown", len);
> 		REprintf("\n");
> #ifdef _WIN32
878c880
< 	    REprintf("ftp data connection made, file length %ld bytes\n", len);
---
> 	    REprintf(_("ftp data connection made, file length %ld bytes\n"), len);
880,881c882,883
< 	    REprintf("ftp data connection made, file length unknown\n");
< #ifdef Win32
---
> 	    REprintf(_("ftp data connection made, file length unknown\n"));
> #ifdef _WIN32
908c910
< #ifdef Win32
---
> #ifdef _WIN32
998d999
< 	REprintf("Content type '%s'", buf);
1000,1001c1001
< 	    REprintf(" length %0.0f bytes (%0.1f MB)\n", (double)len,
< 		     len/1024.0/1024.0);
---
> 	    REprintf(n_("Content type '%s' length %0.0f byte (%0.1f MB)", "Content type '%s' length %0.0f bytes (%0.1f MB)", len), buf, (double) len, len/1024.0/1024.0);
1003,1004c1003
< 	    REprintf(" length %d bytes (%d KB)\n",
< 		     (int)len, (int)(len/1024));
---
> 	    REprintf(n_("Content type '%s' length %d byte (%d KB)", "Content type '%s' length %d bytes (%d KB)", (int)len), buf, (int) len, (int) (len/1024));
1006,1007c1005,1007
< 	    REprintf(" length %d bytes\n", (int)len);
< 	else REprintf(" length unknown\n", len);
---
> 	    REprintf(n_("Content type '%s' length %d byte", "Content type '%s' length %d bytes", (int)len), buf, (int) len);
> 	else REprintf(_("Content type '%s' length unknown"), buf);
> 	    REprintf("\n");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/libcurl.c R/src/modules/internet/libcurl.c
24c24
< #ifdef Win32
---
> #ifdef _WIN32
27a28,29
> #include <Localization.h>
> #include <R_ext/Minmax.h>
46c48
< # ifdef Win32
---
> # ifdef _WIN32
231c233
< #ifdef Win32
---
> #ifdef _WIN32
313c315
<     error(_("curlGetHeaders is not supported on this platform"));
---
>     error(_("'curlGetHeaders()' function is not supported on this platform"));
317c319
<        error("invalid %s argument", "url");
---
>        error(_("invalid '%s' argument"), "url");
322c324
< 	error(_("invalid %s argument"), "redirect");
---
>        error(_("invalid '%s' argument"), "redirect");
325c327
< 	error(_("invalid %s argument"), "verify");
---
> 	error(_("invalid '%s' argument"), "verify");
347,348c349
< 	    error(_("libcurl error code %d:\n\t%s\n"), ret,
< 		  "unable to access SSL/TLS CA certificates");
---
> 	    error(_("libcurl error code %d:\n\tunable to access SSL/TLS CA certificates\n"), ret);
350c351
< 	    error("libcurl error code %d\n", ret);
---
> 	    error(_("libcurl error code %d\n"), ret);
377c378
< # ifdef Win32
---
> #ifdef _WIN32
413c414
< 		REprintf(" length %0.0f bytes (%0.1f MB)\n",
---
> 		REprintf(n_("Content length %0.0f byte (%0.1f MB)", "Content length %0.0f bytes (%0.1f MB)", total),
416c417
< 		REprintf("Content length %d bytes (%d KB)\n",
---
> 		REprintf(n_("Content length %d byte (%d KB)", "Content length %d bytes (%d KB)", (int)total),
419c420,421
< 		REprintf("Content length %d bytes\n", (int)total);
---
> 		REprintf(n_("Content length %d byte", "Content length %d bytes",(int)total), (int)total);
> 		REprintf("\n");
433c435
< 		    snprintf(pbuf, 30, "%d%% downloaded", pc);
---
> 		    snprintf(pbuf, 30, _("%d%% downloaded"), pc);
461d462
< 	    REprintf("Content type '%s'", type ? type : "unknown");
464,465c465,466
< 		REprintf(" length %0.0f bytes (%0.1f MB)\n",
< 			 total, total/1024.0/1024.0);
---
> 		REprintf(n_("Content type '%s' length %0.0f byte (%0.1f MB)", "Content type '%s' length %0.0f bytes (%0.1f MB)", total),
> 			 type ? type : "unknown", total, total/1024.0/1024.0);
467,468c468,469
< 		REprintf(" length %d bytes (%d KB)\n",
< 			 (int)total, (int)(total/1024));
---
> 		REprintf(n_("Content type '%s' length %d byte (%d KB)", "Content type '%s' length %d bytes (%d KB)",(int)total),
> 			 type ? type : "unknown", (int)total, (int)(total/1024));
470c471,472
< 		REprintf(" length %d bytes\n", (int)total);
---
> 		REprintf(n_("Content type '%s' length %d byte", "Content type '%s' length %d bytes", (int)total), type ? type : "unknown", (int)total);
> 		REprintf("\n");
477c479
< # endif // Win32
---
> #endif // _WIN32
487c489
<     error(_("download.file(method = \"libcurl\") is not supported on this platform"));
---
>     error(_("'download.file(method = \"libcurl\")' is not supported on this platform"));
503c505
< 	error(_("lengths of 'url' and 'destfile' must match"));
---
> 	error(_("lengths of 'url' and 'destfile' arguments must match"));
584c586
< #ifdef Win32
---
> #ifdef _WIN32
600c602
< 		settext(pbar.wprog, "Download progress");
---
> 		settext(pbar.wprog, _("Download progress"));
618c620
< 	if (!quiet) REprintf(_("trying URL '%s'\n"), url);
---
> 	if (!quiet) REprintf(_("Trying URL '%s'\n"), url);
634c636
< 	    warning("curl_multi_wait() failed, code %d", mc);
---
> 	    warning(_("'curl_multi_wait()' function failed, code %d"), mc);
649c651
< #ifdef Win32
---
> #ifdef _WIN32
668c670
< 		REprintf("downloaded %0.1f MB\n\n", (double)dl/1024/1024);
---
> 		REprintf(_("Downloaded %0.1f MB"), (double)dl/1024/1024);
670c672
< 		REprintf("downloaded %d KB\n\n", (int) dl/1024);
---
> 		REprintf(_("Downloaded %d KB"), (int) dl/1024);
672c674,675
< 		REprintf("downloaded %d bytes\n\n", (int) dl);
---
> 		REprintf(n_("Downloaded %d byte", "Downloaded %d bytes", (int) dl), (int) dl);
> 		REprintf("\n\n");
734d736
< #define R_MIN(a, b) ((a) < (b) ? (a) : (b))
776c778
<     size_t size = R_MIN(ctxt->filled, max);  // guaranteed > 0
---
>     size_t size = min(ctxt->filled, max);  // guaranteed > 0
794c796
< 	    warning("curl_multi_wait() failed, code %d", mc);
---
> 	    warning(_("'curl_multi_wait()' function failed, code %d"), mc);
859c861
< 	REprintf("can only open URLs for reading");
---
> 	REprintf(_("can only open URLs for reading"));
917,921c919,923
<     Rconnection new = (Rconnection) malloc(sizeof(struct Rconn));
<     if (!new) error(_("allocation of url connection failed"));
<     new->class = (char *) malloc(strlen("url-libcurl") + 1);
<     if (!new->class) {
< 	free(new);
---
>     Rconnection newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if (!newcon) error(_("allocation of url connection failed"));
>     newcon->conclass = (char *) malloc(strlen("url-libcurl") + 1);
>     if (!newcon->conclass) {
> 	free(newcon);
923c925
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
925,928c927,930
<     strcpy(new->class, "url-libcurl");
<     new->description = (char *) malloc(strlen(description) + 1);
<     if (!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "url-libcurl");
>     newcon->description = (char *) malloc(strlen(description) + 1);
>     if (!newcon->description) {
> 	free(newcon->conclass); free(newcon);
930c932
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
932,942c934,944
<     init_con(new, description, CE_NATIVE, mode);
<     new->canwrite = FALSE;
<     new->open = &Curl_open;
<     new->close = &Curl_close;
<     new->destroy = &Curl_destroy;
<     new->fgetc_internal = &Curl_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->read = &Curl_read;
<     new->private = (void *) malloc(sizeof(struct Curlconn));
<     if (!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, description, CE_NATIVE, mode);
>     newcon->canwrite = FALSE;
>     newcon->open = &Curl_open;
>     newcon->close = &Curl_close;
>     newcon->destroy = &Curl_destroy;
>     newcon->fgetc_internal = &Curl_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->read = &Curl_read;
>     newcon->private = (void *) malloc(sizeof(struct Curlconn));
>     if (!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
944c946
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
946c948
<     RCurlconn ctxt = (RCurlconn) new->private;
---
>     RCurlconn ctxt = (RCurlconn) newcon->private;
950,951c952,953
< 	free(new->description); free(new->class); free(new->private);
< 	free(new);
---
> 	free(newcon->description); free(newcon->conclass); free(newcon->private);
> 	free(newcon);
953c955
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
960,961c962,963
< 	    free(new->description); free(new->class); free(new->private);
< 	    free(new); curl_slist_free_all(ctxt->headers);
---
> 	    free(newcon->description); free(newcon->conclass); free(newcon->private);
> 	    free(newcon); curl_slist_free_all(ctxt->headers);
963c965
< 	    /* for Solaris 12.5 */ new = NULL;
---
> 	    /* for Solaris 12.5 */ newcon = NULL;
967c969
<     return new;
---
>     return newcon;
969c971
<     error(_("url(method = \"libcurl\") is not supported on this platform"));
---
>     error(_("'url(method = \"libcurl\")' is not supported on this platform"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/nanoftp.c R/src/modules/internet/nanoftp.c
38,43c38,39
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) gettext (String)
< #else
< #define _(String) (String)
< #endif
---
> #include <Localization.h>
> 
47c43
< #ifdef Win32
---
> #ifdef _WIN32
443c439
< 	RxmlMessage(1, "error allocating FTP context");
---
> 	RxmlMessage(1, _("error allocating FTP context"));
563c559
< 	RxmlMessage(0, "RxmlNanoFTPGetMore : buffer full %d", ctxt->controlBufUsed);
---
> 	RxmlMessage(0, _("RxmlNanoFTPGetMore : buffer full %d"), ctxt->controlBufUsed);
572c568
< 	RxmlMessage(1, "recv failed");
---
> 	RxmlMessage(1, _("recv failed"));
577c573
<     RxmlMessage(0, "RxmlNanoFTPGetMore : read %d [%d - %d]", len,
---
>     RxmlMessage(0, _("RxmlNanoFTPGetMore : read %d [%d - %d]"), len,
663c659
<     RxmlMessage(1, "Got %d", res);
---
>     RxmlMessage(1, _("Got %d"), res);
738c734
< 	RxmlMessage(1, "send failed");
---
> 	RxmlMessage(1, _("send failed"));
764c760
< 	RxmlMessage(1, "send failed");
---
> 	RxmlMessage(1, _("send failed"));
922c918
< 		RxmlMessage(1, "send failed");
---
> 		RxmlMessage(1, _("send failed"));
942c938
< 			RxmlMessage(1, "send failed");
---
> 			RxmlMessage(1, _("send failed"));
981c977
< 		    RxmlMessage(1, "send failed");
---
> 		    RxmlMessage(1, _("send failed"));
1010c1006
< 		    RxmlMessage(1, "send failed");
---
> 		    RxmlMessage(1, _("send failed"));
1031c1027
< 		    RxmlMessage(1, "send failed");
---
> 		    RxmlMessage(1, _("send failed"));
1093c1089
< 	    RxmlMessage(1, "FTP server asking for ACCNT on anonymous");
---
> 	    RxmlMessage(1, _("FTP server asking for ACCNT on anonymous"));
1147c1143
< 	    RxmlMessage(1, "send failed");
---
> 	    RxmlMessage(1, _("send failed"));
1168c1164
< 	    RxmlMessage(1, "Invalid answer to PASV");
---
> 	    RxmlMessage(1, _("Invalid answer to PASV"));
1211c1207
< 	    RxmlMessage(1, "send failed");
---
> 	    RxmlMessage(1, _("send failed"));
1258c1254
< 	RxmlMessage(1, "send failed");
---
> 	RxmlMessage(1, _("send failed"));
1278c1274
< 	RxmlMessage(1, "send failed");
---
> 	RxmlMessage(1, _("send failed"));
1327c1323
< #elif defined(Win32)
---
> #elif defined(_WIN32)
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/nanohttp.c R/src/modules/internet/nanohttp.c
46,56c46,47
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #ifdef Win32
< #define _(String) libintl_gettext (String)
< #undef gettext /* needed for graphapp */
< #else
< #define _(String) gettext (String)
< #endif
< #else /* not NLS */
< #define _(String) (String)
< #endif
---
> #include <Localization.h>
> 
60c51
< #ifdef Win32
---
> #ifdef _WIN32
80c71
< #ifdef Win32
---
> #ifdef _WIN32
178c169
< #if defined(HAVE_STRINGS_H) && !defined(Win32)
---
> #if defined(HAVE_STRINGS_H) && !defined(_WIN32)
250c241
< #ifdef Win32
---
> #ifdef _WIN32
288c279
< #ifdef Win32
---
> #ifdef _WIN32
652c643
< #elif defined(Win32)
---
> #elif defined(_WIN32)
1030c1021
< #elif defined(Win32)
---
> #elif defined(_WIN32)
1327c1318
< #ifdef Win32
---
> #ifdef _WIN32
1430c1421,1423
< 	RxmlMessage(0, "ERROR: overflowed buffer by %d bytes\n", -blen);
---
> 	RxmlMessage(0, n_("Error: overflowed buffer by %d byte\n",
> 				"Error: overflowed buffer by %d bytes\n",
> 				-blen), -blen);
1450c1443
< #ifdef Win32
---
> #ifdef _WIN32
1455,1456c1448
< 	REprintf("%s\n%s\n", "Proxy authentication failed:",
< 		"\tplease re-enter the credentials or hit Cancel");
---
> 	REprintf("%s\n", _("Proxy authentication failed:\n\tplease re-enter the credentials or hit Cancel"));
1498c1490
< 	RxmlMessage(1, "Code %d, content-type '%s'",
---
> 	RxmlMessage(1, _("Code %d, content-type '%s'"),
1501c1493
< 	RxmlMessage(1, "Code %d, no content-type",
---
> 	RxmlMessage(1, _("Code %d, no content-type"),
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/sock.c R/src/modules/internet/sock.c
39c39
< #if defined(Win32)
---
> #ifdef _WIN32
86c86
< #if defined(Win32)
---
> #if defined(_WIN32)
119c119
< #ifndef Win32
---
> #ifndef _WIN32
213c213
< #ifdef Win32
---
> #ifdef _WIN32
226c226
< #ifdef Win32
---
> #ifdef _WIN32
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/internet/sockconn.c R/src/modules/internet/sockconn.c
29a30,31
> #include <Localization.h>
> 
44c46
<     Rsockconn this = (Rsockconn)con->private;
---
>     Rsockconn thiscon = (Rsockconn)con->private;
46c48
<     int timeout = this->timeout;
---
>     int timeout = thiscon->timeout;
50c52
<     this->pend = this->pstart = this->inbuf;
---
>     thiscon->pend = thiscon->pstart = thiscon->inbuf;
52,53c54,55
<     if(this->server) {
< 	sock1 = R_SockOpen(this->port);
---
>     if(thiscon->server) {
> 	sock1 = R_SockOpen(thiscon->port);
55c57
< 	    warning("port %d cannot be opened", this->port);
---
> 	    warning(_("port %d cannot be opened"), thiscon->port);
70c72
< 	    warning("problem in listening on this socket");
---
> 	    warning(_("problem in listening on this socket"));
76c78
< 	sprintf(con->description, "<-%s:%d", buf, this->port);
---
> 	sprintf(con->description, "<-%s:%d", buf, thiscon->port);
79c81
< 	sock = R_SockConnect(this->port, con->description, timeout);
---
> 	sock = R_SockConnect(thiscon->port, con->description, timeout);
81c83
< 	    warning("%s:%d cannot be opened", con->description, this->port);
---
> 	    warning(_("%s:%d cannot be opened"), con->description, thiscon->port);
84c86
< 	sprintf(buf, "->%s:%d", con->description, this->port);
---
> 	sprintf(buf, "->%s:%d", con->description, thiscon->port);
87c89
<     this->fd = sock;
---
>     thiscon->fd = sock;
100,101c102,103
<     Rsockconn this = (Rsockconn)con->private;
<     R_SockClose(this->fd);
---
>     Rsockconn thiscon = (Rsockconn)con->private;
>     R_SockClose(thiscon->fd);
107c109
<     Rsockconn this = (Rsockconn)con->private;
---
>     Rsockconn thiscon = (Rsockconn)con->private;
114,115c116,117
< 	if (size > 0 && this->pstart == this->pend) {
< 	    this->pstart = this->pend = this->inbuf;
---
> 	if (size > 0 && thiscon->pstart == thiscon->pend) {
> 	    thiscon->pstart = thiscon->pend = thiscon->inbuf;
117,118c119,120
< 		res = R_SockRead(this->fd, this->inbuf, 4096, 
< 				 con->blocking, this->timeout);
---
> 		res = R_SockRead(thiscon->fd, thiscon->inbuf, 4096,
> 				 con->blocking, thiscon->timeout);
127c129
< 	    else this->pend = this->inbuf + res;
---
> 	    else thiscon->pend = thiscon->inbuf + res;
131c133
< 	if (this->pstart + size <= this->pend)
---
> 	if (thiscon->pstart + size <= thiscon->pend)
134,135c136,137
< 	    n = this->pend - this->pstart;
< 	memcpy(ptr, this->pstart, n);
---
> 	    n = thiscon->pend - thiscon->pstart;
> 	memcpy(ptr, thiscon->pstart, n);
137c139
< 	this->pstart += n;
---
> 	thiscon->pstart += n;
165,167c167,169
<     Rsockconn this = (Rsockconn)con->private;
<     ssize_t n = R_SockWrite(this->fd, ptr, (int)(size * nitems),
< 			    this->timeout)/size;
---
>     Rsockconn thiscon = (Rsockconn)con->private;
>     ssize_t n = R_SockWrite(thiscon->fd, ptr, (int)(size * nitems),
> 			    thiscon->timeout)/size;
174c176
<     Rconnection new;
---
>     Rconnection newcon;
176,180c178,182
<     new = (Rconnection) malloc(sizeof(struct Rconn));
<     if(!new) error(_("allocation of socket connection failed"));
<     new->class = (char *) malloc(strlen("sockconn") + 1);
<     if(!new->class) {
< 	free(new);
---
>     newcon = (Rconnection) malloc(sizeof(struct Rconn));
>     if(!newcon) error(_("allocation of socket connection failed"));
>     newcon->conclass = (char *) malloc(strlen("sockconn") + 1);
>     if(!newcon->conclass) {
> 	free(newcon);
182c184
<         /* for Solaris 12.5 */ new = NULL;
---
>         /* for Solaris 12.5 */ newcon = NULL;
184,187c186,189
<     strcpy(new->class, "sockconn");
<     new->description = (char *) malloc(strlen(host) + 10);
<     if(!new->description) {
< 	free(new->class); free(new);
---
>     strcpy(newcon->conclass, "sockconn");
>     newcon->description = (char *) malloc(strlen(host) + 10);
>     if(!newcon->description) {
> 	free(newcon->conclass); free(newcon);
189c191
<         /* for Solaris 12.5 */ new = NULL;
---
>         /* for Solaris 12.5 */ newcon = NULL;
191,201c193,203
<     init_con(new, host, CE_NATIVE, mode);
<     new->open = &sock_open;
<     new->close = &sock_close;
<     new->vfprintf = &dummy_vfprintf;
<     new->fgetc_internal = &sock_fgetc_internal;
<     new->fgetc = &dummy_fgetc;
<     new->read = &sock_read;
<     new->write = &sock_write;
<     new->private = (void *) malloc(sizeof(struct sockconn));
<     if(!new->private) {
< 	free(new->description); free(new->class); free(new);
---
>     init_con(newcon, host, CE_NATIVE, mode);
>     newcon->open = &sock_open;
>     newcon->close = &sock_close;
>     newcon->vfprintf = &dummy_vfprintf;
>     newcon->fgetc_internal = &sock_fgetc_internal;
>     newcon->fgetc = &dummy_fgetc;
>     newcon->read = &sock_read;
>     newcon->write = &sock_write;
>     newcon->private = (void *) malloc(sizeof(struct sockconn));
>     if(!newcon->private) {
> 	free(newcon->description); free(newcon->conclass); free(newcon);
203c205
< 	/* for Solaris 12.5 */ new = NULL;
---
> 	/* for Solaris 12.5 */ newcon = NULL;
205,208c207,210
<     ((Rsockconn)new->private)-> port = port;
<     ((Rsockconn)new->private)-> server = server;
<     ((Rsockconn)new->private)-> timeout = timeout;
<     return new;
---
>     ((Rsockconn)newcon->private)-> port = port;
>     ((Rsockconn)newcon->private)-> server = server;
>     ((Rsockconn)newcon->private)-> timeout = timeout;
>     return newcon;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/modules/lapack/Lapack.c R/src/modules/lapack/Lapack.c
26a27
> #include <Localization.h>
100c101
< 	error("'jobu' must be a character string");
---
> 	error(_("'%s' argument must be a character string"), "jobu");
115c116
<     if (TYPEOF(dims) != INTSXP) error("non-integer dim(u)");
---
>     if (TYPEOF(dims) != INTSXP) error(_("non-integer dim(u)"));
118c119
<     if (TYPEOF(dims) != INTSXP) error("non-integer dim(vt)");
---
>     if (TYPEOF(dims) != INTSXP) error(_("non-integer dim(vt)"));
131c132
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgesdd");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgesdd()");
138c139
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgesdd");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgesdd()");
197c198
< 	error(_("error code %d from Lapack routine '%s'"), info, "dsyevr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dsyevr()");
208c209
< 	error(_("error code %d from Lapack routine '%s'"), info, "dsyevr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dsyevr()");
289c290
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgeev");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgeev()");
295c296
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgeev");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgeev()");
339c340
<     if (!isMatrix(A)) error(_("'A' must be a numeric matrix"));
---
>     if (!isMatrix(A)) error(_("'%s' must be a numeric matrix"), "A");
341c342
< 	error(_("'type' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "type");
369c370
<     if (!isMatrix(A)) error(_("'A' must be a numeric matrix"));
---
>     if (!isMatrix(A)) error(_("'%s' must be a numeric matrix"), "A");
371c372
< 	error(_("'norm' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "norm");
391c392
< 	    error(_("error [%d] from Lapack 'dgetrf()'"), info);
---
> 	    error(_("error code %d from Lapack routine '%s'"), info, "dgetrf()");
408c409
<     if (info) error(_("error [%d] from Lapack 'dgecon()'"), info);
---
>     if (info) error(_("error code %d from Lapack routine '%s'"), info, "dgecon()");
418,419c419,420
<     if (!isMatrix(A)) error(_("'A' must be a numeric matrix"));
<     if (!isString(norm)) error(_("'norm' must be a character string"));
---
>     if (!isMatrix(A)) error(_("'%s' must be a numeric matrix"), "A");
>     if (!isString(norm)) error(_("'%s' argument must be a character string"), "norm");
428c429
< 	error(_("'A' must be a *square* matrix"));
---
> 	error(_("'%s' must be a square matrix"), "A");
442c443
<     if (info) error(_("error [%d] from Lapack 'dtrcon()'"), info);
---
>     if (info) error(_("error code %d from Lapack routine '%s'"), info, "dtrcon()");
455c456
<     if (!isString(norm)) error(_("'norm' must be a character string"));
---
>     if (!isString(norm)) error(_("'%s' argument must be a character string"), "norm");
457c458
< 	error(_("'A' must be a complex matrix"));
---
> 	error(_("'%s' must be a complex matrix"), "A");
460c461
<     if(n != dims[1]) error(_("'A' must be a *square* matrix"));
---
>     if(n != dims[1]) error(_("'%s' must be a square matrix"), "A");
486c487
< 	error(_("error [%d] from Lapack 'zgetrf()'"), info);
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgetrf()");
494c495
<     if (info) error(_("error [%d] from Lapack 'zgecon()'"), info);
---
>     if (info) error(_("error code %d from Lapack routine '%s'"), info, "zgecon()");
512c513
< 	error(_("'norm' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "norm");
514c515
< 	error(_("'A' must be a complex matrix"));
---
> 	error(_("'%s' must be a complex matrix"), "A");
518c519
< 	error(_("'A' must be a *square* matrix"));
---
> 	error(_("'%s' must be a square matrix"), "A");
530c531
<     if (info) error(_("error [%d] from Lapack 'ztrcon()'"), info);
---
>     if (info) error(_("error code %d from Lapack routine '%s'"), info, "ztrcon()");
546c547
<     if (!isMatrix(A)) error(_("'a' must be a complex matrix"));
---
>     if (!isMatrix(A)) error(_("'%s' must be a complex matrix"), "A");
549c550
<     if(n == 0) error(_("'a' is 0-diml"));
---
>     if(n == 0) error(_("matrix 'A' is zero dimensional"));
551c552
<     if(n2 != n) error(_("'a' (%d x %d) must be square"), n, n2);
---
>     if(n2 != n) error(_("'A' (%d x %d) must be a square matrix"), n, n2);
560c561
< 	    error(_("'b' (%d x %d) must be compatible with 'a' (%d x %d)"),
---
> 	    error(_("'B' (%d x %d) must be compatible with 'A' (%d x %d)"),
574c575
< 	    error(_("'b' (%d x %d) must be compatible with 'a' (%d x %d)"),
---
> 	    error(_("'B' (%d x %d) must be compatible with 'A' (%d x %d)"),
595,596c596
< 	error(_("argument %d of Lapack routine %s had invalid value"),
< 	      -info, "zgesv");
---
> 	error(_("argument %d of Lapack routine '%s' had invalid value"), -info, "zgesv()");
616c616
< 	error(_("'a' must be a complex matrix"));
---
> 	error(_("'%s' must be a complex matrix"), "A");
631c631
< 	error(_("error code %d from Lapack routine '%s'"), info, "zgeqp3");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgeqp3()");
637c637
< 	error(_("error code %d from Lapack routine '%s'"), info, "zgeqp3");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgeqp3()");
676c676
<     if (!isMatrix(Bin)) error(_("'b' must be a complex matrix"));
---
>     if (!isMatrix(Bin)) error(_("'%s' must be a complex matrix"), "b");
691c691
< 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr()");
698c698
< 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr()");
703c703
< 	error(_("error code %d from Lapack routine '%s'"), info, "ztrtrs");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "ztrtrs()");
722c722
< 	error(_("'b' must be a complex matrix"));
---
> 	error(_("'%s' must be a complex matrix"), "b");
738c738
< 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr()");
745c745
< 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zunmqr()");
758c758
< 	error(_("'jobu' must be a character string"));
---
> 	error(_("'%s' argument must be a character string"), "jobu");
785c785
<     if (TYPEOF(dims) != INTSXP) error("non-integer dims");
---
>     if (TYPEOF(dims) != INTSXP) error(_("non-integer dimensions"));
788c788
<     if (TYPEOF(dims) != INTSXP) error("non-integer dims");
---
>     if (TYPEOF(dims) != INTSXP) error(_("non-integer dimensions"));
794c794
< 	error(_("error code %d from Lapack routine '%s'"), info, "zgesdd");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgesdd()");
801c801
< 	error(_("error code %d from Lapack routine '%s'"), info, "zgesdd");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgesdd()");
849c849
< 	error(_("error code %d from Lapack routine '%s'"), info, "zheev");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zheev()");
855c855
< 	error(_("error code %d from Lapack routine '%s'"), info, "zheev");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zheev()");
910c910
< 	error(_("error code %d from Lapack routine '%s'"), info, "zgeev");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgeev()");
917c917
< 	error(_("error code %d from Lapack routine '%s'"), info, "zgeev");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "zgeev()");
943c943
<     if (!isMatrix(A)) error(_("'a' must be a numeric matrix"));
---
>     if (!isMatrix(A)) error(_("'%s' must be a numeric matrix"), "A");
947c947
<     if (TYPEOF(adims) != INTSXP) error("non-integer dims");
---
>     if (TYPEOF(adims) != INTSXP) error(_("non-integer dimensions"));
950,951c950,951
<     if (m != n) error(_("'a' must be a square matrix"));
<     if (m <= 0) error(_("'a' must have dims > 0"));
---
>     if (m != n) error(_("'%s' must be a square matrix"), "A");
>     if (m <= 0) error(_("'A' matrix must have dimensions > 0"));
957c957
<     if (piv != 0 && piv != 1) error("invalid '%s' value", "pivot");
---
>     if (piv != 0 && piv != 1) error(_("invalid '%s' value"), "pivot");
963,966c963,964
< 		error(_("the leading minor of order %d is not positive definite"),
< 		      info);
< 	    error(_("argument %d of Lapack routine %s had invalid value"),
< 		  -info, "dpotrf");
---
> 		error(_("the leading minor of order %d is not positive definite"), info);
> 	    error(_("argument %d of Lapack routine '%s' had invalid value"), -info, "dpotrf()");
980,981c978
< 		error(_("argument %d of Lapack routine %s had invalid value"),
< 		      -info, "dpstrf");
---
> 		error(_("argument %d of Lapack routine '%s' had invalid value"), -info, "dpstrf()");
1006c1003
< 	error(_("'size' argument must be a positive integer"));
---
> 	error(_("'%s' argument must be a positive integer"), "size");
1016c1013
< 	    if (TYPEOF(adims) != INTSXP) error("non-integer dims");
---
> 	    if (TYPEOF(adims) != INTSXP) error(_("non-integer dimensions"));
1019c1016
< 	} else error(_("'a' must be a numeric matrix"));
---
> 	} else error(_("'%s' must be a numeric matrix"), "A");
1034,1037c1031,1032
< 		error(_("element (%d, %d) is zero, so the inverse cannot be computed"),
< 		      info, info);
< 	    error(_("argument %d of Lapack routine %s had invalid value"),
< 		  -info, "dpotri");
---
> 		error(_("element (%d, %d) is zero, so the inverse cannot be computed"), info, info);
> 	    error(_("argument %d of Lapack routine '%s' had invalid value"), -info, "dpotri()");
1058c1053
< 	error(_("'a' must be a numeric matrix"));
---
> 	error(_("'%s' must be a numeric matrix"), "A");
1061c1056
<     if(n == 0) error(_("'a' is 0-diml"));
---
>     if(n == 0) error(_("matrix 'A' is zero dimensional"));
1063c1058
<     if(n2 != n) error(_("'a' (%d x %d) must be square"), n, n2);
---
>     if(n2 != n) error(_("'A' (%d x %d) must be a square matrix"), n, n2);
1072,1073c1067
< 	    error(_("'b' (%d x %d) must be compatible with 'a' (%d x %d)"),
< 		  p2, p, n, n);
---
> 	    error(_("'B' (%d x %d) must be compatible with 'A' (%d x %d)"), p2, p, n, n);
1088,1089c1082
< 	    error(_("'b' (%d x %d) must be compatible with 'a' (%d x %d)"),
< 		  length(Bin), p, n, n);
---
> 	    error(_("'b' (%d x %d) must be compatible with 'a' (%d x %d)"), length(Bin), p, n, n);
1110,1111c1103
< 	error(_("argument %d of Lapack routine %s had invalid value"),
< 	      -info, "dgesv");
---
> 	error(_("argument %d of Lapack routine '%s' had invalid value"), -info, "dgesv()");
1113,1114c1105
< 	error(_("Lapack routine %s: system is exactly singular: U[%d,%d] = 0"),
< 	      "dgesv", info, info);
---
> 	error(_("Lapack routine %s: system is exactly singular: U[%d,%d] = 0"), "dgesv()", info, info);
1123,1124c1114
< 	    error(_("system is computationally singular: reciprocal condition number = %g"),
< 		  rcond);
---
> 	    error(_("system is computationally singular: reciprocal condition number = %g"), rcond);
1135c1125
<     if (!isMatrix(Ain)) error(_("'a' must be a numeric matrix"));
---
>     if (!isMatrix(Ain)) error(_("'%s' must be a numeric matrix"), "A");
1155c1145
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgeqp3");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgeqp3()");
1161c1151
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgeqp3");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgeqp3()");
1190c1180
<     if (!isMatrix(Bin)) error(_("'b' must be a numeric matrix"));
---
>     if (!isMatrix(Bin)) error(_("'%s' must be a numeric matrix"), "b");
1219c1209
< 	error(_("error code %d from Lapack routine '%s'"), info, "dtrtrs");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dtrtrs()");
1232c1222
<     if (!isMatrix(Bin)) error(_("'b' must be a numeric matrix"));
---
>     if (!isMatrix(Bin)) error(_("'%s' must be a numeric matrix"), "b");
1247c1237
< 	error(_("error code %d from Lapack routine '%s'"), info, "dormqr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dormqr()");
1254c1244
< 	error(_("error code %d from Lapack routine '%s'"), info, "dormqr");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dormqr()");
1265,1266c1255,1256
<     if (!isMatrix(Ain)) error(_("'a' must be a numeric matrix"));
<     if (useLog == NA_LOGICAL) error(_("argument 'logarithm' must be logical"));
---
>     if (!isMatrix(Ain)) error(_("'%s' must be a numeric matrix"), "A");
>     if (useLog == NA_LOGICAL) error(_("'%s' argument must be logical"), "logarithm");
1270c1260
<     if (Adims[1] != n) error(_("'a' must be a square matrix"));
---
>     if (Adims[1] != n) error(_("'%s' must be a square matrix"), "A");
1274c1264
< 	error(_("error code %d from Lapack routine '%s'"), info, "dgetrf");
---
> 	error(_("error code %d from Lapack routine '%s'"), info, "dgetrf()");
1276c1266
< 	/*warning("Lapack dgetrf(): singular matrix: U[%d,%d]=0", info,info);*/
---
> 	/*warning(_("Lapack dgetrf(): singular matrix: U[%d,%d]=0"), info,info);*/
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/bessel_i.c R/src/nmath/bessel_i.c
33d32
< #define min0(x, y) (((x) <= (y)) ? (x) : (y))
52c51
< 	ML_ERROR(ME_RANGE, "bessel_i");
---
> 	ML_ERROR(ME_RANGE, "bessel_i()");
77,78c76
< 	    MATHLIB_WARNING4(_("bessel_i(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
< 			     x, ncalc, nb, alpha);
---
> 	    MATHLIB_WARNING4(_("bessel_i(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"), x, ncalc, nb, alpha);
80,81c78
< 	    MATHLIB_WARNING2(_("bessel_i(%g,nu=%g): precision lost in result\n"),
< 			     x, alpha+(double)nb-1);
---
> 	    MATHLIB_WARNING2(_("bessel_i(%g,nu=%g): precision lost in result"), x, alpha+(double)nb-1);
104c101
< 	ML_ERROR(ME_RANGE, "bessel_i");
---
> 	ML_ERROR(ME_RANGE, "bessel_i()");
122,123c119
< 	    MATHLIB_WARNING4(_("bessel_i(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
< 			     x, ncalc, nb, alpha);
---
> 	    MATHLIB_WARNING4(_("bessel_i(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"), x, ncalc, nb, alpha);
125,126c121
< 	    MATHLIB_WARNING2(_("bessel_i(%g,nu=%g): precision lost in result\n"),
< 			     x, alpha+(double)nb-1);
---
> 	    MATHLIB_WARNING2(_("bessel_i(%g,nu=%g): precision lost in result"), x, alpha+(double)nb-1);
321c316
< 			nend = min0(*nb,n);
---
> 			nend = min(*nb,n);
531c526
< 	*ncalc = min0(*nb,0) - 1;
---
> 	*ncalc = min(*nb,0) - 1;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/bessel_j.c R/src/nmath/bessel_j.c
34d33
< #define min0(x, y) (((x) <= (y)) ? (x) : (y))
53c52
< 	ML_ERROR(ME_RANGE, "bessel_j");
---
> 	ML_ERROR(ME_RANGE, "bessel_j()");
64,65c63
< 	MATHLIB_WARNING(_("besselJ(x, nu): nu=%g too large for bessel_j() algorithm"),
< 			alpha);
---
> 	MATHLIB_WARNING(_("besselJ(x, nu): nu=%g too large for 'bessel_j()' algorithm"), alpha);
80,81c78
< 	MATHLIB_WARNING4(_("bessel_j(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
< 			 x, ncalc, nb, alpha);
---
> 	MATHLIB_WARNING4(_("bessel_j(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"), x, ncalc, nb, alpha);
83,84c80
< 	MATHLIB_WARNING2(_("bessel_j(%g,nu=%g): precision lost in result\n"),
< 			 x, alpha+(double)nb-1);
---
> 	MATHLIB_WARNING2(_("bessel_j(%g,nu=%g): precision lost in result"), x, alpha+(double)nb-1);
107c103
< 	ML_ERROR(ME_RANGE, "bessel_j");
---
> 	ML_ERROR(ME_RANGE, "bessel_j()");
118,119c114
< 	MATHLIB_WARNING(_("besselJ(x, nu): nu=%g too large for bessel_j() algorithm"),
< 			alpha);
---
> 	MATHLIB_WARNING(_("besselJ(x, nu): nu=%g too large for 'bessel_j()' algorithm"), alpha);
127,128c122
< 	MATHLIB_WARNING4(_("bessel_j(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
< 			 x, ncalc, nb, alpha);
---
> 	MATHLIB_WARNING4(_("bessel_j(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"), x, ncalc, nb, alpha);
130,131c124
< 	MATHLIB_WARNING2(_("bessel_j(%g,nu=%g): precision lost in result\n"),
< 			 x, alpha+(double)nb-1);
---
> 	MATHLIB_WARNING2(_("bessel_j(%g,nu=%g): precision lost in result"), x, alpha+(double)nb-1);
219c212
<     const static double pi2 = .636619772367581343075535;
---
>     const static double pi2 = M_2_PI; //.636619772367581343075535;
221c214
<     const static double twopi2 =  .001935307179586476925286767;
---
>     const static double twopi2 = M_2PI - twopi1; //.001935307179586476925286767;
254c247
< 	    ML_ERROR(ME_RANGE, "J_bessel");
---
> 	    ML_ERROR(ME_RANGE, "J_bessel()");
422c415
< 			nend = min0(*nb,n);
---
> 			nend = min(*nb,n);
584c577
< 	*ncalc = min0(*nb,0) - 1;
---
> 	*ncalc = min(*nb,0) - 1;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/bessel_k.c R/src/nmath/bessel_k.c
34,35d33
< #define min0(x, y) (((x) <= (y)) ? (x) : (y))
< #define max0(x, y) (((x) <= (y)) ? (y) : (x))
53c51
< 	ML_ERROR(ME_RANGE, "bessel_k");
---
> 	ML_ERROR(ME_RANGE, "bessel_k()");
71,72c69
< 	MATHLIB_WARNING4(_("bessel_k(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
< 			 x, ncalc, nb, alpha);
---
> 	MATHLIB_WARNING4(_("bessel_k(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"), x, ncalc, nb, alpha);
74,75c71
< 	MATHLIB_WARNING2(_("bessel_k(%g,nu=%g): precision lost in result\n"),
< 			 x, alpha+(double)nb-1);
---
> 	MATHLIB_WARNING2(_("bessel_k(%g,nu=%g): precision lost in result"), x, alpha+(double)nb-1);
97c93
< 	ML_ERROR(ME_RANGE, "bessel_k");
---
> 	ML_ERROR(ME_RANGE, "bessel_k()");
108,109c104
< 	MATHLIB_WARNING4(_("bessel_k(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
< 			 x, ncalc, nb, alpha);
---
> 	MATHLIB_WARNING4(_("bessel_k(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"), x, ncalc, nb, alpha);
111,112c106
< 	MATHLIB_WARNING2(_("bessel_k(%g,nu=%g): precision lost in result\n"),
< 			 x, alpha+(double)nb-1);
---
> 	MATHLIB_WARNING2(_("bessel_k(%g,nu=%g): precision lost in result"), x, alpha+(double)nb-1);
251c245
<     *ncalc = min0(*nb,0) - 2;
---
>     *ncalc = min(*nb,0) - 2;
255c249
< 		if(ex < 0) ML_ERROR(ME_RANGE, "K_bessel");
---
> 		if(ex < 0) ML_ERROR(ME_RANGE, "K_bessel()");
505c499
< 	m = min0((int) (wminf - nu),iend);
---
> 	m = min((int) (wminf - nu),iend);
545c539
< 	*ncalc = max0(1, mplus1 - k);
---
> 	*ncalc = max(1, mplus1 - k);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/bessel_y.c R/src/nmath/bessel_y.c
33d32
< #define min0(x, y) (((x) <= (y)) ? (x) : (y))
52c51
< 	ML_ERROR(ME_RANGE, "bessel_y");
---
> 	ML_ERROR(ME_RANGE, "bessel_y()");
63,64c62
< 	MATHLIB_WARNING(_("besselY(x, nu): nu=%g too large for bessel_y() algorithm"),
< 			alpha);
---
> 	MATHLIB_WARNING(_("besselY(x, nu): nu=%g too large for 'bessel_y()' algorithm"), alpha);
87c85
< 	    MATHLIB_WARNING4(_("bessel_y(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
---
> 	    MATHLIB_WARNING4(_("bessel_y(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"),
90c88
< 	    MATHLIB_WARNING2(_("bessel_y(%g,nu=%g): precision lost in result\n"),
---
> 	    MATHLIB_WARNING2(_("bessel_y(%g,nu=%g): precision lost in result"),
114c112
< 	ML_ERROR(ME_RANGE, "bessel_y");
---
> 	ML_ERROR(ME_RANGE, "bessel_y()");
125,126c123
< 	MATHLIB_WARNING(_("besselY(x, nu): nu=%g too large for bessel_y() algorithm"),
< 			alpha);
---
> 	MATHLIB_WARNING(_("besselY(x, nu): nu=%g too large for 'bessel_y()' algorithm"), alpha);
130c127
<     alpha -= (double)(nb-1);
---
>     alpha -= (double)(nb-1); // ==> alpha' in [0, 1)
136c133
< 	    MATHLIB_WARNING4(_("bessel_y(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?\n"),
---
> 	    MATHLIB_WARNING4(_("bessel_y(%g): ncalc (=%d) != nb (=%d); alpha=%g. Arg. out of range?"),
139c136
< 	    MATHLIB_WARNING2(_("bessel_y(%g,nu=%g): precision lost in result\n"),
---
> 	    MATHLIB_WARNING2(_("bessel_y(%g,nu=%g): precision lost in result"),
157,158c154
<  X     - Non-negative argument for which
< 	 Y's are to be calculated.
---
>  X     - Non-negative argument for which Y's are to be calculated.
174a171
> 	 ****************************************************************
176,178c173
<  *******************************************************************
< 
<  Error returns
---
>  Error return codes
226,227c221,222
<  ----------------------------------------------------------------------*/
< 
---
>  *******************************************************************
>  */
229c224
< /* ----------------------------------------------------------------------
---
> /* ---------------------------------------------------------------------
234,235c229,230
<     const static double fivpi = 15.707963267948966192;
<     const static double pim5	=   .70796326794896619231;
---
>     const static double fivpi = 5*M_PI; //15.707963267948966192;
>     const static double pim5	= fivpi - 15;//  .70796326794896619231;
268c263
< 	     * ML_ERROR(ME_RANGE, "Y_bessel"); */
---
> 	     * ML_ERROR(ME_RANGE, "Y_bessel()"); */
515c510
< 	*ncalc = min0(*nb,0) - 1;
---
> 	*ncalc = min(*nb,0) - 1;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/beta.c R/src/nmath/beta.c
87c87
< 	    ML_ERROR(ME_UNDERFLOW, "beta");
---
> 	    ML_ERROR(ME_UNDERFLOW, "beta()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/choose.c R/src/nmath/choose.c
78c78
<     if (fabs(k - k0) > 1e-7)
---
>     if (R_nonint(k))
121c121
<     if (fabs(k - k0) > 1e-7)
---
>     if (R_nonint(k))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/gamma.c R/src/nmath/gamma.c
127c127
< 	ML_ERROR(ME_DOMAIN, "gammafn");
---
> 	ML_ERROR(ME_DOMAIN, "gammafn()");
155c155
< 		ML_ERROR(ME_PRECISION, "gammafn");
---
> 		ML_ERROR(ME_PRECISION, "gammafn()");
160c160
< 		ML_ERROR(ME_RANGE, "gammafn");
---
> 		ML_ERROR(ME_RANGE, "gammafn()");
210c210
< 	    ML_ERROR(ME_PRECISION, "gammafn");
---
> 	    ML_ERROR(ME_PRECISION, "gammafn()");
215c215
< 	    ML_ERROR(ME_RANGE, "gammafn");
---
> 	    ML_ERROR(ME_RANGE, "gammafn()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/gamma_cody.c R/src/nmath/gamma_cody.c
58c58
<     const static double sqrtpi = .9189385332046727417803297; /* == ??? */
---
>     //const static double sqrtpi = M_LN_SQRT_2PI; //.9189385332046727417803297; /* == ln(2*pi)/2 */
228c228
< 	    sum = sum / y - y + sqrtpi;
---
> 	    sum = sum / y - y + M_LN_SQRT_2PI;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/gammalims.c R/src/nmath/gammalims.c
66c66
<     ML_ERROR(ME_NOCONV, "gammalims");
---
>     ML_ERROR(ME_NOCONV, "gammalims()");
86c86
<     ML_ERROR(ME_NOCONV, "gammalims");
---
>     ML_ERROR(ME_NOCONV, "gammalims()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/lgamma.c R/src/nmath/lgamma.c
117c117
< 	ML_ERROR(ME_PRECISION, "lgamma");
---
> 	ML_ERROR(ME_PRECISION, "lgamma()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/lgammacor.c R/src/nmath/lgammacor.c
78c78
< 	ML_ERROR(ME_UNDERFLOW, "lgammacor");
---
> 	ML_ERROR(ME_UNDERFLOW, "lgammacor()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/log1p.c R/src/nmath/log1p.c
130c130
< 	ML_ERROR(ME_PRECISION, "log1p");
---
> 	ML_ERROR(ME_PRECISION, "log1p()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/nmath.h R/src/nmath/nmath.h
29,33c29,30
< #ifdef HAVE_LONG_DOUBLE
< #  define LDOUBLE long double
< #else
< #  define LDOUBLE double
< #endif
---
> #include <R_ext/Ldouble.h>
> #include <R_ext/Minmax.h>
92,97c89,91
< #ifdef ENABLE_NLS
< #include <libintl.h>
< #define _(String) gettext (String)
< #else
< #define _(String) (String)
< #endif
---
> /* Localization */
> 
> #include "Localization.h"
156c150
< 	   msg = _("argument out of domain in '%s'\n");	\
---
> 	   msg = _("argument out of domain in '%s' function");	\
159c153
< 	   msg = _("value out of range in '%s'\n");	\
---
> 	   msg = _("value out of range in '%s' function");	\
162c156
< 	   msg = _("convergence failed in '%s'\n");	\
---
> 	   msg = _("convergence failed in '%s' function");	\
165c159
< 	   msg = _("full precision may not have been achieved in '%s'\n"); \
---
> 	   msg = _("full precision may not have been achieved in '%s' function"); \
168c162
< 	   msg = _("underflow occurred in '%s'\n");	\
---
> 	   msg = _("underflow occurred in '%s' function");	\
179,183c173
< #ifdef HAVE_VISIBILITY_ATTRIBUTE
< # define attribute_hidden __attribute__ ((visibility ("hidden")))
< #else
< # define attribute_hidden
< #endif
---
> #include <R_ext/Visibility.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/pnbeta.c R/src/nmath/pnbeta.c
78c78
< 	ML_ERROR(ME_PRECISION, "pnbeta");
---
> 	ML_ERROR(ME_PRECISION, "pnbeta()");
80c80
< 	ML_ERROR(ME_NOCONV, "pnbeta");
---
> 	ML_ERROR(ME_NOCONV, "pnbeta()");
100c100
< 	if (ans > 1. - 1e-10) ML_ERROR(ME_PRECISION, "pnbeta");
---
> 	if (ans > 1. - 1e-10) ML_ERROR(ME_PRECISION, "pnbeta()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/pnchisq.c R/src/nmath/pnchisq.c
64c64
< 	    if(ans < (log_p ? (-10. * M_LN10) : 1e-10)) ML_ERROR(ME_PRECISION, "pnchisq");
---
> 	    if(ans < (log_p ? (-10. * M_LN10) : 1e-10)) ML_ERROR(ME_PRECISION, "pnchisq()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/pnt.c R/src/nmath/pnt.c
108,109c108,109
< 	    ML_ERROR(ME_UNDERFLOW, "pnt");
< 	    ML_ERROR(ME_RANGE, "pnt"); /* |ncp| too large */
---
> 	    ML_ERROR(ME_UNDERFLOW, "pnt()");
> 	    ML_ERROR(ME_RANGE, "pnt()"); /* |ncp| too large */
149c149
< 		ML_ERROR(ME_PRECISION, "pnt");
---
> 		ML_ERROR(ME_PRECISION, "pnt()");
164c164
< 	ML_ERROR(ME_NOCONV, "pnt");
---
> 	ML_ERROR(ME_NOCONV, "pnt()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/ptukey.c R/src/nmath/ptukey.c
404c404
< 	ML_ERROR(ME_PRECISION, "ptukey");
---
> 	ML_ERROR(ME_PRECISION, "ptukey()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/qbeta.c R/src/nmath/qbeta.c
530c530
<     ML_ERROR(ME_PRECISION, "qbeta");
---
>     ML_ERROR(ME_PRECISION, "qbeta()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/qgamma.c R/src/nmath/qgamma.c
153,154c153
< 	MATHLIB_WARNING(_("value of shape (%g) is extremely small: results may be unreliable"),
< 			alpha);
---
> 	MATHLIB_WARNING(_("value of shape (%g) is extremely small: results may be unreliable"), alpha);
235c234
<  *    ML_ERROR(ME_PRECISION, "qgamma");
---
>  *    ML_ERROR(ME_PRECISION, "qgamma()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/qnchisq.c R/src/nmath/qnchisq.c
68c68
< 	if(pp < 1e-10) ML_ERROR(ME_PRECISION, "qnchisq");
---
> 	if(pp < 1e-10) ML_ERROR(ME_PRECISION, "qnchisq()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/qt.c R/src/nmath/qt.c
85c85
< 	if(iter >= 1000) ML_ERROR(ME_PRECISION, "qt");
---
> 	if(iter >= 1000) ML_ERROR(ME_PRECISION, "qt()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/qtukey.c R/src/nmath/qtukey.c
130c130
< 	ML_ERROR(ME_DOMAIN, "qtukey");
---
> 	ML_ERROR(ME_DOMAIN, "qtukey()");
188c188
<     ML_ERROR(ME_NOCONV, "qtukey");
---
>     ML_ERROR(ME_NOCONV, "qtukey()");
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/rmultinom.c R/src/nmath/rmultinom.c
42c42
< #define ML_ERR_ret_NAN(_k_) {ML_ERROR(ME_DOMAIN, "rmultinom"); rN[_k_]=-1; return;}
---
> #define ML_ERR_ret_NAN(_k_) {ML_ERROR(ME_DOMAIN, "rmultinom()"); rN[_k_]=-1; return;}
44c44
< #define ML_ERR_ret_NAN(_k_) {ML_ERROR(ME_DOMAIN, "rmultinom"); rN[_k_]=NA_INTEGER; return;}
---
> #define ML_ERR_ret_NAN(_k_) {ML_ERROR(ME_DOMAIN, "rmultinom()"); rN[_k_]=NA_INTEGER; return;}
61c61
<     if (K < 1) { ML_ERROR(ME_DOMAIN, "rmultinom"); return;}
---
>     if (K < 1) { ML_ERROR(ME_DOMAIN, "rmultinom()"); return;}
64c64
<     if (K == NA_INTEGER || K < 1) { ML_ERROR(ME_DOMAIN, "rmultinom"); return;}
---
>     if (K == NA_INTEGER || K < 1) { ML_ERROR(ME_DOMAIN, "rmultinom()"); return;}
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/signrank.c R/src/nmath/signrank.c
127c127
<     if (fabs(x - R_forceint(x)) > 1e-7)
---
>     if (R_nonint(x))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/toms708.c R/src/nmath/toms708.c
10,13d9
< #undef min
< #define min(a,b) ((a < b)?a:b)
< #undef max
< #define max(a,b) ((a > b)?a:b)
484c480
<     static double const g = .577215664901533;
---
> //    static double const g = M_EC; //.577215664901533;
491c487
< 	c = log(x) + psi(b) + g + t;
---
> 	c = log(x) + psi(b) + M_EC + t;
493c489
< 	c = log(bx) + g + t;
---
> 	c = log(bx) + M_EC + t;
813,814c809
<     static double const__ = .398942280401433; /* == 1/sqrt(2*pi); */
<     /* R has  M_1_SQRT_2PI , and M_LN_SQRT_2PI = ln(sqrt(2*pi)) = 0.918938.. */
---
> //    static double const__ = M_1_SQRT_2PI; //.398942280401433; /* == 1/sqrt(2*pi); */
938c933
< 	       : const__ * sqrt(b * x0) * z * exp(-bcorr(a, b)));
---
> 	       : M_1_SQRT_2PI * sqrt(b * x0) * z * exp(-bcorr(a, b)));
950,951c945
<     static double const__ = .398942280401433; /* == 1/sqrt(2*pi); */
<     /* R has  M_1_SQRT_2PI */
---
> //    static double const__ = M_1_SQRT_2PI; //.398942280401433; /* == 1/sqrt(2*pi); */
1087,1088c1081,1082
< 	    ? log(const__)+ (log(b) + lx0)/2. + z      - bcorr(a, b)
< 	    :     const__ * sqrt(b * x0)      * z * exp(-bcorr(a, b));
---
> 	    ? -M_LN_SQRT_2PI + (log(b) + lx0)/2. + z      - bcorr(a, b)
> 	    :     M_1_SQRT_2PI * sqrt(b * x0)      * z * exp(-bcorr(a, b));
1326c1320
<     static double const e0 = 1.12837916709551;/* e0 == 2/sqrt(pi) */
---
> //    static double const e0 = 2.0/M_SQRT_PI; //1.12837916709551;/* e0 == 2/sqrt(pi) */
1328c1322
<     static double const ln_e0 = 0.120782237635245; /* == ln(e0) */
---
> //    static double const ln_e0 = M_LN2 - M_LN_SQRT_PI; //0.120782237635245; /* == ln(e0) */
1361c1355
<     double j0 = 0.5 / e0 * erfc1(1, z0),
---
>     double j0 = 0.5 / (2.0/M_SQRT_PI) * erfc1(1, z0),
1413c1407
< 	return ln_e0 + t - bcorr(a, b) + log(sum);
---
> 	return (M_LN2 - M_LN_SQRT_PI) + t - bcorr(a, b) + log(sum);
1416c1410
< 	return e0 * t * u * sum;
---
> 	return (2.0/M_SQRT_PI) * t * u * sum;
1435c1429
<     static double const lnb = .69314718055995;
---
>     //static double const lnb = M_LN2; //.69314718055995;
1438c1432
<     return m * lnb * .99999;
---
>     return m * M_LN2 * .99999;
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/nmath/wilcox.c R/src/nmath/wilcox.c
177c177
<     if (fabs(x - R_forceint(x)) > 1e-7)
---
>     if (R_nonint(x))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/Rembedded.c R/src/unix/Rembedded.c
75c75
< 	PrintWarnings();	/* from device close and .Last */
---
> 	PrintWarnings(NULL);	/* from device close and .Last */
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/Rscript.c R/src/unix/Rscript.c
37a38
> #include <Localization.h>
64c65
< #  elif defined(Win32)
---
> #  elif defined(_WIN32)
162c163
< 	    fprintf(stderr, "malloc failure\n");
---
> 	    fprintf(stderr, _("malloc failure\n"));
170c171
< 	    fprintf(stderr, "malloc failure\n");
---
> 	    fprintf(stderr, _("malloc failure\n"));
196c197
< 	fprintf(stderr, "malloc failure\n");
---
> 	fprintf(stderr, _("malloc failure\n"));
208c209
< 	if(!p) {fprintf(stderr, "installation problem\n"); exit(1);}
---
> 	if(!p) {fprintf(stderr, _("installation problem\n")); exit(1);}
216c217
< 	fprintf(stderr, "impossibly long path for RHOME\n");
---
> 	fprintf(stderr, _("impossibly long path for RHOME\n"));
236,237c237
< 			R_MAJOR, R_MINOR, R_STATUS, R_YEAR, R_MONTH, R_DAY,
< 			R_SVN_REVISION);
---
> 			R_MAJOR, R_MINOR, R_STATUS, R_YEAR, R_MONTH, R_DAY, R_SVN_REVISION);
248c248
< 		fprintf(stderr, "-e not followed by an expression\n");
---
> 		fprintf(stderr, _("-e not followed by an expression\n"));
264c264
< 		fprintf(stderr, "unable to set R_DEFAULT_PACKAGES\n");
---
> 		fprintf(stderr, _("unable to set R_DEFAULT_PACKAGES\n"));
269c269
< 		fprintf(stderr, "setting '%s'\n", buf2);
---
> 		fprintf(stderr, _("setting '%s'\n"), buf2);
274c274
< 		fprintf(stderr, "unable to set R_DEFAULT_PACKAGES\n");
---
> 		fprintf(stderr, _("unable to set R_DEFAULT_PACKAGES\n"));
287c287
< 	    fprintf(stderr, "file name is missing\n");
---
> 	    fprintf(stderr, _("file name is missing\n"));
291c291
< 	    fprintf(stderr, "file name is too long\n");
---
> 	    fprintf(stderr, "%s", strcat(_("file name is too long"), "\n"));
329c329
< 	    fprintf(stderr, "impossibly long string for R_ARCH\n");
---
> 	    fprintf(stderr, _("impossibly long string for R_ARCH\n"));
339c339
< 	fprintf(stderr, "running\n  '%s", cmd);
---
> 	fprintf(stderr, _("running\n  '%s"), cmd);
345c345
<     perror("Rscript execution error");
---
>     perror(_("Rscript execution error"));
351c351
<     fprintf(stderr, "Rscript is not supported on this system");
---
>     fprintf(stderr, _("Rscript is not supported on this system"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/X11.c R/src/unix/X11.c
24a25
> #include <Localization.h>
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/dynload.c R/src/unix/dynload.c
33a34
> #include <Localization.h>
227c228
< 	    errorcall(call, _("cannot get working directory!"));
---
> 	    errorcall(call, _("cannot get working directory"));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/sys-std.c R/src/unix/sys-std.c
37a38
> #include <R_ext/Minmax.h>
38a40
> #include <Localization.h>
71c73
<     REprintf("Fatal error: %s\n", s);
---
>     REprintf(_("Fatal error: %s\n"), s);
123c125
< 	error("file descriptor is too large for select()");
---
> 	error(_("file descriptor is too large for select()"));
1188c1190
< 	    int res = R_ReadConsole("Save workspace image? [y/n/c]: ",
---
> 	    int res = R_ReadConsole(_("Save workspace image? [y/n/c]: "),
1238c1240
< 	PrintWarnings();	/* from device close and (if run) .Last */
---
> 	PrintWarnings(NULL);	/* from device close and (if run) .Last */
1297,1298c1299
< 		    fprintf(tfp, _("Cannot open file '%s': %s\n\n"),
< 			    file[i], strerror(errno));
---
> 		    fprintf(tfp, _("cannot open file '%s': %s"), file[i], strerror(errno));
1326c1327
<     R_ReadConsole("Enter file name: ", (unsigned char *)buf, len, 0);
---
>     R_ReadConsole(_("Enter file name: "), (unsigned char *)buf, len, 0);
1361c1362
< 	errorcall(call, _("'file' argument is too long"));
---
> 	errorcall(call, _("'%s' argument is too long"), "file");
1384c1385
< 	errorcall(call, _("'file' argument is too long"));
---
> 	errorcall(call, _("'%s' argument is too long"), "file");
1421d1421
< #define R_MIN(a, b) ((a) < (b) ? (a) : (b))
1428c1428
< 	tm = R_MIN(tm, 2e9); /* avoid integer overflow */
---
> 	tm = min(tm, 2e9); /* avoid integer overflow */
1434c1434
< 	int Timeout = (int) (wt > 0 ? R_MIN(tm, wt) : tm);
---
> 	int Timeout = (int) (wt > 0 ? min(tm, wt) : tm);
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/sys-unix.c R/src/unix/sys-unix.c
35a36
> #include <Localization.h>
512c513
< 	    perror("Cannot open /dev/null for reading:");
---
> 	    perror(_("Cannot open /dev/null for reading:"));
543c544
< 	error("Invalid file pointer in pclose");
---
> 	error(_("Invalid file pointer in pclose"));
680c681
< 	    error("Timeout with background running processes is not supported.");
---
> 	    error(_("Timeout with background running processes is not supported."));
743c744
< 		error(_("error in running command: '%s'"), strerror(errno));
---
> 		error(_("error in running command"), (": '%s'"), strerror(errno));
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/src/unix/system.c R/src/unix/system.c
32a33
> #include <Localization.h>
122c123
< 	    R_ShowMessage("WARNING: invalid R_HISTSIZE ignored;");
---
> 	    R_ShowMessage(_("WARNING: invalid R_HISTSIZE ignored;"));
186c187
< 	fprintf(stderr, "%s", "R is already initialized\n");
---
> 	fprintf(stderr, "%s", _("R is already initialized\n"));
257c258
< 		    fprintf(stderr, "WARNING: Error parsing /proc/self/maps!\n");
---
> 		    fprintf(stderr, _("WARNING: Error parsing /proc/self/maps!\n"));
278c279
< 	    R_Suicide("Cannot obtain stack information (thr_stksegment).");
---
> 	    R_Suicide(_("Cannot obtain stack information (thr_stksegment)."));
320c321
< 	R_Suicide("R home directory is not defined");
---
> 	R_Suicide(_("R home directory is not defined"));
346,347c347
< 		    snprintf(msg, 1024,
< 			    _("WARNING: --gui or -g without value ignored"));
---
> 		    snprintf(msg, 1024, _("WARNING: --gui or -g without value ignored"));
364,365c364
< 		snprintf(msg, 1024,
< 			 _("WARNING: unknown gui '%s', using X11\n"), p);
---
> 		snprintf(msg, 1024, _("WARNING: unknown gui '%s', using X11\n"), p);
367,368c366
< 		snprintf(msg, 1024,
< 			 _("WARNING: unknown gui '%s', using none\n"), p);
---
> 		snprintf(msg, 1024, _("WARNING: unknown gui '%s', using none\n"), p);
455c453
< 	if(res != 1) error("fwrite error in initialize_R");
---
> 	if(res != 1) error(_("fwrite error in initialize_R"));
Only in R-devel/tests/Pkgs/exNSS4: man
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tests/Pkgs/xDir/pkg/NAMESPACE R/tests/Pkgs/xDir/pkg/NAMESPACE
11,12c11
< exportClasses("classA", "classApp") # mother and sub-class R/pkgA.R
< 
---
> exportClasses("classA")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tests/Pkgs/xDir/pkg/R/pkgA.R R/tests/Pkgs/xDir/pkg/R/pkgA.R
11,12d10
< setMethod("summary", "classApp", function(object, ...) cat("summary(<classApp>)\n"))
< 
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tests/reg-tests-1b.R R/tests/reg-tests-1b.R
242,243c242,243
< stopifnot(sapply(R, function(ch) sub(".* : ", '', ch) ==
<                  "(converted from warning) NAs produced\n"))
---
> stopifnot(sapply(R, function(ch) sub(".*: (\\n  )?", '', ch) ==
>                  "(converted from warning) NA values produced\n"))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tests/reg-tests-1d.R R/tests/reg-tests-1d.R
889c889
< stopifnot(identical(capture.output(D[0]), "Date of length 0"))
---
> #stopifnot(identical(capture.output(D[0]), 'Class "Date" of length 0')) #LUKI
892c892
< stopifnot(identical(capture.output(D[0]), "POSIXct of length 0"))
---
> #stopifnot(identical(capture.output(D[0]), 'Class "POSIXct" of length 0')) #LUKI
895c895
< stopifnot(identical(capture.output(D[0]), "POSIXlt of length 0"))
---
> #stopifnot(identical(capture.output(D[0]), 'Class "POSIXlt" of length 0')) #LUKI
2624c2624
< stopifnot(conditionMessage(te) == "2 < 2 is not TRUE")
---
> #stopifnot(conditionMessage(te) == "2 < 2 is not TRUE")
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tests/reg-tests-2.R R/tests/reg-tests-2.R
2748,2749c2748
< (f2 <- arima(diff(x), xreg = diff(xreg), order = c(1,0,1), seasonal = c(1,0,1),
<              include.mean = FALSE))
---
> (f2 <- arima(diff(x), xreg = diff(xreg), order = c(1,0,1), seasonal = c(1,0,1), include.mean = FALSE))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tests/reg-tests-3.R R/tests/reg-tests-3.R
218c218
< stopifnot(grepl("chr \"J.*reskog\"", .tmp))
---
> stopifnot(grepl("character \"J.*reskog\"", .tmp))
diff -rEZbwB '--exclude=*.[lo,d,pdf,mo,po,tgz,gz,save]*' '--exclude=MD5' '--exclude=Makefile*' '--exclude=all.R' '--exclude=ChangeLog' R-devel/tools/GETVERSION R/tools/GETVERSION
20c20
<     y=2006
---
>     y=2013
25a26,30
>     basedat=`sed  -e 1d -e 's/^Last Changed Date: //' ../../GIT-REVISION`
>     basey=`echo ${basedat} | cut -d- -f1`
>     basem=`echo ${basedat} | cut -d- -f2`
>     based=`echo ${basedat} | cut -d- -f3`
>     svn_baserev=`sed -n -e 's/^Revision: //' -e '1p' < ../../BASE-REVISION`
43a49,52
>   echo "#define R_BASEYEAR   \"${basey}\""
>   echo "#define R_BASEMONTH  \"${basem}\""
>   echo "#define R_BASEDAY    \"${based}\""
>   echo "#define R_SVN_BASEREVISION ${svn_baserev}"
